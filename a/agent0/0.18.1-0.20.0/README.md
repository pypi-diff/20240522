# Comparing `tmp/agent0-0.18.1.tar.gz` & `tmp/agent0-0.20.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "agent0-0.18.1.tar", last modified: Fri Jan  1 00:00:00 2016, max compression
+gzip compressed data, was "agent0-0.20.0.tar", last modified: Fri Jan  1 00:00:00 2016, max compression
```

## Comparing `agent0-0.18.1.tar` & `agent0-0.20.0.tar`

### file list

```diff
@@ -1,210 +1,198 @@
--rw-r--r--   0        0        0     4888 2024-04-17 00:47:53.111709 agent0-0.18.1/README.md
--rw-r--r--   0        0        0     4247 2024-04-17 00:47:53.127709 agent0-0.18.1/pyproject.toml
--rw-r--r--   0        0        0      463 2024-04-17 00:47:53.127709 agent0-0.18.1/src/agent0/__init__.py
--rw-r--r--   0        0        0       87 2024-04-17 00:47:53.127709 agent0-0.18.1/src/agent0/chainsync/__init__.py
--rw-r--r--   0        0        0      265 2024-04-17 00:47:53.127709 agent0-0.18.1/src/agent0/chainsync/analysis/__init__.py
--rw-r--r--   0        0        0      876 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/analysis/calc_base_buffer.py
--rw-r--r--   0        0        0     1130 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/analysis/calc_fixed_rate.py
--rw-r--r--   0        0        0     5570 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/analysis/calc_pnl.py
--rw-r--r--   0        0        0     1564 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/analysis/calc_spot_price.py
--rw-r--r--   0        0        0     2140 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/analysis/calc_ticker.py
--rw-r--r--   0        0        0    10619 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/analysis/data_to_analysis.py
--rw-r--r--   0        0        0      581 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/__init__.py
--rw-r--r--   0        0        0      620 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/build_fixed_rate.py
--rw-r--r--   0        0        0     1608 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/build_leaderboard.py
--rw-r--r--   0        0        0     1268 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/build_ohlcv.py
--rw-r--r--   0        0        0      546 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/build_outstanding_positions.py
--rw-r--r--   0        0        0     1250 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/build_ticker.py
--rw-r--r--   0        0        0      720 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/build_variable_rate.py
--rw-r--r--   0        0        0     1038 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/plot_fixed_rate.py
--rw-r--r--   0        0        0      858 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/plot_ohlcv.py
--rw-r--r--   0        0        0      851 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/plot_outstanding_positions.py
--rw-r--r--   0        0        0     1117 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/plot_utils.py
--rw-r--r--   0        0        0     4630 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/dashboard/usernames.py
--rw-r--r--   0        0        0        0 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/__init__.py
--rw-r--r--   0        0        0      140 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/api/__init__.py
--rw-r--r--   0        0        0     2374 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/api/api_interface.py
--rw-r--r--   0        0        0     4334 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/api/api_server.py
--rw-r--r--   0        0        0      388 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/base/__init__.py
--rw-r--r--   0        0        0    12480 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/base/interface.py
--rw-r--r--   0        0        0    10937 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/base/interface_test.py
--rw-r--r--   0        0        0     1648 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/base/schema.py
--rw-r--r--   0        0        0     2742 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/base/schema_test.py
--rw-r--r--   0        0        0     1084 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/__init__.py
--rw-r--r--   0        0        0     4303 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/chain_to_db.py
--rw-r--r--   0        0        0    21417 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/convert_data.py
--rw-r--r--   0        0        0     8207 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/import_export_data.py
--rw-r--r--   0        0        0     1218 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/import_export_data_test.py
--rw-r--r--   0        0        0    30568 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/interface.py
--rw-r--r--   0        0        0    21353 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/interface_test.py
--rw-r--r--   0        0        0    15387 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/schema.py
--rw-r--r--   0        0        0     8085 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/schema_test.py
--rw-r--r--   0        0        0      121 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/exec/__init__.py
--rw-r--r--   0        0        0     5884 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/exec/acquire_data.py
--rw-r--r--   0        0        0     6210 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/exec/data_analysis.py
--rw-r--r--   0        0        0     1919 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/postgres_config.py
--rw-r--r--   0        0        0     4066 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/streamlit/Dashboard.py
--rw-r--r--   0        0        0     7174 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/streamlit/pages/Wallet_Stats.py
--rw-r--r--   0        0        0      149 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/test_fixtures/__init__.py
--rw-r--r--   0        0        0     6763 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/test_fixtures/db_session.py
--rw-r--r--   0        0        0     1265 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/chainsync/test_fixtures/dummy_session.py
--rw-r--r--   0        0        0      218 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/__init__.py
--rw-r--r--   0        0        0     8781 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/accounts_config.py
--rw-r--r--   0        0        0      215 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/__init__.py
--rw-r--r--   0        0        0      166 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/agent/__init__.py
--rw-r--r--   0        0        0     3881 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/agent/eth_agent.py
--rw-r--r--   0        0        0     4839 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/agent/eth_wallet.py
--rw-r--r--   0        0        0      954 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/agent/eth_wallet_test.py
--rw-r--r--   0        0        0      414 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/agent/market_actions.py
--rw-r--r--   0        0        0      174 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/config/__init__.py
--rw-r--r--   0        0        0     1237 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/config/agent_config.py
--rw-r--r--   0        0        0     1513 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/config/budget.py
--rw-r--r--   0        0        0     4628 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/config/environment_config.py
--rw-r--r--   0        0        0      747 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/make_key.py
--rw-r--r--   0        0        0      152 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/policies/__init__.py
--rw-r--r--   0        0        0     3407 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/policies/base.py
--rw-r--r--   0        0        0     1368 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/policies/no_action.py
--rw-r--r--   0        0        0     6101 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/types.py
--rw-r--r--   0        0        0     7199 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/base/types_test.py
--rw-r--r--   0        0        0      290 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/hyperdrive/__init__.py
--rw-r--r--   0        0        0      606 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/hyperdrive/agent/__init__.py
--rw-r--r--   0        0        0     8046 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/hyperdrive/agent/build_wallet_positions.py
--rw-r--r--   0        0        0    10266 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/hyperdrive/agent/hyperdrive_actions.py
--rw-r--r--   0        0        0     5425 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/hyperdrive/agent/hyperdrive_agent.py
--rw-r--r--   0        0        0     7871 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/hyperdrive/agent/hyperdrive_wallet.py
--rw-r--r--   0        0        0     2300 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/hyperdrive/agent/hyperdrive_wallet_test.py
--rw-r--r--   0        0        0     2976 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/hyperdrive/agent/trade_result.py
--rw-r--r--   0        0        0      326 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/hyperdrive/crash_report/__init__.py
--rw-r--r--   0        0        0    17230 2024-04-17 00:47:53.131709 agent0-0.18.1/src/agent0/core/hyperdrive/crash_report/crash_report.py
--rw-r--r--   0        0        0     9953 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/crash_report/known_error_checks.py
--rw-r--r--   0        0        0      184 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/__init__.py
--rw-r--r--   0        0        0     1093 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/econ_tests.py
--rw-r--r--   0        0        0     6061 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/event_types.py
--rw-r--r--   0        0        0      241 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/exec/__init__.py
--rw-r--r--   0        0        0     2418 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/exec/check_for_new_block.py
--rw-r--r--   0        0        0    17377 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/exec/execute_agent_trades.py
--rw-r--r--   0        0        0     1284 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/exec/set_max_approval.py
--rw-r--r--   0        0        0     1346 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/i_chain.py
--rw-r--r--   0        0        0    23041 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/i_hyperdrive.py
--rw-r--r--   0        0        0     8207 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/i_hyperdrive_agent.py
--rw-r--r--   0        0        0    16478 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/i_hyperdrive_test.py
--rw-r--r--   0        0        0    22036 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/i_local_chain.py
--rw-r--r--   0        0        0    55070 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/i_local_hyperdrive.py
--rw-r--r--   0        0        0     2233 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/i_local_hyperdrive_agent.py
--rw-r--r--   0        0        0    37120 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/interactive/i_local_hyperdrive_test.py
--rw-r--r--   0        0        0      127 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/__init__.py
--rw-r--r--   0        0        0     3351 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/deterministic.py
--rw-r--r--   0        0        0     3566 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/hyperdrive_policy.py
--rw-r--r--   0        0        0    23297 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/lpandarb.py
--rw-r--r--   0        0        0    14825 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/lpandarb_test.py
--rw-r--r--   0        0        0     1107 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/model_zoo_test.py
--rw-r--r--   0        0        0    21510 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/random.py
--rw-r--r--   0        0        0    13321 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/random_hold.py
--rw-r--r--   0        0        0     2795 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/random_hold_test.py
--rw-r--r--   0        0        0     3888 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/random_test.py
--rw-r--r--   0        0        0     7668 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/simple_lp.py
--rw-r--r--   0        0        0     4333 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/simple_lp_test.py
--rw-r--r--   0        0        0     5860 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/smart_long.py
--rw-r--r--   0        0        0     1788 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/policies/zoo.py
--rw-r--r--   0        0        0        0 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/__init__.py
--rw-r--r--   0        0        0     9324 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/predict.py
--rw-r--r--   0        0        0    19878 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/predict_trade_test.py
--rw-r--r--   0        0        0      463 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/run_bots/__init__.py
--rw-r--r--   0        0        0     3592 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/run_bots/create_and_fund_user_account.py
--rw-r--r--   0        0        0    15360 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/run_bots/execute_multi_agent_trades.py
--rw-r--r--   0        0        0     9298 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/run_bots/fund_agents.py
--rw-r--r--   0        0        0     5760 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/run_bots/get_agent_accounts.py
--rw-r--r--   0        0        0    11746 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/run_bots/run_agents.py
--rw-r--r--   0        0        0     8783 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/run_bots/setup_experiment.py
--rw-r--r--   0        0        0     7145 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/hyperdrive/utilities/run_bots/trade_loop.py
--rw-r--r--   0        0        0      290 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/__init__.py
--rw-r--r--   0        0        0    16400 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/fuzz_long_short_maturity_values.py
--rw-r--r--   0        0        0    19256 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/fuzz_path_independence.py
--rw-r--r--   0        0        0    16123 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/fuzz_present_value.py
--rw-r--r--   0        0        0    13732 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/fuzz_profit_check.py
--rw-r--r--   0        0        0      363 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/__init__.py
--rw-r--r--   0        0        0     2963 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/advance_time.py
--rw-r--r--   0        0        0     2028 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/close_random_trades.py
--rw-r--r--   0        0        0     7061 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/execute_random_trades.py
--rw-r--r--   0        0        0      681 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/fuzz_assertion_exception.py
--rw-r--r--   0        0        0     4881 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/setup_fuzz.py
--rw-r--r--   0        0        0     4460 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/interactive_fuzz/run_all_fuzz_tests.py
--rw-r--r--   0        0        0       58 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/test_fixtures/__init__.py
--rw-r--r--   0        0        0     1587 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/test_fixtures/chain.py
--rw-r--r--   0        0        0      141 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/test_utils/__init__.py
--rw-r--r--   0        0        0      462 2024-04-17 00:47:53.135710 agent0-0.18.1/src/agent0/core/test_utils/assert_never.py
--rw-r--r--   0        0        0     4201 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/core/test_utils/cycle_trade_policy.py
--rw-r--r--   0        0        0       72 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/__init__.py
--rw-r--r--   0        0        0      707 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/__init__.py
--rw-r--r--   0        0        0       91 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/abi/__init__.py
--rw-r--r--   0        0        0     2864 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/abi/load_abis.py
--rw-r--r--   0        0        0       86 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/contract/__init__.py
--rw-r--r--   0        0        0     1722 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/contract/deploy_contract.py
--rw-r--r--   0        0        0      201 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/errors/__init__.py
--rw-r--r--   0        0        0     3086 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/errors/errors.py
--rw-r--r--   0        0        0     1877 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/errors/errors_test.py
--rw-r--r--   0        0        0      427 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/errors/types.py
--rw-r--r--   0        0        0     3471 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/receipts.py
--rw-r--r--   0        0        0     2236 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/retry_utils.py
--rw-r--r--   0        0        0     1556 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/retry_utils_test.py
--rw-r--r--   0        0        0     1831 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/rpc_interface.py
--rw-r--r--   0        0        0    43329 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/transactions.py
--rw-r--r--   0        0        0     1746 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/base/web3_setup.py
--rw-r--r--   0        0        0     2492 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/eth_config.py
--rw-r--r--   0        0        0     4922 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/eth_config_test.py
--rw-r--r--   0        0        0      618 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/__init__.py
--rw-r--r--   0        0        0     1998 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/addresses.py
--rw-r--r--   0        0        0     2041 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/assets.py
--rw-r--r--   0        0        0    18331 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/deploy.py
--rw-r--r--   0        0        0      170 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/__init__.py
--rw-r--r--   0        0        0     1309 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/_block_getters.py
--rw-r--r--   0        0        0    24789 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/_contract_calls.py
--rw-r--r--   0        0        0    11295 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/_mock_contract.py
--rw-r--r--   0        0        0     1903 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/interface_test.py
--rw-r--r--   0        0        0    42374 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/read_interface.py
--rw-r--r--   0        0        0    10904 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/read_interface_test.py
--rw-r--r--   0        0        0    15545 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/read_write_interface.py
--rw-r--r--   0        0        0     1546 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/read_write_interface_test.py
--rw-r--r--   0        0        0     2032 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/receipt_breakdown.py
--rw-r--r--   0        0        0       99 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/state/__init__.py
--rw-r--r--   0        0        0     2296 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/state/pool_state.py
--rw-r--r--   0        0        0     9626 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/hyperdrive/transactions.py
--rw-r--r--   0        0        0      251 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/test_fixtures/__init__.py
--rw-r--r--   0        0        0     9028 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/test_fixtures/deployed_pool.py
--rw-r--r--   0        0        0     3260 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/test_fixtures/interface.py
--rw-r--r--   0        0        0     1349 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/ethpy/test_fixtures/local_chain.py
--rw-r--r--   0        0        0       38 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hyperlogs/README.md
--rw-r--r--   0        0        0      467 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hyperlogs/__init__.py
--rw-r--r--   0        0        0     2338 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hyperlogs/json_encoder.py
--rw-r--r--   0        0        0    11074 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hyperlogs/logs.py
--rw-r--r--   0        0        0     3444 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hyperlogs/logs_test.py
--rw-r--r--   0        0        0     2979 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hyperlogs/rollbar_utilities.py
--rw-r--r--   0        0        0     1733 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hypertypes/README.md
--rw-r--r--   0        0        0       92 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hypertypes/__init__.py
--rw-r--r--   0        0        0     2316 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hypertypes/fixedpoint_types.py
--rw-r--r--   0        0        0    26066 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hypertypes/types/ERC20ForwarderFactoryContract.py
--rw-r--r--   0        0        0   106156 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hypertypes/types/ERC20MintableContract.py
--rw-r--r--   0        0        0     3539 2024-04-17 00:47:53.139710 agent0-0.18.1/src/agent0/hypertypes/types/ERC20MintableTypes.py
--rw-r--r--   0        0        0    26347 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/ERC4626HyperdriveCoreDeployerContract.py
--rw-r--r--   0        0        0   112779 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/ERC4626HyperdriveDeployerCoordinatorContract.py
--rw-r--r--   0        0        0    46669 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/ERC4626Target0DeployerContract.py
--rw-r--r--   0        0        0    50531 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/ERC4626Target1DeployerContract.py
--rw-r--r--   0        0        0    49969 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/ERC4626Target2DeployerContract.py
--rw-r--r--   0        0        0    51725 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/ERC4626Target3DeployerContract.py
--rw-r--r--   0        0        0    51729 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/ERC4626Target4DeployerContract.py
--rw-r--r--   0        0        0     1386 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/HyperdriveDeployerCoordinatorTypes.py
--rw-r--r--   0        0        0   270770 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/HyperdriveFactoryContract.py
--rw-r--r--   0        0        0    10954 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/HyperdriveFactoryTypes.py
--rw-r--r--   0        0        0   251847 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/IHyperdriveContract.py
--rw-r--r--   0        0        0    17223 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/IHyperdriveTypes.py
--rw-r--r--   0        0        0   148131 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/MockERC4626Contract.py
--rw-r--r--   0        0        0     4368 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/MockERC4626Types.py
--rw-r--r--   0        0        0     1066 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/__init__.py
--rw-r--r--   0        0        0     4524 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/types/utilities.py
--rw-r--r--   0        0        0        0 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/utilities/__init__.py
--rw-r--r--   0        0        0     8804 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/hypertypes/utilities/conversions.py
--rw-r--r--   0        0        0      669 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/traiderdaive/__init__.py
--rw-r--r--   0        0        0        0 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/traiderdaive/gym_environments/__init__.py
--rw-r--r--   0        0        0    23647 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/traiderdaive/gym_environments/full_hyperdrive_env.py
--rw-r--r--   0        0        0    16954 2024-04-17 00:47:53.143710 agent0-0.18.1/src/agent0/traiderdaive/gym_environments/simple_hyperdrive_env.py
--rw-r--r--   0        0        0     7557 1970-01-01 00:00:00.000000 agent0-0.18.1/PKG-INFO
+-rw-r--r--   0        0        0     5019 2024-05-22 03:50:57.636419 agent0-0.20.0/README.md
+-rw-r--r--   0        0        0     4411 2024-05-22 03:50:57.652419 agent0-0.20.0/pyproject.toml
+-rw-r--r--   0        0        0      459 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/__init__.py
+-rw-r--r--   0        0        0       87 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/__init__.py
+-rw-r--r--   0        0        0      173 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/analysis/__init__.py
+-rw-r--r--   0        0        0     5845 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/analysis/calc_position_value.py
+-rw-r--r--   0        0        0     4933 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/analysis/db_to_analysis.py
+-rw-r--r--   0        0        0      365 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/__init__.py
+-rw-r--r--   0        0        0     8654 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/build_dashboard_dfs.py
+-rw-r--r--   0        0        0      620 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/build_fixed_rate.py
+-rw-r--r--   0        0        0     3072 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/build_leaderboard.py
+-rw-r--r--   0        0        0     1268 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/build_ohlcv.py
+-rw-r--r--   0        0        0      546 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/build_outstanding_positions.py
+-rw-r--r--   0        0        0     3935 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/build_ticker.py
+-rw-r--r--   0        0        0      721 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/build_variable_rate.py
+-rw-r--r--   0        0        0     3937 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/build_wallet_positions.py
+-rw-r--r--   0        0        0     1038 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/plot_fixed_rate.py
+-rw-r--r--   0        0        0      858 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/plot_ohlcv.py
+-rw-r--r--   0        0        0      851 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/plot_outstanding_positions.py
+-rw-r--r--   0        0        0     1215 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/plot_utils.py
+-rw-r--r--   0        0        0     4342 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/dashboard/usernames.py
+-rw-r--r--   0        0        0        0 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/__init__.py
+-rw-r--r--   0        0        0      320 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/base/__init__.py
+-rw-r--r--   0        0        0     9814 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/base/interface.py
+-rw-r--r--   0        0        0     5759 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/base/interface_test.py
+-rw-r--r--   0        0        0     1099 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/base/schema.py
+-rw-r--r--   0        0        0     1412 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/base/schema_test.py
+-rw-r--r--   0        0        0     1032 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/__init__.py
+-rw-r--r--   0        0        0    10186 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/chain_to_db.py
+-rw-r--r--   0        0        0    20358 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/convert_data.py
+-rw-r--r--   0        0        0     5214 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/import_export_data.py
+-rw-r--r--   0        0        0     1220 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/import_export_data_test.py
+-rw-r--r--   0        0        0    30279 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/interface.py
+-rw-r--r--   0        0        0    17648 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/interface_test.py
+-rw-r--r--   0        0        0    13790 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/schema.py
+-rw-r--r--   0        0        0     6649 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/schema_test.py
+-rw-r--r--   0        0        0     1253 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/df_to_db.py
+-rw-r--r--   0        0        0      119 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/exec/__init__.py
+-rw-r--r--   0        0        0     6388 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/exec/acquire_data.py
+-rw-r--r--   0        0        0     5177 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/exec/analyze_data.py
+-rw-r--r--   0        0        0     2421 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/postgres_config.py
+-rw-r--r--   0        0        0     2945 2024-05-22 03:50:57.652419 agent0-0.20.0/src/agent0/chainsync/streamlit/Dashboard.py
+-rw-r--r--   0        0        0     6331 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/chainsync/streamlit/pages/Wallet_Stats.py
+-rw-r--r--   0        0        0      141 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/chainsync/test_fixtures/__init__.py
+-rw-r--r--   0        0        0     5385 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/chainsync/test_fixtures/db_session.py
+-rw-r--r--   0        0        0     1265 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/chainsync/test_fixtures/dummy_session.py
+-rw-r--r--   0        0        0       31 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/__init__.py
+-rw-r--r--   0        0        0      206 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/__init__.py
+-rw-r--r--   0        0        0      172 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/agent/__init__.py
+-rw-r--r--   0        0        0     4835 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/agent/eth_wallet.py
+-rw-r--r--   0        0        0      954 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/agent/eth_wallet_test.py
+-rw-r--r--   0        0        0      414 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/agent/market_actions.py
+-rw-r--r--   0        0        0     3899 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/agent/policy_agent.py
+-rw-r--r--   0        0        0     1513 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/config/budget.py
+-rw-r--r--   0        0        0      749 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/make_key.py
+-rw-r--r--   0        0        0      152 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/policies/__init__.py
+-rw-r--r--   0        0        0     3890 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/policies/base.py
+-rw-r--r--   0        0        0     1368 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/policies/no_action.py
+-rw-r--r--   0        0        0     3480 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/types.py
+-rw-r--r--   0        0        0     6878 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/base/types_test.py
+-rw-r--r--   0        0        0      296 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/__init__.py
+-rw-r--r--   0        0        0      517 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/agent/__init__.py
+-rw-r--r--   0        0        0    13463 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/agent/hyperdrive_actions.py
+-rw-r--r--   0        0        0     5536 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/agent/hyperdrive_policy_agent.py
+-rw-r--r--   0        0        0     7783 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/agent/hyperdrive_wallet.py
+-rw-r--r--   0        0        0     2300 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/agent/hyperdrive_wallet_test.py
+-rw-r--r--   0        0        0     2995 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/agent/trade_result.py
+-rw-r--r--   0        0        0      326 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/crash_report/__init__.py
+-rw-r--r--   0        0        0    17934 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/crash_report/crash_report.py
+-rw-r--r--   0        0        0     9953 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/crash_report/known_error_checks.py
+-rw-r--r--   0        0        0      172 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/__init__.py
+-rw-r--r--   0        0        0     8443 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/chain.py
+-rw-r--r--   0        0        0     1114 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/econ_tests.py
+-rw-r--r--   0        0        0     6661 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/event_types.py
+-rw-r--r--   0        0        0      241 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/exec/__init__.py
+-rw-r--r--   0        0        0     2418 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/exec/check_for_new_block.py
+-rw-r--r--   0        0        0    18750 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/exec/execute_agent_trades.py
+-rw-r--r--   0        0        0     1302 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/exec/set_max_approval.py
+-rw-r--r--   0        0        0    13914 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/hyperdrive.py
+-rw-r--r--   0        0        0    32268 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/hyperdrive_agent.py
+-rw-r--r--   0        0        0    13609 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/hyperdrive_test.py
+-rw-r--r--   0        0        0    24976 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/local_chain.py
+-rw-r--r--   0        0        0    30737 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/local_hyperdrive.py
+-rw-r--r--   0        0        0    12044 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/local_hyperdrive_agent.py
+-rw-r--r--   0        0        0    57317 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/interactive/local_hyperdrive_test.py
+-rw-r--r--   0        0        0      127 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/__init__.py
+-rw-r--r--   0        0        0     3351 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/deterministic.py
+-rw-r--r--   0        0        0     3568 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/hyperdrive_policy.py
+-rw-r--r--   0        0        0    24363 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/lpandarb.py
+-rw-r--r--   0        0        0    14709 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/lpandarb_test.py
+-rw-r--r--   0        0        0     1107 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/model_zoo_test.py
+-rw-r--r--   0        0        0    22548 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/random.py
+-rw-r--r--   0        0        0    13324 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/random_hold.py
+-rw-r--r--   0        0        0     2842 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/random_hold_test.py
+-rw-r--r--   0        0        0     3936 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/random_test.py
+-rw-r--r--   0        0        0     7658 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/simple_lp.py
+-rw-r--r--   0        0        0     4380 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/simple_lp_test.py
+-rw-r--r--   0        0        0     5859 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/smart_long.py
+-rw-r--r--   0        0        0     1788 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/policies/zoo.py
+-rw-r--r--   0        0        0        0 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/utilities/__init__.py
+-rw-r--r--   0        0        0     9398 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/utilities/predict.py
+-rw-r--r--   0        0        0    20325 2024-05-22 03:50:57.656419 agent0-0.20.0/src/agent0/core/hyperdrive/utilities/predict_trade_test.py
+-rw-r--r--   0        0        0      141 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/core/test_utils/__init__.py
+-rw-r--r--   0        0        0      462 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/core/test_utils/assert_never.py
+-rw-r--r--   0        0        0     4381 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/core/test_utils/cycle_trade_policy.py
+-rw-r--r--   0        0        0       85 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/__init__.py
+-rw-r--r--   0        0        0      707 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/__init__.py
+-rw-r--r--   0        0        0       91 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/abi/__init__.py
+-rw-r--r--   0        0        0     2864 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/abi/load_abis.py
+-rw-r--r--   0        0        0       86 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/contract/__init__.py
+-rw-r--r--   0        0        0     1722 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/contract/deploy_contract.py
+-rw-r--r--   0        0        0      201 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/errors/__init__.py
+-rw-r--r--   0        0        0     3086 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/errors/errors.py
+-rw-r--r--   0        0        0     1878 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/errors/errors_test.py
+-rw-r--r--   0        0        0      427 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/errors/types.py
+-rw-r--r--   0        0        0     3471 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/receipts.py
+-rw-r--r--   0        0        0     2236 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/retry_utils.py
+-rw-r--r--   0        0        0     1323 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/retry_utils_test.py
+-rw-r--r--   0        0        0     1831 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/rpc_interface.py
+-rw-r--r--   0        0        0    45028 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/transactions.py
+-rw-r--r--   0        0        0     6408 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/transactions_test.py
+-rw-r--r--   0        0        0     1746 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/base/web3_setup.py
+-rw-r--r--   0        0        0      786 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/__init__.py
+-rw-r--r--   0        0        0     8445 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/addresses.py
+-rw-r--r--   0        0        0     2041 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/assets.py
+-rw-r--r--   0        0        0    19853 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/deploy.py
+-rw-r--r--   0        0        0      701 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/get_expected_hyperdrive_version.py
+-rw-r--r--   0        0        0      170 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/__init__.py
+-rw-r--r--   0        0        0     1309 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/_block_getters.py
+-rw-r--r--   0        0        0    27279 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/_contract_calls.py
+-rw-r--r--   0        0        0    14663 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/_mock_contract.py
+-rw-r--r--   0        0        0     2021 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/interface_test.py
+-rw-r--r--   0        0        0    49111 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/read_interface.py
+-rw-r--r--   0        0        0    16010 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/read_interface_test.py
+-rw-r--r--   0        0        0    21679 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/read_write_interface.py
+-rw-r--r--   0        0        0     1588 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/read_write_interface_test.py
+-rw-r--r--   0        0        0     1928 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/receipt_breakdown.py
+-rw-r--r--   0        0        0       99 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/state/__init__.py
+-rw-r--r--   0        0        0     2296 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/state/pool_state.py
+-rw-r--r--   0        0        0     9594 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/ethpy/hyperdrive/transactions.py
+-rw-r--r--   0        0        0       13 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperdrive.version
+-rw-r--r--   0        0        0       97 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/__init__.py
+-rw-r--r--   0        0        0      681 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/fuzz_assertion_exception.py
+-rw-r--r--   0        0        0      168 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/system_fuzz/__init__.py
+-rw-r--r--   0        0        0    16993 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/system_fuzz/invariant_checks.py
+-rw-r--r--   0        0        0    16449 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/system_fuzz/run_local_fuzz_bots.py
+-rw-r--r--   0        0        0      290 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/__init__.py
+-rw-r--r--   0        0        0    16161 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/fuzz_long_short_maturity_values.py
+-rw-r--r--   0        0        0    18981 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/fuzz_path_independence.py
+-rw-r--r--   0        0        0    15935 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/fuzz_present_value.py
+-rw-r--r--   0        0        0    13704 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/fuzz_profit_check.py
+-rw-r--r--   0        0        0      302 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/helpers/__init__.py
+-rw-r--r--   0        0        0     2951 2024-05-22 03:50:57.660419 agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/helpers/advance_time.py
+-rw-r--r--   0        0        0     2022 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/helpers/close_random_trades.py
+-rw-r--r--   0        0        0     7048 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/helpers/execute_random_trades.py
+-rw-r--r--   0        0        0     4396 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/helpers/setup_fuzz.py
+-rw-r--r--   0        0        0       38 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hyperlogs/README.md
+-rw-r--r--   0        0        0      467 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hyperlogs/__init__.py
+-rw-r--r--   0        0        0     2427 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hyperlogs/json_encoder.py
+-rw-r--r--   0        0        0    11074 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hyperlogs/logs.py
+-rw-r--r--   0        0        0     3444 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hyperlogs/logs_test.py
+-rw-r--r--   0        0        0     2979 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hyperlogs/rollbar_utilities.py
+-rw-r--r--   0        0        0     1740 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/README.md
+-rw-r--r--   0        0        0       92 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/__init__.py
+-rw-r--r--   0        0        0     2436 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/fixedpoint_types.py
+-rw-r--r--   0        0        0    26135 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/ERC20ForwarderFactoryContract.py
+-rw-r--r--   0        0        0   111392 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/ERC20MintableContract.py
+-rw-r--r--   0        0        0     3539 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/ERC20MintableTypes.py
+-rw-r--r--   0        0        0    25856 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/ERC4626HyperdriveCoreDeployerContract.py
+-rw-r--r--   0        0        0   115557 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/ERC4626HyperdriveDeployerCoordinatorContract.py
+-rw-r--r--   0        0        0    40874 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/ERC4626Target0DeployerContract.py
+-rw-r--r--   0        0        0    43662 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/ERC4626Target1DeployerContract.py
+-rw-r--r--   0        0        0    44856 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/ERC4626Target2DeployerContract.py
+-rw-r--r--   0        0        0    45686 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/ERC4626Target3DeployerContract.py
+-rw-r--r--   0        0        0     1369 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/HyperdriveDeployerCoordinatorTypes.py
+-rw-r--r--   0        0        0   306748 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/HyperdriveFactoryContract.py
+-rw-r--r--   0        0        0    12310 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/HyperdriveFactoryTypes.py
+-rw-r--r--   0        0        0    29082 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/HyperdriveRegistryContract.py
+-rw-r--r--   0        0        0     1784 2024-05-22 03:50:57.664419 agent0-0.20.0/src/agent0/hypertypes/types/HyperdriveRegistryTypes.py
+-rw-r--r--   0        0        0   259032 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/hypertypes/types/IHyperdriveContract.py
+-rw-r--r--   0        0        0    17807 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/hypertypes/types/IHyperdriveTypes.py
+-rw-r--r--   0        0        0    49102 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/hypertypes/types/LPMathContract.py
+-rw-r--r--   0        0        0     2493 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/hypertypes/types/LPMathTypes.py
+-rw-r--r--   0        0        0   154641 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/hypertypes/types/MockERC4626Contract.py
+-rw-r--r--   0        0        0     4368 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/hypertypes/types/MockERC4626Types.py
+-rw-r--r--   0        0        0     1158 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/hypertypes/types/__init__.py
+-rw-r--r--   0        0        0     5415 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/hypertypes/types/utilities.py
+-rw-r--r--   0        0        0        0 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/hypertypes/utilities/__init__.py
+-rw-r--r--   0        0        0     9101 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/hypertypes/utilities/conversions.py
+-rw-r--r--   0        0        0      305 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/test_fixtures/__init__.py
+-rw-r--r--   0        0        0     3225 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/test_fixtures/chain_fixture.py
+-rw-r--r--   0        0        0     3116 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/test_fixtures/hyperdrive_fixture.py
+-rw-r--r--   0        0        0     1494 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/test_fixtures/interface_fixture.py
+-rw-r--r--   0        0        0      669 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/traiderdaive/__init__.py
+-rw-r--r--   0        0        0        0 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/traiderdaive/gym_environments/__init__.py
+-rw-r--r--   0        0        0    23652 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/traiderdaive/gym_environments/full_hyperdrive_env.py
+-rw-r--r--   0        0        0    16948 2024-05-22 03:50:57.668419 agent0-0.20.0/src/agent0/traiderdaive/gym_environments/simple_hyperdrive_env.py
+-rw-r--r--   0        0        0     7724 1970-01-01 00:00:00.000000 agent0-0.20.0/PKG-INFO
```

### Comparing `agent0-0.18.1/README.md` & `agent0-0.20.0/README.md`

 * *Files 6% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 [![linting: pylint](https://img.shields.io/badge/linting-pylint-yellowgreen)](https://github.com/pylint-dev/pylint)
 [![code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)
 [![testing: pytest](https://img.shields.io/badge/testing-pytest-blue.svg)](https://docs.pytest.org/en/latest/contents.html)
 [![license: Apache 2.0](https://img.shields.io/badge/License-Apache_2.0-lightgrey)](http://www.apache.org/licenses/LICENSE-2.0)
-[![DELV - Terms of Service](https://img.shields.io/badge/DELV-Terms_of_Service-orange)](https://elementfi.s3.us-east-2.amazonaws.com/element-finance-terms-of-service.pdf)
+[![DELV - Terms of Service](https://img.shields.io/badge/DELV-Terms_of_Service-orange)](https://delv-public.s3.us-east-2.amazonaws.com/delv-terms-of-service.pdf)
 
 [![testing: coverage](https://codecov.io/gh/delvtech/agent0/branch/main/graph/badge.svg?token=1S60MD42ZP)](https://app.codecov.io/gh/delvtech/agent0?displayType=list)
 [![docs: build](https://readthedocs.org/projects/agent0/badge/?version=latest)](https://agent0.readthedocs.io/en/latest/?badge=latest)
 <br><a href="https://app.codecov.io/gh/delvtech/agent0?displayType=list"><img height="50px" src="https://codecov.io/gh/delvtech/agent0/graphs/sunburst.svg?token=1S60MD42ZP"><a>
 
 <img src="icons/agent0-dark.svg" width="800" alt="agent0"><br>
 
@@ -14,42 +14,45 @@
 
 This docs page can be found via [https://agent0.readthedocs.io/en/latest/](https://agent0.readthedocs.io/en/latest/).
 
 ## Quickstart
 
 This repo contains general purpose code for interacting with Ethereum smart contracts.
 However, it was bulit for the primary use case of trading on [Hyperdrive](https://hyperdrive.delv.tech) markets.
-Using a Python 3.10 environment, you can install agent0 via pip:
+
+First, install [Foundry](https://book.getfoundry.sh/getting-started/installation) and [Docker](https://docs.docker.com/engine/install/).
+
+Next, using a Python 3.10 environment, you can install agent0 via pip:
 
 ```sh
 pip install --upgrade agent0
 ```
 
-Next you can execute Hyperdrive trades in a simulated blockchain environment:
+Finally, you can execute Hyperdrive trades in a simulated blockchain environment:
 
 ```python
 import datetime
 from fixedpointmath import FixedPoint
-from agent0 import ILocalHyperdrive, ILocalChain
+from agent0 import LocalHyperdrive, LocalChain
 
 # Initialize
-chain = ILocalChain()
-interactive_hyperdrive = ILocalHyperdrive(chain)
-hyperdrive_agent0 = interactive_hyperdrive.init_agent(base=FixedPoint(100_000))
+chain = LocalChain()
+hyperdrive = LocalHyperdrive(chain)
+hyperdrive_agent0 = hyperdrive.init_agent(base=FixedPoint(100_000), eth=FixedPoint(10))
 
 # Run trades
 chain.advance_time(datetime.timedelta(weeks=1))
-open_long_event = hyperdrive_agent0.open_long(base=FixedPoint(100))
+open_long_event = hyperdrive_agent0.open_long(base=FixedPoint(100), eth=FixedPoint(10))
 chain.advance_time(datetime.timedelta(weeks=5))
 close_event = hyperdrive_agent0.close_long(
     maturity_time=open_long_event.maturity_time, bonds=open_long_event.bond_amount
 )
 
 # Analyze
-pool_state = interactive_hyperdrive.get_pool_state(coerce_float=True)
+pool_state = hyperdrive.get_pool_state(coerce_float=True)
 pool_state.plot(x="block_number", y="longs_outstanding", kind="line")
 ```
 
 See our [tutorial notebook](examples/tutorial.ipynb) for more information, including details on executing trades on remote chains.
 
 ## Install
 
@@ -95,10 +98,10 @@
 
 ---
 
 Copyright © 2024  DELV
 
 Licensed under the Apache License, Version 2.0 (the "OSS License").
 
-By accessing or using this code, you signify that you have read, understand and agree to be bound by and to comply with the [OSS License](http://www.apache.org/licenses/LICENSE-2.0) and [DELV's Terms of Service](https://elementfi.s3.us-east-2.amazonaws.com/element-finance-terms-of-service.pdf). If you do not agree to those terms, you are prohibited from accessing or using this code.
+By accessing or using this code, you signify that you have read, understand and agree to be bound by and to comply with the [OSS License](http://www.apache.org/licenses/LICENSE-2.0) and [DELV's Terms of Service](https://delv-public.s3.us-east-2.amazonaws.com/delv-terms-of-service.pdf). If you do not agree to those terms, you are prohibited from accessing or using this code.
 
 Unless required by applicable law or agreed to in writing, software distributed under the OSS License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the OSS License and the DELV Terms of Service for the specific language governing permissions and limitations.
```

#### html2text {}

```diff
@@ -1,66 +1,67 @@
 [![linting: pylint](https://img.shields.io/badge/linting-pylint-yellowgreen)]
 (https://github.com/pylint-dev/pylint) [![code style: black](https://
 img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/
 black) [![testing: pytest](https://img.shields.io/badge/testing-pytest-
 blue.svg)](https://docs.pytest.org/en/latest/contents.html) [![license: Apache
 2.0](https://img.shields.io/badge/License-Apache_2.0-lightgrey)](http://
 www.apache.org/licenses/LICENSE-2.0) [![DELV - Terms of Service](https://
-img.shields.io/badge/DELV-Terms_of_Service-orange)](https://elementfi.s3.us-
-east-2.amazonaws.com/element-finance-terms-of-service.pdf) [![testing:
-coverage](https://codecov.io/gh/delvtech/agent0/branch/main/graph/
-badge.svg?token=1S60MD42ZP)](https://app.codecov.io/gh/delvtech/
-agent0?displayType=list) [![docs: build](https://readthedocs.org/projects/
-agent0/badge/?version=latest)](https://agent0.readthedocs.io/en/latest/
-?badge=latest)
+img.shields.io/badge/DELV-Terms_of_Service-orange)](https://delv-public.s3.us-
+east-2.amazonaws.com/delv-terms-of-service.pdf) [![testing: coverage](https://
+codecov.io/gh/delvtech/agent0/branch/main/graph/badge.svg?token=1S60MD42ZP)]
+(https://app.codecov.io/gh/delvtech/agent0?displayType=list) [![docs: build]
+(https://readthedocs.org/projects/agent0/badge/?version=latest)](https://
+agent0.readthedocs.io/en/latest/?badge=latest)
 _[_h_t_t_p_s_:_/_/_c_o_d_e_c_o_v_._i_o_/_g_h_/_d_e_l_v_t_e_c_h_/_a_g_e_n_t_0_/_g_r_a_p_h_s_/_s_u_n_b_u_r_s_t_._s_v_g_?_t_o_k_e_n_=_1_S_6_0_M_D_4_2_Z_P_]
 _[_a_g_e_n_t_0_]
 _#_ _[_D_E_L_V_]_(_h_t_t_p_s_:_/_/_d_e_l_v_._t_e_c_h_)_ _r_e_p_o_ _f_o_r_ _m_a_r_k_e_t_ _s_i_m_u_l_a_t_i_o_n_ _a_n_d_ _a_n_a_l_y_s_i_s_ _T_h_i_s_ _d_o_c_s
 _p_a_g_e_ _c_a_n_ _b_e_ _f_o_u_n_d_ _v_i_a_ _[_h_t_t_p_s_:_/_/_a_g_e_n_t_0_._r_e_a_d_t_h_e_d_o_c_s_._i_o_/_e_n_/_l_a_t_e_s_t_/_]_(_h_t_t_p_s_:_/_/
 _a_g_e_n_t_0_._r_e_a_d_t_h_e_d_o_c_s_._i_o_/_e_n_/_l_a_t_e_s_t_/_)_._ _#_#_ _Q_u_i_c_k_s_t_a_r_t_ _T_h_i_s_ _r_e_p_o_ _c_o_n_t_a_i_n_s_ _g_e_n_e_r_a_l
 _p_u_r_p_o_s_e_ _c_o_d_e_ _f_o_r_ _i_n_t_e_r_a_c_t_i_n_g_ _w_i_t_h_ _E_t_h_e_r_e_u_m_ _s_m_a_r_t_ _c_o_n_t_r_a_c_t_s_._ _H_o_w_e_v_e_r_,_ _i_t_ _w_a_s
 _b_u_l_i_t_ _f_o_r_ _t_h_e_ _p_r_i_m_a_r_y_ _u_s_e_ _c_a_s_e_ _o_f_ _t_r_a_d_i_n_g_ _o_n_ _[_H_y_p_e_r_d_r_i_v_e_]_(_h_t_t_p_s_:_/_/
-_h_y_p_e_r_d_r_i_v_e_._d_e_l_v_._t_e_c_h_)_ _m_a_r_k_e_t_s_._ _U_s_i_n_g_ _a_ _P_y_t_h_o_n_ _3_._1_0_ _e_n_v_i_r_o_n_m_e_n_t_,_ _y_o_u_ _c_a_n_ _i_n_s_t_a_l_l
-_a_g_e_n_t_0_ _v_i_a_ _p_i_p_:_ _`_`_`_s_h_ _p_i_p_ _i_n_s_t_a_l_l_ _-_-_u_p_g_r_a_d_e_ _a_g_e_n_t_0_ _`_`_`_ _N_e_x_t_ _y_o_u_ _c_a_n_ _e_x_e_c_u_t_e
-_H_y_p_e_r_d_r_i_v_e_ _t_r_a_d_e_s_ _i_n_ _a_ _s_i_m_u_l_a_t_e_d_ _b_l_o_c_k_c_h_a_i_n_ _e_n_v_i_r_o_n_m_e_n_t_:_ _`_`_`_p_y_t_h_o_n_ _i_m_p_o_r_t
-_d_a_t_e_t_i_m_e_ _f_r_o_m_ _f_i_x_e_d_p_o_i_n_t_m_a_t_h_ _i_m_p_o_r_t_ _F_i_x_e_d_P_o_i_n_t_ _f_r_o_m_ _a_g_e_n_t_0_ _i_m_p_o_r_t
-_I_L_o_c_a_l_H_y_p_e_r_d_r_i_v_e_,_ _I_L_o_c_a_l_C_h_a_i_n_ _#_ _I_n_i_t_i_a_l_i_z_e_ _c_h_a_i_n_ _=_ _I_L_o_c_a_l_C_h_a_i_n_(_)
-_i_n_t_e_r_a_c_t_i_v_e___h_y_p_e_r_d_r_i_v_e_ _=_ _I_L_o_c_a_l_H_y_p_e_r_d_r_i_v_e_(_c_h_a_i_n_)_ _h_y_p_e_r_d_r_i_v_e___a_g_e_n_t_0_ _=
-_i_n_t_e_r_a_c_t_i_v_e___h_y_p_e_r_d_r_i_v_e_._i_n_i_t___a_g_e_n_t_(_b_a_s_e_=_F_i_x_e_d_P_o_i_n_t_(_1_0_0___0_0_0_)_)_ _#_ _R_u_n_ _t_r_a_d_e_s
-_c_h_a_i_n_._a_d_v_a_n_c_e___t_i_m_e_(_d_a_t_e_t_i_m_e_._t_i_m_e_d_e_l_t_a_(_w_e_e_k_s_=_1_)_)_ _o_p_e_n___l_o_n_g___e_v_e_n_t_ _=
-_h_y_p_e_r_d_r_i_v_e___a_g_e_n_t_0_._o_p_e_n___l_o_n_g_(_b_a_s_e_=_F_i_x_e_d_P_o_i_n_t_(_1_0_0_)_)_ _c_h_a_i_n_._a_d_v_a_n_c_e___t_i_m_e
+_h_y_p_e_r_d_r_i_v_e_._d_e_l_v_._t_e_c_h_)_ _m_a_r_k_e_t_s_._ _F_i_r_s_t_,_ _i_n_s_t_a_l_l_ _[_F_o_u_n_d_r_y_]_(_h_t_t_p_s_:_/_/
+_b_o_o_k_._g_e_t_f_o_u_n_d_r_y_._s_h_/_g_e_t_t_i_n_g_-_s_t_a_r_t_e_d_/_i_n_s_t_a_l_l_a_t_i_o_n_)_ _a_n_d_ _[_D_o_c_k_e_r_]_(_h_t_t_p_s_:_/_/
+_d_o_c_s_._d_o_c_k_e_r_._c_o_m_/_e_n_g_i_n_e_/_i_n_s_t_a_l_l_/_)_._ _N_e_x_t_,_ _u_s_i_n_g_ _a_ _P_y_t_h_o_n_ _3_._1_0_ _e_n_v_i_r_o_n_m_e_n_t_,_ _y_o_u
+_c_a_n_ _i_n_s_t_a_l_l_ _a_g_e_n_t_0_ _v_i_a_ _p_i_p_:_ _`_`_`_s_h_ _p_i_p_ _i_n_s_t_a_l_l_ _-_-_u_p_g_r_a_d_e_ _a_g_e_n_t_0_ _`_`_`_ _F_i_n_a_l_l_y_,_ _y_o_u
+_c_a_n_ _e_x_e_c_u_t_e_ _H_y_p_e_r_d_r_i_v_e_ _t_r_a_d_e_s_ _i_n_ _a_ _s_i_m_u_l_a_t_e_d_ _b_l_o_c_k_c_h_a_i_n_ _e_n_v_i_r_o_n_m_e_n_t_:_ _`_`_`_p_y_t_h_o_n
+_i_m_p_o_r_t_ _d_a_t_e_t_i_m_e_ _f_r_o_m_ _f_i_x_e_d_p_o_i_n_t_m_a_t_h_ _i_m_p_o_r_t_ _F_i_x_e_d_P_o_i_n_t_ _f_r_o_m_ _a_g_e_n_t_0_ _i_m_p_o_r_t
+_L_o_c_a_l_H_y_p_e_r_d_r_i_v_e_,_ _L_o_c_a_l_C_h_a_i_n_ _#_ _I_n_i_t_i_a_l_i_z_e_ _c_h_a_i_n_ _=_ _L_o_c_a_l_C_h_a_i_n_(_)_ _h_y_p_e_r_d_r_i_v_e_ _=
+_L_o_c_a_l_H_y_p_e_r_d_r_i_v_e_(_c_h_a_i_n_)_ _h_y_p_e_r_d_r_i_v_e___a_g_e_n_t_0_ _=_ _h_y_p_e_r_d_r_i_v_e_._i_n_i_t___a_g_e_n_t
+_(_b_a_s_e_=_F_i_x_e_d_P_o_i_n_t_(_1_0_0___0_0_0_)_,_ _e_t_h_=_F_i_x_e_d_P_o_i_n_t_(_1_0_)_)_ _#_ _R_u_n_ _t_r_a_d_e_s_ _c_h_a_i_n_._a_d_v_a_n_c_e___t_i_m_e
+_(_d_a_t_e_t_i_m_e_._t_i_m_e_d_e_l_t_a_(_w_e_e_k_s_=_1_)_)_ _o_p_e_n___l_o_n_g___e_v_e_n_t_ _=_ _h_y_p_e_r_d_r_i_v_e___a_g_e_n_t_0_._o_p_e_n___l_o_n_g
+_(_b_a_s_e_=_F_i_x_e_d_P_o_i_n_t_(_1_0_0_)_,_ _e_t_h_=_F_i_x_e_d_P_o_i_n_t_(_1_0_)_)_ _c_h_a_i_n_._a_d_v_a_n_c_e___t_i_m_e
 _(_d_a_t_e_t_i_m_e_._t_i_m_e_d_e_l_t_a_(_w_e_e_k_s_=_5_)_)_ _c_l_o_s_e___e_v_e_n_t_ _=_ _h_y_p_e_r_d_r_i_v_e___a_g_e_n_t_0_._c_l_o_s_e___l_o_n_g
 _(_ _m_a_t_u_r_i_t_y___t_i_m_e_=_o_p_e_n___l_o_n_g___e_v_e_n_t_._m_a_t_u_r_i_t_y___t_i_m_e_,
 _b_o_n_d_s_=_o_p_e_n___l_o_n_g___e_v_e_n_t_._b_o_n_d___a_m_o_u_n_t_ _)_ _#_ _A_n_a_l_y_z_e_ _p_o_o_l___s_t_a_t_e_ _=
-_i_n_t_e_r_a_c_t_i_v_e___h_y_p_e_r_d_r_i_v_e_._g_e_t___p_o_o_l___s_t_a_t_e_(_c_o_e_r_c_e___f_l_o_a_t_=_T_r_u_e_)_ _p_o_o_l___s_t_a_t_e_._p_l_o_t
-_(_x_=_"_b_l_o_c_k___n_u_m_b_e_r_"_,_ _y_=_"_l_o_n_g_s___o_u_t_s_t_a_n_d_i_n_g_"_,_ _k_i_n_d_=_"_l_i_n_e_"_)_ _`_`_`_ _S_e_e_ _o_u_r_ _[_t_u_t_o_r_i_a_l
-_n_o_t_e_b_o_o_k_]_(_e_x_a_m_p_l_e_s_/_t_u_t_o_r_i_a_l_._i_p_y_n_b_)_ _f_o_r_ _m_o_r_e_ _i_n_f_o_r_m_a_t_i_o_n_,_ _i_n_c_l_u_d_i_n_g_ _d_e_t_a_i_l_s_ _o_n
-_e_x_e_c_u_t_i_n_g_ _t_r_a_d_e_s_ _o_n_ _r_e_m_o_t_e_ _c_h_a_i_n_s_._ _#_#_ _I_n_s_t_a_l_l_ _P_l_e_a_s_e_ _r_e_f_e_r_ _t_o_ _[_I_N_S_T_A_L_L_._m_d_]
-_(_I_N_S_T_A_L_L_._m_d_)_ _f_o_r_ _m_o_r_e_ _a_d_v_a_n_c_e_d_ _i_n_s_t_a_l_l_ _o_p_t_i_o_n_s_._ _#_#_ _D_e_p_l_o_y_m_e_n_t_ _P_l_e_a_s_e_ _r_e_f_e_r_ _t_o_ 
-_[_B_U_I_L_D_._m_d_]_(_B_U_I_L_D_._m_d_)_._ _#_#_ _T_e_s_t_i_n_g_ _W_e_ _d_e_p_l_o_y_ _a_ _l_o_c_a_l_ _a_n_v_i_l_ _c_h_a_i_n_ _t_o_ _r_u_n_ _s_y_s_t_e_m
-_t_e_s_t_s_._ _T_h_e_r_e_f_o_r_e_,_ _y_o_u_ _m_u_s_t_ _[_i_n_s_t_a_l_l_ _f_o_u_n_d_r_y_]_(_h_t_t_p_s_:_/_/_g_i_t_h_u_b_._c_o_m_/_f_o_u_n_d_r_y_-_r_s_/
-_f_o_u_n_d_r_y_#_i_n_s_t_a_l_l_a_t_i_o_:_/_/_g_i_t_h_u_b_._c_o_m_/_f_o_u_n_d_r_y_-_r_s_/_f_o_u_n_d_r_y_#_i_n_s_t_a_l_l_a_t_i_o_n_)_ _a_s_ _a
-_p_r_e_r_e_q_u_i_s_i_t_e_ _f_o_r_ _r_u_n_n_i_n_g_ _t_e_s_t_s_._ _T_e_s_t_i_n_g_ _i_s_ _a_c_h_i_e_v_e_d_ _w_i_t_h_ _[_p_y_._t_e_s_t_]_(_h_t_t_p_s_:_/_/
-_d_o_c_s_._p_y_t_e_s_t_._o_r_g_/_e_n_/_l_a_t_e_s_t_/_c_o_n_t_e_n_t_s_._h_t_m_l_)_._ _Y_o_u_ _c_a_n_ _r_u_n_ _a_l_l_ _t_e_s_t_s_ _f_r_o_m_ _t_h_e
-_r_e_p_o_s_i_t_o_r_y_ _r_o_o_t_ _d_i_r_e_c_t_o_r_y_ _b_y_ _r_u_n_n_i_n_g_ _`_p_y_t_h_o_n_ _-_m_ _p_y_t_e_s_t_`_,_ _o_r_ _y_o_u_ _c_a_n_ _p_i_c_k_ _a
-_s_p_e_c_i_f_i_c_ _t_e_s_t_ _w_i_t_h_ _`_p_y_t_h_o_n_ _-_m_ _p_y_t_e_s_t_ _{_p_a_t_h_/_t_o_/_t_e_s_t___f_i_l_e_._p_y_}_`_._ _G_e_n_e_r_a_l
-_i_n_t_e_g_r_a_t_i_o_n_-_l_e_v_e_l_ _t_e_s_t_s_ _a_r_e_ _i_n_ _t_h_e_ _`_t_e_s_t_s_`_ _f_o_l_d_e_r_,_ _w_h_i_l_e_ _m_o_r_e_ _i_s_o_l_a_t_e_d_ _o_r_ _u_n_i_t
-_t_e_s_t_s_ _a_r_e_ _c_o_l_o_c_a_t_e_d_ _w_i_t_h_ _t_h_e_ _f_i_l_e_s_ _t_h_e_y_ _a_r_e_ _t_e_s_t_i_n_g_ _a_n_d_ _e_n_d_ _w_i_t_h_ _a_ _`___t_e_s_t_._p_y_`
-_s_u_f_f_i_x_._ _#_#_ _C_o_n_t_r_i_b_u_t_i_o_n_s_ _P_l_e_a_s_e_ _r_e_f_e_r_ _t_o_ _[_C_O_N_T_R_I_B_U_T_I_N_G_._m_d_]_(_C_O_N_T_R_I_B_U_T_I_N_G_._m_d_)_._ _#_#
-_C_o_v_e_r_a_g_e_ _T_o_ _r_u_n_ _c_o_v_e_r_a_g_e_ _l_o_c_a_l_l_y_ _y_o_u_ _c_a_n_ _f_o_l_l_o_w_ _t_h_e_s_e_ _s_t_e_p_s_:_ _`_`_`_b_a_s_h_ _p_i_p
-_i_n_s_t_a_l_l_ _c_o_v_e_r_a_g_e_ _c_o_v_e_r_a_g_e_ _r_u_n_ _-_m_ _p_y_t_e_s_t_ _c_o_v_e_r_a_g_e_ _h_t_m_l_ _`_`_`_ _t_h_e_n_ _j_u_s_t_ _o_p_e_n
-_`_h_t_m_l_c_o_v_/_i_n_d_e_x_._h_t_m_l_`_ _t_o_ _v_i_e_w_ _t_h_e_ _r_e_p_o_r_t_!_ _#_#_ _N_u_m_b_e_r_ _f_o_r_m_a_t_ _W_e_ _f_r_e_q_u_e_n_t_l_y_ _u_s_e_ _1_8_-
-_d_e_c_i_m_a_l_ _[_f_i_x_e_d_-_p_o_i_n_t_ _p_r_e_c_i_s_i_o_n_ _n_u_m_b_e_r_s_]_(_h_t_t_p_s_:_/_/_g_i_t_h_u_b_._c_o_m_/_d_e_l_v_t_e_c_h_/
-_f_i_x_e_d_p_o_i_n_t_m_a_t_h_#_r_e_a_d_m_e_)_ _f_o_r_ _a_r_i_t_h_m_e_t_i_c_._ _#_#_ _D_i_s_c_l_a_i_m_e_r_ _T_h_i_s_ _p_r_o_j_e_c_t_ _i_s_ _a_ _w_o_r_k_-_i_n_-
-_p_r_o_g_r_e_s_s_._ _T_h_e_ _l_a_n_g_u_a_g_e_ _u_s_e_d_ _i_n_ _t_h_i_s_ _c_o_d_e_ _a_n_d_ _d_o_c_u_m_e_n_t_a_t_i_o_n_ _i_s_ _n_o_t_ _i_n_t_e_n_d_e_d_ _t_o_,
-_a_n_d_ _d_o_e_s_ _n_o_t_,_ _h_a_v_e_ _a_n_y_ _p_a_r_t_i_c_u_l_a_r_ _f_i_n_a_n_c_i_a_l_,_ _l_e_g_a_l_,_ _o_r_ _r_e_g_u_l_a_t_o_r_y_ _s_i_g_n_i_f_i_c_a_n_c_e_.
-_-_-_-_ _C_o_p_y_r_i_g_h_t_ _Â_©_ _2_0_2_4_ _D_E_L_V_ _L_i_c_e_n_s_e_d_ _u_n_d_e_r_ _t_h_e_ _A_p_a_c_h_e_ _L_i_c_e_n_s_e_,_ _V_e_r_s_i_o_n_ _2_._0_ _(_t_h_e
-_"_O_S_S_ _L_i_c_e_n_s_e_"_)_._ _B_y_ _a_c_c_e_s_s_i_n_g_ _o_r_ _u_s_i_n_g_ _t_h_i_s_ _c_o_d_e_,_ _y_o_u_ _s_i_g_n_i_f_y_ _t_h_a_t_ _y_o_u_ _h_a_v_e
-_r_e_a_d_,_ _u_n_d_e_r_s_t_a_n_d_ _a_n_d_ _a_g_r_e_e_ _t_o_ _b_e_ _b_o_u_n_d_ _b_y_ _a_n_d_ _t_o_ _c_o_m_p_l_y_ _w_i_t_h_ _t_h_e_ _[_O_S_S_ _L_i_c_e_n_s_e_]
-_(_h_t_t_p_:_/_/_w_w_w_._a_p_a_c_h_e_._o_r_g_/_l_i_c_e_n_s_e_s_/_L_I_C_E_N_S_E_-_2_._0_)_ _a_n_d_ _[_D_E_L_V_'_s_ _T_e_r_m_s_ _o_f_ _S_e_r_v_i_c_e_]
-_(_h_t_t_p_s_:_/_/_e_l_e_m_e_n_t_f_i_._s_3_._u_s_-_e_a_s_t_-_2_._a_m_a_z_o_n_a_w_s_._c_o_m_/_e_l_e_m_e_n_t_-_f_i_n_a_n_c_e_-_t_e_r_m_s_-_o_f_-
-_s_e_r_v_i_c_e_._p_d_f_)_._ _I_f_ _y_o_u_ _d_o_ _n_o_t_ _a_g_r_e_e_ _t_o_ _t_h_o_s_e_ _t_e_r_m_s_,_ _y_o_u_ _a_r_e_ _p_r_o_h_i_b_i_t_e_d_ _f_r_o_m
-_a_c_c_e_s_s_i_n_g_ _o_r_ _u_s_i_n_g_ _t_h_i_s_ _c_o_d_e_._ _U_n_l_e_s_s_ _r_e_q_u_i_r_e_d_ _b_y_ _a_p_p_l_i_c_a_b_l_e_ _l_a_w_ _o_r_ _a_g_r_e_e_d_ _t_o_ _i_n
-_w_r_i_t_i_n_g_,_ _s_o_f_t_w_a_r_e_ _d_i_s_t_r_i_b_u_t_e_d_ _u_n_d_e_r_ _t_h_e_ _O_S_S_ _L_i_c_e_n_s_e_ _i_s_ _d_i_s_t_r_i_b_u_t_e_d_ _o_n_ _a_n_ _"_A_S
-_I_S_"_ _B_A_S_I_S_,_ _W_I_T_H_O_U_T_ _W_A_R_R_A_N_T_I_E_S_ _O_R_ _C_O_N_D_I_T_I_O_N_S_ _O_F_ _A_N_Y_ _K_I_N_D_,_ _e_i_t_h_e_r_ _e_x_p_r_e_s_s_ _o_r
-_i_m_p_l_i_e_d_._ _S_e_e_ _t_h_e_ _O_S_S_ _L_i_c_e_n_s_e_ _a_n_d_ _t_h_e_ _D_E_L_V_ _T_e_r_m_s_ _o_f_ _S_e_r_v_i_c_e_ _f_o_r_ _t_h_e_ _s_p_e_c_i_f_i_c
-_l_a_n_g_u_a_g_e_ _g_o_v_e_r_n_i_n_g_ _p_e_r_m_i_s_s_i_o_n_s_ _a_n_d_ _l_i_m_i_t_a_t_i_o_n_s_.
+_h_y_p_e_r_d_r_i_v_e_._g_e_t___p_o_o_l___s_t_a_t_e_(_c_o_e_r_c_e___f_l_o_a_t_=_T_r_u_e_)_ _p_o_o_l___s_t_a_t_e_._p_l_o_t_(_x_=_"_b_l_o_c_k___n_u_m_b_e_r_"_,
+_y_=_"_l_o_n_g_s___o_u_t_s_t_a_n_d_i_n_g_"_,_ _k_i_n_d_=_"_l_i_n_e_"_)_ _`_`_`_ _S_e_e_ _o_u_r_ _[_t_u_t_o_r_i_a_l_ _n_o_t_e_b_o_o_k_]_(_e_x_a_m_p_l_e_s_/
+_t_u_t_o_r_i_a_l_._i_p_y_n_b_)_ _f_o_r_ _m_o_r_e_ _i_n_f_o_r_m_a_t_i_o_n_,_ _i_n_c_l_u_d_i_n_g_ _d_e_t_a_i_l_s_ _o_n_ _e_x_e_c_u_t_i_n_g_ _t_r_a_d_e_s_ _o_n
+_r_e_m_o_t_e_ _c_h_a_i_n_s_._ _#_#_ _I_n_s_t_a_l_l_ _P_l_e_a_s_e_ _r_e_f_e_r_ _t_o_ _[_I_N_S_T_A_L_L_._m_d_]_(_I_N_S_T_A_L_L_._m_d_)_ _f_o_r_ _m_o_r_e
+_a_d_v_a_n_c_e_d_ _i_n_s_t_a_l_l_ _o_p_t_i_o_n_s_._ _#_#_ _D_e_p_l_o_y_m_e_n_t_ _P_l_e_a_s_e_ _r_e_f_e_r_ _t_o_ _[_B_U_I_L_D_._m_d_]_(_B_U_I_L_D_._m_d_)_.
+_#_#_ _T_e_s_t_i_n_g_ _W_e_ _d_e_p_l_o_y_ _a_ _l_o_c_a_l_ _a_n_v_i_l_ _c_h_a_i_n_ _t_o_ _r_u_n_ _s_y_s_t_e_m_ _t_e_s_t_s_._ _T_h_e_r_e_f_o_r_e_,_ _y_o_u
+_m_u_s_t_ _[_i_n_s_t_a_l_l_ _f_o_u_n_d_r_y_]_(_h_t_t_p_s_:_/_/_g_i_t_h_u_b_._c_o_m_/_f_o_u_n_d_r_y_-_r_s_/_f_o_u_n_d_r_y_#_i_n_s_t_a_l_l_a_t_i_o_:_/_/
+_g_i_t_h_u_b_._c_o_m_/_f_o_u_n_d_r_y_-_r_s_/_f_o_u_n_d_r_y_#_i_n_s_t_a_l_l_a_t_i_o_n_)_ _a_s_ _a_ _p_r_e_r_e_q_u_i_s_i_t_e_ _f_o_r_ _r_u_n_n_i_n_g
+_t_e_s_t_s_._ _T_e_s_t_i_n_g_ _i_s_ _a_c_h_i_e_v_e_d_ _w_i_t_h_ _[_p_y_._t_e_s_t_]_(_h_t_t_p_s_:_/_/_d_o_c_s_._p_y_t_e_s_t_._o_r_g_/_e_n_/_l_a_t_e_s_t_/
+_c_o_n_t_e_n_t_s_._h_t_m_l_)_._ _Y_o_u_ _c_a_n_ _r_u_n_ _a_l_l_ _t_e_s_t_s_ _f_r_o_m_ _t_h_e_ _r_e_p_o_s_i_t_o_r_y_ _r_o_o_t_ _d_i_r_e_c_t_o_r_y_ _b_y
+_r_u_n_n_i_n_g_ _`_p_y_t_h_o_n_ _-_m_ _p_y_t_e_s_t_`_,_ _o_r_ _y_o_u_ _c_a_n_ _p_i_c_k_ _a_ _s_p_e_c_i_f_i_c_ _t_e_s_t_ _w_i_t_h_ _`_p_y_t_h_o_n_ _-
+_m_ _p_y_t_e_s_t_ _{_p_a_t_h_/_t_o_/_t_e_s_t___f_i_l_e_._p_y_}_`_._ _G_e_n_e_r_a_l_ _i_n_t_e_g_r_a_t_i_o_n_-_l_e_v_e_l_ _t_e_s_t_s_ _a_r_e_ _i_n_ _t_h_e
+_`_t_e_s_t_s_`_ _f_o_l_d_e_r_,_ _w_h_i_l_e_ _m_o_r_e_ _i_s_o_l_a_t_e_d_ _o_r_ _u_n_i_t_ _t_e_s_t_s_ _a_r_e_ _c_o_l_o_c_a_t_e_d_ _w_i_t_h_ _t_h_e_ _f_i_l_e_s
+_t_h_e_y_ _a_r_e_ _t_e_s_t_i_n_g_ _a_n_d_ _e_n_d_ _w_i_t_h_ _a_ _`___t_e_s_t_._p_y_`_ _s_u_f_f_i_x_._ _#_#_ _C_o_n_t_r_i_b_u_t_i_o_n_s_ _P_l_e_a_s_e
+_r_e_f_e_r_ _t_o_ _[_C_O_N_T_R_I_B_U_T_I_N_G_._m_d_]_(_C_O_N_T_R_I_B_U_T_I_N_G_._m_d_)_._ _#_#_ _C_o_v_e_r_a_g_e_ _T_o_ _r_u_n_ _c_o_v_e_r_a_g_e
+_l_o_c_a_l_l_y_ _y_o_u_ _c_a_n_ _f_o_l_l_o_w_ _t_h_e_s_e_ _s_t_e_p_s_:_ _`_`_`_b_a_s_h_ _p_i_p_ _i_n_s_t_a_l_l_ _c_o_v_e_r_a_g_e_ _c_o_v_e_r_a_g_e_ _r_u_n_ _-
+_m_ _p_y_t_e_s_t_ _c_o_v_e_r_a_g_e_ _h_t_m_l_ _`_`_`_ _t_h_e_n_ _j_u_s_t_ _o_p_e_n_ _`_h_t_m_l_c_o_v_/_i_n_d_e_x_._h_t_m_l_`_ _t_o_ _v_i_e_w_ _t_h_e
+_r_e_p_o_r_t_!_ _#_#_ _N_u_m_b_e_r_ _f_o_r_m_a_t_ _W_e_ _f_r_e_q_u_e_n_t_l_y_ _u_s_e_ _1_8_-_d_e_c_i_m_a_l_ _[_f_i_x_e_d_-_p_o_i_n_t_ _p_r_e_c_i_s_i_o_n
+_n_u_m_b_e_r_s_]_(_h_t_t_p_s_:_/_/_g_i_t_h_u_b_._c_o_m_/_d_e_l_v_t_e_c_h_/_f_i_x_e_d_p_o_i_n_t_m_a_t_h_#_r_e_a_d_m_e_)_ _f_o_r_ _a_r_i_t_h_m_e_t_i_c_._ _#_#
+_D_i_s_c_l_a_i_m_e_r_ _T_h_i_s_ _p_r_o_j_e_c_t_ _i_s_ _a_ _w_o_r_k_-_i_n_-_p_r_o_g_r_e_s_s_._ _T_h_e_ _l_a_n_g_u_a_g_e_ _u_s_e_d_ _i_n_ _t_h_i_s_ _c_o_d_e
+_a_n_d_ _d_o_c_u_m_e_n_t_a_t_i_o_n_ _i_s_ _n_o_t_ _i_n_t_e_n_d_e_d_ _t_o_,_ _a_n_d_ _d_o_e_s_ _n_o_t_,_ _h_a_v_e_ _a_n_y_ _p_a_r_t_i_c_u_l_a_r
+_f_i_n_a_n_c_i_a_l_,_ _l_e_g_a_l_,_ _o_r_ _r_e_g_u_l_a_t_o_r_y_ _s_i_g_n_i_f_i_c_a_n_c_e_._ _-_-_-_ _C_o_p_y_r_i_g_h_t_ _Â_©_ _2_0_2_4_ _D_E_L_V
+_L_i_c_e_n_s_e_d_ _u_n_d_e_r_ _t_h_e_ _A_p_a_c_h_e_ _L_i_c_e_n_s_e_,_ _V_e_r_s_i_o_n_ _2_._0_ _(_t_h_e_ _"_O_S_S_ _L_i_c_e_n_s_e_"_)_._ _B_y
+_a_c_c_e_s_s_i_n_g_ _o_r_ _u_s_i_n_g_ _t_h_i_s_ _c_o_d_e_,_ _y_o_u_ _s_i_g_n_i_f_y_ _t_h_a_t_ _y_o_u_ _h_a_v_e_ _r_e_a_d_,_ _u_n_d_e_r_s_t_a_n_d_ _a_n_d
+_a_g_r_e_e_ _t_o_ _b_e_ _b_o_u_n_d_ _b_y_ _a_n_d_ _t_o_ _c_o_m_p_l_y_ _w_i_t_h_ _t_h_e_ _[_O_S_S_ _L_i_c_e_n_s_e_]_(_h_t_t_p_:_/_/
+_w_w_w_._a_p_a_c_h_e_._o_r_g_/_l_i_c_e_n_s_e_s_/_L_I_C_E_N_S_E_-_2_._0_)_ _a_n_d_ _[_D_E_L_V_'_s_ _T_e_r_m_s_ _o_f_ _S_e_r_v_i_c_e_]_(_h_t_t_p_s_:_/_/
+_d_e_l_v_-_p_u_b_l_i_c_._s_3_._u_s_-_e_a_s_t_-_2_._a_m_a_z_o_n_a_w_s_._c_o_m_/_d_e_l_v_-_t_e_r_m_s_-_o_f_-_s_e_r_v_i_c_e_._p_d_f_)_._ _I_f_ _y_o_u_ _d_o
+_n_o_t_ _a_g_r_e_e_ _t_o_ _t_h_o_s_e_ _t_e_r_m_s_,_ _y_o_u_ _a_r_e_ _p_r_o_h_i_b_i_t_e_d_ _f_r_o_m_ _a_c_c_e_s_s_i_n_g_ _o_r_ _u_s_i_n_g_ _t_h_i_s_ _c_o_d_e_.
+_U_n_l_e_s_s_ _r_e_q_u_i_r_e_d_ _b_y_ _a_p_p_l_i_c_a_b_l_e_ _l_a_w_ _o_r_ _a_g_r_e_e_d_ _t_o_ _i_n_ _w_r_i_t_i_n_g_,_ _s_o_f_t_w_a_r_e_ _d_i_s_t_r_i_b_u_t_e_d
+_u_n_d_e_r_ _t_h_e_ _O_S_S_ _L_i_c_e_n_s_e_ _i_s_ _d_i_s_t_r_i_b_u_t_e_d_ _o_n_ _a_n_ _"_A_S_ _I_S_"_ _B_A_S_I_S_,_ _W_I_T_H_O_U_T_ _W_A_R_R_A_N_T_I_E_S_ _O_R
+_C_O_N_D_I_T_I_O_N_S_ _O_F_ _A_N_Y_ _K_I_N_D_,_ _e_i_t_h_e_r_ _e_x_p_r_e_s_s_ _o_r_ _i_m_p_l_i_e_d_._ _S_e_e_ _t_h_e_ _O_S_S_ _L_i_c_e_n_s_e_ _a_n_d_ _t_h_e
+_D_E_L_V_ _T_e_r_m_s_ _o_f_ _S_e_r_v_i_c_e_ _f_o_r_ _t_h_e_ _s_p_e_c_i_f_i_c_ _l_a_n_g_u_a_g_e_ _g_o_v_e_r_n_i_n_g_ _p_e_r_m_i_s_s_i_o_n_s_ _a_n_d
+_l_i_m_i_t_a_t_i_o_n_s_.
```

### Comparing `agent0-0.18.1/pyproject.toml` & `agent0-0.20.0/pyproject.toml`

 * *Files 4% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 [project]
 name = "agent0"
-version = "0.18.1"
-# Authors are the current, primary stuards of the repo
+version = "0.20.0"
+# Authors are the current, primary stewards of the repo
 # contributors can be found on github
 authors = [
     { name = "Dylan Paiton", email = "dylan@delv.tech" },
     { name = "Mihai Cosma", email = "mihai@delv.tech" },
     { name = "Matthew Brown", email = "matt@delv.tech" },
     { name = "Sheng Lundquist", email = "sheng@delv.tech" },
     { name = "Jonny Rhea", email = "jonny@delv.tech" },
@@ -24,30 +24,34 @@
     "Natural Language :: English",
 ]
 
 dependencies = [
     "dill",
     "docker",
     "eth-typing==4.1.0",
+    "eth-account",
     "fixedpointmath",
     "flask",
     "flask-expects-json",
     "hexbytes",
-    "hyperdrivepy==1.0.1",
+    "hyperdrivepy==0.15.5",
     "ipython",
     "matplotlib",
     "mplfinance",
     "nest_asyncio",
     "numpy",
     "pandas",
     "pandas-stubs",
     "psycopg[binary]",
     "pytest",
     "python-dotenv",
-    "requests",
+    # "requests",
+    # Docker-py breaks with latest requests:
+    # https://github.com/docker/docker-py/issues/3256
+    "requests==2.31.0",
     "rollbar",
     "setuptools",
     "sqlalchemy",
     "sqlalchemy-utils",
     "streamlit",
     "web3",
 ]
@@ -122,14 +126,15 @@
 exclude = [".venv", ".vscode", "docs"]
 
 [tool.pyright]
 exclude = [".venv", ".vscode", "docs"]
 
 [tool.isort]
 line_length = 120
+profile = "black"
 
 [tool.ruff]
 line-length = 120
 
 # Assume Python 3.10.
 target-version = "py310"
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/analysis/calc_pnl.py` & `agent0-0.20.0/src/agent0/chainsync/analysis/calc_position_value.py`

 * *Files 10% similar despite different names*

```diff
@@ -4,69 +4,69 @@
 
 import logging
 from decimal import Decimal
 
 import pandas as pd
 from fixedpointmath import FixedPoint
 
-from agent0.ethpy.hyperdrive import BASE_TOKEN_SYMBOL, HyperdriveReadInterface
+from agent0.ethpy.hyperdrive import HyperdriveReadInterface
 from agent0.ethpy.hyperdrive.state import PoolState
 
 
 def calc_single_closeout(
     position: pd.Series,
     interface: HyperdriveReadInterface,
     hyperdrive_state: PoolState,
     checkpoint_share_prices: pd.Series,
 ) -> Decimal:
-    """Calculate the closeout pnl for a single position.
+    """Calculate the closeout value for a single position.
 
     Arguments
     ---------
     position: pd.DataFrame
-        The position to calculate the closeout pnl for (one row in current_wallet)
+        The position to calculate the closeout value for (one row in current_wallet).
     interface: HyperdriveReadInterface
-        The hyperdrive read interface
+        The hyperdrive read interface.
     hyperdrive_state: PoolState
-        The hyperdrive pool state
+        The hyperdrive pool state.
     checkpoint_share_prices: pd.Series
-        A series with the index as checkpoint time and the value as the share prices
+        A series with the index as checkpoint time and the value as the share prices.
 
     Returns
     -------
     Decimal
-        The closeout pnl
+        The closeout position value.
     """
-    # pnl is itself
-    if position["base_token_type"] == BASE_TOKEN_SYMBOL:
-        return position["value"]
-    # If no value, pnl is 0
-    if position["value"] == 0:
+    # If no balance, value is 0
+    if position["token_balance"] == 0:
         return Decimal(0)
-    amount = FixedPoint(f"{position['value']:f}")
-    tokentype = position["base_token_type"]
+    amount = FixedPoint(f"{position['token_balance']:f}")
+    token_type = position["token_type"]
     maturity = 0
     position_duration = hyperdrive_state.pool_config.position_duration
 
-    if tokentype in ["LONG", "SHORT"]:
+    if token_type in ["LONG", "SHORT"]:
         maturity = int(position["maturity_time"])
 
-    out_pnl = Decimal("nan")
-    if tokentype == "LONG":
+    out_value = Decimal("nan")
+    if token_type == "LONG":
         try:
-            out_pnl = interface.calc_close_long(amount, maturity, hyperdrive_state)
+            out_value = interface.calc_close_long(amount, maturity, hyperdrive_state)
         # Rust Panic Exceptions are base exceptions, not Exceptions
         except BaseException as exception:  # pylint: disable=broad-except
             logging.warning("Chainsync: Exception caught in calculating close long, ignoring: %s", exception)
         # FixedPoint to Decimal
-        out_pnl = Decimal(str(out_pnl))
+        out_value = Decimal(str(out_value))
 
-    elif tokentype == "SHORT":
+    elif token_type == "SHORT":
         # Get the open share price from the checkpoint lookup
         open_checkpoint_time = maturity - position_duration
+        # TODO checkpoint db doesn't exist for remote chains, fix
+        # Use checkpoint event to fill database, following the same
+        # event gathering logic as position events.
         assert (
             open_checkpoint_time in checkpoint_share_prices.index
         ), "Chainsync: open short checkpoint not found for position."
         open_share_price = FixedPoint(checkpoint_share_prices.loc[open_checkpoint_time])
 
         # If the position has matured, we use the share price from the checkpoint
         # Otherwise, we use the current share price
@@ -75,70 +75,75 @@
         # this may create an PNL that might be off.
         if (hyperdrive_state.block_time >= maturity) and (maturity in checkpoint_share_prices.index):
             close_share_price = FixedPoint(checkpoint_share_prices.loc[maturity])
         else:
             close_share_price = hyperdrive_state.pool_info.vault_share_price
 
         try:
-            out_pnl = interface.calc_close_short(
+            out_value = interface.calc_close_short(
                 amount,
                 open_vault_share_price=open_share_price,
                 close_vault_share_price=close_share_price,
                 maturity_time=maturity,
                 pool_state=hyperdrive_state,
             )
         # Rust Panic Exceptions are base exceptions, not Exceptions
         except BaseException as exception:  # pylint: disable=broad-except
             logging.warning("Chainsync: Exception caught in calculating close short, ignoring: %s", exception)
-        out_pnl = Decimal(str(out_pnl))
+        out_value = Decimal(str(out_value))
 
     # For PNL, we assume all withdrawal shares are redeemable
     # even if there are no withdrawal shares available to withdraw
     # Hence, we don't use preview transaction here
-    elif tokentype in ["LP", "WITHDRAWAL_SHARE"]:
-        out_pnl = amount * hyperdrive_state.pool_info.lp_share_price
-        out_pnl = Decimal(str(out_pnl))
+    elif token_type in ["LP", "WITHDRAWAL_SHARE"]:
+        out_value = amount * hyperdrive_state.pool_info.lp_share_price
+        out_value = Decimal(str(out_value))
     else:
         # Should never get here
-        raise ValueError(f"Unexpected token type: {tokentype}")
-    return out_pnl
+        raise ValueError(f"Unexpected token type: {token_type}")
+    return out_value
 
 
-def calc_closeout_pnl(
-    current_wallet: pd.DataFrame, checkpoint_info: pd.DataFrame, interface: HyperdriveReadInterface
+def calc_closeout_value(
+    current_positions: pd.DataFrame,
+    checkpoint_info: pd.DataFrame,
+    interface: HyperdriveReadInterface,
+    block_number: int,
 ) -> pd.Series:
     """Calculate closeout value of agent positions.
 
     Arguments
     ---------
-    current_wallet: pd.DataFrame
+    current_positions: pd.DataFrame
         A dataframe resulting from `get_current_wallet` that describes the current wallet position.
     checkpoint_info: pd.DataFrame
         A dataframe resulting from `get_checkpoint_info` that describes all checkpoints.
     interface: HyperdriveReadInterface
-        The hyperdrive read interface
+        The hyperdrive read interface.
+    block_number: int
+        The block number to calculate closeout value on.
 
     Returns
     -------
     pd.Series
-        A series matching the current_wallet input that contains the values of each position
+        A series matching the current_wallet input that contains the values of each position.
     """
 
     # Sanity check, the block number across all current wallets should be identical
-    assert len(current_wallet) > 0
-    assert current_wallet["block_number"].nunique() == 1
+    assert len(current_positions) > 0
+    assert current_positions["block_number"].nunique() == 1
 
     # Get the pool state at this position
-    block_number = int(current_wallet["block_number"].iloc[0])
+    block_number = int(current_positions["block_number"].iloc[0])
     hyperdrive_state = interface.get_hyperdrive_state(interface.get_block(block_number))
 
     # Prepare the checkpoint info dataframe for lookups based on checkpoint time
-    checkpoint_share_prices = checkpoint_info.set_index("checkpoint_time")["vault_share_price"]
+    checkpoint_share_prices = checkpoint_info.set_index("checkpoint_time")["checkpoint_vault_share_price"]
 
-    # Calculate pnl per row of dataframe
-    return current_wallet.apply(
+    # Calculate closeout value per row of dataframe
+    return current_positions.apply(
         calc_single_closeout,  # type: ignore
         interface=interface,
         hyperdrive_state=hyperdrive_state,
         checkpoint_share_prices=checkpoint_share_prices,
         axis=1,
     )
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/dashboard/build_fixed_rate.py` & `agent0-0.20.0/src/agent0/chainsync/dashboard/build_fixed_rate.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/chainsync/dashboard/build_ohlcv.py` & `agent0-0.20.0/src/agent0/chainsync/dashboard/build_ohlcv.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/chainsync/dashboard/build_outstanding_positions.py` & `agent0-0.20.0/src/agent0/chainsync/dashboard/build_outstanding_positions.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/chainsync/dashboard/build_variable_rate.py` & `agent0-0.20.0/src/agent0/chainsync/dashboard/build_variable_rate.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-"""Builds the variable rate dataframe to be plotted"""
+"""Builds the variable rate dataframe to be plotted."""
 
 import pandas as pd
 
 
 def build_variable_rate(pool_info: pd.DataFrame) -> pd.DataFrame:
     """Gets the proper columns from pool info for plotting variable rate.
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/dashboard/plot_fixed_rate.py` & `agent0-0.20.0/src/agent0/chainsync/dashboard/plot_fixed_rate.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/chainsync/dashboard/plot_ohlcv.py` & `agent0-0.20.0/src/agent0/chainsync/dashboard/plot_ohlcv.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/chainsync/dashboard/plot_outstanding_positions.py` & `agent0-0.20.0/src/agent0/chainsync/dashboard/plot_outstanding_positions.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/chainsync/dashboard/plot_utils.py` & `agent0-0.20.0/src/agent0/chainsync/dashboard/plot_utils.py`

 * *Files 12% similar despite different names*

```diff
@@ -29,13 +29,15 @@
 
     # Filter out rows with no change
     plot_data_diff = plot_data[y_column_name].diff()
 
     # We always keep the first and last rows
     # Diff always puts the first row as nan,
     # we explicitly set the last row as nan
-    plot_data_diff.iloc[-1] = float("nan")
+    if len(plot_data_diff) > 0:
+        # pandas doesn't play nice with types
+        plot_data_diff.iloc[-1] = float("nan")  # type: ignore
 
     # Filter out intermediate rows with no difference
     # Note that nans will always not equal 0
     plot_data_idx = plot_data_diff != 0
     return plot_data[plot_data_idx]
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/dashboard/usernames.py` & `agent0-0.20.0/src/agent0/chainsync/dashboard/usernames.py`

 * *Files 5% similar despite different names*

```diff
@@ -3,52 +3,48 @@
 from __future__ import annotations
 
 from typing import overload
 
 import pandas as pd
 
 
-def build_user_mapping(
-    addresses: pd.Series, addr_to_username: pd.DataFrame, username_to_user: pd.DataFrame
-) -> pd.DataFrame:
-    """Given a pd.Series of wallet addresses, we build a corresponding dataframe that contains
+def build_user_mapping(addresses: pd.Series, addr_to_username: pd.DataFrame) -> pd.DataFrame:
+    """Builds a mapping from wallet addresses to usernames and any additional aliases
+    that address may have.
+
+    Given a pd.Series of wallet addresses, we build a corresponding dataframe that contains
     the mapping between that wallet address and any additional aliases that address may have.
     Specifically, the output dataframe contains the following columns:
         address: The original wallet address
         abbr_address: The wallet address abbreviated (e.g., 0x0000...0000)
         username: The one-to-one mapped username for that address gathered from the `addr_to_username` postgres table
-        user: The many username to one user gathered from the `username_to_user` postgres table
         format_name: A formatted name for labels combining username with abbr_address
 
     If the address doesn't exist in the lookup, the username and user will reflect the abbr_address.
 
     Arguments
     ---------
     addresses: pd.Series
         The list of addresses to build the user map for.
     addr_to_username: pd.DataFrame
         The mapping of addresses to username returned from `get_addr_to_username`.
-    username_to_user: pd.DataFrame
-        The mapping of usernames to user returned from `get_username_to_user`.
 
     Returns
     -------
     pd.Dataframe
-        A dataframe with 5 columns (address, abbr_address, username, user, format_name)
+        A dataframe with 4 columns (address, abbr_address, username, format_name)
     """
     # Create dataframe from input
     out = addresses.to_frame().copy()
     out.columns = ["address"]
     out["abbr_address"] = abbreviate_address(out["address"])
 
     out = out.merge(addr_to_username, how="left", left_on="address", right_on="address")
-    out = out.merge(username_to_user, how="left", left_on="username", right_on="username")
     # Fill user/username with abbr_username if address doesn't exist in the lookup
     out["username"] = out["username"].fillna(out["abbr_address"])
-    out["user"] = out["user"].fillna(out["username"])
 
     # Generate formatted name
     # TODO there is a case where the format name is not unique
     out["format_name"] = out["username"] + " - " + out["abbr_address"]
     return out
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/db/base/interface.py` & `agent0-0.20.0/src/agent0/chainsync/db/base/interface.py`

 * *Files 17% similar despite different names*

```diff
@@ -4,24 +4,24 @@
 
 import logging
 import time
 from typing import Type, cast
 
 import pandas as pd
 import sqlalchemy
-from sqlalchemy import URL, Column, Engine, MetaData, String, Table, create_engine, exc, func, inspect
+from sqlalchemy import Column, Engine, MetaData, String, Table, create_engine, exc, func, inspect
 from sqlalchemy.exc import OperationalError
 from sqlalchemy.ext.declarative import declared_attr
 from sqlalchemy.orm import Session, sessionmaker
 from sqlalchemy.sql import text
 from sqlalchemy_utils import create_database, database_exists
 
 from agent0.chainsync import PostgresConfig, build_postgres_config
 
-from .schema import AddrToUsername, Base, UsernameToUser
+from .schema import AddrToUsername, Base
 
 # classes for sqlalchemy that define table schemas have no methods.
 # pylint: disable=too-few-public-methods
 
 
 def query_tables(session: Session) -> list[str]:
     """Return a list of tables in the database.
@@ -73,22 +73,15 @@
     -------
     Engine
         The initialized engine object connected to postgres
     """
     if postgres_config is None:
         postgres_config = build_postgres_config()
 
-    url_object = URL.create(
-        drivername="postgresql+psycopg",
-        username=postgres_config.POSTGRES_USER,
-        password=postgres_config.POSTGRES_PASSWORD,
-        host=postgres_config.POSTGRES_HOST,
-        port=postgres_config.POSTGRES_PORT,
-        database=postgres_config.POSTGRES_DB,
-    )
+    url_object = postgres_config.create_url_obj()
     engine = create_engine(url_object)
 
     if ensure_database_created:
         exception = None
         for _ in range(10):
             try:
                 if not database_exists(engine.url):
@@ -195,23 +188,23 @@
     username: str, addresses: list[str] | str, session: Session, user_suffix: str = "", force_update: bool = False
 ) -> None:
     """Add username mapping to postgres during agent initialization.
 
     Arguments
     ---------
     username: str
-        The logical username to attach to the wallet address
+        The logical username to attach to the wallet address.
     addresses: list[str] | str
-        A single or list of wallet addresses to map to the username
+        A single or list of wallet addresses to map to the username.
     session: Session
-        The initialized session object
+        The initialized session object.
     user_suffix: str
-        An optional suffix to add to the username mapping
+        An optional suffix to add to the username mapping.
     force_update: bool
-        If true and an existing username is found, will overwrite
+        If true and an existing mapping is found, will overwrite.
     """
     if isinstance(addresses, str):
         addresses = [addresses]
     username = username + user_suffix
 
     for address in addresses:
         # Below is a best effort check against the database to see if the address is registered to another username
@@ -236,54 +229,14 @@
     try:
         session.commit()
     except exc.DataError as err:
         logging.error("DB Error adding user: %s", err)
         raise err
 
 
-def add_username_to_user(user: str, username: str, session: Session, force_update: bool = False) -> None:
-    """Add username mapping to postgres during agent initialization.
-
-    Arguments
-    ---------
-    user: str
-        The single user to attach a username to
-    username: str
-        A single or list of wallet addresses to map to the username
-    session: Session
-        The initialized session object
-    force_update: bool
-        If true and an existing username is found, will overwrite
-    """
-    # Below is a best effort check against the database to see if the address is registered to another username
-    # This is best effort because there's a race condition here, e.g.,
-    # I read (address_1, user_1), someone else writes (address_1, user_2), I write (address_1, user_1)
-    # Because the call below is a `merge`, the final entry in the db is (address_1, user_1).
-    existing_user = get_username_to_user(session, username)
-    if len(existing_user) == 0:
-        # user doesn't exist, all good
-        pass
-    elif len(existing_user) == 1:
-        existing_user = existing_user.iloc[0]["user"]
-        if existing_user != user and not force_update:
-            raise ValueError(f"{username=} already registered to {existing_user}")
-    else:
-        # Should never be more than one address in table
-        raise ValueError("Fatal error: postgres returning multiple entries for primary key")
-
-    # This merge adds the row if not exist (keyed by address), otherwise will overwrite with this entry
-    session.merge(UsernameToUser(username=username, user=user))
-
-    try:
-        session.commit()
-    except exc.DataError as err:
-        logging.error("DB Error adding user: %s", err)
-        raise err
-
-
 def get_addr_to_username(session: Session, address: str | None = None) -> pd.DataFrame:
     """Get all usermapping and returns as a pandas dataframe.
 
     Arguments
     ---------
     session: Session
         The initialized session object
@@ -297,35 +250,14 @@
     """
     query = session.query(AddrToUsername)
     if address is not None:
         query = query.filter(AddrToUsername.address == address)
     return pd.read_sql(query.statement, con=session.connection())
 
 
-def get_username_to_user(session: Session, username: str | None = None) -> pd.DataFrame:
-    """Get all usermapping and returns as a pandas dataframe.
-
-    Arguments
-    ---------
-    session: Session
-        The initialized session object
-    username: str | None, optional
-        The username to filter the results on. Return all if None
-
-    Returns
-    -------
-    DataFrame
-        A DataFrame that consists of the queried pool config data
-    """
-    query = session.query(UsernameToUser)
-    if username is not None:
-        query = query.filter(UsernameToUser.username == username)
-    return pd.read_sql(query.statement, con=session.connection())
-
-
 class TableWithBlockNumber(Base):
     """An abstract table that has block_number"""
 
     __abstract__ = True
 
     @declared_attr
     def block_number(self) -> Column:
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/db/base/schema_test.py` & `agent0-0.20.0/src/agent0/chainsync/db/base/schema_test.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 """CRUD tests for UserMap"""
 
 import pytest
 
-from .schema import AddrToUsername, UsernameToUser
+from .schema import AddrToUsername
 
 
 class TestAddrToUsernameTable:
     """CRUD tests for AddrToUsername table"""
 
     @pytest.mark.docker
     def test_create_addr_to_username(self, db_session):
@@ -40,48 +40,7 @@
         db_session.commit()
 
         db_session.delete(user_map)
         db_session.commit()
 
         deleted_map = db_session.query(AddrToUsername).filter_by(address="1").first()
         assert deleted_map is None
-
-
-class TestUsernameToUserTable:
-    """CRUD tests for UsernameToUser table"""
-
-    @pytest.mark.docker
-    def test_create_username_to_user(self, db_session):
-        """Create and entry"""
-        user_map = UsernameToUser(username="a", user="1")
-        db_session.add(user_map)
-        db_session.commit()
-
-        retrieved_map = db_session.query(UsernameToUser).filter_by(username="a").first()
-        assert retrieved_map is not None
-        assert retrieved_map.user == "1"
-
-    @pytest.mark.docker
-    def test_update_username_to_user(self, db_session):
-        """Update an entry"""
-        user_map = UsernameToUser(username="a", user="1")
-        db_session.add(user_map)
-        db_session.commit()
-
-        user_map.user = "2"
-        db_session.commit()
-
-        updated_map = db_session.query(UsernameToUser).filter_by(username="a").first()
-        assert updated_map.user == "2"
-
-    @pytest.mark.docker
-    def test_delete_username_to_user(self, db_session):
-        """Delete an entry"""
-        user_map = UsernameToUser(username="a", user="1")
-        db_session.add(user_map)
-        db_session.commit()
-
-        db_session.delete(user_map)
-        db_session.commit()
-
-        deleted_map = db_session.query(UsernameToUser).filter_by(username="a").first()
-        assert deleted_map is None
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/__init__.py` & `agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/__init__.py`

 * *Files 15% similar despite different names*

```diff
@@ -1,43 +1,28 @@
 """Hyperdrive database utilities."""
 
-from .chain_to_db import data_chain_to_db, init_data_chain_to_db
-from .convert_data import (
-    convert_checkpoint_info,
-    convert_hyperdrive_transactions_for_block,
-    convert_pool_config,
-    convert_pool_info,
-)
+from .chain_to_db import checkpoint_events_to_db, data_chain_to_db, init_data_chain_to_db, trade_events_to_db
+from .convert_data import convert_pool_config, convert_pool_info
 from .import_export_data import export_db_to_file, import_to_db, import_to_pandas
 from .interface import (
     add_checkpoint_info,
+    add_hyperdrive_addr_to_name,
     add_pool_config,
     add_pool_infos,
-    add_transactions,
-    add_wallet_deltas,
+    add_trade_events,
     get_all_traders,
     get_checkpoint_info,
-    get_current_wallet,
-    get_latest_block_number_from_analysis_table,
+    get_current_positions,
+    get_hyperdrive_addr_to_name,
+    get_latest_block_number_from_checkpoint_info_table,
     get_latest_block_number_from_pool_info_table,
+    get_latest_block_number_from_positions_snapshot_table,
     get_latest_block_number_from_table,
-    get_pool_analysis,
     get_pool_config,
     get_pool_info,
-    get_ticker,
-    get_total_wallet_pnl_over_time,
-    get_transactions,
-    get_wallet_deltas,
-    get_wallet_pnl,
-    get_wallet_positions_over_time,
-)
-from .schema import (
-    CheckpointInfo,
-    CurrentWallet,
-    HyperdriveTransaction,
-    PoolAnalysis,
-    PoolConfig,
-    PoolInfo,
-    Ticker,
-    WalletDelta,
-    WalletPNL,
+    get_position_snapshot,
+    get_positions_over_time,
+    get_realized_value_over_time,
+    get_total_pnl_over_time,
+    get_trade_events,
 )
+from .schema import CheckpointInfo, HyperdriveAddrToName, PoolConfig, PoolInfo, PositionSnapshot
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/import_export_data_test.py` & `agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/import_export_data_test.py`

 * *Files 9% similar despite different names*

```diff
@@ -15,15 +15,15 @@
     """Testing export and import data for precision"""
 
     @pytest.mark.docker
     def test_export_import(self, db_session):
         """Testing retrieval of transaction via interface"""
         # Write data to database
         # Ensuring decimal format gets preserved
-        pool_config = PoolConfig(contract_address="0", initial_vault_share_price=Decimal("3.22222222222222"))
+        pool_config = PoolConfig(hyperdrive_address="0", initial_vault_share_price=Decimal("3.22222222222222"))
         add_pool_config(pool_config, db_session)
         # We need pool config as a dataframe, so we read it from the db here
         pool_config_in = get_pool_config(db_session, coerce_float=False)
 
         # Create a temporary directory
         with TemporaryDirectory() as temp_data_dir:
             export_db_to_file(temp_data_dir, db_session)
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/interface.py` & `agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/interface.py`

 * *Files 27% similar despite different names*

```diff
@@ -1,94 +1,376 @@
 """Utilities for hyperdrive related postgres interactions."""
 
 from __future__ import annotations
 
 import logging
 
 import pandas as pd
-from sqlalchemy import exc, func
+from sqlalchemy import cast, exc, func
 from sqlalchemy.orm import Session
 
 from agent0.chainsync.db.base import get_latest_block_number_from_table
-from agent0.ethpy.hyperdrive import BASE_TOKEN_SYMBOL
 
 from .schema import (
+    FIXED_NUMERIC,
     CheckpointInfo,
-    CurrentWallet,
-    HyperdriveTransaction,
-    PoolAnalysis,
+    HyperdriveAddrToName,
     PoolConfig,
     PoolInfo,
-    Ticker,
-    WalletDelta,
-    WalletPNL,
+    PositionSnapshot,
+    TradeEvent,
 )
 
 
-def add_transactions(transactions: list[HyperdriveTransaction], session: Session) -> None:
-    """Add transactions to the poolinfo table.
+# Pool Addr Mapping Name
+def add_hyperdrive_addr_to_name(
+    name: str, hyperdrive_address: str, session: Session, force_update: bool = False
+) -> None:
+    """Add username mapping to postgres during agent initialization.
+
+    Arguments
+    ---------
+    name: str
+        The logical name to attach to the wallet address.
+    hyperdrive_address: str
+        A hyperdrive address to map to the name.
+    session: Session
+        The initialized session object.
+    force_update: bool
+        If true and an existing mapping is found, will overwrite.
+    """
+    # Below is a best effort check against the database to see if the address is registered to another name.
+    # This is best effort because there's a race condition here, e.g.,
+    # I read (address_1, name_1), someone else writes (address_1, name_2), I write (address_1, name_1)
+    # Because the call below is a `merge`, the final entry in the db is (address_1, name_1).
+    existing_map = get_hyperdrive_addr_to_name(session, hyperdrive_address)
+    if len(existing_map) == 0:
+        # Address doesn't exist, all good
+        pass
+    elif len(existing_map) == 1:
+        existing_name = existing_map.iloc[0]["name"]
+        if existing_name != name and not force_update:
+            raise ValueError(f"Address {hyperdrive_address=} already registered to {existing_name}")
+    else:
+        # Should never be more than one address in table
+        raise ValueError("Fatal error: postgres returning multiple entries for primary key")
+
+    # This merge adds the row if not exist (keyed by address), otherwise will overwrite with this entry
+    session.merge(HyperdriveAddrToName(hyperdrive_address=hyperdrive_address, name=name))
+
+    try:
+        session.commit()
+    except exc.DataError as err:
+        logging.error("DB Error adding user: %s", err)
+        raise err
+
+
+def get_hyperdrive_addr_to_name(session: Session, hyperdrive_address: str | None = None) -> pd.DataFrame:
+    """Get all usermapping and returns as a pandas dataframe.
 
     Arguments
     ---------
-    transactions: list[HyperdriveTransaction]
-        A list of HyperdriveTransaction objects to insert into postgres
     session: Session
         The initialized session object
+    hyperdrive_address: str | None, optional
+        The hyperdrive address to filter the results on. Return all if None
+
+    Returns
+    -------
+    DataFrame
+        A DataFrame that consists of the queried pool config data
+    """
+    query = session.query(HyperdriveAddrToName)
+    if hyperdrive_address is not None:
+        query = query.filter(HyperdriveAddrToName.hyperdrive_address == hyperdrive_address)
+    return pd.read_sql(query.statement, con=session.connection())
+
+
+# Event Data Ingestion Interface
+
+
+def add_trade_events(transfer_events: list[TradeEvent], session: Session) -> None:
+    """Add transfer events to the transfer events table.
+
+    This function is only used for injecting rows into the db.
+    The actual ingestion happens via `trade_events_to_db` using dataframes.
+
+    Arguments
+    ---------
+    transfer_events: list[HyperdriveTransferEvent]
+        A list of HyperdriveTransferEvent objects to insert into postgres.
+    session: Session
+        The initialized session object.
     """
-    for transaction in transactions:
-        session.add(transaction)
+    for transfer_event in transfer_events:
+        session.add(transfer_event)
     try:
         session.commit()
     except exc.DataError as err:
         session.rollback()
         logging.error("Error adding transaction: %s", err)
         raise err
 
 
-def get_pool_config(session: Session, contract_address: str | None = None, coerce_float=True) -> pd.DataFrame:
-    """Get all pool config and returns as a pandas dataframe.
+def get_latest_block_number_from_trade_event(
+    session: Session,
+    hyperdrive_address: str | None,
+    wallet_address: str | None,
+) -> int:
+    """Get the latest block number based on the hyperdrive events table in the db.
 
     Arguments
     ---------
     session: Session
-        The initialized session object
-    contract_address: str | None, optional
-        The contract_address to filter the results on. Return all if None
+        The initialized session object.
+    hyperdrive_address: str | None
+        The hyperdrive address to filter the results on. Can be None to return latest block number
+        regardless of pool.
+    wallet_address: str | None
+        The wallet address to filter the results on. Can be None to return latest block number
+        regardless of wallet.
+
+    Returns
+    -------
+    int
+        The latest block number in the hyperdrive_events table.
+    """
+
+    query = session.query(func.max(TradeEvent.block_number))
+    if wallet_address is not None:
+        query = query.filter(TradeEvent.wallet_address == wallet_address)
+    if hyperdrive_address is not None:
+        query = query.filter(TradeEvent.hyperdrive_address == hyperdrive_address)
+    query = query.scalar()
+
+    if query is None:
+        return 0
+    return int(query)
+
+
+def get_latest_block_number_from_positions_snapshot_table(
+    session: Session, wallet_addr: str | None, hyperdrive_address: str | None
+) -> int:
+    """Get the latest block number based on the positions snapshot table in the db.
+
+    Arguments
+    ---------
+    session: Session
+        The initialized session object.
+    wallet_addr: str | None
+        The wallet address to filter the results on. Can be None to return latest block number
+        regardless of wallet.
+    hyperdrive_address: str | None
+        The hyperdrive address to filter the results on. Can be None to return latest block number
+        regardless of pool.
+
+    Returns
+    -------
+    int
+        The latest block number in the hyperdrive_events table.
+    """
+
+    query = session.query(func.max(PositionSnapshot.block_number))
+    if wallet_addr is not None:
+        query = query.filter(PositionSnapshot.wallet_address == wallet_addr)
+    if hyperdrive_address is not None:
+        query = query.filter(PositionSnapshot.hyperdrive_address == hyperdrive_address)
+    query = query.scalar()
+
+    if query is None:
+        return 0
+    return int(query)
+
+
+def get_trade_events(
+    session: Session,
+    wallet_address: str | list[str] | None = None,
+    hyperdrive_address: str | None = None,
+    all_token_deltas: bool = True,
+    sort_ascending: bool = True,
+    query_limit: int | None = None,
+    coerce_float=False,
+) -> pd.DataFrame:
+    """Get all trade events and returns a pandas dataframe.
+
+    Arguments
+    ---------
+    session: Session
+        The initialized db session object.
+    wallet_address: str | list[str] | None, optional
+        The wallet address(es) to filter the results on. Return all if None.
+    hyperdrive_address: str | None, optional
+        The hyperdrive address to filter the results on. Returns all if None.
+    all_token_deltas: bool, optional
+        When removing liquidity that results in withdrawal shares, the events table returns
+        two entries for this transaction to keep track of token deltas (one for lp tokens and
+        one for withdrawal shares). If this flag is True, will return all entries in the table,
+        which is useful for calculating token positions. If False, will drop the duplicate
+        withdrawal share entry (useful for returning a ticker). Defaults to True.
+    sort_ascending: bool, optional
+        If True, will sort events in ascending block order. Otherwise, will sort in descending order.
+        Defaults to True.
+    query_limit: int | None, optional
+        The number of rows to return. Defaults to return all rows.
+    coerce_float: bool, optional
+        If True, will return floats in dataframe. Otherwise, will return fixed point Decimal.
+        Defaults to False.
+
+    Returns
+    -------
+    DataFrame
+        A DataFrame that consists of the queried trade events data.
+    """
+    # pylint: disable=too-many-arguments
+
+    query = session.query(TradeEvent)
+
+    if isinstance(wallet_address, list):
+        query = query.filter(TradeEvent.wallet_address.in_(wallet_address))
+    elif wallet_address is not None:
+        query = query.filter(TradeEvent.wallet_address == wallet_address)
+
+    if hyperdrive_address is not None:
+        query = query.filter(TradeEvent.hyperdrive_address == hyperdrive_address)
+    if not all_token_deltas:
+        # Drop the duplicate events
+        query = query.filter(
+            ~((TradeEvent.event_type == "RemoveLiquidity") & (TradeEvent.token_id == "WITHDRAWAL_SHARE"))
+        )
+
+    # Always sort by block in order
+    if sort_ascending:
+        query = query.order_by(TradeEvent.block_number)
+    else:
+        query = query.order_by(TradeEvent.block_number.desc())
+
+    if query_limit is not None:
+        query = query.limit(query_limit)
+
+    return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
+
+
+def get_current_positions(
+    session: Session,
+    wallet_addr: str | None = None,
+    hyperdrive_address: str | None = None,
+    query_block: int | None = None,
+    show_closed_positions: bool = False,
+    coerce_float=False,
+) -> pd.DataFrame:
+    """Gets all positions for a given wallet address.
+
+    Arguments
+    ---------
+    session: Session
+        The initialized db session object.
+    wallet_addr: str
+        The wallet address to filter the results on.
+    hyperdrive_address: str | None, optional
+        The hyperdrive address to filter the results on. Returns all if None.
+    query_block: int | None, optional
+        The block to get positions for. query_block integers
+        matches python slicing notation, e.g., list[:3], list[:-3].
+    show_closed_positions: bool, optional
+        Whether to show positions closed positions (i.e., positions with zero balance). Defaults to False.
+        When False, will only return currently open positions. Useful for gathering currently open positions.
+        When True, will also return any closed positions. Useful for calculating overall pnl of all positions.
     coerce_float: bool
-        If True, will coerce all numeric columns to float
+        If True, will coerce all numeric columns to float.
 
     Returns
     -------
     DataFrame
-        A DataFrame that consists of the queried pool config data
+        A DataFrame that consists of the queried pool info data.
+    """
+    # pylint: disable=too-many-arguments
+
+    query = session.query(
+        TradeEvent.hyperdrive_address,
+        TradeEvent.wallet_address,
+        TradeEvent.token_id,
+        # We use max in lieu of a "first" or "last" function in sqlalchemy
+        func.max(TradeEvent.token_type).label("token_type"),
+        func.max(TradeEvent.maturity_time).label("maturity_time"),
+        func.sum(TradeEvent.token_delta).label("token_balance"),
+        # Convert to base here
+        # We explicitly cast to our defined numeric type to truncate to 18 decimal places.
+        cast(
+            func.sum(TradeEvent.base_delta + (TradeEvent.vault_share_delta * TradeEvent.vault_share_price)),
+            FIXED_NUMERIC,
+        ).label("realized_value"),
+        func.max(TradeEvent.block_number).label("last_balance_update_block"),
+    )
+
+    if (query_block is not None) and (query_block < 0):
+        query_block = get_latest_block_number_from_table(TradeEvent, session) + query_block + 1
+
+    if query_block is not None:
+        query = query.filter(TradeEvent.block_number < query_block)
+
+    if wallet_addr is not None:
+        query = query.filter(TradeEvent.wallet_address == wallet_addr)
+
+    if hyperdrive_address is not None:
+        query = query.filter(TradeEvent.hyperdrive_address == hyperdrive_address)
+
+    query = query.group_by(TradeEvent.hyperdrive_address, TradeEvent.wallet_address, TradeEvent.token_id)
+    out_df = pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
+    # Filter out zero balances
+    if not show_closed_positions:
+        out_df = out_df[out_df["token_balance"] != 0].reset_index(drop=True).copy()
+    return out_df
+
+
+# Chain To Data Ingestion Interface
+
+
+def get_pool_config(session: Session, hyperdrive_address: str | None = None, coerce_float=False) -> pd.DataFrame:
+    """Get all pool config and returns a pandas dataframe.
+
+    Arguments
+    ---------
+    session: Session
+        The initialized session object.
+    hyperdrive_address: str | None, optional
+        The contract_address to filter the results on. Return all if None. Defaults to returning all.
+    coerce_float: bool, optional
+        If True, will coerce all numeric columns to float. Defaults to False.
+
+    Returns
+    -------
+    DataFrame
+        A DataFrame that consists of the queried pool config data.
     """
     query = session.query(PoolConfig)
-    if contract_address is not None:
-        query = query.filter(PoolConfig.contract_address == contract_address)
+    if hyperdrive_address is not None:
+        query = query.filter(PoolConfig.hyperdrive_address == hyperdrive_address)
     return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
 
 
 def add_pool_config(pool_config: PoolConfig, session: Session) -> None:
     """Add pool config to the pool config table if not exist.
 
     Verify pool config if it does exist.
 
     Arguments
     ---------
     pool_config: PoolConfig
-        A PoolConfig object to insert into postgres
+        A PoolConfig object to insert into postgres.
     session: Session
-        The initialized session object
+        The initialized session object.
     """
     # NOTE the logic below is not thread safe, i.e., a race condition can exists
     # if multiple threads try to add pool config at the same time
     # This function is being called by acquire_data.py, which should only have one
     # instance per db, so no need to worry about it here
     # Since we're doing a direct equality comparison, we don't want to coerce into floats here
-    existing_pool_config = get_pool_config(session, contract_address=pool_config.contract_address, coerce_float=False)
+    existing_pool_config = get_pool_config(
+        session, hyperdrive_address=pool_config.hyperdrive_address, coerce_float=False
+    )
     if len(existing_pool_config) == 0:
         session.add(pool_config)
         try:
             session.commit()
         except exc.DataError as err:
             session.rollback()
             logging.error("Error adding pool_config: %s", err)
@@ -109,141 +391,101 @@
 
 def add_pool_infos(pool_infos: list[PoolInfo], session: Session) -> None:
     """Add a pool info to the poolinfo table.
 
     Arguments
     ---------
     pool_infos: list[PoolInfo]
-        A list of PoolInfo objects to insert into postgres
+        A list of PoolInfo objects to insert into postgres.
     session: Session
-        The initialized session object
+        The initialized session object.
     """
     for pool_info in pool_infos:
         session.add(pool_info)
     try:
         session.commit()
     except exc.DataError as err:
         session.rollback()
         logging.error("Error adding pool_infos: %s", err)
         raise err
 
 
 def add_checkpoint_info(checkpoint_info: CheckpointInfo, session: Session) -> None:
     """Add checkpoint info to the checkpointinfo table if it doesn't exist.
 
+    This function is only used for injecting rows into the db.
+    The actual ingestion happens via `checkpoint_events_to_db` using dataframes.
+
     Arguments
     ---------
     checkpoint_info: CheckpointInfo
-        A CheckpointInfo object to insert into postgres
+        A CheckpointInfo object to insert into postgres.
     session: Session
-        The initialized session object
+        The initialized session object.
     """
-    # NOTE the logic below is not thread safe, i.e., a race condition can exists
-    # if multiple threads try to add checkpoint info at the same time
-    # This function is being called by acquire_data.py, which should only have one
-    # instance per db, so no need to worry about it here
-    # Since we're doing a direct equality comparison, we don't want to coerce into floats here
-    existing_checkpoint_info = get_checkpoint_info(session, checkpoint_info.checkpoint_time, coerce_float=False)
-    if len(existing_checkpoint_info) == 0:
-        session.add(checkpoint_info)
-        try:
-            session.commit()
-        except exc.DataError as err:
-            session.rollback()
-            logging.error("Error adding checkpoint info: %s", err)
-            raise err
-    elif len(existing_checkpoint_info) == 1:
-        # Verify checkpoint info
-        for key in CheckpointInfo.__annotations__.keys():
-            new_value = getattr(checkpoint_info, key)
-            old_value = existing_checkpoint_info.loc[0, key]
-            if new_value != old_value:
-                raise ValueError(f"Adding checkpoint info field: key {key} doesn't match ({new_value=}, {old_value=})")
-    else:
-        # Should never get here, checkpoint time is primary_key, which is unique
-        raise ValueError
-
-
-def add_wallet_deltas(wallet_deltas: list[WalletDelta], session: Session) -> None:
-    """Add wallet deltas to the walletdelta table.
 
-    Arguments
-    ---------
-    wallet_deltas: list[WalletDelta]
-        A list of WalletDelta objects to insert into postgres
-    session: Session
-        The initialized session object
-    """
-    for wallet_delta in wallet_deltas:
-        session.add(wallet_delta)
+    session.add(checkpoint_info)
     try:
         session.commit()
     except exc.DataError as err:
         session.rollback()
-        logging.error("Error in adding wallet_deltas: %s", err)
+        logging.error("Error adding transaction: %s", err)
         raise err
 
 
 def get_latest_block_number_from_pool_info_table(session: Session) -> int:
     """Get the latest block number based on the pool info table in the db.
 
     Arguments
     ---------
     session: Session
-        The initialized session object
+        The initialized session object.
 
     Returns
     -------
     int
-        The latest block number in the poolinfo table
+        The latest block number in the poolinfo table.
     """
     return get_latest_block_number_from_table(PoolInfo, session)
 
 
-def get_latest_block_number_from_analysis_table(session: Session) -> int:
-    """Get the latest block number based on the pool info table in the db.
-
-    Arguments
-    ---------
-    session: Session
-        The initialized session object
-
-    Returns
-    -------
-    int
-        The latest block number in the poolinfo table
-    """
-    return get_latest_block_number_from_table(PoolAnalysis, session)
-
-
 def get_pool_info(
-    session: Session, start_block: int | None = None, end_block: int | None = None, coerce_float=True
+    session: Session,
+    hyperdrive_address: str | None = None,
+    start_block: int | None = None,
+    end_block: int | None = None,
+    coerce_float=False,
 ) -> pd.DataFrame:
-    """Get all pool info and returns as a pandas dataframe.
+    """Get all pool info and returns a pandas dataframe.
 
     Arguments
     ---------
     session: Session
-        The initialized session object
+        The initialized session object.
+    hyperdrive_address: str | None, optional
+        The hyperdrive address to filter the query on. Return all if None.
     start_block: int | None, optional
         The starting block to filter the query on. start_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
+        matches python slicing notation, e.g., list[:3], list[:-3].
     end_block: int | None, optional
         The ending block to filter the query on. end_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
+        matches python slicing notation, e.g., list[:3], list[:-3].
     coerce_float: bool, optional
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
+        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal.
 
     Returns
     -------
     DataFrame
-        A DataFrame that consists of the queried pool info data
+        A DataFrame that consists of the queried pool info data.
     """
     query = session.query(PoolInfo)
 
+    if hyperdrive_address is not None:
+        query = query.filter(PoolInfo.hyperdrive_address == hyperdrive_address)
+
     # Support for negative indices
     if (start_block is not None) and (start_block < 0):
         start_block = get_latest_block_number_from_pool_info_table(session) + start_block + 1
     if (end_block is not None) and (end_block < 0):
         end_block = get_latest_block_number_from_pool_info_table(session) + end_block + 1
 
     if start_block is not None:
@@ -253,581 +495,335 @@
 
     # Always sort by time in order
     query = query.order_by(PoolInfo.timestamp)
 
     return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
 
 
-def get_transactions(
-    session: Session,
-    start_block: int | None = None,
-    end_block: int | None = None,
-    coerce_float=True,
-) -> pd.DataFrame:
-    """Get all transactions and returns as a pandas dataframe.
+def get_latest_block_number_from_checkpoint_info_table(session: Session, hyperdrive_address: str | None) -> int:
+    """Get the latest block number based on the checkpoint info table in the db.
 
     Arguments
     ---------
     session: Session
-        The initialized session object
-    start_block: int | None
-        The starting block to filter the query on. start_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
-    end_block: int | None
-        The ending block to filter the query on. end_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
-    coerce_float: bool
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
+        The initialized session object.
+    hyperdrive_address: str | None
+        The hyperdrive pool address to filter the query on.
 
     Returns
     -------
-    DataFrame
-        A DataFrame that consists of the queried transactions data
+    int
+        The latest block number in the poolinfo table.
     """
-    query = session.query(HyperdriveTransaction)
+    query = session.query(func.max(CheckpointInfo.block_number))
+    if hyperdrive_address is not None:
+        query = query.filter(CheckpointInfo.hyperdrive_address == hyperdrive_address)
+    query = query.scalar()
 
-    # Support for negative indices
-    if (start_block is not None) and (start_block < 0):
-        start_block = get_latest_block_number_from_table(HyperdriveTransaction, session) + start_block + 1
-    if (end_block is not None) and (end_block < 0):
-        end_block = get_latest_block_number_from_table(HyperdriveTransaction, session) + end_block + 1
-
-    if start_block is not None:
-        query = query.filter(HyperdriveTransaction.block_number >= start_block)
-    if end_block is not None:
-        query = query.filter(HyperdriveTransaction.block_number < end_block)
-
-    return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
+    if query is None:
+        return 0
+    return int(query)
 
 
-def get_checkpoint_info(session: Session, checkpoint_time: int | None = None, coerce_float=True) -> pd.DataFrame:
+def get_checkpoint_info(
+    session: Session, hyperdrive_address: str | None = None, checkpoint_time: int | None = None, coerce_float=False
+) -> pd.DataFrame:
     """Get all info associated with a given checkpoint.
 
-    This includes
-    - `checkpoint_time`: The time index of the checkpoint.
-    - `vault_share_price`: The share price of the first transaction in the checkpoint.
-
     Arguments
     ---------
     session: Session
-        The initialized session object
+        The initialized session object.
+    hyperdrive_address: str | None, optional
+        The hyperdrive pool address to filter the query on. Defaults to returning all checkpoint infos.
     checkpoint_time: int | None, optional
         The checkpoint time to filter the query on. Defaults to returning all checkpoint infos.
-    coerce_float: bool
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
+    coerce_float: bool, optional
+        If True, will return floats in dataframe. Otherwise, will return fixed point Decimal.
+        Defaults to False
 
     Returns
     -------
     DataFrame
-        A DataFrame that consists of the queried checkpoint info
+        A DataFrame that consists of the queried checkpoint info.
     """
     query = session.query(CheckpointInfo)
 
+    if hyperdrive_address is not None:
+        query = query.filter(CheckpointInfo.hyperdrive_address == hyperdrive_address)
+
     if checkpoint_time is not None:
         query = query.filter(CheckpointInfo.checkpoint_time == checkpoint_time)
 
     # Always sort by time in order
     query = query.order_by(CheckpointInfo.checkpoint_time)
 
     return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
 
 
-def get_wallet_deltas(
-    session: Session,
-    start_block: int | None = None,
-    end_block: int | None = None,
-    return_timestamp: bool = True,
-    coerce_float=True,
-) -> pd.DataFrame:
-    """Get all wallet_delta data in history and returns as a pandas dataframe.
-
-    Arguments
-    ---------
-    session: Session
-        The initialized session object
-    start_block: int | None, optional
-        The starting block to filter the query on. start_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
-    end_block: int | None, optional
-        The ending block to filter the query on. end_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
-    return_timestamp: bool, optional
-        Gets timestamps when looking at pool analysis. Defaults to True
-    coerce_float: bool
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
-
-    Returns
-    -------
-    DataFrame
-        A DataFrame that consists of the queried wallet info data
-    """
-    if return_timestamp:
-        query = session.query(PoolInfo.timestamp, WalletDelta)
-    else:
-        query = session.query(WalletDelta)
-
-    # Support for negative indices
-    if (start_block is not None) and (start_block < 0):
-        start_block = get_latest_block_number_from_table(WalletDelta, session) + start_block + 1
-    if (end_block is not None) and (end_block < 0):
-        end_block = get_latest_block_number_from_table(WalletDelta, session) + end_block + 1
-
-    if start_block is not None:
-        query = query.filter(WalletDelta.block_number >= start_block)
-    if end_block is not None:
-        query = query.filter(WalletDelta.block_number < end_block)
-
-    if return_timestamp:
-        # query from PoolInfo the timestamp
-        query = query.join(PoolInfo, WalletDelta.block_number == PoolInfo.block_number)
-
-    return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
-
-
-def get_all_traders(
-    session: Session, start_block: int | None = None, end_block: int | None = None, coerce_float=True
-) -> pd.Series:
-    """Get the list of all traders from the WalletInfo table.
+def get_all_traders(session: Session, hyperdrive_address: str | None = None) -> pd.Series:
+    """Get the list of all traders from the TradeEvent table.
 
     Arguments
     ---------
     session: Session
-        The initialized session object
-    start_block: int | None, optional
-        The starting block to filter the query on. start_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
-    end_block: int | None, optional
-        The ending block to filter the query on. end_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
-    coerce_float: bool
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
+        The initialized session object.
+    hyperdrive_address: str | None, optional
+        The hyperdrive pool address to filter the query on. Defaults to returning all traders.
 
     Returns
     -------
-    list[str]
-        A list of addresses that have made a trade
+    pd.Series
+        A list of addresses that have made a trade.
     """
-    query = session.query(WalletDelta.wallet_address)
-    # Support for negative indices
-    if (start_block is not None) and (start_block < 0):
-        start_block = get_latest_block_number_from_table(WalletDelta, session) + start_block + 1
-    if (end_block is not None) and (end_block < 0):
-        end_block = get_latest_block_number_from_table(WalletDelta, session) + end_block + 1
-
-    if start_block is not None:
-        query = query.filter(WalletDelta.block_number >= start_block)
-    if end_block is not None:
-        query = query.filter(WalletDelta.block_number < end_block)
-
+    query = session.query(TradeEvent.wallet_address)
+    if hyperdrive_address is not None:
+        query = query.filter(TradeEvent.hyperdrive_address == hyperdrive_address)
     if query is None:
         return pd.Series([])
     query = query.distinct()
 
-    results = pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
+    results = pd.read_sql(query.statement, con=session.connection(), coerce_float=False)
 
     return results["wallet_address"]
 
 
 # Analysis schema interfaces
 
 
-def add_current_wallet(current_wallet: list[CurrentWallet], session: Session) -> None:
-    """Add wallet info to the walletinfo table.
-
-    Arguments
-    ---------
-    current_wallet: list[CurrentWallet]
-        A list of CurrentWallet objects to insert into postgres
-    session: Session
-        The initialized session object
-    """
-    for wallet in current_wallet:
-        session.add(wallet)
-    try:
-        session.commit()
-    except exc.DataError as err:
-        session.rollback()
-        logging.error("Error on adding wallet_infos: %s", err)
-        raise err
-
-
-def get_current_wallet(
+# Lots of arguments, most are defaults
+# pylint: disable=too-many-arguments
+def get_position_snapshot(
     session: Session,
+    hyperdrive_address: str | None = None,
+    start_block: int | None = None,
     end_block: int | None = None,
-    wallet_address: list[str] | None = None,
-    coerce_float=True,
-    raw: bool = False,
+    wallet_address: list[str] | str | None = None,
+    coerce_float=False,
 ) -> pd.DataFrame:
-    """Get all current wallet data in history and returns as a pandas dataframe.
+    """Get all position snapshot data and returns a pandas dataframe.
 
     Arguments
     ---------
     session: Session
-        The initialized session object
+        The initialized session object.
+    hyperdrive_address: str | None, optional
+        The hyperdrive pool address to filter the query on. Defaults to returning all position snapshots.
+    start_block: int | None, optional
+        The starting block to filter the query on. start_block integers
+        matches python slicing notation, e.g., list[:3], list[:-3].
+        Defaults to first entry.
     end_block: int | None, optional
         The ending block to filter the query on. end_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
+        matches python slicing notation, e.g., list[:3], list[:-3].
+        Defaults to last entry.
     wallet_address: list[str] | None, optional
-        The wallet addresses to filter the query on
-    coerce_float: bool
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
-    raw: bool
-        If true, will return the raw data without any adjustments.
+        The wallet addresses to filter the query on. Returns all if None.
+    coerce_float: bool, optional
+        If True, will return floats in dataframe. Otherwise, will return fixed point Decimal.
+        Defaults to False.
 
     Returns
     -------
     DataFrame
-        A DataFrame that consists of the queried wallet info data
+        A DataFrame that consists of the queried pool info data.
     """
-    # TODO this function might not scale, as it's looking across all blocks from the beginning of time
-    # Ways to improve: add indexes on wallet_address, token_type, block_number
-
-    # Postgres SQL query (this one is fast, but isn't supported by sqlite)
-    # select distinct on (wallet_address, token_type) * from CurrentWallet
-    # order by block_number DESC;
-    # This query selects distinct wallet_address and token_type from current wallets,
-    # selecting only the first entry of each group. Since we order each group by descending block_number,
-    # this first entry is the latest entry of block_number.
-
-    # Generic SQL query (this one is slow, but is database agnostic)
+    query = session.query(PositionSnapshot)
 
-    query = session.query(CurrentWallet)
+    if hyperdrive_address is not None:
+        query = query.filter(PositionSnapshot.hyperdrive_address == hyperdrive_address)
 
-    # Support for negative indices
+    latest_block = get_latest_block_number_from_table(PositionSnapshot, session)
+    if start_block is None:
+        start_block = 0
     if end_block is None:
-        end_block = get_latest_block_number_from_table(CurrentWallet, session) + 1
-
-    elif end_block < 0:
-        end_block = get_latest_block_number_from_table(CurrentWallet, session) + end_block + 1
-
-    if wallet_address is not None:
-        query = query.filter(CurrentWallet.wallet_address.in_(wallet_address))
-
-    query = query.filter(CurrentWallet.block_number < end_block)
-    query = query.distinct(CurrentWallet.wallet_address, CurrentWallet.token_type)
-    query = query.order_by(CurrentWallet.wallet_address, CurrentWallet.token_type, CurrentWallet.block_number.desc())
-    current_wallet = pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
-    if raw:
-        return current_wallet
-
-    # Rename block_number column to be latest_block_update, and set the new block_number to be the query block
-    current_wallet["latest_block_update"] = current_wallet["block_number"]
-    current_wallet["block_number"] = end_block - 1
-
-    # Drop id, as id is autofilled when inserting
-    current_wallet = current_wallet.drop("id", axis=1)
-
-    # filter non-base zero positions here
-    has_value = current_wallet["value"] > 0
-    is_base = current_wallet["token_type"] == BASE_TOKEN_SYMBOL
-
-    return current_wallet[has_value | is_base].copy()
-
-
-def get_pool_analysis(
-    session: Session,
-    start_block: int | None = None,
-    end_block: int | None = None,
-    return_timestamp: bool = True,
-    coerce_float=True,
-) -> pd.DataFrame:
-    """Get all pool analysis and returns as a pandas dataframe.
-
-    Arguments
-    ---------
-    session: Session
-        The initialized session object
-    start_block: int | None, optional
-        The starting block to filter the query on. start_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
-    end_block: int | None, optional
-        The ending block to filter the query on. end_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
-    return_timestamp: bool, optional
-        Gets timestamps when looking at pool analysis. Defaults to True
-    coerce_float: bool
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
-
-    Returns
-    -------
-    DataFrame
-        A DataFrame that consists of the queried pool info data
-    """
-    if return_timestamp:
-        query = session.query(PoolInfo.timestamp, PoolAnalysis)
-    else:
-        query = session.query(PoolAnalysis)
+        end_block = latest_block + 1
 
     # Support for negative indices
-    if (start_block is not None) and (start_block < 0):
-        start_block = get_latest_block_number_from_table(PoolAnalysis, session) + start_block + 1
-    if (end_block is not None) and (end_block < 0):
-        end_block = get_latest_block_number_from_table(PoolAnalysis, session) + end_block + 1
-
-    if start_block is not None:
-        query = query.filter(PoolAnalysis.block_number >= start_block)
-    if end_block is not None:
-        query = query.filter(PoolAnalysis.block_number < end_block)
+    if start_block < 0:
+        start_block = latest_block + start_block + 1
+    if end_block < 0:
+        end_block = latest_block + end_block + 1
 
-    if return_timestamp:
-        # query from PoolInfo the timestamp
-        query = query.join(PoolInfo, PoolAnalysis.block_number == PoolInfo.block_number)
+    query = query.filter(PositionSnapshot.block_number >= start_block)
+    query = query.filter(PositionSnapshot.block_number < end_block)
+    if isinstance(wallet_address, list):
+        query = query.filter(PositionSnapshot.wallet_address.in_(wallet_address))
+    elif wallet_address is not None:
+        query = query.filter(PositionSnapshot.wallet_address == wallet_address)
 
     # Always sort by block in order
-    query = query.order_by(PoolAnalysis.block_number)
+    query = query.order_by(PositionSnapshot.block_number)
 
     return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
 
 
-def get_ticker(
+def get_total_pnl_over_time(
     session: Session,
     start_block: int | None = None,
     end_block: int | None = None,
     wallet_address: list[str] | None = None,
-    max_rows: int | None = None,
-    sort_desc: bool | None = False,
-    coerce_float=True,
+    coerce_float=False,
 ) -> pd.DataFrame:
-    """Get all pool analysis and returns as a pandas dataframe.
+    """Aggregate pnl over time over all positions a wallet has.
 
     Arguments
     ---------
     session: Session
-        The initialized session object
+        The initialized session object.
     start_block: int | None, optional
         The starting block to filter the query on. start_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
+        matches python slicing notation, e.g., list[:3], list[:-3].
     end_block: int | None, optional
         The ending block to filter the query on. end_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
+        matches python slicing notation, e.g., list[:3], list[:-3].
     wallet_address: list[str] | None, optional
-        The wallet addresses to filter the query on
-    max_rows: int | None
-        The number of rows to return. If None, will return all rows
-    sort_desc: bool, optional
-        If true, will sort in descending order
+        The wallet addresses to filter the query on. Returns all if None.
     coerce_float: bool
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
+        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal.
 
     Returns
     -------
     DataFrame
-        A DataFrame that consists of the queried pool info data
+        A DataFrame that consists of the queried pool info data.
     """
-    # pylint: disable=too-many-arguments
-    query = session.query(Ticker)
+    # TODO add optional argument of hyperdrive address to not aggregate across pools.
+    query = session.query(
+        PositionSnapshot.wallet_address,
+        PositionSnapshot.block_number,
+        func.sum(PositionSnapshot.pnl).label("pnl"),
+    )
 
     # Support for negative indices
     if (start_block is not None) and (start_block < 0):
-        start_block = get_latest_block_number_from_table(Ticker, session) + start_block + 1
+        start_block = get_latest_block_number_from_table(PositionSnapshot, session) + start_block + 1
     if (end_block is not None) and (end_block < 0):
-        end_block = get_latest_block_number_from_table(Ticker, session) + end_block + 1
+        end_block = get_latest_block_number_from_table(PositionSnapshot, session) + end_block + 1
 
     if start_block is not None:
-        query = query.filter(Ticker.block_number >= start_block)
+        query = query.filter(PositionSnapshot.block_number >= start_block)
     if end_block is not None:
-        query = query.filter(Ticker.block_number < end_block)
-
-    if wallet_address is not None:
-        query = query.filter(Ticker.wallet_address.in_(wallet_address))
-
-    # Always sort by block in order
-    # NOTE this affects which results get returned if max_rows is set
-    if sort_desc:
-        query = query.order_by(Ticker.block_number.desc())
-    else:
-        query = query.order_by(Ticker.block_number)
-
-    if max_rows is not None:
-        query = query.limit(max_rows)
-
-    return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
-
-
-# Lots of arguments, most are defaults
-# pylint: disable=too-many-arguments
-def get_wallet_pnl(
-    session: Session,
-    start_block: int | None = None,
-    end_block: int | None = None,
-    wallet_address: list[str] | None = None,
-    return_timestamp: bool = True,
-    coerce_float=True,
-) -> pd.DataFrame:
-    """Get all wallet pnl and returns as a pandas dataframe.
-
-    Arguments
-    ---------
-    session: Session
-        The initialized session object
-    start_block: int | None, optional
-        The starting block to filter the query on. start_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
-    end_block: int | None, optional
-        The ending block to filter the query on. end_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
-    wallet_address: list[str] | None, optional
-        The wallet addresses to filter the query on. Returns all if None.
-    return_timestamp: bool, optional
-        Returns the timestamp from the pool info table if True. Defaults to True.
-    coerce_float: bool
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
-
-    Returns
-    -------
-    DataFrame
-        A DataFrame that consists of the queried pool info data
-    """
-    if return_timestamp:
-        query = session.query(PoolInfo.timestamp, WalletPNL)
-    else:
-        query = session.query(WalletPNL)
-
-    latest_block = get_latest_block_number_from_table(WalletDelta, session)
-    if start_block is None:
-        start_block = 0
-    if end_block is None:
-        end_block = latest_block + 1
-
-    # Support for negative indices
-    if start_block < 0:
-        start_block = latest_block + start_block + 1
-    if end_block < 0:
-        end_block = latest_block + end_block + 1
-
-    query = query.filter(WalletPNL.block_number >= start_block)
-    query = query.filter(WalletPNL.block_number < end_block)
+        query = query.filter(PositionSnapshot.block_number < end_block)
     if wallet_address is not None:
-        query = query.filter(WalletPNL.wallet_address.in_(wallet_address))
+        query = query.filter(PositionSnapshot.wallet_address.in_(wallet_address))
 
-    if return_timestamp:
-        # query from PoolInfo the timestamp
-        query = query.join(PoolInfo, WalletPNL.block_number == PoolInfo.block_number)
+    query = query.group_by(PositionSnapshot.wallet_address, PositionSnapshot.block_number)
 
     # Always sort by block in order
-    query = query.order_by(WalletPNL.block_number)
+    query = query.order_by(PositionSnapshot.block_number)
 
     return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
 
 
-def get_total_wallet_pnl_over_time(
+def get_positions_over_time(
     session: Session,
     start_block: int | None = None,
     end_block: int | None = None,
     wallet_address: list[str] | None = None,
-    coerce_float=True,
+    coerce_float=False,
 ) -> pd.DataFrame:
-    """Get total pnl across wallets over time and returns as a pandas dataframe.
+    """Aggregate over token types over all position types.
 
     Arguments
     ---------
     session: Session
-        The initialized session object
+        The initialized session object.
     start_block: int | None, optional
         The starting block to filter the query on. start_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
+        matches python slicing notation, e.g., list[:3], list[:-3].
     end_block: int | None, optional
         The ending block to filter the query on. end_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
+        matches python slicing notation, e.g., list[:3], list[:-3].
     wallet_address: list[str] | None, optional
         The wallet addresses to filter the query on. Returns all if None.
     coerce_float: bool
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
+        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal.
 
     Returns
     -------
     DataFrame
-        A DataFrame that consists of the queried pool info data
+        A DataFrame that consists of the queried pool info data.
     """
-    # Do a subquery that groups wallet pnl by address and block
-    # Not sure why func.sum is not callable, but it is
-    subquery = session.query(
-        WalletPNL.wallet_address,
-        WalletPNL.block_number,
-        func.sum(WalletPNL.pnl).label("pnl"),  # pylint: disable=not-callable
+    query = session.query(
+        PositionSnapshot.wallet_address,
+        PositionSnapshot.block_number,
+        PositionSnapshot.token_type,
+        func.sum(PositionSnapshot.token_balance).label("token_balance"),
     )
 
     # Support for negative indices
     if (start_block is not None) and (start_block < 0):
-        start_block = get_latest_block_number_from_table(WalletPNL, session) + start_block + 1
+        start_block = get_latest_block_number_from_table(PositionSnapshot, session) + start_block + 1
     if (end_block is not None) and (end_block < 0):
-        end_block = get_latest_block_number_from_table(WalletPNL, session) + end_block + 1
+        end_block = get_latest_block_number_from_table(PositionSnapshot, session) + end_block + 1
 
     if start_block is not None:
-        subquery = subquery.filter(WalletPNL.block_number >= start_block)
+        query = query.filter(PositionSnapshot.block_number >= start_block)
     if end_block is not None:
-        subquery = subquery.filter(WalletPNL.block_number < end_block)
+        query = query.filter(PositionSnapshot.block_number < end_block)
+
     if wallet_address is not None:
-        subquery = subquery.filter(WalletPNL.wallet_address.in_(wallet_address))
+        query = query.filter(PositionSnapshot.wallet_address.in_(wallet_address))
 
-    subquery = subquery.group_by(WalletPNL.wallet_address, WalletPNL.block_number)
+    query = query.group_by(PositionSnapshot.wallet_address, PositionSnapshot.block_number, PositionSnapshot.token_type)
 
     # Always sort by block in order
-    subquery = subquery.order_by(WalletPNL.block_number).subquery()
-
-    # Additional query to join timestamp to block number
-    query = session.query(PoolInfo.timestamp, subquery)
-    query = query.join(PoolInfo, subquery.c.block_number == PoolInfo.block_number)
+    query = query.order_by(PositionSnapshot.block_number)
 
     return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
 
 
-def get_wallet_positions_over_time(
+def get_realized_value_over_time(
     session: Session,
     start_block: int | None = None,
     end_block: int | None = None,
     wallet_address: list[str] | None = None,
-    coerce_float=True,
+    coerce_float=False,
 ) -> pd.DataFrame:
-    """Get wallet positions over time and returns as a pandas dataframe.
+    """Aggregate over realized value over all position types.
 
     Arguments
     ---------
     session: Session
-        The initialized session object
+        The initialized session object.
     start_block: int | None, optional
         The starting block to filter the query on. start_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
+        matches python slicing notation, e.g., list[:3], list[:-3].
     end_block: int | None, optional
         The ending block to filter the query on. end_block integers
-        matches python slicing notation, e.g., list[:3], list[:-3]
+        matches python slicing notation, e.g., list[:3], list[:-3].
     wallet_address: list[str] | None, optional
         The wallet addresses to filter the query on. Returns all if None.
     coerce_float: bool
-        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal
+        If true, will return floats in dataframe. Otherwise, will return fixed point Decimal.
 
     Returns
     -------
     DataFrame
-        A DataFrame that consists of the queried pool info data
+        A DataFrame that consists of the queried pool info data.
     """
-    # Not sure why func.sum is not callable, but it is
-    subquery = session.query(
-        WalletPNL.wallet_address,
-        WalletPNL.block_number,
-        WalletPNL.base_token_type,
-        func.sum(WalletPNL.value).label("value"),  # pylint: disable=not-callable
+    query = session.query(
+        PositionSnapshot.wallet_address,
+        PositionSnapshot.block_number,
+        func.sum(PositionSnapshot.realized_value).label("realized_value"),
     )
 
     # Support for negative indices
     if (start_block is not None) and (start_block < 0):
-        start_block = get_latest_block_number_from_table(WalletPNL, session) + start_block + 1
+        start_block = get_latest_block_number_from_table(PositionSnapshot, session) + start_block + 1
     if (end_block is not None) and (end_block < 0):
-        end_block = get_latest_block_number_from_table(WalletPNL, session) + end_block + 1
+        end_block = get_latest_block_number_from_table(PositionSnapshot, session) + end_block + 1
 
     if start_block is not None:
-        subquery = subquery.filter(WalletPNL.block_number >= start_block)
+        query = query.filter(PositionSnapshot.block_number >= start_block)
     if end_block is not None:
-        subquery = subquery.filter(WalletPNL.block_number < end_block)
-    if wallet_address is not None:
-        subquery = subquery.filter(WalletPNL.wallet_address.in_(wallet_address))
+        query = query.filter(PositionSnapshot.block_number < end_block)
 
-    subquery = subquery.group_by(WalletPNL.wallet_address, WalletPNL.block_number, WalletPNL.base_token_type).subquery()
+    if wallet_address is not None:
+        query = query.filter(PositionSnapshot.wallet_address.in_(wallet_address))
 
-    # query from PoolInfo the timestamp
-    query = session.query(PoolInfo.timestamp, subquery)
-    query = query.join(PoolInfo, subquery.c.block_number == PoolInfo.block_number)
+    query = query.group_by(PositionSnapshot.wallet_address, PositionSnapshot.block_number)
 
     # Always sort by block in order
-    query = query.order_by(PoolInfo.timestamp)
+    query = query.order_by(PositionSnapshot.block_number)
 
     return pd.read_sql(query.statement, con=session.connection(), coerce_float=coerce_float)
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/interface_test.py` & `agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/interface_test.py`

 * *Files 27% similar despite different names*

```diff
@@ -2,262 +2,285 @@
 
 from datetime import datetime
 from decimal import Decimal
 
 import numpy as np
 import pytest
 
-from agent0.chainsync.db.base import get_latest_block_number_from_table
-from agent0.ethpy.hyperdrive import BASE_TOKEN_SYMBOL
-
 from .interface import (
     add_checkpoint_info,
-    add_current_wallet,
+    add_hyperdrive_addr_to_name,
     add_pool_config,
     add_pool_infos,
-    add_transactions,
-    add_wallet_deltas,
+    add_trade_events,
     get_all_traders,
     get_checkpoint_info,
-    get_current_wallet,
+    get_hyperdrive_addr_to_name,
     get_latest_block_number_from_pool_info_table,
-    get_latest_block_number_from_table,
+    get_latest_block_number_from_trade_event,
     get_pool_config,
     get_pool_info,
-    get_transactions,
-    get_wallet_deltas,
 )
-from .schema import CheckpointInfo, CurrentWallet, HyperdriveTransaction, PoolConfig, PoolInfo, WalletDelta
+from .schema import CheckpointInfo, PoolConfig, PoolInfo, TradeEvent
 
 
-# These tests are using fixtures defined in conftest.py
-class TestTransactionInterface:
-    """Testing postgres interface for transaction table"""
+class TestHyperdriveAddrToName:
+    """Testing postgres interface for usermap table"""
 
     @pytest.mark.docker
-    def test_latest_block_number(self, db_session):
-        """Testing retrieval of transaction via interface"""
-        transaction_1 = HyperdriveTransaction(block_number=1, transaction_hash="a", event_value=Decimal("3.0"))
-        add_transactions([transaction_1], db_session)
-
-        latest_block_number = get_latest_block_number_from_table(HyperdriveTransaction, db_session)
-        assert latest_block_number == 1
-
-        transaction_2 = HyperdriveTransaction(block_number=2, transaction_hash="b", event_value=Decimal("3.2"))
-        transaction_3 = HyperdriveTransaction(block_number=3, transaction_hash="c", event_value=Decimal("3.4"))
-        add_transactions([transaction_2, transaction_3], db_session)
-
-        latest_block_number = get_latest_block_number_from_table(HyperdriveTransaction, db_session)
-        assert latest_block_number == 3
-
-    @pytest.mark.docker
-    def test_get_transactions(self, db_session):
-        """Testing retrieval of transactions via interface"""
-        transaction_1 = HyperdriveTransaction(block_number=0, transaction_hash="a", event_value=Decimal("3.1"))
-        transaction_2 = HyperdriveTransaction(block_number=1, transaction_hash="b", event_value=Decimal("3.2"))
-        transaction_3 = HyperdriveTransaction(block_number=2, transaction_hash="c", event_value=Decimal("3.3"))
-        add_transactions([transaction_1, transaction_2, transaction_3], db_session)
-
-        transactions_df = get_transactions(db_session)
-        np.testing.assert_array_equal(transactions_df["event_value"], [3.1, 3.2, 3.3])
-
-    @pytest.mark.docker
-    def test_block_query_transactions(self, db_session):
-        """Testing querying by block number of transactions via interface"""
-        transaction_1 = HyperdriveTransaction(block_number=0, transaction_hash="a", event_value=Decimal("3.1"))
-        transaction_2 = HyperdriveTransaction(block_number=1, transaction_hash="b", event_value=Decimal("3.2"))
-        transaction_3 = HyperdriveTransaction(block_number=2, transaction_hash="c", event_value=Decimal("3.3"))
-        add_transactions([transaction_1, transaction_2, transaction_3], db_session)
-
-        transactions_df = get_transactions(db_session, start_block=1)
-        np.testing.assert_array_equal(transactions_df["event_value"], [3.2, 3.3])
-
-        transactions_df = get_transactions(db_session, start_block=-1)
-        np.testing.assert_array_equal(transactions_df["event_value"], [3.3])
-
-        transactions_df = get_transactions(db_session, end_block=1)
-        np.testing.assert_array_equal(transactions_df["event_value"], [3.1])
-
-        transactions_df = get_transactions(db_session, end_block=-1)
-        np.testing.assert_array_equal(transactions_df["event_value"], [3.1, 3.2])
+    def test_get_addr_to_username(self, db_session):
+        """Testing retrieval of usernames via interface"""
+        name_1 = "a"
+        address_1 = "1"
+        add_hyperdrive_addr_to_name(name=name_1, hyperdrive_address=address_1, session=db_session)
+        name_2 = "b"
+        address_2 = "2"
+        add_hyperdrive_addr_to_name(name=name_2, hyperdrive_address=address_2, session=db_session)
+        name_3 = "c"
+        address_3 = "3"
+        add_hyperdrive_addr_to_name(name=name_3, hyperdrive_address=address_3, session=db_session)
+
+        map_df = get_hyperdrive_addr_to_name(db_session)
+        assert len(map_df) == 3
+        # Sort by usernames, then address to ensure order
+        map_df = map_df.sort_values(["name", "hyperdrive_address"], axis=0)
+        np.testing.assert_array_equal(map_df["name"], ["a", "b", "c"])
+        np.testing.assert_array_equal(map_df["hyperdrive_address"], ["1", "2", "3"])
+
+    @pytest.mark.docker
+    def test_get_query_address(self, db_session):
+        """Testing querying by address of addr_to_username via interface"""
+        name_1 = "a"
+        address_1 = "1"
+        add_hyperdrive_addr_to_name(name=name_1, hyperdrive_address=address_1, session=db_session)
+        name_2 = "b"
+        address_2 = "2"
+        add_hyperdrive_addr_to_name(name=name_2, hyperdrive_address=address_2, session=db_session)
+        name_3 = "c"
+        address_3 = "3"
+        add_hyperdrive_addr_to_name(name=name_3, hyperdrive_address=address_3, session=db_session)
+
+        user_map_df = get_hyperdrive_addr_to_name(db_session, hyperdrive_address="1")
+        np.testing.assert_array_equal(user_map_df["name"], ["a"])
+        user_map_df = get_hyperdrive_addr_to_name(db_session, hyperdrive_address="2")
+        np.testing.assert_array_equal(user_map_df["name"], ["b"])
+        user_map_df = get_hyperdrive_addr_to_name(db_session, hyperdrive_address="3")
+        np.testing.assert_array_equal(user_map_df["name"], ["c"])
+
+    @pytest.mark.docker
+    def test_addr_to_username_insertion_error(self, db_session):
+        """Testing insertion conflicts of addr_to_username via interface"""
+        name_1 = "a"
+        address_1 = "1"
+        add_hyperdrive_addr_to_name(name=name_1, hyperdrive_address=address_1, session=db_session)
+
+        # Adding the same addresses with the same username should pass
+        name_2 = "a"
+        address_2 = "1"
+        add_hyperdrive_addr_to_name(name=name_2, hyperdrive_address=address_2, session=db_session)
+
+        map_df = get_hyperdrive_addr_to_name(db_session)
+        assert len(map_df) == 1
+
+        # Sort by usernames, then address to ensure order
+        map_df = map_df.sort_values(["name", "hyperdrive_address"], axis=0)
+        np.testing.assert_array_equal(map_df["name"], ["a"])
+        np.testing.assert_array_equal(map_df["hyperdrive_address"], ["1"])
+
+        # Adding the same addresses with different username should fail
+        # The add_addr_to_username is all or nothing, so if one fails, all fails
+        name_3 = "b"
+        address_3 = "1"
+        with pytest.raises(ValueError):
+            add_hyperdrive_addr_to_name(name=name_3, hyperdrive_address=address_3, session=db_session)
 
-        transactions_df = get_transactions(db_session, start_block=1, end_block=-1)
-        np.testing.assert_array_equal(transactions_df["event_value"], [3.2])
+        # Final db values shouldn't change
+        map_df = get_hyperdrive_addr_to_name(db_session)
+        assert len(map_df) == 1
+        # Sort by usernames, then address to ensure order
+        map_df = map_df.sort_values(["name", "hyperdrive_address"], axis=0)
+        np.testing.assert_array_equal(map_df["name"], ["a"])
+        np.testing.assert_array_equal(map_df["hyperdrive_address"], ["1"])
+
+    @pytest.mark.docker
+    def test_addr_to_username_force_insertion(self, db_session):
+        """Testing force insertion of addr_to_username via interface"""
+        name_1 = "a"
+        address_1 = "1"
+        add_hyperdrive_addr_to_name(name=name_1, hyperdrive_address=address_1, session=db_session)
+
+        # Force update
+        name_2 = "b"
+        address_2 = "1"
+        add_hyperdrive_addr_to_name(name=name_2, hyperdrive_address=address_2, session=db_session, force_update=True)
+
+        map_df = get_hyperdrive_addr_to_name(db_session)
+        assert len(map_df) == 1
+
+        # Sort by usernames, then address to ensure order
+        map_df = map_df.sort_values(["name", "hyperdrive_address"], axis=0)
+        np.testing.assert_array_equal(map_df["name"], ["b"])
+        np.testing.assert_array_equal(map_df["hyperdrive_address"], ["1"])
 
 
+# These tests are using fixtures defined in conftest.py
 class TestCheckpointInterface:
     """Testing postgres interface for checkpoint table"""
 
     @pytest.mark.docker
     def test_get_checkpoints(self, db_session):
         """Testing retrieval of checkpoints via interface"""
         checkpoint_time_1 = 100
         checkpoint_time_2 = 1000
         checkpoint_time_3 = 10000
-        checkpoint_1 = CheckpointInfo(checkpoint_time=checkpoint_time_1)
-        checkpoint_2 = CheckpointInfo(checkpoint_time=checkpoint_time_2)
-        checkpoint_3 = CheckpointInfo(checkpoint_time=checkpoint_time_3)
+        checkpoint_1 = CheckpointInfo(checkpoint_time=checkpoint_time_1, hyperdrive_address="a", block_number=1)
+        checkpoint_2 = CheckpointInfo(checkpoint_time=checkpoint_time_2, hyperdrive_address="a", block_number=2)
+        checkpoint_3 = CheckpointInfo(checkpoint_time=checkpoint_time_3, hyperdrive_address="a", block_number=3)
         add_checkpoint_info(checkpoint_1, db_session)
         add_checkpoint_info(checkpoint_2, db_session)
         add_checkpoint_info(checkpoint_3, db_session)
 
         checkpoints_df = get_checkpoint_info(db_session)
         np.testing.assert_array_equal(
             np.array(checkpoints_df["checkpoint_time"].values),
             np.array([checkpoint_time_1, checkpoint_time_2, checkpoint_time_3]),
         )
 
     @pytest.mark.docker
     def test_checkpoint_time_query_checkpoints(self, db_session):
         """Testing querying by block number of checkpoints via interface"""
-        checkpoint_1 = CheckpointInfo(checkpoint_time=100, vault_share_price=Decimal("3.1"))
-        checkpoint_2 = CheckpointInfo(checkpoint_time=1000, vault_share_price=Decimal("3.2"))
-        checkpoint_3 = CheckpointInfo(checkpoint_time=10000, vault_share_price=Decimal("3.3"))
+        checkpoint_1 = CheckpointInfo(
+            checkpoint_time=100, hyperdrive_address="a", block_number=1, vault_share_price=Decimal("3.1")
+        )
+        checkpoint_2 = CheckpointInfo(
+            checkpoint_time=1000, hyperdrive_address="a", block_number=2, vault_share_price=Decimal("3.2")
+        )
+        checkpoint_3 = CheckpointInfo(
+            checkpoint_time=10000, hyperdrive_address="a", block_number=3, vault_share_price=Decimal("3.3")
+        )
         add_checkpoint_info(checkpoint_1, db_session)
         add_checkpoint_info(checkpoint_2, db_session)
         add_checkpoint_info(checkpoint_3, db_session)
 
-        checkpoints_df = get_checkpoint_info(db_session, checkpoint_time=100)
+        checkpoints_df = get_checkpoint_info(db_session, checkpoint_time=100, coerce_float=True)
         np.testing.assert_array_equal(checkpoints_df["vault_share_price"], [3.1])
 
-        checkpoints_df = get_checkpoint_info(db_session, checkpoint_time=1000)
+        checkpoints_df = get_checkpoint_info(db_session, checkpoint_time=1000, coerce_float=True)
         np.testing.assert_array_equal(checkpoints_df["vault_share_price"], [3.2])
 
-        checkpoints_df = get_checkpoint_info(db_session, checkpoint_time=10000)
+        checkpoints_df = get_checkpoint_info(db_session, checkpoint_time=10000, coerce_float=True)
         np.testing.assert_array_equal(checkpoints_df["vault_share_price"], [3.3])
 
-        checkpoints_df = get_checkpoint_info(db_session, checkpoint_time=222)
+        checkpoints_df = get_checkpoint_info(db_session, checkpoint_time=222, coerce_float=True)
         np.testing.assert_array_equal(checkpoints_df["vault_share_price"], [])
 
-    @pytest.mark.docker
-    def test_checkpoint_time_verify(self, db_session):
-        """Testing querying by block number of checkpoints via interface"""
-        checkpoint_1 = CheckpointInfo(checkpoint_time=100, vault_share_price=Decimal("3.1"))
-        add_checkpoint_info(checkpoint_1, db_session)
-        checkpoint_df_1 = get_checkpoint_info(db_session, coerce_float=False)
-        assert len(checkpoint_df_1) == 1
-        assert checkpoint_df_1.loc[0, "vault_share_price"] == Decimal("3.1")
-
-        # Nothing should happen if we give the same checkpoint info
-        checkpoint_2 = CheckpointInfo(checkpoint_time=100, vault_share_price=Decimal("3.1"))
-        add_checkpoint_info(checkpoint_2, db_session)
-        checkpoint_df_2 = get_checkpoint_info(db_session, coerce_float=False)
-        assert len(checkpoint_df_2) == 1
-        assert checkpoint_df_2.loc[0, "vault_share_price"] == Decimal("3.1")
-
-        # Adding a checkpoint info with the same checkpoint time with a different value
-        # should throw a value error
-        checkpoint_3 = CheckpointInfo(checkpoint_time=100, vault_share_price=Decimal("3.4"))
-        with pytest.raises(ValueError):
-            add_checkpoint_info(checkpoint_3, db_session)
-
 
 class TestPoolConfigInterface:
     """Testing postgres interface for poolconfig table"""
 
     @pytest.mark.docker
     def test_get_pool_config(self, db_session):
         """Testing retrieval of pool config via interface"""
-        pool_config_1 = PoolConfig(contract_address="0", initial_vault_share_price=Decimal("3.2"))
+        pool_config_1 = PoolConfig(hyperdrive_address="0", initial_vault_share_price=Decimal("3.2"))
         add_pool_config(pool_config_1, db_session)
 
-        pool_config_df_1 = get_pool_config(db_session)
+        pool_config_df_1 = get_pool_config(db_session, coerce_float=True)
         assert len(pool_config_df_1) == 1
         np.testing.assert_array_equal(pool_config_df_1["initial_vault_share_price"], np.array([3.2]))
 
-        pool_config_2 = PoolConfig(contract_address="1", initial_vault_share_price=Decimal("3.4"))
+        pool_config_2 = PoolConfig(hyperdrive_address="1", initial_vault_share_price=Decimal("3.4"))
         add_pool_config(pool_config_2, db_session)
 
-        pool_config_df_2 = get_pool_config(db_session)
+        pool_config_df_2 = get_pool_config(db_session, coerce_float=True)
         assert len(pool_config_df_2) == 2
         np.testing.assert_array_equal(pool_config_df_2["initial_vault_share_price"], np.array([3.2, 3.4]))
 
     @pytest.mark.docker
     def test_primary_id_query_pool_config(self, db_session):
         """Testing retrieval of pool config via interface"""
-        pool_config = PoolConfig(contract_address="0", initial_vault_share_price=Decimal("3.2"))
+        pool_config = PoolConfig(hyperdrive_address="0", initial_vault_share_price=Decimal("3.2"))
         add_pool_config(pool_config, db_session)
 
-        pool_config_df_1 = get_pool_config(db_session, contract_address="0")
+        pool_config_df_1 = get_pool_config(db_session, hyperdrive_address="0", coerce_float=True)
         assert len(pool_config_df_1) == 1
         assert pool_config_df_1.loc[0, "initial_vault_share_price"] == 3.2
 
-        pool_config_df_2 = get_pool_config(db_session, contract_address="1")
+        pool_config_df_2 = get_pool_config(db_session, hyperdrive_address="1", coerce_float=True)
         assert len(pool_config_df_2) == 0
 
     @pytest.mark.docker
     def test_pool_config_verify(self, db_session):
         """Testing retrieval of pool config via interface"""
-        pool_config_1 = PoolConfig(contract_address="0", initial_vault_share_price=Decimal("3.2"))
+        pool_config_1 = PoolConfig(hyperdrive_address="0", initial_vault_share_price=Decimal("3.2"))
         add_pool_config(pool_config_1, db_session)
-        pool_config_df_1 = get_pool_config(db_session)
+        pool_config_df_1 = get_pool_config(db_session, coerce_float=True)
         assert len(pool_config_df_1) == 1
         assert pool_config_df_1.loc[0, "initial_vault_share_price"] == 3.2
 
         # Nothing should happen if we give the same pool_config
-        pool_config_2 = PoolConfig(contract_address="0", initial_vault_share_price=Decimal("3.2"))
+        pool_config_2 = PoolConfig(hyperdrive_address="0", initial_vault_share_price=Decimal("3.2"))
         add_pool_config(pool_config_2, db_session)
-        pool_config_df_2 = get_pool_config(db_session)
+        pool_config_df_2 = get_pool_config(db_session, coerce_float=True)
         assert len(pool_config_df_2) == 1
         assert pool_config_df_2.loc[0, "initial_vault_share_price"] == 3.2
 
         # If we try to add another pool config with a different value, should throw a ValueError
-        pool_config_3 = PoolConfig(contract_address="0", initial_vault_share_price=Decimal("3.4"))
+        pool_config_3 = PoolConfig(hyperdrive_address="0", initial_vault_share_price=Decimal("3.4"))
         with pytest.raises(ValueError):
             add_pool_config(pool_config_3, db_session)
 
 
 class TestPoolInfoInterface:
     """Testing postgres interface for poolinfo table"""
 
     @pytest.mark.docker
     def test_latest_block_number(self, db_session):
         """Testing latest block number call"""
         timestamp_1 = datetime.fromtimestamp(1628472000)
-        pool_info_1 = PoolInfo(block_number=1, timestamp=timestamp_1)
+        pool_info_1 = PoolInfo(block_number=1, hyperdrive_address="a", timestamp=timestamp_1)
         add_pool_infos([pool_info_1], db_session)
 
         latest_block_number = get_latest_block_number_from_pool_info_table(db_session)
         assert latest_block_number == 1
 
         timestamp_1 = datetime.fromtimestamp(1628472002)
-        pool_info_1 = PoolInfo(block_number=2, timestamp=timestamp_1)
+        pool_info_1 = PoolInfo(block_number=2, hyperdrive_address="a", timestamp=timestamp_1)
         timestamp_2 = datetime.fromtimestamp(1628472004)
-        pool_info_2 = PoolInfo(block_number=3, timestamp=timestamp_2)
+        pool_info_2 = PoolInfo(block_number=3, hyperdrive_address="a", timestamp=timestamp_2)
         add_pool_infos([pool_info_1, pool_info_2], db_session)
 
         latest_block_number = get_latest_block_number_from_pool_info_table(db_session)
         assert latest_block_number == 3
 
     @pytest.mark.docker
     def test_get_pool_info(self, db_session):
         """Testing retrieval of pool info via interface"""
         timestamp_1 = datetime.fromtimestamp(1628472000)
-        pool_info_1 = PoolInfo(block_number=0, timestamp=timestamp_1)
+        pool_info_1 = PoolInfo(block_number=0, hyperdrive_address="a", timestamp=timestamp_1)
         timestamp_2 = datetime.fromtimestamp(1628472002)
-        pool_info_2 = PoolInfo(block_number=1, timestamp=timestamp_2)
+        pool_info_2 = PoolInfo(block_number=1, hyperdrive_address="a", timestamp=timestamp_2)
         timestamp_3 = datetime.fromtimestamp(1628472004)
-        pool_info_3 = PoolInfo(block_number=2, timestamp=timestamp_3)
+        pool_info_3 = PoolInfo(block_number=2, hyperdrive_address="a", timestamp=timestamp_3)
         add_pool_infos([pool_info_1, pool_info_2, pool_info_3], db_session)
 
         pool_info_df = get_pool_info(db_session)
         np.testing.assert_array_equal(
             np.array(pool_info_df["timestamp"].values),
             np.array([timestamp_1, timestamp_2, timestamp_3]).astype("datetime64[ns]"),
         )
 
     @pytest.mark.docker
     def test_block_query_pool_info(self, db_session):
         """Testing retrieval of pool info via interface"""
         timestamp_1 = datetime.fromtimestamp(1628472000)
-        pool_info_1 = PoolInfo(block_number=0, timestamp=timestamp_1)
+        pool_info_1 = PoolInfo(block_number=0, hyperdrive_address="a", timestamp=timestamp_1)
         timestamp_2 = datetime.fromtimestamp(1628472002)
-        pool_info_2 = PoolInfo(block_number=1, timestamp=timestamp_2)
+        pool_info_2 = PoolInfo(block_number=1, hyperdrive_address="a", timestamp=timestamp_2)
         timestamp_3 = datetime.fromtimestamp(1628472004)
-        pool_info_3 = PoolInfo(block_number=2, timestamp=timestamp_3)
+        pool_info_3 = PoolInfo(block_number=2, hyperdrive_address="a", timestamp=timestamp_3)
         add_pool_infos([pool_info_1, pool_info_2, pool_info_3], db_session)
         pool_info_df = get_pool_info(db_session, start_block=1)
         np.testing.assert_array_equal(
             np.array(pool_info_df["timestamp"].values), np.array([timestamp_2, timestamp_3]).astype("datetime64[ns]")
         )
         pool_info_df = get_pool_info(db_session, start_block=-1)
         np.testing.assert_array_equal(
@@ -273,131 +296,73 @@
         )
         pool_info_df = get_pool_info(db_session, start_block=1, end_block=-1)
         np.testing.assert_array_equal(
             np.array(pool_info_df["timestamp"].values), np.array([timestamp_2]).astype("datetime64[ns]")
         )
 
 
-class TestWalletDeltaInterface:
+class TestHyperdriveEventsInterface:
     """Testing postgres interface for walletinfo table"""
 
     @pytest.mark.docker
-    def test_latest_block_number(self, db_session):
+    def test_latest_block_number_on_wallet(self, db_session):
         """Testing retrieval of wallet info via interface"""
-        wallet_delta_1 = WalletDelta(block_number=1, transaction_hash="a", delta=Decimal("3.0"))
-        add_wallet_deltas([wallet_delta_1], db_session)
-        latest_block_number = get_latest_block_number_from_table(WalletDelta, db_session)
-        assert latest_block_number == 1
-        wallet_delta_2 = WalletDelta(block_number=2, transaction_hash="a", delta=Decimal("3.2"))
-        wallet_delta_3 = WalletDelta(block_number=3, transaction_hash="a", delta=Decimal("3.4"))
-        add_wallet_deltas([wallet_delta_2, wallet_delta_3], db_session)
-        latest_block_number = get_latest_block_number_from_table(WalletDelta, db_session)
-        assert latest_block_number == 3
-
-    @pytest.mark.docker
-    def test_get_wallet_delta(self, db_session):
-        """Testing retrievals of walletinfo via interface"""
-        wallet_delta_1 = WalletDelta(block_number=0, transaction_hash="a", delta=Decimal("3.1"))
-        wallet_delta_2 = WalletDelta(block_number=1, transaction_hash="a", delta=Decimal("3.2"))
-        wallet_delta_3 = WalletDelta(block_number=2, transaction_hash="a", delta=Decimal("3.3"))
-        add_wallet_deltas([wallet_delta_1, wallet_delta_2, wallet_delta_3], db_session)
-        # Since we're testing this in isolation without poolinfo, we can't return timestamp here
-        # otherwise no data is returned.
-        wallet_delta_df = get_wallet_deltas(db_session, return_timestamp=False)
-        np.testing.assert_array_equal(wallet_delta_df["delta"], np.array([3.1, 3.2, 3.3]))
-
-    @pytest.mark.docker
-    def test_block_query_wallet_delta(self, db_session):
-        """Testing querying by block number of wallet info via interface"""
-        wallet_delta_1 = WalletDelta(block_number=0, transaction_hash="a", delta=Decimal("3.1"))
-        wallet_delta_2 = WalletDelta(block_number=1, transaction_hash="a", delta=Decimal("3.2"))
-        wallet_delta_3 = WalletDelta(block_number=2, transaction_hash="a", delta=Decimal("3.3"))
-        add_wallet_deltas([wallet_delta_1, wallet_delta_2, wallet_delta_3], db_session)
-        wallet_delta_df = get_wallet_deltas(db_session, start_block=1, return_timestamp=False)
-        np.testing.assert_array_equal(wallet_delta_df["delta"], np.array([3.2, 3.3]))
-        wallet_delta_df = get_wallet_deltas(db_session, start_block=-1, return_timestamp=False)
-        np.testing.assert_array_equal(wallet_delta_df["delta"], np.array([3.3]))
-        wallet_delta_df = get_wallet_deltas(db_session, end_block=1, return_timestamp=False)
-        np.testing.assert_array_equal(wallet_delta_df["delta"], np.array([3.1]))
-        wallet_delta_df = get_wallet_deltas(db_session, end_block=-1, return_timestamp=False)
-        np.testing.assert_array_equal(wallet_delta_df["delta"], np.array([3.1, 3.2]))
-        wallet_delta_df = get_wallet_deltas(db_session, start_block=1, end_block=-1, return_timestamp=False)
-        np.testing.assert_array_equal(wallet_delta_df["delta"], np.array([3.2]))
-
-    @pytest.mark.docker
-    def test_get_agents(self, db_session):
-        """Testing helper function to get current wallet values"""
-        wallet_delta_1 = WalletDelta(block_number=0, transaction_hash="a", wallet_address="addr_1")
-        wallet_delta_2 = WalletDelta(block_number=1, transaction_hash="b", wallet_address="addr_1")
-        wallet_delta_3 = WalletDelta(block_number=2, transaction_hash="c", wallet_address="addr_2")
-        add_wallet_deltas([wallet_delta_1, wallet_delta_2, wallet_delta_3], db_session)
-        agents = get_all_traders(db_session).to_list()
-        assert len(agents) == 2
-        assert "addr_1" in agents
-        assert "addr_2" in agents
+        transfer_event = TradeEvent(block_number=1, transaction_hash="a", hyperdrive_address="a", wallet_address="1")
+        add_trade_events([transfer_event], db_session)
 
+        latest_block_number = get_latest_block_number_from_trade_event(
+            db_session, hyperdrive_address=None, wallet_address="1"
+        )
+        assert latest_block_number == 1
 
-class TestCurrentWalletInterface:
-    """Testing postgres interface for CurrentWallet table"""
+        transfer_event_1 = TradeEvent(block_number=2, transaction_hash="a", hyperdrive_address="a", wallet_address="1")
+        transfer_event_2 = TradeEvent(block_number=1, transaction_hash="a", hyperdrive_address="a", wallet_address="2")
+        add_trade_events([transfer_event_1, transfer_event_2], db_session)
+        latest_block_number = get_latest_block_number_from_trade_event(
+            db_session, hyperdrive_address=None, wallet_address="1"
+        )
+        assert latest_block_number == 2
+        latest_block_number = get_latest_block_number_from_trade_event(
+            db_session, hyperdrive_address=None, wallet_address="2"
+        )
+        assert latest_block_number == 1
 
     @pytest.mark.docker
-    def test_latest_block_number(self, db_session):
+    def test_latest_block_number_on_hyperdrive_address(self, db_session):
         """Testing retrieval of wallet info via interface"""
-        wallet_info_1 = CurrentWallet(block_number=1, value=Decimal("3.0"))
-        add_current_wallet([wallet_info_1], db_session)
-        latest_block_number = get_latest_block_number_from_table(CurrentWallet, db_session)
+        transfer_event = TradeEvent(block_number=1, transaction_hash="a", hyperdrive_address="a", wallet_address="1")
+        add_trade_events([transfer_event], db_session)
+
+        latest_block_number = get_latest_block_number_from_trade_event(
+            db_session, hyperdrive_address="a", wallet_address=None
+        )
         assert latest_block_number == 1
-        wallet_info_2 = CurrentWallet(block_number=2, value=Decimal("3.2"))
-        wallet_info_3 = CurrentWallet(block_number=3, value=Decimal("3.4"))
-        add_current_wallet([wallet_info_2, wallet_info_3], db_session)
-        latest_block_number = get_latest_block_number_from_table(CurrentWallet, db_session)
-        assert latest_block_number == 3
 
-    @pytest.mark.docker
-    def test_get_current_wallet(self, db_session):
-        """Testing retrieval of walletinfo via interface"""
-        wallet_info_1 = CurrentWallet(block_number=0, wallet_address="a", value=Decimal("3.1"))
-        wallet_info_2 = CurrentWallet(block_number=1, wallet_address="b", value=Decimal("3.2"))
-        wallet_info_3 = CurrentWallet(block_number=2, wallet_address="c", value=Decimal("3.3"))
-        add_current_wallet([wallet_info_1, wallet_info_2, wallet_info_3], db_session)
-        wallet_info_df = get_current_wallet(db_session)
-        # Sort by value to make order invariant
-        wallet_info_df = wallet_info_df.sort_values(by=["value"])
-        np.testing.assert_array_equal(wallet_info_df["value"], np.array([3.1, 3.2, 3.3]))
-
-    @pytest.mark.docker
-    def test_block_query_wallet_info(self, db_session):
-        """Testing querying by block number of wallet info via interface"""
-        wallet_info_1 = CurrentWallet(block_number=0, wallet_address="a", value=Decimal("3.1"))
-        wallet_info_2 = CurrentWallet(block_number=1, wallet_address="b", value=Decimal("3.2"))
-        wallet_info_3 = CurrentWallet(block_number=2, wallet_address="c", value=Decimal("3.3"))
-        add_current_wallet([wallet_info_1, wallet_info_2, wallet_info_3], db_session)
-        wallet_info_df = get_current_wallet(db_session, end_block=1)
-        np.testing.assert_array_equal(wallet_info_df["value"], np.array([3.1]))
-        wallet_info_df = get_current_wallet(db_session, end_block=-1)
-        # Sort by value to make order invariant
-        wallet_info_df = wallet_info_df.sort_values(by=["value"])
-        np.testing.assert_array_equal(wallet_info_df["value"], np.array([3.1, 3.2]))
+        transfer_event_1 = TradeEvent(block_number=2, transaction_hash="a", hyperdrive_address="a", wallet_address="1")
+        transfer_event_2 = TradeEvent(block_number=1, transaction_hash="a", hyperdrive_address="b", wallet_address="1")
+        add_trade_events([transfer_event_1, transfer_event_2], db_session)
+        latest_block_number = get_latest_block_number_from_trade_event(
+            db_session, hyperdrive_address="a", wallet_address=None
+        )
+        assert latest_block_number == 2
+        latest_block_number = get_latest_block_number_from_trade_event(
+            db_session, hyperdrive_address="b", wallet_address=None
+        )
+        assert latest_block_number == 1
 
     @pytest.mark.docker
-    def test_current_wallet_info(self, db_session):
+    def test_get_agents(self, db_session):
         """Testing helper function to get current wallet values"""
-        wallet_info_1 = CurrentWallet(
-            block_number=0, wallet_address="addr", token_type=BASE_TOKEN_SYMBOL, value=Decimal("3.1")
+        wallet_delta_1 = TradeEvent(
+            block_number=0, hyperdrive_address="a", transaction_hash="a", wallet_address="addr_1"
+        )
+        wallet_delta_2 = TradeEvent(
+            block_number=1, hyperdrive_address="a", transaction_hash="b", wallet_address="addr_1"
         )
-        wallet_info_2 = CurrentWallet(block_number=1, wallet_address="addr", token_type="LP", value=Decimal("5.1"))
-        add_current_wallet([wallet_info_1, wallet_info_2], db_session)
-        wallet_info_df = get_current_wallet(db_session).reset_index()
-        # Sort by value to make order invariant
-        wallet_info_df = wallet_info_df.sort_values(by=["value"])
-        np.testing.assert_array_equal(wallet_info_df["token_type"], [BASE_TOKEN_SYMBOL, "LP"])
-        np.testing.assert_array_equal(wallet_info_df["value"], [3.1, 5.1])
-        # E.g., block 2, wallet base tokens gets updated to 6.1
-        wallet_info_3 = CurrentWallet(
-            block_number=2, wallet_address="addr", token_type=BASE_TOKEN_SYMBOL, value=Decimal("6.1")
-        )
-        add_current_wallet([wallet_info_3], db_session)
-        wallet_info_df = get_current_wallet(db_session).reset_index()
-        # Sort by value to make order invariant
-        wallet_info_df = wallet_info_df.sort_values(by=["value"])
-        np.testing.assert_array_equal(wallet_info_df["token_type"], ["LP", BASE_TOKEN_SYMBOL])
-        np.testing.assert_array_equal(wallet_info_df["value"], [5.1, 6.1])
+        wallet_delta_3 = TradeEvent(
+            block_number=2, hyperdrive_address="a", transaction_hash="c", wallet_address="addr_2"
+        )
+        add_trade_events([wallet_delta_1, wallet_delta_2, wallet_delta_3], db_session)
+        agents = get_all_traders(db_session).to_list()
+        assert len(agents) == 2
+        assert "addr_1" in agents
+        assert "addr_2" in agents
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/db/hyperdrive/schema.py` & `agent0-0.20.0/src/agent0/chainsync/db/hyperdrive/schema.py`

 * *Files 15% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 """Database Schemas for the Hyperdrive Contract."""
 
 from datetime import datetime
 from decimal import Decimal
 from typing import Union
 
-from sqlalchemy import ARRAY, BigInteger, Boolean, DateTime, Integer, Numeric, String
+from sqlalchemy import BigInteger, Boolean, DateTime, Integer, Numeric, String
 from sqlalchemy.orm import Mapped, mapped_column
 
 from agent0.chainsync.db.base import Base
 
 # pylint: disable=invalid-name
 
 # Postgres numeric type that matches fixedpoint
@@ -19,60 +19,102 @@
 FIXED_NUMERIC = Numeric(precision=1000, scale=18)
 
 
 ## Base schemas for raw data
 # TODO add column for timestamp in seconds in db
 
 
+class HyperdriveAddrToName(Base):
+    """Maps a hyperdrive address to a logical name."""
+
+    __tablename__ = "hyperdrive_addr_to_name"
+
+    hyperdrive_address: Mapped[str] = mapped_column(String, primary_key=True)
+    """The hyperdrive address"""
+    name: Mapped[str] = mapped_column(String, index=True)
+    """The logical name of the hyperdrive address."""
+
+
 class PoolConfig(Base):
     """Table/dataclass schema for pool config."""
 
     __tablename__ = "pool_config"
 
-    contract_address: Mapped[str] = mapped_column(String, primary_key=True)
+    # Indices
+    hyperdrive_address: Mapped[str] = mapped_column(String, primary_key=True)
+
+    # Pool config parameters
     base_token: Mapped[Union[str, None]] = mapped_column(String, default=None)
     vault_shares_token: Mapped[Union[str, None]] = mapped_column(String, default=None)
     linker_factory: Mapped[Union[str, None]] = mapped_column(String, default=None)
     # Ignoring linker_code_hash field
     initial_vault_share_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     minimum_share_reserves: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     minimum_transaction_amount: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    circuit_breaker_delta: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     position_duration: Mapped[Union[int, None]] = mapped_column(Integer, default=None)
     checkpoint_duration: Mapped[Union[int, None]] = mapped_column(Integer, default=None)
     time_stretch: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     governance: Mapped[Union[str, None]] = mapped_column(String, default=None)
     fee_collector: Mapped[Union[str, None]] = mapped_column(String, default=None)
     sweep_collector: Mapped[Union[str, None]] = mapped_column(String, default=None)
     curve_fee: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     flat_fee: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     governance_lp_fee: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     governance_zombie_fee: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     inv_time_stretch: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
 
 
 class CheckpointInfo(Base):
-    """Table/dataclass schema for checkpoint information"""
+    """Table/dataclass schema for checkpoint information."""
 
     __tablename__ = "checkpoint_info"
 
-    checkpoint_time: Mapped[int] = mapped_column(BigInteger, primary_key=True)
+    # Indices
+    id: Mapped[int] = mapped_column(BigInteger, primary_key=True, init=False, autoincrement=True)
+    """The unique identifier for the entry to the table."""
+    hyperdrive_address: Mapped[str] = mapped_column(String, index=True)
+    """The hyperdrive address for the entry."""
+    block_number: Mapped[int] = mapped_column(BigInteger, index=True)
+    """The block number on which the event was emitted."""
+    checkpoint_time: Mapped[int] = mapped_column(BigInteger, index=True)
+    """The seconds epoch time index for this checkpoint."""
+
+    # Fields
+    checkpoint_vault_share_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """The share price that was checkpointed in this checkpoint."""
     vault_share_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    # TODO we'd like to add the checkpoint id here as a field as well
+    """The vault share price at the time of checkpoint creation."""
+    matured_shorts: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """The amount of shorts that matured within this checkpoint."""
+    matured_longs: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """The amount of longs that matured within this checkpoint."""
+    lp_share_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """The lp share price at the checkpoint."""
 
 
+# TODO change this table to allow for missing data in block time.
 class PoolInfo(Base):
     """Table/dataclass schema for pool info.
 
     Mapped class that is a data class on the python side, and an declarative base on the sql side.
     """
 
     __tablename__ = "pool_info"
 
-    block_number: Mapped[int] = mapped_column(BigInteger, primary_key=True)
+    # Indices
+    id: Mapped[int] = mapped_column(BigInteger, primary_key=True, init=False, autoincrement=True)
+    hyperdrive_address: Mapped[str] = mapped_column(String, index=True)
+    block_number: Mapped[int] = mapped_column(BigInteger, index=True)
+
+    # Time
     timestamp: Mapped[datetime] = mapped_column(DateTime)
+    epoch_timestamp: Mapped[Union[int, None]] = mapped_column(BigInteger, default=None)
+
+    # Pool Info Fields
     share_reserves: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     share_adjustment: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     zombie_base_proceeds: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     zombie_share_reserves: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     bond_reserves: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     lp_total_supply: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     vault_share_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
@@ -80,225 +122,146 @@
     long_average_maturity_time: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     shorts_outstanding: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     short_average_maturity_time: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     withdrawal_shares_ready_to_withdraw: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     withdrawal_shares_proceeds: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     lp_share_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     long_exposure: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+
     # Added fields from pool_state
-    epoch_timestamp: Mapped[Union[int, None]] = mapped_column(BigInteger, default=None)
     total_supply_withdrawal_shares: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     gov_fees_accrued: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     hyperdrive_base_balance: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     hyperdrive_eth_balance: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     variable_rate: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
     vault_shares: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    spot_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    fixed_rate: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
 
 
-# TODO: either make a more general TokenDelta, or rename this to HyperdriveDelta
-class WalletDelta(Base):
-    """Table/dataclass schema for wallet deltas."""
-
-    __tablename__ = "wallet_delta"
+class TradeEvent(Base):
+    """Table for storing any transfer events emitted by the Hyperdrive contract.
+    This table only contains events of "registered" wallet addresses, which are any agents
+    that are managed by agent0. This table does not store all wallet addresses that have
+    interacted with all Hyperdrive contracts.
+    TODO this table would take the place of the `WalletDelta` table with the following updates:
+    - We explicitly fill this table with all addresses that have interacted with all hyperdrive pools.
+        - This is very slow on existing pools, which makes it useful for simulations and
+          any managed chains to run a dashboard on, but not so much for connections to remote chains
+          to execute trades.
+    """
 
-    # Default table primary key
+    __tablename__ = "trade_event"
+    # Indices
     id: Mapped[int] = mapped_column(BigInteger, primary_key=True, init=False, autoincrement=True)
+    """The unique identifier for the entry to the table."""
+    hyperdrive_address: Mapped[str] = mapped_column(String, index=True)
+    """The hyperdrive address for the entry."""
     transaction_hash: Mapped[str] = mapped_column(String, index=True)
+    """The transaction hash for the entry."""
     block_number: Mapped[int] = mapped_column(BigInteger, index=True)
-    wallet_address: Mapped[Union[str, None]] = mapped_column(String, index=True, default=None)
-    # base_token_type can be BASE, LONG, SHORT, LP, or WITHDRAWAL_SHARE
-    base_token_type: Mapped[Union[str, None]] = mapped_column(String, index=True, default=None)
-    # token_type is the base_token_type appended with "-<maturity_time>" for LONG and SHORT
-    token_type: Mapped[Union[str, None]] = mapped_column(String, default=None)
-    delta: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    # While time here is in epoch seconds, we use Numeric to allow for (1) lossless storage and (2) allow for NaNs
-    maturity_time: Mapped[Union[int, None]] = mapped_column(Numeric, default=None)
-
-
-class HyperdriveTransaction(Base):
-    """Table/dataclass schema for Transactions.
+    """The block number for the entry."""
+    wallet_address: Mapped[str] = mapped_column(String, index=True)
+    """The wallet address for the entry."""
 
-    Mapped class that is a data class on the python side, and an declarative base on the sql side.
+    # Fields
+    event_type: Mapped[Union[str, None]] = mapped_column(String, index=True, default=None)
     """
-
-    __tablename__ = "transactions"
-
-    # Default table primary key
-    id: Mapped[int] = mapped_column(BigInteger, primary_key=True, init=False, autoincrement=True)
-    transaction_hash: Mapped[str] = mapped_column(String, index=True, unique=True)
-
-    #### Fields from base transactions ####
-    block_number: Mapped[int] = mapped_column(BigInteger, index=True)
-    transaction_index: Mapped[Union[int, None]] = mapped_column(Integer, default=None)
-    nonce: Mapped[Union[int, None]] = mapped_column(Integer, default=None)
-    # Transaction receipt to/from
-    # Almost always from wallet address to smart contract address
-    txn_to: Mapped[Union[str, None]] = mapped_column(String, default=None)
-    txn_from: Mapped[Union[str, None]] = mapped_column(String, default=None)
-    gas_used: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-
-    #### Fields from solidity function calls ####
-    # These fields map solidity function calls and their corresponding arguments
-    # The params list is exhaustive against all possible methods
-    input_method: Mapped[Union[str, None]] = mapped_column(String, default=None)
-
-    # Call data options
-    input_params_options_destination: Mapped[Union[str, None]] = mapped_column(String, default=None)
-    input_params_options_as_base: Mapped[Union[bool, None]] = mapped_column(Boolean, default=None)
-
-    # Method: initialize
-    input_params_contribution: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    input_params_apr: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-
-    # Method: openLong
-    input_params_amount: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    input_params_min_output: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    input_params_min_vault_share_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-
-    # Method: openShort
-    input_params_bond_amount: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    input_params_max_deposit: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    # input_params_min_vault_share_price
-
-    # Method: closeLong
-    input_params_maturity_time: Mapped[Union[int, None]] = mapped_column(BigInteger, default=None)
-    # input_params_bond_amount
-    # input_params_min_output
-
-    # Method: closeShort
-    # input_params_maturity_time
-    # input_params_bond_amount
-    # input_params_min_output
-
-    # Method: addLiquidity
-    # input_params_contribution
-    input_params_min_lp_share_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    input_params_min_apr: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    input_params_max_apr: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-
-    # Method: removeLiquidity
-    input_params_lp_shares: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    input_params_min_output_per_share: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    # input_params_min_output
-    # input_params_destination
-    # input_params_as_underlying
-
-    # Method: redeemWithdrawawlShares
-    input_params_withdrawal_shares: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    # input_params_min_output_per_share
-
-    #### Fields from event logs ####
-    # Addresses in event logs
-    event_from: Mapped[Union[str, None]] = mapped_column(String, default=None)
-    event_to: Mapped[Union[str, None]] = mapped_column(String, default=None)
-    # args_owner
-    # args_spender
-    # args_id
-    event_value: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    event_operator: Mapped[Union[str, None]] = mapped_column(String, default=None)
-    event_id: Mapped[Union[int, None]] = mapped_column(
-        Numeric, default=None
-    )  # Integer too small here to store event_id, so we use Numeric instead
-    # Fields calculated from base
-    event_prefix: Mapped[Union[int, None]] = mapped_column(Integer, default=None)
-    event_maturity_time: Mapped[Union[int, None]] = mapped_column(BigInteger, default=None)
-
-    # Fields not used by postprocessing
-
-    # blockHash
-    # hash
-    # value
-    # gasPrice
-    # gas
-    # v
-    # r
-    # s
-    # type
-    # accessList
-    # maxPriorityFeePerGas
-    # maxFeePerGas
-    # chainId
-    # logIndex
-    # address
-    # cumulativeGasUsed
-    # contract_address
-    # status
-    # logsBloom
-    # effectiveGasPrice
-
-
-## Analysis schemas
-
-
-class PoolAnalysis(Base):
-    """Table/dataclass schema for pool info analysis.
-
-    Mapped class that is a data class on the python side, and an declarative base on the sql side.
+    The underlying event type for the entry. Can be one of the following:
+    `Initialize`, `AddLiquidity`, `RemoveLiquidity`, `RedeemWithdrawalShares`, 
+    `OpenLong`, `OpenShort`, `CloseLong`, `CloseShort`, or `TransferSingle`.
     """
-
-    __tablename__ = "pool_analysis"
-
-    block_number: Mapped[int] = mapped_column(BigInteger, primary_key=True)
-
-    spot_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    fixed_rate: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    base_buffer: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    # TODO add gov fees accrued, vault shares
-
-
-class CurrentWallet(Base):
-    """Table/dataclass schema for current wallet positions."""
-
-    __tablename__ = "current_wallet"
-
-    # Default table primary key
-    id: Mapped[int] = mapped_column(BigInteger(), primary_key=True, init=False, autoincrement=True)
-    block_number: Mapped[int] = mapped_column(BigInteger, index=True)
-    wallet_address: Mapped[Union[str, None]] = mapped_column(String, index=True, default=None)
-    # base_token_type can be BASE, LONG, SHORT, LP, or WITHDRAWAL_SHARE
-    base_token_type: Mapped[Union[str, None]] = mapped_column(String, index=True, default=None)
-    # token_type is the base_token_type appended with "-<maturity_time>" for LONG and SHORT
-    token_type: Mapped[Union[str, None]] = mapped_column(String, default=None)
-    value: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
-    # While time here is in epoch seconds, we use Numeric to allow for (1) lossless storage and (2) allow for NaNs
+    token_type: Mapped[Union[str, None]] = mapped_column(String, index=True, default=None)
+    """
+    The underlying token type for the entry. Can be one of the following:
+    `LONG`, `SHORT, `LP`, or `WITHDRAWAL_SHARE`.
+    """
+    # While time here is in epoch seconds, we use Numeric to allow for
+    # (1) lossless storage and (2) allow for NaNs
     maturity_time: Mapped[Union[int, None]] = mapped_column(Numeric, default=None)
-
-
-class Ticker(Base):
-    """Table/dataclass schema for the live ticker.
-
-    Mapped class that is a data class on the python side, and an declarative base on the sql side.
+    """The maturity time of the token for LONG and SHORT tokens."""
+    token_id: Mapped[Union[str, None]] = mapped_column(String, default=None)
+    """
+    The id for the token itself, which consists of the `token_type`, appended 
+    with `maturity_time` for LONG and SHORT. For example, `LONG-1715126400`.
+    """
+    token_delta: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """
+    The change in tokens with respect to the wallet address.
+    """
+    base_delta: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """
+    The change in base tokens for the event with respect to the wallet address.
+    """
+    vault_share_delta: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """
+    The change in vault share tokens for the event with respect to the wallet address.
+    """
+    as_base: Mapped[Union[bool, None]] = mapped_column(Boolean, default=None)
+    """
+    A flag defining if the trade was made in units of base or vault shares.
+    """
+    vault_share_price: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """
+    The vault share price at the time of the emitted event.
     """
 
-    __tablename__ = "ticker"
 
-    id: Mapped[int] = mapped_column(BigInteger(), primary_key=True, init=False, autoincrement=True)
-    block_number: Mapped[int] = mapped_column(BigInteger, index=True)
-    timestamp: Mapped[datetime] = mapped_column(DateTime)
-    wallet_address: Mapped[Union[str, None]] = mapped_column(String, index=True, default=None)
-    trade_type: Mapped[Union[str, None]] = mapped_column(String, default=None)
-    token_diffs: Mapped[Union[list[str], None]] = mapped_column(ARRAY(String), default=None)
+## Analysis schemas
 
 
-class WalletPNL(Base):
-    """Table/dataclass schema for pnl data
-    This table differs from CurrentWallet by (1) including the PNL, and (2) contains all wallet positions
-    for a given block.
+class PositionSnapshot(Base):
+    """Table/dataclass schema for snapshots of positions
+    This table takes snapshots of open positions and calculates the value and pnl of
+    positions every snapshot.
 
     Mapped class that is a data class on the python side, and an declarative base on the sql side.
     """
 
     __tablename__ = "wallet_pnl"
 
-    # Default table primary key
+    # Indices
     id: Mapped[int] = mapped_column(BigInteger, primary_key=True, init=False, autoincrement=True)
+    """The unique identifier for the entry to the table."""
+    hyperdrive_address: Mapped[str] = mapped_column(String, index=True)
+    """The hyperdrive address for the entry."""
     block_number: Mapped[int] = mapped_column(BigInteger, index=True)
+    """The block number for the entry."""
     wallet_address: Mapped[Union[str, None]] = mapped_column(String, index=True, default=None)
-    # base_token_type can be BASE, LONG, SHORT, LP, or WITHDRAWAL_SHARE
-    base_token_type: Mapped[Union[str, None]] = mapped_column(String, index=True, default=None)
-    # token_type is the base_token_type appended with "-<maturity_time>" for LONG and SHORT
+    """The wallet address for the entry."""
+
+    # Fields
     token_type: Mapped[Union[str, None]] = mapped_column(String, default=None)
-    value: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """
+    The underlying token type for the entry. Can be one of the following:
+    `LONG`, `SHORT, `LP`, or `WITHDRAWAL_SHARE`.
+    """
     # While time here is in epoch seconds, we use Numeric to allow for (1) lossless storage and (2) allow for NaNs
     maturity_time: Mapped[Union[int, None]] = mapped_column(Numeric, default=None)
-    latest_block_update: Mapped[Union[int, None]] = mapped_column(BigInteger, default=None)
+    """The maturity time of the token for LONG and SHORT tokens."""
+    token_id: Mapped[Union[str, None]] = mapped_column(String, default=None)
+    """
+    The id for the token itself, which consists of the `token_type`, appended 
+    with `maturity_time` for LONG and SHORT. For example, `LONG-1715126400`.
+    """
+    token_balance: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """
+    The absolute balance of the position.
+    """
+    unrealized_value: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """
+    The unrealized value of the tokens in units of base, calculated if the position is closed at this block.
+    """
+    realized_value: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """
+    The total change in base for opening/closing this position.
+    NOTE: this doesn't take into account any transfers of tokens outside of hyperdrive trades.
+    """
     pnl: Mapped[Union[Decimal, None]] = mapped_column(FIXED_NUMERIC, default=None)
+    """
+    The pnl of the position in units of base.
+    `unrealized_value` + `realized_value` = `pnl`.
+    """
+    last_balance_update_block: Mapped[Union[int, None]] = mapped_column(BigInteger, default=None)
+    """
+    The last block number that this position's balance was updated.
+    """
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/exec/acquire_data.py` & `agent0-0.20.0/src/agent0/chainsync/exec/acquire_data.py`

 * *Files 10% similar despite different names*

```diff
@@ -12,101 +12,110 @@
 from agent0.chainsync import PostgresConfig
 from agent0.chainsync.db.base import initialize_session
 from agent0.chainsync.db.hyperdrive import (
     data_chain_to_db,
     get_latest_block_number_from_pool_info_table,
     init_data_chain_to_db,
 )
-from agent0.ethpy import EthConfig
 from agent0.ethpy.hyperdrive import HyperdriveReadInterface
 
 _SLEEP_AMOUNT = 1
 
 
 # TODO cleanup
 # pylint: disable=too-many-arguments
 # pylint: disable=too-many-locals
+# pylint: disable=too-many-branches
 def acquire_data(
     start_block: int = 0,
     lookback_block_limit: int = 1000,
-    interface: HyperdriveReadInterface | None = None,
-    eth_config: EthConfig | None = None,
+    interfaces: list[HyperdriveReadInterface] | None = None,
+    rpc_uri: str | None = None,
+    hyperdrive_addresses: list[ChecksumAddress] | None = None,
     db_session: Session | None = None,
     postgres_config: PostgresConfig | None = None,
-    hyperdrive_address: ChecksumAddress | None = None,
     exit_on_catch_up: bool = False,
     exit_callback_fn: Callable[[], bool] | None = None,
     suppress_logs: bool = False,
 ):
     """Execute the data acquisition pipeline.
 
     Arguments
     ---------
     start_block: int
         The starting block to filter the query on
     lookback_block_limit: int
         The maximum number of blocks to look back when filling in missing data
-    interface: HyperdriveReadInterface | None, optional
-        An initialized HyperdriveReadInterface object. If not set, will initialize one based on
-        eth_config and hyperdrive_address.
-    eth_config: EthConfig | None
-        Configuration for URIs to the rpc and artifacts. If not set, will look for addresses
-        in eth.env.
+    interfaces: list[HyperdriveReadInterface] | None, optional
+        A collection of Hyperdrive interface objects, each connected to a pool.
+        If not set, will initialize one based on rpc_uri and hyperdrive_address.
+    rpc_uri: str, optional
+        The URI for the web3 provider to initialize the interface with. Not used if an interface
+        is provided.
+    hyperdrive_addresses: list[ChecksumAddress] | None, optional
+        A collection of Hyperdrive address, each pointing to an initialized pool.
+        Not used if a list of interfaces is provided.
     db_session: Session | None
         Session object for connecting to db. If None, will initialize a new session based on
         postgres_config.
     postgres_config: PostgresConfig | None = None,
         PostgresConfig for connecting to db. If none, will set from postgres.env.
-    hyperdrive_address: ChecksumAddress | None, optional
-        The address of the hyperdrive contract.
-        If not set, will use the erc4626_hyperdrive contract from `eth_config.artifacts_uri`.
     exit_on_catch_up: bool, optional
         If True, will exit after catching up to current block. Defaults to False.
     exit_callback_fn: Callable[[], bool] | None, optional
         A function that returns a boolean to call to determine if the script should exit.
         The function should return False if the script should continue, or True if the script should exit.
         Defaults to not set.
     suppress_logs: bool, optional
         If true, will suppress info logging from this function. Defaults to False.
     """
     # TODO implement logger instead of global logging to suppress based on module name.
 
     ## Initialization
-    if interface is None:
-        interface = HyperdriveReadInterface(eth_config, hyperdrive_address)
+    if interfaces is None:
+        if hyperdrive_addresses is None or rpc_uri is None:
+            # TODO when we start deploying the registry, this case should look for existing
+            # pools in the registry and use those.
+            raise ValueError("hyperdrive_address and rpc_uri must be provided if not providing interface")
+        interfaces = [
+            HyperdriveReadInterface(hyperdrive_address, rpc_uri) for hyperdrive_address in hyperdrive_addresses
+        ]
+
+    if len(interfaces) == 0:
+        raise ValueError("Must run data on at least one pool.")
 
     # postgres session
     db_session_init = False
     if db_session is None:
         db_session_init = True
         db_session = initialize_session(postgres_config, ensure_database_created=True)
 
     ## Get starting point for restarts
     # Get last entry of pool info in db
     data_latest_block_number = get_latest_block_number_from_pool_info_table(db_session)
     # Using max of latest block in database or specified start block
     curr_write_block = max(start_block, data_latest_block_number + 1)
 
-    latest_mined_block = int(interface.get_block_number(interface.get_current_block()))
+    latest_mined_block = int(interfaces[0].get_block_number(interfaces[0].get_current_block()))
     if (latest_mined_block - curr_write_block) > lookback_block_limit:
         curr_write_block = latest_mined_block - lookback_block_limit
         logging.warning(
             "Starting block is past lookback block limit, starting at block %s",
             curr_write_block,
         )
 
     ## Collect initial data
-    init_data_chain_to_db(interface, db_session)
+    init_data_chain_to_db(interfaces, db_session)
 
     # Main data loop
     # monitor for new blocks & add pool info per block
     if not suppress_logs:
         logging.info("Monitoring for pool info updates...")
     while True:
-        latest_mined_block = interface.web3.eth.get_block_number()
+        latest_mined_block = interfaces[0].web3.eth.get_block_number()
         # Only execute if we are on a new block
         if latest_mined_block < curr_write_block:
             exit_callable = False
             if exit_callback_fn is not None:
                 exit_callable = exit_callback_fn()
             if exit_on_catch_up or exit_callable:
                 break
@@ -127,14 +136,14 @@
                 # in this case
                 logging.warning(
                     "Querying block_number %s out of %s, unable to keep up with chain block iteration",
                     block_number,
                     latest_mined_block,
                 )
                 continue
-            data_chain_to_db(interface, interface.get_block(block_number), db_session)
+            data_chain_to_db(interfaces, block_number, db_session)
         curr_write_block = latest_mined_block + 1
 
     # Clean up resources on clean exit
     # If this function made the db session, we close it here
     if db_session_init:
         db_session.close()
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/exec/data_analysis.py` & `agent0-0.20.0/src/agent0/chainsync/exec/analyze_data.py`

 * *Files 26% similar despite different names*

```diff
@@ -6,110 +6,88 @@
 import time
 from typing import Callable
 
 from eth_typing import ChecksumAddress
 from sqlalchemy.orm import Session
 
 from agent0.chainsync import PostgresConfig
-from agent0.chainsync.analysis import data_to_analysis
+from agent0.chainsync.analysis import db_to_analysis
 from agent0.chainsync.db.base import initialize_session
-from agent0.chainsync.db.hyperdrive import (
-    PoolInfo,
-    get_latest_block_number_from_analysis_table,
-    get_latest_block_number_from_table,
-    get_pool_config,
-)
-from agent0.ethpy import EthConfig
+from agent0.chainsync.db.hyperdrive import PoolInfo, get_latest_block_number_from_table
 from agent0.ethpy.hyperdrive import HyperdriveReadInterface
 
 _SLEEP_AMOUNT = 1
 
 
 # TODO cleanup
 # pylint: disable=too-many-arguments
 # pylint: disable=too-many-locals
 # pylint: disable=too-many-branches
-def data_analysis(
+def analyze_data(
     start_block: int = 0,
-    interface: HyperdriveReadInterface | None = None,
-    eth_config: EthConfig | None = None,
+    interfaces: list[HyperdriveReadInterface] | None = None,
+    rpc_uri: str | None = None,
+    hyperdrive_addresses: list[ChecksumAddress] | None = None,
     db_session: Session | None = None,
     postgres_config: PostgresConfig | None = None,
-    hyperdrive_address: ChecksumAddress | None = None,
     exit_on_catch_up: bool = False,
     exit_callback_fn: Callable[[], bool] | None = None,
     suppress_logs: bool = False,
     calc_pnl: bool = True,
 ):
     """Execute the data acquisition pipeline.
 
     Arguments
     ---------
     start_block: int
         The starting block to filter the query on
-    interface: HyperdriveReadInterface | None, optional
-        An initialized HyperdriveReadInterface object. If not set, will initialize one based on
-        eth_config and hyperdrive_address.
-    eth_config: EthConfig | None
-        Configuration for URIs to the rpc and artifacts. If not set, will look for addresses
-        in eth.env.
+    interfaces: list[HyperdriveReadInterface] | None, optional
+        A collection of Hyperdrive interface objects, each connected to a pool.
+        If not set, will initialize one based on rpc_uri and hyperdrive_address.
+    rpc_uri: str, optional
+        The URI for the web3 provider to initialize the interface with. Not used if an interface
+        is provided.
+    hyperdrive_addresses: list[ChecksumAddress] | None, optional
+        A collection of Hyperdrive address, each pointing to an initialized pool.
+        Not used if a list of interfaces is provided.
     db_session: Session | None
         Session object for connecting to db. If None, will initialize a new session based on
         postgres.env.
     postgres_config: PostgresConfig | None = None,
         PostgresConfig for connecting to db. If none, will set from postgres.env.
-    hyperdrive_address: ChecksumAddress | None, optional
-        The address of the hyperdrive contract.
-        If not set, will use the erc4626_hyperdrive contract from `eth_config.artifacts_uri`.
     exit_on_catch_up: bool
         If True, will exit after catching up to current block
     exit_callback_fn: Callable[[], bool] | None, optional
         A function that returns a boolean to call to determine if the script should exit.
         The function should return False if the script should continue, or True if the script should exit.
         Defaults to not set.
     suppress_logs: bool, optional
         If true, will suppress info logging from this function. Defaults to False.
     calc_pnl: bool
         Whether to calculate pnl. Defaults to True.
     """
     # TODO implement logger instead of global logging to suppress based on module name.
 
     ## Initialization
-    # create hyperdrive interface
-    if interface is None:
-        interface = HyperdriveReadInterface(eth_config, hyperdrive_address)
+    if interfaces is None:
+        if hyperdrive_addresses is None or rpc_uri is None:
+            # TODO when we start deploying the registry, this case should look for existing
+            # pools in the registry and use those.
+            raise ValueError("hyperdrive_address and rpc_uri must be provided if not providing interface")
+        interfaces = [
+            HyperdriveReadInterface(hyperdrive_address, rpc_uri) for hyperdrive_address in hyperdrive_addresses
+        ]
 
     # postgres session
     db_session_init = False
     if db_session is None:
         db_session_init = True
         db_session = initialize_session(postgres_config=postgres_config, ensure_database_created=True)
 
-    ## Get starting point for restarts
-    analysis_latest_block_number = get_latest_block_number_from_analysis_table(db_session)
-
-    # Using max of latest block in database or specified start block
-    curr_start_write_block = max(start_block, analysis_latest_block_number + 1)
-
-    # Get pool config
-    # TODO this likely should return a pd.Series, not dataframe
-    pool_config_df = None
-    # Wait for pool config on queries to db to exist to ensure acquire_data is up and running
-    for _ in range(10):
-        pool_config_df = get_pool_config(db_session, coerce_float=False)
-        pool_config_len = len(pool_config_df)
-        if pool_config_len == 0:
-            time.sleep(_SLEEP_AMOUNT)
-        else:
-            break
-    if pool_config_df is None:
-        raise ValueError("Error in getting pool config from db")
-    assert len(pool_config_df) == 1
-    pool_config = pool_config_df.iloc[0]
-
+    curr_start_write_block = start_block
     # Main data loop
     # monitor for new blocks & add pool info per block
     if not suppress_logs:
         logging.info("Monitoring database for updates...")
     while True:
         latest_data_block_number = get_latest_data_block(db_session)
         # Only execute if we are on a new block
@@ -117,22 +95,16 @@
             exit_callable = False
             if exit_callback_fn is not None:
                 exit_callable = exit_callback_fn()
             if exit_on_catch_up or exit_callable:
                 break
             time.sleep(_SLEEP_AMOUNT)
             continue
-        # Does batch analysis on range(analysis_start_block, latest_data_block_number) blocks
-        # i.e., [start_block, end_block)
-        # TODO do regular batching to sample for wallet information
-        analysis_start_block = curr_start_write_block
-        analysis_end_block = latest_data_block_number + 1
-        if not suppress_logs:
-            logging.info("Running batch %s to %s", analysis_start_block, analysis_end_block)
-        data_to_analysis(analysis_start_block, analysis_end_block, pool_config, db_session, interface, calc_pnl)
+        # Each table handles keeping track of appending to tables
+        db_to_analysis(db_session, interfaces, calc_pnl)
         curr_start_write_block = latest_data_block_number + 1
 
     # Clean up resources on clean exit
     # If this function made the db session, we close it here
     if db_session_init:
         db_session.close()
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/postgres_config.py` & `agent0-0.20.0/src/agent0/chainsync/postgres_config.py`

 * *Files 11% similar despite different names*

```diff
@@ -2,14 +2,15 @@
 
 from __future__ import annotations
 
 import os
 from dataclasses import dataclass
 
 from dotenv import load_dotenv
+from sqlalchemy import URL
 
 
 @dataclass
 class PostgresConfig:
     """The configuration dataclass for postgres connections.
 
     Replace the user, password, and db_name with the credentials of your setup.
@@ -27,14 +28,31 @@
     POSTGRES_HOST: str = "localhost"
     """The hostname to connect to."""
     POSTGRES_PORT: int = 5432
     """The port to connect to."""
     POSTGRES_VERSION: str | None = None
     """The postgres version."""
 
+    def create_url_obj(self) -> URL:
+        """Creates an SQLAlchemy URL object from the config.
+
+        Returns
+        -------
+        URL
+            An SQLAlchemy URL object.
+        """
+        return URL.create(
+            drivername="postgresql+psycopg",
+            username=self.POSTGRES_USER,
+            password=self.POSTGRES_PASSWORD,
+            host=self.POSTGRES_HOST,
+            port=self.POSTGRES_PORT,
+            database=self.POSTGRES_DB,
+        )
+
 
 def build_postgres_config() -> PostgresConfig:
     """Build a PostgresConfig that looks for environmental variables.
     If env var exists, use that, otherwise, use default.
 
     Returns
     -------
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/streamlit/pages/Wallet_Stats.py` & `agent0-0.20.0/src/agent0/chainsync/streamlit/pages/Wallet_Stats.py`

 * *Files 12% similar despite different names*

```diff
@@ -6,171 +6,144 @@
 
 import gc
 
 import matplotlib.pyplot as plt
 import mplfinance as mpf
 import streamlit as st
 
-from agent0.chainsync.dashboard import build_ticker, build_user_mapping, map_addresses, reduce_plot_data
-from agent0.chainsync.db.base import get_addr_to_username, get_username_to_user, initialize_session
-from agent0.chainsync.db.hyperdrive import (
-    get_all_traders,
-    get_ticker,
-    get_total_wallet_pnl_over_time,
-    get_wallet_pnl,
-    get_wallet_positions_over_time,
-)
-from agent0.ethpy.hyperdrive import BASE_TOKEN_SYMBOL
+from agent0.chainsync.dashboard import build_user_mapping, build_wallet_dashboard, map_addresses, reduce_plot_data
+from agent0.chainsync.db.base import get_addr_to_username, initialize_session
+from agent0.chainsync.db.hyperdrive import get_all_traders
 
 plt.close("all")
 gc.collect()
 
 st.set_page_config(page_title="Trading Competition Dashboard", layout="wide")
 st.set_option("deprecation.showPyplotGlobalUse", False)
 
-# TODO clean up this script into various functions
-
-MAX_PLOT_BLOCKS = 5000
-MAX_ROWS = 1000
-
 # Load and connect to postgres
 session = initialize_session()
 
 # Refresh button
 # Streamlit automatically refreshes when an input widget is changed
 # so just having this button clicked automatically refreshes
 # Magic.
 st.button("Refresh")
 
 
 # Multiselect box of all available agents
 # Get all addresses that have made a trade
 trader_addrs = get_all_traders(session)
 addr_to_username = get_addr_to_username(session)
-username_to_user = get_username_to_user(session)
 
 # Get corresponding usernames
-user_map = build_user_mapping(trader_addrs, addr_to_username, username_to_user)
+user_map = build_user_mapping(trader_addrs, addr_to_username)
 
 # TODO does this take series? Or do I need to cast this as a list
 # TODO there is a case that format_name is not unique, where we should use the wallet addresses
 selected = st.multiselect("Wallet Addresses", user_map["format_name"])
 
-# Map selected_addrs back to actual addresses
-selected_addresses = map_addresses(selected, user_map, "format_name")["address"].to_list()
-
-# Get ticker for selected addresses
-ticker = get_ticker(session, max_rows=MAX_ROWS, coerce_float=False, wallet_address=selected_addresses, sort_desc=True)
-display_ticker = build_ticker(ticker, user_map)
-
-# Get latest wallet pnls for selected addresses
-latest_wallet_pnl = get_wallet_pnl(session, start_block=-1, coerce_float=False, wallet_address=selected_addresses)
-# Do lookup of addresses and (1) add username column, and (2) replace wallet_address with abbr address
-mapped = map_addresses(latest_wallet_pnl["wallet_address"], user_map)
-latest_wallet_pnl["username"] = mapped["username"]
-latest_wallet_pnl["wallet_address"] = mapped["abbr_address"]
-# Reorder and get subset of dataframe
-latest_wallet_pnl = latest_wallet_pnl[
-    ["timestamp", "block_number", "username", "wallet_address", "token_type", "value", "pnl"]
-]
-
-# Show all dataframes
-st.write("Total PnL")
-latest_pnl = (
-    latest_wallet_pnl.groupby("wallet_address")
-    .agg({"username": "first", "pnl": "sum"})
-    .sort_values("pnl", ascending=False)
-)
-st.dataframe(latest_pnl.astype(str), use_container_width=True)
-
-st.write("Current Open Positions")
-st.dataframe(latest_wallet_pnl.astype(str), height=300, use_container_width=True, hide_index=True)
-
-st.write("Transactions")
-st.dataframe(display_ticker, height=500, use_container_width=True)
-
-# Get PNL over time
-pnl_over_time = get_total_wallet_pnl_over_time(
-    session, start_block=-MAX_PLOT_BLOCKS, coerce_float=False, wallet_address=selected_addresses
-)
-# Add username
-pnl_over_time["username"] = map_addresses(pnl_over_time["wallet_address"], user_map)["username"]
-wallet_positions = get_wallet_positions_over_time(
-    session, start_block=-MAX_PLOT_BLOCKS, coerce_float=False, wallet_address=selected_addresses
-)
-wallet_positions["username"] = map_addresses(wallet_positions["wallet_address"], user_map)["username"]
-
-# Plot pnl over time
-main_fig = mpf.figure(style="mike", figsize=(10, 10))
-# matplotlib doesn't play nice with types
-(ax_pnl, ax_base, ax_long, ax_short, ax_lp, ax_withdraw) = main_fig.subplots(6, 1, sharex=True)  # type: ignore
-
-for addr in pnl_over_time["wallet_address"].unique():
-    format_name = map_addresses(addr, user_map)["format_name"]
-    wallet_pnl_over_time = pnl_over_time[pnl_over_time["wallet_address"] == addr]
-    wallet_pnl_over_time = reduce_plot_data(wallet_pnl_over_time, "timestamp", "pnl")
-    ax_pnl.plot(wallet_pnl_over_time["timestamp"], wallet_pnl_over_time["pnl"], label=format_name)
-
-
-ax_pnl.yaxis.set_label_position("right")
-ax_pnl.yaxis.tick_right()
-ax_pnl.set_xlabel("block timestamp")
-ax_pnl.set_ylabel("PnL")
-ax_pnl.set_title("PnL Over Time")
-
-# Plot open positions over time
-labels = []
-for addr in wallet_positions["wallet_address"].unique():
-    format_name = map_addresses(addr, user_map)["format_name"]
-    labels.append(format_name)
-    wallet_positions_over_time = wallet_positions[wallet_positions["wallet_address"] == addr]
-    base_positions = reduce_plot_data(
-        wallet_positions_over_time[wallet_positions_over_time["base_token_type"] == BASE_TOKEN_SYMBOL],
-        x_column_name="timestamp",
-        y_column_name="value",
-    )
-    long_positions = reduce_plot_data(
-        wallet_positions_over_time[wallet_positions_over_time["base_token_type"] == "LONG"],
-        x_column_name="timestamp",
-        y_column_name="value",
-    )
-    short_positions = reduce_plot_data(
-        wallet_positions_over_time[wallet_positions_over_time["base_token_type"] == "SHORT"],
-        x_column_name="timestamp",
-        y_column_name="value",
-    )
-    lp_positions = reduce_plot_data(
-        wallet_positions_over_time[wallet_positions_over_time["base_token_type"] == "LP"],
-        x_column_name="timestamp",
-        y_column_name="value",
-    )
-    withdraw_positions = reduce_plot_data(
-        wallet_positions_over_time[wallet_positions_over_time["base_token_type"] == "WITHDRAWAL_SHARE"],
-        x_column_name="timestamp",
-        y_column_name="value",
-    )
-    ax_base.plot(base_positions["timestamp"], base_positions["value"], label=format_name)
-    ax_long.plot(long_positions["timestamp"], long_positions["value"], label=format_name)
-    ax_short.plot(short_positions["timestamp"], short_positions["value"], label=format_name)
-    ax_lp.plot(lp_positions["timestamp"], lp_positions["value"], label=format_name)
-    ax_withdraw.plot(withdraw_positions["timestamp"], withdraw_positions["value"], label=format_name)
-
-all_ax = [ax_base, ax_long, ax_short, ax_lp, ax_withdraw]
-bonds_label = "hy" + BASE_TOKEN_SYMBOL
-y_labels = [BASE_TOKEN_SYMBOL, bonds_label, bonds_label, "LP", "Withdraw"]
-titles = ["Base Positions", "Long Positions", "Short Positions", "LP Positions", "Withdraw Positions"]
-for ax, y_label, title in zip(all_ax, y_labels, titles):
-    ax.yaxis.set_label_position("right")
-    ax.yaxis.tick_right()
-    ax.set_xlabel("block timestamp")
-    ax.set_ylabel(y_label)
-    ax.set_title(title)
-
-main_fig.legend(labels=labels, loc="center left", bbox_to_anchor=(1, 0.5))
-# Fix axes labels
-main_fig.autofmt_xdate()
-# matplotlib doesn't play nice with types
-main_fig.tight_layout()  # type: ignore
-
-st.write("PnL Over Time")
-# matplotlib doesn't play nice with types
-st.pyplot(fig=main_fig, clear_figure=True, use_container_width=True)  # type: ignore
+if len(selected) > 0:
+    # Map selected_addrs back to actual addresses
+    selected_addresses = map_addresses(selected, user_map, "format_name")["address"].to_list()
+
+    data_dfs = build_wallet_dashboard(selected_addresses, user_map=user_map, session=session)
+
+    # Show all dataframes
+    st.write("Total PnL")
+    st.dataframe(data_dfs["total_pnl"], use_container_width=True)
+
+    st.write("Per Pool PnL")
+    st.dataframe(data_dfs["pool_pnl"], use_container_width=True)
+
+    st.write("Open Positions")
+    st.dataframe(data_dfs["open_positions"], height=300, use_container_width=True, hide_index=True)
+
+    st.write("Closed Positions")
+    st.dataframe(data_dfs["closed_positions"], height=300, use_container_width=True, hide_index=True)
+
+    st.write("Transactions")
+    st.dataframe(data_dfs["display_ticker"], height=500, use_container_width=True)
+
+    # Plot pnl over time
+    main_fig = mpf.figure(style="mike", figsize=(10, 10))
+    # matplotlib doesn't play nice with types
+    (ax_pnl, ax_base, ax_long, ax_short, ax_lp, ax_withdraw) = main_fig.subplots(6, 1, sharex=True)  # type: ignore
+
+    pnl_over_time = data_dfs["pnl_over_time"]
+    for addr in data_dfs["pnl_over_time"]["wallet_address"].unique():
+        format_name = map_addresses(addr, user_map)["format_name"]
+        wallet_pnl_over_time = pnl_over_time[pnl_over_time["wallet_address"] == addr]
+        wallet_pnl_over_time = reduce_plot_data(wallet_pnl_over_time, "timestamp", "pnl")
+        ax_pnl.plot(wallet_pnl_over_time["timestamp"], wallet_pnl_over_time["pnl"], label=format_name)
+
+    ax_pnl.yaxis.set_label_position("right")
+    ax_pnl.yaxis.tick_right()
+    ax_pnl.set_xlabel("block timestamp")
+    ax_pnl.set_ylabel("PnL")
+    ax_pnl.set_title("PnL Over Time")
+
+    # Plot open positions over time
+    labels = []
+    positions_over_time = data_dfs["positions_over_time"]
+    realized_value_over_time = data_dfs["realized_value_over_time"]
+    for addr in positions_over_time["wallet_address"].unique():
+        format_name = map_addresses(addr, user_map)["format_name"]
+        labels.append(format_name)
+
+        wallet_realized_value_over_time = realized_value_over_time[realized_value_over_time["wallet_address"] == addr]
+        wallet_realized_value_over_time = reduce_plot_data(
+            wallet_realized_value_over_time,
+            x_column_name="timestamp",
+            y_column_name="realized_value",
+        )
+
+        wallet_positions_over_time = positions_over_time[positions_over_time["wallet_address"] == addr]
+        long_positions = reduce_plot_data(
+            wallet_positions_over_time[wallet_positions_over_time["token_type"] == "LONG"],
+            x_column_name="timestamp",
+            y_column_name="token_balance",
+        )
+        short_positions = reduce_plot_data(
+            wallet_positions_over_time[wallet_positions_over_time["token_type"] == "SHORT"],
+            x_column_name="timestamp",
+            y_column_name="token_balance",
+        )
+        lp_positions = reduce_plot_data(
+            wallet_positions_over_time[wallet_positions_over_time["token_type"] == "LP"],
+            x_column_name="timestamp",
+            y_column_name="token_balance",
+        )
+        withdraw_positions = reduce_plot_data(
+            wallet_positions_over_time[wallet_positions_over_time["token_type"] == "WITHDRAWAL_SHARE"],
+            x_column_name="timestamp",
+            y_column_name="token_balance",
+        )
+        ax_base.plot(
+            wallet_realized_value_over_time["timestamp"],
+            wallet_realized_value_over_time["realized_value"],
+            label=format_name,
+        )
+        ax_long.plot(long_positions["timestamp"], long_positions["token_balance"], label=format_name)
+        ax_short.plot(short_positions["timestamp"], short_positions["token_balance"], label=format_name)
+        ax_lp.plot(lp_positions["timestamp"], lp_positions["token_balance"], label=format_name)
+        ax_withdraw.plot(withdraw_positions["timestamp"], withdraw_positions["token_balance"], label=format_name)
+
+    all_ax = [ax_base, ax_long, ax_short, ax_lp, ax_withdraw]
+    y_labels = ["base", "longs", "shorts", "LP", "Withdraw"]
+    titles = ["Realized Base", "Long Positions", "Short Positions", "LP Positions", "Withdraw Positions"]
+    for ax, y_label, title in zip(all_ax, y_labels, titles):
+        ax.yaxis.set_label_position("right")
+        ax.yaxis.tick_right()
+        ax.set_xlabel("block timestamp")
+        ax.set_ylabel(y_label)
+        ax.set_title(title)
+
+    main_fig.legend(labels=labels, loc="center left", bbox_to_anchor=(1, 0.5))
+    # Fix axes labels
+    main_fig.autofmt_xdate()
+    # matplotlib doesn't play nice with types
+    main_fig.tight_layout()  # type: ignore
+
+    st.write("Positions Over Time")
+    # matplotlib doesn't play nice with types
+    st.pyplot(fig=main_fig, clear_figure=True, use_container_width=True)  # type: ignore
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/test_fixtures/db_session.py` & `agent0-0.20.0/src/agent0/chainsync/test_fixtures/db_session.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,13 +1,12 @@
 """Create an in memory db session and creates the base db schema."""
 
 import logging
 import os
 import re
-import subprocess
 import time
 from pathlib import Path
 from typing import Iterator
 
 import docker
 import pytest
 from docker.errors import APIError, DockerException, NotFound
@@ -163,48 +162,7 @@
     Base.metadata.create_all(database_engine)  # create tables
     db_session_ = session()
 
     yield db_session_
 
     db_session_.close()
     Base.metadata.drop_all(database_engine)  # drop tables
-
-
-@pytest.fixture(scope="session")
-def db_api(psql_docker: PostgresConfig) -> Iterator[str]:  # pylint: disable=redefined-outer-name
-    """Launch a process for the db api.
-
-    Arguments
-    ---------
-    psql_docker: PostgresConfig
-        The PostgresConfig object returned by the `psql_docker` test fixture
-
-    Yields
-    -------
-    str
-        The database api uri
-    """
-    # Launch the database api server here
-    db_api_host = "127.0.0.1"
-    db_api_port = 5005
-
-    api_server_path = Path(__file__).parent.joinpath("../db/api/api_server")
-
-    # Modify an environment to set db credentials
-    env = os.environ.copy()
-    # Set all env variables from the psql docker config
-    env["POSTGRES_USER"] = psql_docker.POSTGRES_USER
-    env["POSTGRES_PASSWORD"] = psql_docker.POSTGRES_PASSWORD
-    env["POSTGRES_DB"] = psql_docker.POSTGRES_DB
-    env["POSTGRES_HOST"] = psql_docker.POSTGRES_HOST
-    env["POSTGRES_PORT"] = str(psql_docker.POSTGRES_PORT)
-
-    # Pass db credentials via env vars
-    # Since this is a forever running service, we explicitly kill after the yield returns
-    # pylint: disable=consider-using-with
-    api_process = subprocess.Popen(
-        ["flask", "--app", api_server_path, "run", "--host", db_api_host, "--port", str(db_api_port)], env=env
-    )
-
-    yield f"http://{db_api_host}:{db_api_port}"
-
-    api_process.kill()
```

### Comparing `agent0-0.18.1/src/agent0/chainsync/test_fixtures/dummy_session.py` & `agent0-0.20.0/src/agent0/chainsync/test_fixtures/dummy_session.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/base/agent/eth_agent.py` & `agent0-0.20.0/src/agent0/core/base/agent/policy_agent.py`

 * *Files 4% similar despite different names*

```diff
@@ -16,15 +16,15 @@
 from .eth_wallet import EthWallet
 
 Policy = TypeVar("Policy", bound=BasePolicy)
 MarketInterface = TypeVar("MarketInterface")
 MarketAction = TypeVar("MarketAction")
 
 
-class EthAgent(LocalAccount, Generic[Policy, MarketInterface, MarketAction]):
+class PolicyAgent(LocalAccount, Generic[Policy, MarketInterface, MarketAction]):
     r"""Enact policies on smart contracts and tracks wallet state"""
 
     def __init__(self, account: LocalAccount, initial_budget: FixedPoint | None = None, policy: Policy | None = None):
         """Initialize an agent and wallet account
 
         Arguments
         ---------
@@ -39,26 +39,26 @@
         Note
         ----
         If you wish for your private key to be generated, then you can do so with:
 
         .. code-block:: python
 
             >>> from eth_account.account import Account
-            >>> from agent0.core.base import EthAgent
-            >>> agent = EthAgent(Account().create("CHECKPOINT_BOT"))
+            >>> from agent0.core.base import PolicyAgent
+            >>> agent = PolicyAgent(Account().create("CHECKPOINT_BOT"))
 
         Alternatively, you can also use the Account api to provide a pre-generated key:
 
         .. code-block:: python
 
             >>> from eth_account.account import Account
-            >>> from agent0.core.base import EthAgent
-            >>> agent = EthAgent(Account().from_key(agent_private_key))
+            >>> from agent0.core.base import PolicyAgent
+            >>> agent = PolicyAgent(Account().from_key(agent_private_key))
 
-        The EthAgent has the same properties as a Web3 LocalAgent.
+        The PolicyAgent has the same properties as a Web3 LocalAgent.
         For example, you can get public and private keys as well as the address:
 
             .. code-block:: python
 
                 >>> address = agent.address
                 >>> checksum_address = agent.checksum_address
                 >>> public_key = agent.key
```

### Comparing `agent0-0.18.1/src/agent0/core/base/agent/eth_wallet.py` & `agent0-0.20.0/src/agent0/core/base/agent/eth_wallet.py`

 * *Files 3% similar despite different names*

```diff
@@ -7,19 +7,19 @@
 from collections import defaultdict
 from dataclasses import dataclass, field
 from typing import Any, Generic, TypeVar
 
 from fixedpointmath import FixedPoint
 from hexbytes import HexBytes
 
-from agent0.core.base.types import Quantity, TokenType, freezable
+from agent0.core.base.types import Freezable, Quantity, TokenType
 
 
 def check_non_zero(data: Any) -> None:
-    r"""Performs a general non-zero check on a dictionary or class that has a __dict__ attribute.
+    r"""Perform a general non-zero check on a dictionary or class that has a __dict__ attribute.
 
     Arguments
     ---------
     data: Any
         The data to check for non-zero values.
         If it is a FixedPoint then it will be checked.
         If it is dict-like then each key/value in the dict will be checked.
@@ -37,27 +37,26 @@
                 check_non_zero(value)
             elif hasattr(value, "__dict__"):  # can be converted to a dict
                 check_non_zero(value.__dict__)
             else:
                 continue  # noop; frozen, etc
 
 
-@freezable()
 @dataclass()
-class EthWalletDeltas:
+class EthWalletDeltas(Freezable):
     r"""Stores changes for an agent's wallet."""
 
     # fungible
     balance: Quantity = field(default_factory=lambda: Quantity(amount=FixedPoint(0), unit=TokenType.BASE))
     """The base assets that held by the trader."""
 
     # TODO: Support multiple typed balances:
     #     balance: Dict[TokenType, Quantity] = field(default_factory=dict)
     def copy(self) -> EthWalletDeltas:
-        """Returns a new copy of self.
+        """Return a new copy of self.
 
         Returns
         -------
         EthWalletDeltas
             A deepcopy of the deltas.
         """
         return EthWalletDeltas(**copy.deepcopy(self.__dict__))
@@ -82,25 +81,25 @@
     def __getitem__(self, key: str) -> Any:
         return getattr(self, key)
 
     def __setitem__(self, key: str, value: Any) -> None:
         setattr(self, key, value)
 
     def copy(self) -> EthWallet:
-        """Returns a new copy of self.
+        """Return a new copy of self.
 
         Returns
         -------
         EthWallet
             A deepcopy of the wallet.
         """
         return EthWallet(**copy.deepcopy(self.__dict__))
 
     def update(self, wallet_deltas: T) -> None:
-        """Update the agent's wallet in-place
+        """Update the agent's wallet in-place.
 
         Arguments
         ---------
         wallet_deltas: AgentDeltas
             The agent's wallet that tracks the amount of assets this agent holds
         """
         # track over time the agent's weighted average spend, for return calculation
```

### Comparing `agent0-0.18.1/src/agent0/core/base/agent/eth_wallet_test.py` & `agent0-0.20.0/src/agent0/core/base/agent/eth_wallet_test.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/base/config/budget.py` & `agent0-0.20.0/src/agent0/core/base/config/budget.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/base/make_key.py` & `agent0-0.20.0/src/agent0/core/base/make_key.py`

 * *Files 2% similar despite different names*

```diff
@@ -20,9 +20,9 @@
     Returns
     -------
     str
         The private key.
     """
     extra_key_bytes = text_if_str(to_bytes, extra_entropy)
     key_bytes = keccak(os.urandom(32) + extra_key_bytes)
-    key = Account()._parsePrivateKey(key_bytes)  # pylint: disable=protected-access
+    key = Account()._parse_private_key(key_bytes)  # pylint: disable=protected-access
     return str(key)
```

### Comparing `agent0-0.18.1/src/agent0/core/base/policies/base.py` & `agent0-0.20.0/src/agent0/core/base/policies/base.py`

 * *Files 20% similar despite different names*

```diff
@@ -5,14 +5,16 @@
 from dataclasses import dataclass
 from textwrap import dedent, indent
 from typing import TYPE_CHECKING, Any, Generic, TypeVar
 
 from fixedpointmath import FixedPoint
 from numpy.random import default_rng
 
+from agent0.core.base.types import Freezable
+
 if TYPE_CHECKING:
     from numpy.random._generator import Generator
 
     from agent0.core.base.agent import EthWallet
     from agent0.core.base.types import Trade
 
 Wallet = TypeVar("Wallet", bound="EthWallet")
@@ -21,36 +23,43 @@
 
 class BasePolicy(Generic[MarketInterface, Wallet]):
     """Base class policy."""
 
     # Because we're inheriting from this config, we need to set
     # kw_only so that we can mix and match defaults and non-defaults
     @dataclass(kw_only=True)
-    class Config:
+    class Config(Freezable):
         """Config data class for policy specific configuration."""
 
         rng_seed: int | None = None
         """The seed for the random number generator. Defaults to None."""
         rng: Generator | None = None
         """The experiment's stateful random number generator. Defaults to a spawn of the global rng."""
         slippage_tolerance: FixedPoint | None = None
         """The slippage tolerance for trades. Defaults to None."""
+        base_fee_multiple: float | None = None
+        """The base fee multiple for transactions. Defaults to None."""
+        priority_fee_multiple: float | None = None
+        """The priority fee multiple for transactions. Defaults to None."""
 
     def __init__(self, policy_config: Config):
         """Initialize the policy.
 
         Arguments
         ---------
         policy_config: Config
             The configuration for the policy.
         """
         # TODO: We add this as a helper property so that subclasses can access the config without
         # overwriting the __init__ function. The downside is that users of this member variable
         # can't be type checked. There's probably a way to do this with generics instead of Any.
         self.config: Any = policy_config
+        # lock down the config so we can't change it by either modifying existing attribs or adding new ones
+        self.config.freeze()
+        self.config.disable_new_attribs()
         self.slippage_tolerance = policy_config.slippage_tolerance
         # Generate rng if not set in config
         if policy_config.rng is None:
             self.rng: Generator = default_rng(policy_config.rng_seed)
         else:
             self.rng: Generator = policy_config.rng
```

### Comparing `agent0-0.18.1/src/agent0/core/base/policies/no_action.py` & `agent0-0.20.0/src/agent0/core/base/policies/no_action.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/base/types_test.py` & `agent0-0.20.0/src/agent0/core/base/types_test.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,158 +1,171 @@
-"""Testing for agent0 types"""
+"""Testing for agent0 types."""
 
 from __future__ import annotations
 
 import unittest
 from dataclasses import dataclass
 
-from .types import freezable
+from .types import Freezable
 
-# dynamic member attribution breaks pylint
-# pylint: disable=no-member
+# missing docstring
+# ruff: noqa: D105
+# magic value used in comparison
+# ruff: noqa: PLR2004
 
 
 @dataclass
 class ClassWithOneAttribute:
-    """Class with one attribute"""
+    """Class with one attribute."""
 
     existing_attrib: int = 1
 
 
-@freezable(frozen=False, no_new_attribs=False)
 @dataclass
-class FreezableClass(ClassWithOneAttribute):
-    """Freezable class unfrozen by default"""
+class FreezableClass(ClassWithOneAttribute, Freezable):
+    """Freezable class unfrozen by default."""
 
 
-@freezable(frozen=True, no_new_attribs=False)
 @dataclass
-class FreezableClassFrozenByDefault(ClassWithOneAttribute):
-    """Freezable class frozen by default"""
+class FreezableClassFrozenByDefault(ClassWithOneAttribute, Freezable):
+    """Freezable class frozen by default."""
+
+    def __post_init__(self):
+        self.freeze()
 
 
-@freezable(frozen=False, no_new_attribs=True)
 @dataclass
-class FreezableClassNoNewAttribsByDefault(ClassWithOneAttribute):
-    """Freezable class with no_new_attribs set by default"""
+class FreezableClassNoNewAttribsByDefault(ClassWithOneAttribute, Freezable):
+    """Freezable class with no_new_attribs set by default."""
+
+    def __post_init__(self):
+        self.disable_new_attribs()
 
 
-@freezable(frozen=True, no_new_attribs=True)
 @dataclass
-class FreezableClassFrozenNoNewAttribsByDefault(ClassWithOneAttribute):
-    """Freezable class frozen and with no_new_attribs set by default"""
+class FreezableClassFrozenNoNewAttribsByDefault(ClassWithOneAttribute, Freezable):
+    """Freezable class frozen and with no_new_attribs set by default."""
+
+    def __post_init__(self):
+        self.freeze()
+        self.disable_new_attribs()
 
 
 class TestFreezability(unittest.TestCase):
-    """Test freezable wrapper functionality
+    """Test freezable wrapper functionality.
 
     each test checks for the ability to change or add attributest, in 4 cases:
     1. not frozen
     2. frozen
     3. not frozen, but with "no_new_attribs" set
     4. frozen, and with "no_new_attribs" set
     the last 3 cases are set manually and by default in the decorator, for a total of 7 tests
-
-    NOTE: pylint and pyright throw false positives due to difficulty checking members that are added dynamically
     """
 
     def test_freezable_when_not_set(self):
-        """Freezable object when frozen is NOT set, and no_new_attribs is NOT set
-        desired behavior is: CAN change attributes, and CAN add attributes
+        """Freezable object when frozen is NOT set, and no_new_attribs is NOT set.
+
+        Desired behavior is: CAN change attributes, and CAN add attributes
         """
         freezable_object = FreezableClass()
         freezable_object.existing_attrib = 2
         freezable_object.new_attrib = 1  # pylint: disable=attribute-defined-outside-init # type: ignore
 
     def test_freezable_when_frozen_is_set(self):
-        """Freezable object when frozen IS set, but no_new_attribs is NOT set, manually
-        desired behavior is: can NOT change attributes, and CAN add attributes
+        """Freezable object when frozen IS set, but no_new_attribs is NOT set, manually.
+
+        Desired behavior is: can NOT change attributes, and CAN add attributes
         """
         freezable_object = FreezableClass()
-        freezable_object.freeze()  # pylint: disable=no-member # type: ignore
+        freezable_object.freeze()
         with self.assertRaises(AttributeError):
             freezable_object.existing_attrib = 2
         freezable_object.new_attrib = 1  # pylint: disable=attribute-defined-outside-init # type: ignore
 
     def test_freezable_when_frozen_is_set_by_default(self):
-        """Freezable object when frozen IS set, but no_new_attribs is NOT set, by default
-        desired behavior is: can NOT change attributes, and CAN add attributes
+        """Freezable object when frozen IS set, but no_new_attribs is NOT set, by default.
+
+        Desired behavior is: can NOT change attributes, and CAN add attributes
         """
         freezable_object = FreezableClassFrozenByDefault()
         with self.assertRaises(AttributeError):
             freezable_object.existing_attrib = 2
         freezable_object.new_attrib = 1  # pylint: disable=attribute-defined-outside-init # type: ignore
 
     def test_freezable_when_no_new_attribs_is_set(self):
-        """Freezable object when frozen is NOT set, but no_new_attribs IS set, manually
-        desired behavior is: CAN change attributes, and can NOT add attributes
+        """Freezable object when frozen is NOT set, but no_new_attribs IS set, manually.
+
+        Desired behavior is: CAN change attributes, and can NOT add attributes
         """
         freezable_object = FreezableClass()
-        freezable_object.disable_new_attribs()  # pylint: disable=no-member # type: ignore
+        freezable_object.disable_new_attribs()
         freezable_object.existing_attrib = 2
         with self.assertRaises(AttributeError):
             freezable_object.new_attrib = 1  # pylint: disable=attribute-defined-outside-init # type: ignore
 
     def test_freezable_when_no_new_attribs_is_set_by_default(self):
-        """Freezable object when frozen is NOT set, but no_new_attribs IS set, by default
-        desired behavior is: CAN change attributes, and can NOT add attributes
+        """Freezable object when frozen is NOT set, but no_new_attribs IS set, by default.
+
+        Desired behavior is: CAN change attributes, and can NOT add attributes
         """
         freezable_object = FreezableClassNoNewAttribsByDefault()
         freezable_object.existing_attrib = 2
         with self.assertRaises(AttributeError):
             freezable_object.new_attrib = 1  # pylint: disable=attribute-defined-outside-init # type: ignore
 
     def test_freezable_when_frozen_is_set_and_no_new_attribs_is_set(self):
-        """Freezable object when frozen IS set, and no_new_attribs IS set, manually
-        desired behavior is: can NOT change attributes, and can NOT add attributes
+        """Freezable object when frozen IS set, and no_new_attribs IS set, manually.
+
+        Desired behavior is: can NOT change attributes, and can NOT add attributes
         """
         freezable_object = FreezableClass()
-        freezable_object.freeze()  # pylint: disable=no-member # type: ignore
-        freezable_object.disable_new_attribs()  # pylint: disable=no-member # type: ignore
+        freezable_object.freeze()
+        freezable_object.disable_new_attribs()
         with self.assertRaises(AttributeError):
             freezable_object.existing_attrib = 2
         with self.assertRaises(AttributeError):
             freezable_object.new_attrib = 1  # pylint: disable=attribute-defined-outside-init # type: ignore
 
     def test_freezable_when_frozen_is_set_and_no_new_attribs_is_set_by_default(self):
-        """Freezable object when frozen IS set, and no_new_attribs IS set, by default
-        desired behavior is: can NOT change attributes, and can NOT add attributes
+        """Freezable object when frozen IS set, and no_new_attribs IS set, by default.
+
+        Desired behavior is: can NOT change attributes, and can NOT add attributes
         """
         freezable_object = FreezableClassFrozenNoNewAttribsByDefault()
         with self.assertRaises(AttributeError):
             freezable_object.existing_attrib = 2
         with self.assertRaises(AttributeError):
             freezable_object.new_attrib = 1  # pylint: disable=attribute-defined-outside-init # type: ignore
 
     def test_dtypes(self):
-        """Test dtype casting & checking capability of classes that have the freezable decorator"""
+        """Test dtype casting & checking capability of classes that have the freezable decorator."""
         freezable_object = FreezableClass(existing_attrib=4)
         # cast to int, check that it is an int
         assert isinstance(
-            freezable_object.astype(int).existing_attrib,  # type: ignore
+            freezable_object.astype(int).existing_attrib,
             int,
         )
         # cast to float, check that it is a float
         assert isinstance(
-            freezable_object.astype(float).existing_attrib,  #  type: ignore
+            freezable_object.astype(float).existing_attrib,
             float,
         )
         # cast to str, check that it is a str
         assert isinstance(
-            freezable_object.astype(str).existing_attrib,  #  type: ignore
+            freezable_object.astype(str).existing_attrib,
             str,
         )
         # cast to str, make sure value is correct
-        assert freezable_object.astype(str).existing_attrib == "4"  # type: ignore
+        assert freezable_object.astype(str).existing_attrib == "4"
         # get dtypes, confirm the key exists & that it is an int
-        assert "existing_attrib" in freezable_object.dtypes.keys()  #  type: ignore
-        assert freezable_object.dtypes["existing_attrib"] == int  #  type: ignore
+        assert "existing_attrib" in freezable_object.dtypes.keys()
+        assert freezable_object.dtypes["existing_attrib"] == int
         # cast to float, make sure dtypes updates
-        assert freezable_object.astype(float).dtypes["existing_attrib"] == float  #  type: ignore
+        assert freezable_object.astype(float).dtypes["existing_attrib"] == float
         # cast to float, make sure value is correct
-        assert freezable_object.astype(float).existing_attrib == 4.0  #  type: ignore
+        assert freezable_object.astype(float).existing_attrib == 4.0
         # check that attrib gets updated with new type
-        assert freezable_object.astype(float).__annotations__["existing_attrib"] == float  #  type: ignore
+        assert freezable_object.astype(float).__annotations__["existing_attrib"] == float  # pylint: disable=no-member
         # ERROR case: changing type to something that is not compatible
-        freezable_object = FreezableClass(existing_attrib="bleh")  #  type: ignore
+        freezable_object = FreezableClass(existing_attrib="bleh")  # type: ignore
         with self.assertRaises(TypeError):
-            freezable_object.astype(int)  #  type: ignore
+            freezable_object.astype(int)
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/agent/__init__.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/agent/__init__.py`

 * *Files 21% similar despite different names*

```diff
@@ -1,17 +1,16 @@
 """Account and wallet with Hyperdrive specific parts"""
 
-from .build_wallet_positions import build_wallet_positions_from_chain, build_wallet_positions_from_db
 from .hyperdrive_actions import (
     HyperdriveActionType,
     HyperdriveMarketAction,
     add_liquidity_trade,
     close_long_trade,
     close_short_trade,
     open_long_trade,
     open_short_trade,
     redeem_withdraw_shares_trade,
     remove_liquidity_trade,
 )
-from .hyperdrive_agent import HyperdriveAgent
+from .hyperdrive_policy_agent import HyperdrivePolicyAgent
 from .hyperdrive_wallet import HyperdriveWallet, HyperdriveWalletDeltas, Long, Short
 from .trade_result import TradeResult, TradeStatus
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/agent/hyperdrive_agent.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/agent/hyperdrive_policy_agent.py`

 * *Files 4% similar despite different names*

```diff
@@ -3,15 +3,15 @@
 from __future__ import annotations
 
 import logging
 from typing import TYPE_CHECKING, TypeVar
 
 from fixedpointmath import FixedPoint
 
-from agent0.core.base import EthAgent, MarketType
+from agent0.core.base import MarketType, PolicyAgent
 from agent0.core.base.policies import BasePolicy
 from agent0.ethpy.hyperdrive.interface import HyperdriveReadInterface
 
 from .hyperdrive_actions import (
     HyperdriveMarketAction,
     close_long_trade,
     close_short_trade,
@@ -25,15 +25,15 @@
 
     from agent0.core.base import Trade
 
 
 Policy = TypeVar("Policy", bound=BasePolicy)
 
 
-class HyperdriveAgent(EthAgent[Policy, HyperdriveReadInterface, HyperdriveMarketAction]):
+class HyperdrivePolicyAgent(PolicyAgent[Policy, HyperdriveReadInterface, HyperdriveMarketAction]):
     r"""Enact policies on smart contracts and tracks wallet state
 
     .. todo::
         should be able to get the HyperdriveMarketAction type from the HyperdriveInterface
     """
 
     def __init__(self, account: LocalAccount, initial_budget: FixedPoint | None = None, policy: Policy | None = None):
@@ -118,15 +118,17 @@
         Returns
         -------
         list[Trade]
             List of Trade type objects that represent the trades to be made by this agent
         """
         # get the action list from the policy
         # TODO: Deprecate the old wallet in favor of this new one
-        actions: list[Trade[HyperdriveMarketAction]]
-        actions, self.done_trading = self.policy.action(interface, self.wallet)
+        actions: list[Trade[HyperdriveMarketAction]] = []
+        # Short circuit if the done_trading flag is set
+        if not self.done_trading:
+            actions, self.done_trading = self.policy.action(interface, self.wallet)
         # edit each action in place
         for action in actions:
             if action.market_type == MarketType.HYPERDRIVE and action.market_action.maturity_time is None:
                 if action.market_action.trade_amount <= 0:
                     raise ValueError("Trade amount cannot be zero or negative.")
         return actions
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/agent/hyperdrive_wallet.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/agent/hyperdrive_wallet.py`

 * *Files 2% similar despite different names*

```diff
@@ -5,21 +5,20 @@
 import copy
 import logging
 from dataclasses import dataclass, field
 from typing import Iterable
 
 from fixedpointmath import FixedPoint
 
-from agent0.core.base import EthWallet, EthWalletDeltas, freezable
+from agent0.core.base import EthWallet, EthWalletDeltas
 
 
-@freezable()
 @dataclass()
 class HyperdriveWalletDeltas(EthWalletDeltas):
-    r"""Stores changes for an agent's wallet"""
+    r"""Store changes for an agent's wallet."""
 
     # dataclasses can have many attributes
     # pylint: disable=too-many-instance-attributes
 
     lp_tokens: FixedPoint = FixedPoint(0)
     """The LP tokens held by the trader."""
     # non-fungible (identified by key=maturity_time, stored as dict)
@@ -27,15 +26,15 @@
     """The long positions held by the trader."""
     shorts: dict[int, Short] = field(default_factory=dict)
     """The short positions held by the trader."""
     withdraw_shares: FixedPoint = FixedPoint(0)
     """The withdraw shares held by the trader."""
 
     def copy(self) -> HyperdriveWalletDeltas:
-        """Returns a new copy of self.
+        """Return a new copy of self.
 
         Returns
         -------
         HyperdriveWalletDeltas
             A deepcopy of the wallet deltas.
         """
         return HyperdriveWalletDeltas(**copy.deepcopy(self.__dict__))
@@ -82,15 +81,15 @@
     shorts: dict[int, Short] = field(default_factory=dict)
     """
     The short positions held by the trader.
     The dictionary is keyed by the maturity time in seconds.
     """
 
     def _update_longs(self, longs: Iterable[tuple[int, Long]]) -> None:
-        """Helper internal function that updates the data about Longs contained in the Agent's Wallet.
+        """Update the data about Longs contained in the Agent's Wallet.
 
         Arguments
         ---------
         longs: Iterable[tuple[int, Long]]
             A list (or other Iterable type) of tuples that contain a Long object
             and its market-relative maturity time
         """
@@ -111,15 +110,15 @@
                 # Removing the empty dictionary entries allows us to check existance
                 # of open longs using `if wallet.longs`
                 del self.longs[maturity_time]
             if maturity_time in self.longs and self.longs[maturity_time].balance < FixedPoint(0):
                 raise AssertionError(f"ERROR: Wallet balance should be >= 0, not {self.longs[maturity_time]}.")
 
     def _update_shorts(self, shorts: Iterable[tuple[int, Short]]) -> None:
-        """Helper internal function that updates the data about Shorts contained in the Agent's Wallet.
+        """Update the data about Shorts contained in the Agent's Wallet.
 
         Arguments
         ---------
         shorts: Iterable[tuple[int, Short]]
             A list (or other Iterable type) of tuples that contain a Short object
             and its market-relative mint time
         """
@@ -140,15 +139,15 @@
                 # Removing the empty dictionary entries allows us to check existance
                 # of open shorts using `if wallet.shorts`
                 del self.shorts[maturity_time]
             if maturity_time in self.shorts and self.shorts[maturity_time].balance < FixedPoint(0):
                 raise AssertionError(f"wallet balance should be >= 0, not {self.shorts[maturity_time]}")
 
     def copy(self) -> HyperdriveWallet:
-        """Returns a new copy of self.
+        """Return a new copy of self.
 
         Returns
         -------
         HyperdriveWallet
             A deep copy of the wallet.
         """
         return HyperdriveWallet(**copy.deepcopy(self.__dict__))
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/agent/hyperdrive_wallet_test.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/agent/hyperdrive_wallet_test.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/agent/trade_result.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/agent/trade_result.py`

 * *Files 2% similar despite different names*

```diff
@@ -9,15 +9,15 @@
 
 from agent0.ethpy.hyperdrive import ReceiptBreakdown
 
 if TYPE_CHECKING:
     from agent0.core.base import Trade
 
     from .hyperdrive_actions import HyperdriveMarketAction
-    from .hyperdrive_agent import HyperdriveAgent
+    from .hyperdrive_policy_agent import HyperdrivePolicyAgent
 
 
 class TradeStatus(Enum):
     r"""A type of token"""
 
     SUCCESS = "success"
     FAIL = "fail"
@@ -28,15 +28,15 @@
 # Dataclass has lots of attributes
 # pylint: disable=too-many-instance-attributes
 class TradeResult:
     """A data object that stores all information of an executed trade."""
 
     status: TradeStatus
     """The status of the trade."""
-    agent: HyperdriveAgent | None = None
+    agent: HyperdrivePolicyAgent | None = None
     """The agent that was executing the trade."""
     trade_object: Trade[HyperdriveMarketAction] | None = None
     """The trade object for the trade."""
     tx_receipt: ReceiptBreakdown | None = None
     """The transaction receipt of the trade."""
     contract_call: dict[str, Any] | None = None
     """A dictionary detailing the underlying contract call."""
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/crash_report/crash_report.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/crash_report/crash_report.py`

 * *Files 2% similar despite different names*

```diff
@@ -15,20 +15,21 @@
 
 from fixedpointmath import FixedPoint
 from web3 import Web3
 from web3.types import RPCEndpoint
 
 from agent0.core.hyperdrive import HyperdriveWallet, TradeResult, TradeStatus
 from agent0.ethpy.base.errors import ContractCallException
+from agent0.ethpy.hyperdrive.state import PoolState
 from agent0.hyperlogs import ExtendedJSONEncoder, logs
 from agent0.hyperlogs.rollbar_utilities import log_rollbar_exception
 
 if TYPE_CHECKING:
     from agent0.core.base import Trade
-    from agent0.core.hyperdrive import HyperdriveAgent, HyperdriveMarketAction
+    from agent0.core.hyperdrive import HyperdriveMarketAction, HyperdrivePolicyAgent
     from agent0.ethpy.hyperdrive import HyperdriveReadInterface
 
 
 def setup_hyperdrive_crash_report_logging(log_format_string: str | None = None) -> None:
     """Create a new logging file handler with CRITICAL log level for hyperdrive crash reporting.
 
     In the future, a custom log level could be used specific to crash reporting.
@@ -45,35 +46,39 @@
         delete_previous_logs=False,
         log_level=logging.CRITICAL,
     )
 
 
 # pylint: disable=too-many-statements
 # pylint: disable=too-many-branches
+# pylint: disable=too-many-arguments
 def build_crash_trade_result(
     exception: Exception,
     interface: HyperdriveReadInterface,
-    agent: HyperdriveAgent | None = None,
+    agent: HyperdrivePolicyAgent | None = None,
     trade_object: Trade[HyperdriveMarketAction] | None = None,
     additional_info: dict[str, Any] | None = None,
+    pool_state: PoolState | None = None,
 ) -> TradeResult:
     """Build the trade result object when a crash happens.
 
     Arguments
     ---------
     exception: Exception
         The exception that was thrown
     interface: HyperdriveReadInterface
         An interface for Hyperdrive with contracts deployed on any chain with an RPC url.
-    agent: HyperdriveAgent | None, optional.
+    agent: HyperdrivePolicyAgent | None, optional.
         Object containing a wallet address and Agent for determining trades. If None, won't report the agent.
     trade_object: Trade[HyperdriveMarketAction] | None, optional
-        A trade provided by a HyperdriveAgent. If None, won't report the trade object.
+        A trade provided by a HyperdrivePolicyAgent. If None, won't report the trade object.
     additional_info: dict[str, Any] | None, optional
         Additional information used for crash reporting, optional
+    pool_state: PoolState | None, optional
+        The pool state for crash reporting. If none, will get the current pool state from the interface.
 
     Returns
     -------
     TradeResult
         The trade result object.
     """
     trade_result = TradeResult(
@@ -110,20 +115,21 @@
         trade_result.contract_call = {
             "contract_call_type": None,
             "function_name_or_signature": None,
             "fn_args": None,
             "fn_kwargs": None,
         }
 
-    ## Get the pool state at the desired block number
-    pool_state = None
-    try:
-        pool_state = interface.get_hyperdrive_state(interface.get_block(trade_result.block_number))
-    except Exception:  # pylint: disable=broad-except
-        pass
+    # We trust the caller to provide the correct pool state if it's being passed in.
+    if pool_state is None:
+        # Get the pool state at the desired block number
+        try:
+            pool_state = interface.get_hyperdrive_state(interface.get_block(trade_result.block_number))
+        except Exception:  # pylint: disable=broad-except
+            pass
 
     ## Get pool config
     # Pool config is static, so we can get it from the interface here
     if pool_state is not None:
         trade_result.raw_pool_config = pool_state.pool_config_to_dict
         # We call the conversion functions to convert them to human readable versions as well
         trade_result.pool_config = asdict(pool_state.pool_config)
@@ -163,15 +169,15 @@
             )
         else:
             trade_result.checkpoint_info = None
 
         # add additional information to the exception
         trade_result.additional_info = {
             "spot_price": interface.calc_spot_price(pool_state),
-            "fixed_rate": interface.calc_fixed_rate(pool_state),
+            "fixed_rate": interface.calc_spot_rate(pool_state),
             "variable_rate": pool_state.variable_rate,
             "vault_shares": pool_state.vault_shares,
         }
 
     ## Add extra info
     trade_result.contract_addresses = {
         "hyperdrive_address": interface.hyperdrive_contract.address,
@@ -254,14 +260,20 @@
             assert False
 
     if trade_result.agent is not None:
         agent_wallet = trade_result.agent.wallet
     else:
         agent_wallet = None
 
+    # Best attempt at getting a git commit version
+    try:
+        commit_hash = _get_git_revision_hash()
+    except Exception:  # pylint: disable=broad-except
+        commit_hash = None
+
     dump_obj = OrderedDict(
         [
             ("log_time", time_str),
             ("block_number", trade_result.block_number),
             ("block_timestamp", trade_result.block_timestamp),
             ("exception", trade_result.exception),
             ("orig_exception", trade_result.orig_exception),
@@ -276,15 +288,15 @@
             ("checkpoint_info", trade_result.checkpoint_info),
             ("contract_addresses", trade_result.contract_addresses),
             ("additional_info", trade_result.additional_info),
             ("traceback", trade_result.exception.__traceback__),
             ("orig_traceback", orig_traceback),
             # NOTE if this crash report happens in a PR that gets squashed,
             # we loose this hash.
-            ("commit_hash", _get_git_revision_hash()),
+            ("commit_hash", commit_hash),
             # Environment details
         ]
     )
 
     # We use ordered dict to ensure the outermost order is preserved
     logging_crash_report = json.dumps(dump_obj, indent=2, cls=ExtendedJSONEncoder)
 
@@ -389,23 +401,25 @@
         "action_type": trade_obj.market_action.action_type.name,
         "trade_amount": trade_obj.market_action.trade_amount,
         "slippage_tolerance": trade_obj.market_action.slippage_tolerance,
         "maturity_time": trade_obj.market_action.maturity_time,
     }
 
 
-def _hyperdrive_agent_to_dict(agent: HyperdriveAgent | None):
+def _hyperdrive_agent_to_dict(agent: HyperdrivePolicyAgent | None):
     if agent is None:
         return {}
     return {"address": agent.checksum_address, "policy": agent.policy.name}
 
 
 def _get_git_revision_hash() -> str:
     """Helper function for getting commit hash from git."""
-    return subprocess.check_output(["git", "rev-parse", "HEAD"]).decode("ascii").strip()
+    # Use the directory of this file
+    dir_path = os.path.dirname(os.path.realpath(__file__))
+    return subprocess.check_output(["git", "-C", dir_path, "rev-parse", "HEAD"]).decode("ascii").strip()
 
 
 def get_anvil_state_dump(web3: Web3) -> str | None:
     """Helper function for getting anvil dump state.
 
     Arguments
     ---------
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/crash_report/known_error_checks.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/crash_report/known_error_checks.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/interactive/econ_tests.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/interactive/econ_tests.py`

 * *Files 13% similar despite different names*

```diff
@@ -1,29 +1,29 @@
 """Tests of economic intuition."""
 
 import pytest
 from fixedpointmath import FixedPoint
 
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 
 YEAR_IN_SECONDS = 31_536_000
 
 
 @pytest.mark.anvil
-def test_symmetry(chain: ILocalChain):
+def test_symmetry(fast_chain_fixture: LocalChain):
     """Does in equal out?
 
     One may be under the impression swaps between x and y have the same result, irrespective of direction.
     We set the number of bonds in and out to 100k and see if the resulting shares_in and shares_out differ."""
-    interactive_config = ILocalHyperdrive.Config(
+    interactive_config = LocalHyperdrive.Config(
         position_duration=YEAR_IN_SECONDS,  # 1 year term
         governance_lp_fee=FixedPoint(0.1),
         curve_fee=FixedPoint(0.01),
         flat_fee=FixedPoint(0),
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, interactive_config)
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, interactive_config)
     interface = interactive_hyperdrive.interface
     shares_out = interface.calc_shares_out_given_bonds_in_down(FixedPoint(100_000))
     shares_in = interface.calc_shares_in_given_bonds_out_down(FixedPoint(100_000))
     print(shares_out)
     print(shares_in)
     assert shares_out != shares_in
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/interactive/event_types.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/interactive/event_types.py`

 * *Files 21% similar despite different names*

```diff
@@ -15,159 +15,183 @@
 
     trader: ChecksumAddress
     """The address of the trader."""
     asset_id: int
     """The encoded asset id for this long."""
     maturity_time: int
     """The maturity time for the opened long."""
-    base_amount: FixedPoint
-    """The amount of longs opened in units of base."""
-    vault_share_amount: FixedPoint
-    """The amount of longs opened in units of shares."""
+    amount: FixedPoint
+    """The amount of longs opened, units dependent on `as_base` flag."""
+    vault_share_price: FixedPoint
+    """The share price at the time of this trade."""
     as_base: bool
     """If the input amount for the trade was in base or shares."""
     bond_amount: FixedPoint
     """The amount of longs opened in units of bonds."""
 
+    # Expose the name of the object
+    __name__: str = "OpenLong"
+
 
 @dataclass
 class CloseLong:
     """Dataclass mirroring CloseLong event in Hyperdrive."""
 
     trader: ChecksumAddress
     """The address of the trader."""
     destination: ChecksumAddress
     """The address that receives the proceeds of the trade."""
     asset_id: int
     """The encoded asset id for this long."""
     maturity_time: int
     """The maturity time for the closed long."""
-    base_amount: FixedPoint
-    """The amount of longs closed in units of base."""
-    vault_share_amount: FixedPoint
-    """The amount of longs closed in units of shares."""
+    amount: FixedPoint
+    """The amount of longs closed, units dependent on `as_base` flag."""
+    vault_share_price: FixedPoint
+    """The share price at the time of this trade."""
     as_base: bool
     """If the input amount for the trade was in base or shares."""
     bond_amount: FixedPoint
     """The amount of longs closed in units of bonds."""
 
+    # Expose the name of the object
+    __name__: str = "CloseLong"
+
 
 @dataclass
 class OpenShort:
     # pylint: disable=too-many-instance-attributes
     """Dataclass mirroring OpenShort event in Hyperdrive."""
     trader: ChecksumAddress
     """The address of the trader."""
     asset_id: int
     """The encoded asset id for this short."""
     maturity_time: int
     """The maturity time for the opened short."""
-    base_amount: FixedPoint
-    """The amount spent from opening the short, in units of base."""
-    vault_share_amount: FixedPoint
-    """The amount spent from opening the short, in units of shares."""
+    amount: FixedPoint
+    """The amount spent from opening the short, units dependent on `as_base` flag."""
+    vault_share_price: FixedPoint
+    """The share price at the time of this trade."""
     as_base: bool
     """If the input amount for the trade was in base or shares."""
     base_proceeds: FixedPoint
     """The amount of base in the underlying short when shorting bonds."""
     bond_amount: FixedPoint
     """The amount of shorts opened in units of bonds."""
 
+    # Expose the name of the object
+    __name__: str = "OpenShort"
+
 
 @dataclass
 class CloseShort:
     """Dataclass mirroring CloseShort event in Hyperdrive."""
 
     trader: ChecksumAddress
     """The address of the trader."""
     destination: ChecksumAddress
     """The address that receives the proceeds of the trade."""
     asset_id: int
     """The encoded asset id for this short."""
     maturity_time: int
     """The maturity time for the closed short."""
-    base_amount: FixedPoint
-    """The amount retrieved from closing the short, in units of base."""
-    vault_share_amount: FixedPoint
-    """The amount retrieved from closing the short, in units of shares."""
+    amount: FixedPoint
+    """The amount spent from closing the short, units dependent on `as_base` flag."""
+    vault_share_price: FixedPoint
+    """The share price at the time of this trade."""
     as_base: bool
     """If the input amount for the trade was in base or shares."""
     base_payment: FixedPoint
     """The amount of base in the underlying short when shorting bonds."""
     bond_amount: FixedPoint
     """The amount of shorts closed in units of bonds."""
 
+    # Expose the name of the object
+    __name__: str = "CloseShort"
+
 
 @dataclass
 class AddLiquidity:
     """Dataclass mirroring AddLiquidity event in Hyperdrive."""
 
     provider: ChecksumAddress
     """The address of the lp provider."""
     lp_amount: FixedPoint
     """The amount of liquidity added in units of lp."""
-    base_amount: FixedPoint
-    """The amount of liquidity added, in units of base."""
-    vault_share_amount: FixedPoint
-    """The amount of liquidity added, in units of shares."""
+    amount: FixedPoint
+    """The amount of liquidity added, units dependent on `as_base` flag."""
+    vault_share_price: FixedPoint
+    """The share price at the time of this trade."""
     as_base: bool
     """If the input amount for the trade was in base or shares."""
     lp_share_price: FixedPoint
     """The lp share price for this trade."""
 
+    # Expose the name of the object
+    __name__: str = "AddLiquidity"
+
 
 @dataclass
 class RemoveLiquidity:
     """Dataclass mirroring RemoveLiquidity event in Hyperdrive."""
 
     provider: ChecksumAddress
     """The address of the lp provider."""
     destination: ChecksumAddress
     """The address that receives the proceeds of the trade."""
     lp_amount: FixedPoint
     """The amount of liquidity removed in units of lp."""
-    base_amount: FixedPoint
-    """The amount of liquidity removed, in units of base."""
-    vault_share_amount: FixedPoint
-    """The amount of liquidity removed, in units of shares."""
+    amount: FixedPoint
+    """The amount of liquidity removed, units dependent on `as_base` flag."""
+    vault_share_price: FixedPoint
+    """The share price at the time of this trade."""
     as_base: bool
     """If the input amount for the trade was in base or shares."""
     withdrawal_share_amount: FixedPoint
     """The amount of withdrawal shares received from removing liquidity."""
     lp_share_price: FixedPoint
     """The lp share price for this trade."""
 
+    # Expose the name of the object
+    __name__: str = "RemoveLiquidity"
+
 
 @dataclass
 class RedeemWithdrawalShares:
     """Dataclass mirroring RedeemWithdrawalShares event in Hyperdrive."""
 
     provider: ChecksumAddress
     """The address of the lp provider."""
     destination: ChecksumAddress
     """The address that receives the proceeds of the trade."""
     withdrawal_share_amount: FixedPoint
     """The amount of withdrawal shares redeemed, in units of withdrawal shares."""
-    base_amount: FixedPoint
-    """The amount of withdrawal shares redeemed, in units of base."""
-    vault_share_amount: FixedPoint
-    """The amount of withdrawal shares redeemed, in units of shares."""
+    amount: FixedPoint
+    """The amount of withdrawal shares redeemed, units dependent on `as_base` flag."""
+    vault_share_price: FixedPoint
+    """The share price at the time of this trade."""
     as_base: bool
     """If the input amount for the trade was in base or shares."""
 
+    # Expose the name of the object
+    __name__: str = "RedeemWithdrawalShares"
+
 
 @dataclass
 class CreateCheckpoint:
     """Dataclass mirroring CreateCheckpoint event in Hyperdrive."""
 
     checkpoint_time: int
-    """The seconds epoch time for this checkpoint."""
+    """The seconds epoch time index for this checkpoint."""
     vault_share_price: FixedPoint
     """The current vault share price."""
     checkpoint_vault_share_price: FixedPoint
-    """The share price at the checkpoint."""
+    """The share price that was checkpointed in this checkpoint."""
     matured_shorts: FixedPoint
     """The amount of shorts that matured within this checkpoint."""
     matured_longs: FixedPoint
     """The amount of longs that matured within this checkpoint."""
     lp_share_price: FixedPoint
     """The lp share price at the checkpoint."""
+
+    # Expose the name of the object
+    __name__: str = "CreateCheckpoint"
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/interactive/exec/check_for_new_block.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/interactive/exec/check_for_new_block.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/interactive/exec/execute_agent_trades.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/interactive/exec/execute_agent_trades.py`

 * *Files 10% similar despite different names*

```diff
@@ -27,20 +27,22 @@
 from agent0.core.hyperdrive.policies import HyperdriveBasePolicy
 from agent0.core.test_utils import assert_never
 from agent0.ethpy.base import retry_call
 from agent0.ethpy.base.transactions import DEFAULT_READ_RETRY_COUNT
 from agent0.ethpy.hyperdrive import HyperdriveReadInterface, HyperdriveReadWriteInterface, ReceiptBreakdown
 
 if TYPE_CHECKING:
-    from agent0.core.hyperdrive import HyperdriveAgent
+    from agent0.core.hyperdrive import HyperdrivePolicyAgent
 
 
+# pylint: disable=too-many-arguments
 async def async_execute_agent_trades(
     interface: HyperdriveReadWriteInterface,
-    agent: HyperdriveAgent,
+    agent: HyperdrivePolicyAgent,
+    preview_before_trade: bool,
     liquidate: bool,
     randomize_liquidation: bool = False,
     interactive_mode: bool = False,
 ) -> list[TradeResult]:
     """Executes a single agent's trade based on its policy.
     This function is async as `_match_contract_call_to_trade` waits for a transaction receipt.
 
@@ -49,16 +51,18 @@
     (2) the agent's wallet update is not thread safe.
     (3) acquiring the base nonce for this set of trades is not thread safe.
 
     Arguments
     ---------
     interface: HyperdriveReadWriteInterface
         The Hyperdrive API interface object.
-    agent: HyperdriveAgent
-        The HyperdriveAgent that is conducting the trade.
+    agent: HyperdrivePolicyAgent
+        The HyperdrivePolicyAgent that is conducting the trade.
+    preview_before_trade: bool
+        Whether or not to preview the trade before it is executed.
     liquidate: bool
         If set, will ignore all policy settings and liquidate all open positions.
     randomize_liquidation: bool, optional
         If set, will randomize the order of liquidation trades.
         Defaults to False.
     interactive_mode: bool, optional
         If set, running in interactive mode.
@@ -95,15 +99,21 @@
 
     # TODO preliminary search shows async tasks has very low overhead:
     # https://stackoverflow.com/questions/55761652/what-is-the-overhead-of-an-asyncio-task
     # However, should probably test the limit number of trades an agent can make in one block
     wallet_deltas_or_exception: list[tuple[HyperdriveWalletDeltas, ReceiptBreakdown] | BaseException] = (
         await asyncio.gather(
             *[
-                _async_match_contract_call_to_trade(agent, interface, trade_object, nonce=Nonce(base_nonce + i))
+                _async_match_contract_call_to_trade(
+                    agent,
+                    interface,
+                    trade_object,
+                    nonce=Nonce(base_nonce + i),
+                    preview_before_trade=preview_before_trade,
+                )
                 for i, trade_object in enumerate(trades)
             ],
             # Instead of throwing exception, return the exception to the caller here
             return_exceptions=True,
         )
     )
 
@@ -125,47 +135,56 @@
         agent.policy.post_action(interface, deepcopy(trade_results))
 
     return trade_results
 
 
 async def async_execute_single_trade(
     interface: HyperdriveReadWriteInterface,
-    agent: HyperdriveAgent,
+    agent: HyperdrivePolicyAgent,
     trade_object: Trade[HyperdriveMarketAction],
     execute_policy_post_action: bool,
+    preview_before_trade: bool,
 ) -> TradeResult:
     """Executes a single trade made by the agent.
 
     .. note :: This function is not thread safe, as
     (1) the agent's wallet update is not thread safe
     (2) acquiring the nonce for this trade is not thread safe
 
     Arguments
     ---------
     interface: HyperdriveReadWriteInterface
         The Hyperdrive API interface object.
-    agent: HyperdriveAgent
-        The HyperdriveAgent that is conducting the trade.
+    agent: HyperdrivePolicyAgent
+        The HyperdrivePolicyAgent that is conducting the trade.
     trade_object: Trade[HyperdriveMarketAction]
         The trade to execute.
     execute_policy_post_action: bool
         Whether or not to execute the post_action of the policy after the trade.
+    preview_before_trade: bool
+        Whether or not to preview the trade before it is executed.
 
     Returns
     -------
     TradeResult
         The result of the trade.
     """
 
     # TODO we likely need to bookkeep nonces here to avoid a race condition when this function
     # is being called asynchronously
     nonce = retry_call(DEFAULT_READ_RETRY_COUNT, None, interface.web3.eth.get_transaction_count, agent.checksum_address)
 
     try:
-        wallet_delta_or_exception = await _async_match_contract_call_to_trade(agent, interface, trade_object, nonce)
+        wallet_delta_or_exception = await _async_match_contract_call_to_trade(
+            agent,
+            interface,
+            trade_object,
+            nonce,
+            preview_before_trade,
+        )
     except Exception as e:  # pylint: disable=broad-except
         wallet_delta_or_exception = e
 
     trade_results = _handle_contract_call_to_trade_and_update_wallets(
         [wallet_delta_or_exception], [trade_object], interface, agent
     )
 
@@ -188,28 +207,28 @@
     return trade_results[0]
 
 
 def _handle_contract_call_to_trade_and_update_wallets(
     wallet_deltas_or_exception: list[tuple[HyperdriveWalletDeltas, ReceiptBreakdown] | BaseException],
     trades: list[Trade[HyperdriveMarketAction]],
     interface: HyperdriveReadInterface,
-    agent: HyperdriveAgent,
+    agent: HyperdrivePolicyAgent,
 ) -> list[TradeResult]:
     """Handle the results of executing trades. This function also updates the underlying agent's wallet.
 
     Arguments
     ---------
     wallet_deltas_or_exception: list[tuple[HyperdriveWalletDeltas, ReceiptBreakdown] | BaseException]
         The results of executing trades. This argument is either the output of
         _async_match_contract_call_to_trade or an exception to crash report.
     trades: list[HyperdriveMarketAction]
         The list of trades that were executed.
     interface: HyperdriveReadInterface
         The read interface for the market.
-    agent: HyperdriveAgent
+    agent: HyperdrivePolicyAgent
         The agent that executed the trades.
 
     Returns
     -------
     list[TradeResult]
         Returns the list of trade results.
     """
@@ -251,24 +270,25 @@
             )
         trade_results.append(trade_result)
 
     return trade_results
 
 
 async def _async_match_contract_call_to_trade(
-    agent: HyperdriveAgent,
+    agent: HyperdrivePolicyAgent,
     interface: HyperdriveReadWriteInterface,
     trade_envelope: Trade[HyperdriveMarketAction],
     nonce: Nonce,
+    preview_before_trade,
 ) -> tuple[HyperdriveWalletDeltas, ReceiptBreakdown]:
     """Match statement that executes the smart contract trade based on the provided type.
 
     Arguments
     ---------
-    agent: HyperdriveAgent
+    agent: HyperdrivePolicyAgent
         Object containing a wallet address and Agent for determining trades.
     interface: HyperdriveReadWriteInterface
         The Hyperdrive API interface object.
     trade_envelope: Trade[HyperdriveMarketAction]
         A specific Hyperdrive trade requested by the given agent.
     nonce: Nonce, optional
         Override the transaction number assigned to the transaction call from the agent wallet.
@@ -286,18 +306,24 @@
         case HyperdriveActionType.OPEN_LONG:
             trade_result = await interface.async_open_long(
                 agent,
                 trade.trade_amount,
                 slippage_tolerance=trade.slippage_tolerance,
                 gas_limit=trade.gas_limit,
                 nonce=nonce,
+                preview_before_trade=preview_before_trade,
             )
+            # No need to check if unit is in base,
+            # as we use the yield token itself as
+            # the base token. The switch happens when making
+            # trades.
+            # This will get reworked when we support multiple pools.
             wallet_deltas = HyperdriveWalletDeltas(
                 balance=Quantity(
-                    amount=-trade_result.base_amount,
+                    amount=-trade_result.amount,
                     unit=TokenType.BASE,
                 ),
                 longs={
                     trade_result.maturity_time_seconds: Long(
                         balance=trade_result.bond_amount, maturity_time=trade_result.maturity_time_seconds
                     )
                 },
@@ -309,18 +335,19 @@
             trade_result = await interface.async_close_long(
                 agent,
                 trade.trade_amount,
                 trade.maturity_time,
                 slippage_tolerance=trade.slippage_tolerance,
                 gas_limit=trade.gas_limit,
                 nonce=nonce,
+                preview_before_trade=preview_before_trade,
             )
             wallet_deltas = HyperdriveWalletDeltas(
                 balance=Quantity(
-                    amount=trade_result.base_amount,
+                    amount=trade_result.amount,
                     unit=TokenType.BASE,
                 ),
                 longs={
                     trade.maturity_time: Long(
                         balance=-trade_result.bond_amount, maturity_time=trade_result.maturity_time_seconds
                     )
                 },
@@ -329,18 +356,19 @@
         case HyperdriveActionType.OPEN_SHORT:
             trade_result = await interface.async_open_short(
                 agent,
                 trade.trade_amount,
                 slippage_tolerance=trade.slippage_tolerance,
                 gas_limit=trade.gas_limit,
                 nonce=nonce,
+                preview_before_trade=preview_before_trade,
             )
             wallet_deltas = HyperdriveWalletDeltas(
                 balance=Quantity(
-                    amount=-trade_result.base_amount,
+                    amount=-trade_result.amount,
                     unit=TokenType.BASE,
                 ),
                 shorts={
                     trade_result.maturity_time_seconds: Short(
                         balance=trade_result.bond_amount, maturity_time=trade_result.maturity_time_seconds
                     )
                 },
@@ -352,18 +380,19 @@
             trade_result = await interface.async_close_short(
                 agent,
                 trade.trade_amount,
                 trade.maturity_time,
                 slippage_tolerance=trade.slippage_tolerance,
                 gas_limit=trade.gas_limit,
                 nonce=nonce,
+                preview_before_trade=preview_before_trade,
             )
             wallet_deltas = HyperdriveWalletDeltas(
                 balance=Quantity(
-                    amount=trade_result.base_amount,
+                    amount=trade_result.amount,
                     unit=TokenType.BASE,
                 ),
                 shorts={
                     trade.maturity_time: Short(
                         balance=-trade_result.bond_amount, maturity_time=trade_result.maturity_time_seconds
                     )
                 },
@@ -378,43 +407,52 @@
                 agent,
                 trade.trade_amount,
                 trade.min_apr,
                 trade.max_apr,
                 slippage_tolerance=None,
                 gas_limit=trade.gas_limit,
                 nonce=nonce,
+                preview_before_trade=preview_before_trade,
             )
             wallet_deltas = HyperdriveWalletDeltas(
                 balance=Quantity(
-                    amount=-trade_result.base_amount,
+                    amount=-trade_result.amount,
                     unit=TokenType.BASE,
                 ),
                 lp_tokens=trade_result.lp_amount,
             )
 
         case HyperdriveActionType.REMOVE_LIQUIDITY:
             trade_result = await interface.async_remove_liquidity(
-                agent, trade.trade_amount, gas_limit=trade.gas_limit, nonce=nonce
+                agent,
+                trade.trade_amount,
+                gas_limit=trade.gas_limit,
+                nonce=nonce,
+                preview_before_trade=preview_before_trade,
             )
             wallet_deltas = HyperdriveWalletDeltas(
                 balance=Quantity(
-                    amount=trade_result.base_amount,
+                    amount=trade_result.amount,
                     unit=TokenType.BASE,
                 ),
                 lp_tokens=-trade_result.lp_amount,
                 withdraw_shares=trade_result.withdrawal_share_amount,
             )
 
         case HyperdriveActionType.REDEEM_WITHDRAW_SHARE:
             trade_result = await interface.async_redeem_withdraw_shares(
-                agent, trade.trade_amount, gas_limit=trade.gas_limit, nonce=nonce
+                agent,
+                trade.trade_amount,
+                gas_limit=trade.gas_limit,
+                nonce=nonce,
+                preview_before_trade=preview_before_trade,
             )
             wallet_deltas = HyperdriveWalletDeltas(
                 balance=Quantity(
-                    amount=trade_result.base_amount,
+                    amount=trade_result.amount,
                     unit=TokenType.BASE,
                 ),
                 withdraw_shares=-trade_result.withdrawal_share_amount,
             )
 
         case _:
             # Should never get here
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/interactive/exec/set_max_approval.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/interactive/exec/set_max_approval.py`

 * *Files 2% similar despite different names*

```diff
@@ -4,26 +4,26 @@
 
 import logging
 
 import eth_utils
 from web3 import Web3
 from web3.contract.contract import Contract
 
-from agent0.core.hyperdrive import HyperdriveAgent
+from agent0.core.hyperdrive import HyperdrivePolicyAgent
 from agent0.ethpy.base import smart_contract_transact
 
 
 def set_max_approval(
-    agent: HyperdriveAgent, web3: Web3, base_token_contract: Contract, hyperdrive_address: str
+    agent: HyperdrivePolicyAgent, web3: Web3, base_token_contract: Contract, hyperdrive_address: str
 ) -> None:
     """Establish max approval for the hyperdrive contract for the given agent.
 
     Arguments
     ---------
-    agent: HyperdriveAgent
+    agent: HyperdrivePolicyAgent
         A Hyperdrive agent to approve.
     web3: Web3
         web3 provider object.
     base_token_contract: Contract
         The deployed ERC20 base token contract.
     hyperdrive_address: str
         The address of the deployed hyperdrive contract.
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/interactive/i_hyperdrive_test.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/interactive/hyperdrive_test.py`

 * *Files 22% similar despite different names*

```diff
@@ -1,117 +1,150 @@
 """Tests interactive hyperdrive end to end."""
 
 import pytest
 from fixedpointmath import FixedPoint
 
 from agent0.core.base.make_key import make_private_key
-from agent0.core.hyperdrive import HyperdriveWallet
-from agent0.ethpy.hyperdrive import AssetIdPrefix, HyperdriveReadInterface, encode_asset_id
+from agent0.ethpy.hyperdrive import AssetIdPrefix, encode_asset_id
 
-from .i_chain import IChain
-from .i_hyperdrive import IHyperdrive
-from .i_local_chain import ILocalChain
-from .i_local_hyperdrive import ILocalHyperdrive
+from .chain import Chain
+from .hyperdrive import Hyperdrive
+from .hyperdrive_agent import HyperdriveAgent
+from .local_chain import LocalChain
+from .local_hyperdrive import LocalHyperdrive
 
 # needed to pass in fixtures
 # pylint: disable=redefined-outer-name
 # ruff: noqa: PLR2004 (comparison against magic values (literals like numbers))
 # allow non-lazy logging
 # pylint: disable=logging-fstring-interpolation
 
 
-def _ensure_agent_wallet_is_correct(wallet: HyperdriveWallet, interface: HyperdriveReadInterface) -> None:
-    """Check that the agent's wallet matches what's reported from the chain.
+def _ensure_db_wallet_matches_agent_wallet_and_chain(in_hyperdrive: Hyperdrive, agent: HyperdriveAgent):
+    # pylint: disable=too-many-locals
 
-    Will assert that balances match.
+    # NOTE this function is assuming only one agent is making trades
+    interface = in_hyperdrive.interface
 
-    Arguments
-    ---------
-    wallet: HyperdriveWallet
-        The HyperdriveWallet object to check against the chain
-    interface: HyperdriveReadInterface
-        The Hyperdrive API interface object
-    """
-    # Check base
-    base_from_chain = interface.base_token_contract.functions.balanceOf(
-        interface.web3.to_checksum_address(wallet.address.hex())
-    ).call()
-    assert wallet.balance.amount == FixedPoint(scaled_value=base_from_chain)
-
-    # Check lp positions
+    # Test against db
+    positions_df = agent.get_positions(coerce_float=False)
+    # Filter for wallet
+    positions_df = positions_df[positions_df["wallet_address"] == agent.checksum_address]
+
+    agent_wallet = agent.get_wallet()
+
+    # Check lp
+    lp_wallet_df = positions_df[positions_df["token_type"] == "LP"]
+    if len(lp_wallet_df) == 0:
+        check_value = FixedPoint(0)
+    elif len(lp_wallet_df) == 1:
+        check_value = FixedPoint(lp_wallet_df.iloc[0]["token_balance"])
+    else:
+        assert False
+    assert check_value == agent_wallet.lp_tokens
     asset_id = encode_asset_id(AssetIdPrefix.LP, 0)
-    address = interface.web3.to_checksum_address(wallet.address.hex())
-    lp_from_chain = interface.hyperdrive_contract.functions.balanceOf(asset_id, address).call()
-    assert wallet.lp_tokens == FixedPoint(scaled_value=lp_from_chain)
+    lp_from_chain = interface.hyperdrive_contract.functions.balanceOf(asset_id, agent.checksum_address).call()
+    assert check_value == FixedPoint(scaled_value=lp_from_chain)
 
-    # Check withdrawal positions
+    # Check withdrawal_shares
+    withdrawal_wallet_df = positions_df[positions_df["token_type"] == "WITHDRAWAL_SHARE"]
+    if len(withdrawal_wallet_df) == 0:
+        check_value = FixedPoint(0)
+    elif len(withdrawal_wallet_df) == 1:
+        check_value = FixedPoint(withdrawal_wallet_df.iloc[0]["token_balance"])
+    else:
+        assert False
+    assert check_value == agent_wallet.withdraw_shares
     asset_id = encode_asset_id(AssetIdPrefix.WITHDRAWAL_SHARE, 0)
-    address = interface.web3.to_checksum_address(wallet.address.hex())
-    withdrawal_from_chain = interface.hyperdrive_contract.functions.balanceOf(asset_id, address).call()
-    assert wallet.withdraw_shares == FixedPoint(scaled_value=withdrawal_from_chain)
-
-    # Check long positions
-    for long_time, long_amount in wallet.longs.items():
-        asset_id = encode_asset_id(AssetIdPrefix.LONG, long_time)
-        address = interface.web3.to_checksum_address(wallet.address.hex())
-        long_from_chain = interface.hyperdrive_contract.functions.balanceOf(asset_id, address).call()
-        assert long_amount.balance == FixedPoint(scaled_value=long_from_chain)
-
-    # Check short positions
-    for short_time, short_amount in wallet.shorts.items():
-        asset_id = encode_asset_id(AssetIdPrefix.SHORT, short_time)
-        address = interface.web3.to_checksum_address(wallet.address.hex())
-        short_from_chain = interface.hyperdrive_contract.functions.balanceOf(asset_id, address).call()
-        assert short_amount.balance == FixedPoint(scaled_value=short_from_chain)
+    withdrawal_from_chain = interface.hyperdrive_contract.functions.balanceOf(asset_id, agent.checksum_address).call()
+    assert check_value == FixedPoint(scaled_value=withdrawal_from_chain)
+
+    # Check longs
+    # Longs still show up in positions even if they're 0, since they also keep track of values
+    long_wallet_df = positions_df[positions_df["token_type"] == "LONG"]
+    assert len(long_wallet_df) == len(agent_wallet.longs)
+    for _, long_df in long_wallet_df.iterrows():
+        maturity_time = int(long_df["maturity_time"])
+        assert maturity_time in agent_wallet.longs
+        assert agent_wallet.longs[maturity_time].balance == long_df["token_balance"]
+        asset_id = encode_asset_id(AssetIdPrefix.LONG, maturity_time)
+        long_from_chain = interface.hyperdrive_contract.functions.balanceOf(asset_id, agent.checksum_address).call()
+        assert FixedPoint(scaled_value=long_from_chain) == FixedPoint(long_df["token_balance"])
+
+    # Check shorts
+    short_wallet_df = positions_df[positions_df["token_type"] == "SHORT"]
+    assert len(short_wallet_df) == len(agent_wallet.shorts)
+    for _, short_df in short_wallet_df.iterrows():
+        maturity_time = int(short_df["maturity_time"])
+        assert maturity_time in agent_wallet.shorts
+        assert agent_wallet.shorts[maturity_time].balance == short_df["token_balance"]
+        asset_id = encode_asset_id(AssetIdPrefix.SHORT, maturity_time)
+        short_from_chain = interface.hyperdrive_contract.functions.balanceOf(asset_id, agent.checksum_address).call()
+        assert FixedPoint(scaled_value=short_from_chain) == FixedPoint(short_df["token_balance"])
+
+
+@pytest.mark.anvil
+def test_hyperdrive_from_local_chain_not_allowed(fast_chain_fixture: LocalChain):
+    initial_pool_config = LocalHyperdrive.Config(
+        initial_liquidity=FixedPoint(1_000),
+        initial_fixed_apr=FixedPoint("0.05"),
+        position_duration=60 * 60 * 24 * 365,  # 1 year
+    )
+    # Launches a local hyperdrive pool
+    # This deploys the pool
+    interactive_local_hyperdrive = LocalHyperdrive(fast_chain_fixture, initial_pool_config)
+
+    hyperdrive_address = interactive_local_hyperdrive.hyperdrive_address
+    with pytest.raises(TypeError):
+        # We ensure we can't initialize a remote hyperdrive object from a local chain.
+        _ = Hyperdrive(fast_chain_fixture, hyperdrive_address)
 
 
 # Lots of things to test
 # pylint: disable=too-many-locals
 # pylint: disable=too-many-statements
 # ruff: noqa: PLR0915 (too many statements)
 @pytest.mark.anvil
-@pytest.mark.parametrize("check_remote_chain", [True, False])
-def test_remote_funding_and_trades(chain: ILocalChain, check_remote_chain: bool):
+def test_remote_funding_and_trades(fast_chain_fixture: LocalChain):
     """Deploy a local chain and point the remote interface to the local chain."""
     # Parameters for pool initialization. If empty, defaults to default values, allows for custom values if needed
     # We explicitly set initial liquidity here to ensure we have withdrawal shares when trading
-    initial_pool_config = ILocalHyperdrive.Config(
+    initial_pool_config = LocalHyperdrive.Config(
         initial_liquidity=FixedPoint(1_000),
         initial_fixed_apr=FixedPoint("0.05"),
         position_duration=60 * 60 * 24 * 365,  # 1 year
     )
     # Launches a local hyperdrive pool
     # This deploys the pool
-    interactive_local_hyperdrive = ILocalHyperdrive(chain, initial_pool_config)
+    interactive_local_hyperdrive = LocalHyperdrive(fast_chain_fixture, initial_pool_config)
 
     # Gather relevant objects from the local hyperdrive
-    hyperdrive_addresses = interactive_local_hyperdrive.get_hyperdrive_address()
+    hyperdrive_address = interactive_local_hyperdrive.hyperdrive_address
 
     # Connect to the local chain using the remote hyperdrive interface
-    if check_remote_chain:
-        remote_chain = IChain(chain.rpc_uri)
-        interactive_remote_hyperdrive = IHyperdrive(remote_chain, hyperdrive_addresses)
-    else:
-        interactive_remote_hyperdrive = IHyperdrive(chain, hyperdrive_addresses)
+    # To avoid a port conflict with the existing db container in `fast_chain_fixture`,
+    # we use a separate chain port here
+    remote_chain = Chain(fast_chain_fixture.rpc_uri, Chain.Config(db_port=40000))
+    interactive_remote_hyperdrive = Hyperdrive(remote_chain, hyperdrive_address)
 
     # Generate trading agents from the interactive object
     hyperdrive_agent0 = interactive_remote_hyperdrive.init_agent(private_key=make_private_key())
     hyperdrive_agent1 = interactive_remote_hyperdrive.init_agent(private_key=make_private_key())
 
     # Add funds
     hyperdrive_agent0.add_funds(base=FixedPoint(1_111_111), eth=FixedPoint(111))
     hyperdrive_agent1.add_funds(base=FixedPoint(222_222), eth=FixedPoint(222))
 
     # Set max approval
     hyperdrive_agent0.set_max_approval()
     hyperdrive_agent1.set_max_approval()
 
     # Ensure agent wallet have expected balances
-    assert (hyperdrive_agent0.wallet.balance.amount) == FixedPoint(1_111_111)
-    assert (hyperdrive_agent1.wallet.balance.amount) == FixedPoint(222_222)
+    assert (hyperdrive_agent0.get_wallet().balance.amount) == FixedPoint(1_111_111)
+    assert (hyperdrive_agent1.get_wallet().balance.amount) == FixedPoint(222_222)
 
     # Ensure chain balances are as expected
     (
         chain_eth_balance,
         chain_base_balance,
     ) = interactive_remote_hyperdrive.interface.get_eth_base_balances(hyperdrive_agent0.agent)
     assert chain_base_balance == FixedPoint(1_111_111)
@@ -125,200 +158,113 @@
     ) = interactive_remote_hyperdrive.interface.get_eth_base_balances(hyperdrive_agent1.agent)
     assert chain_base_balance == FixedPoint(222_222)
     # There was a little bit of gas spent to approve, so we don't do a direct comparison here
     assert (FixedPoint(222) - chain_eth_balance) < FixedPoint("0.0002")
 
     # Test trades
     add_liquidity_event = hyperdrive_agent0.add_liquidity(base=FixedPoint(111_111))
-    assert add_liquidity_event.base_amount == FixedPoint(111_111)
-    assert hyperdrive_agent0.wallet.lp_tokens == add_liquidity_event.lp_amount
-    _ensure_agent_wallet_is_correct(hyperdrive_agent0.wallet, interactive_remote_hyperdrive.interface)
+    assert add_liquidity_event.as_base
+    assert add_liquidity_event.amount == FixedPoint(111_111)
+    assert hyperdrive_agent0.get_wallet().lp_tokens == add_liquidity_event.lp_amount
+    _ensure_db_wallet_matches_agent_wallet_and_chain(interactive_remote_hyperdrive, hyperdrive_agent0)
 
     # Open long
     open_long_event = hyperdrive_agent0.open_long(base=FixedPoint(22_222))
-    assert open_long_event.base_amount == FixedPoint(22_222)
-    agent0_longs = list(hyperdrive_agent0.wallet.longs.values())
+    assert open_long_event.as_base
+    assert open_long_event.amount == FixedPoint(22_222)
+    agent0_longs = list(hyperdrive_agent0.get_wallet().longs.values())
     assert len(agent0_longs) == 1
     assert agent0_longs[0].balance == open_long_event.bond_amount
     assert agent0_longs[0].maturity_time == open_long_event.maturity_time
-    _ensure_agent_wallet_is_correct(hyperdrive_agent0.wallet, interactive_remote_hyperdrive.interface)
+    _ensure_db_wallet_matches_agent_wallet_and_chain(interactive_remote_hyperdrive, hyperdrive_agent0)
 
     # Testing adding another agent to the pool after trades have been made, making a trade,
     # then checking wallet
     hyperdrive_agent2 = interactive_remote_hyperdrive.init_agent(private_key=make_private_key())
     hyperdrive_agent2.add_funds(base=FixedPoint(111_111), eth=FixedPoint(111))
     hyperdrive_agent2.set_max_approval()
     open_long_event_2 = hyperdrive_agent2.open_long(base=FixedPoint(333))
 
-    assert open_long_event_2.base_amount == FixedPoint(333)
-    agent2_longs = list(hyperdrive_agent2.wallet.longs.values())
+    assert open_long_event_2.as_base
+    assert open_long_event_2.amount == FixedPoint(333)
+    agent2_longs = list(hyperdrive_agent2.get_wallet().longs.values())
     assert len(agent2_longs) == 1
     assert agent2_longs[0].balance == open_long_event_2.bond_amount
     assert agent2_longs[0].maturity_time == open_long_event_2.maturity_time
-    _ensure_agent_wallet_is_correct(hyperdrive_agent2.wallet, interactive_remote_hyperdrive.interface)
+    _ensure_db_wallet_matches_agent_wallet_and_chain(interactive_remote_hyperdrive, hyperdrive_agent0)
 
     # Remove liquidity
     remove_liquidity_event = hyperdrive_agent0.remove_liquidity(shares=add_liquidity_event.lp_amount)
     assert add_liquidity_event.lp_amount == remove_liquidity_event.lp_amount
-    assert hyperdrive_agent0.wallet.lp_tokens == FixedPoint(0)
-    assert hyperdrive_agent0.wallet.withdraw_shares == remove_liquidity_event.withdrawal_share_amount
-    _ensure_agent_wallet_is_correct(hyperdrive_agent0.wallet, interactive_remote_hyperdrive.interface)
+    assert hyperdrive_agent0.get_wallet().lp_tokens == FixedPoint(0)
+    assert hyperdrive_agent0.get_wallet().withdraw_shares == remove_liquidity_event.withdrawal_share_amount
+    _ensure_db_wallet_matches_agent_wallet_and_chain(interactive_remote_hyperdrive, hyperdrive_agent0)
 
     # We ensure there exists some withdrawal shares that were given from the previous trade for testing purposes
     assert remove_liquidity_event.withdrawal_share_amount > 0
 
+    # Add liquidity back to ensure we can close positions
+    add_liquidity_event = hyperdrive_agent0.add_liquidity(base=FixedPoint(111_111))
+    assert add_liquidity_event.as_base
+    assert add_liquidity_event.amount == FixedPoint(111_111)
+    assert hyperdrive_agent0.get_wallet().lp_tokens == add_liquidity_event.lp_amount
+    _ensure_db_wallet_matches_agent_wallet_and_chain(interactive_remote_hyperdrive, hyperdrive_agent0)
+
     # Open short
     open_short_event = hyperdrive_agent0.open_short(bonds=FixedPoint(333))
     assert open_short_event.bond_amount == FixedPoint(333)
-    agent0_shorts = list(hyperdrive_agent0.wallet.shorts.values())
+    agent0_shorts = list(hyperdrive_agent0.get_wallet().shorts.values())
     assert len(agent0_shorts) == 1
     assert agent0_shorts[0].balance == open_short_event.bond_amount
     assert agent0_shorts[0].maturity_time == open_short_event.maturity_time
-    _ensure_agent_wallet_is_correct(hyperdrive_agent0.wallet, interactive_remote_hyperdrive.interface)
+    _ensure_db_wallet_matches_agent_wallet_and_chain(interactive_remote_hyperdrive, hyperdrive_agent0)
 
     # Close long
     close_long_event = hyperdrive_agent0.close_long(
         maturity_time=open_long_event.maturity_time, bonds=open_long_event.bond_amount
     )
     assert open_long_event.bond_amount == close_long_event.bond_amount
     assert open_long_event.maturity_time == close_long_event.maturity_time
-    assert len(hyperdrive_agent0.wallet.longs) == 0
-    _ensure_agent_wallet_is_correct(hyperdrive_agent0.wallet, interactive_remote_hyperdrive.interface)
+    assert len(hyperdrive_agent0.get_wallet().longs) == 0
+    _ensure_db_wallet_matches_agent_wallet_and_chain(interactive_remote_hyperdrive, hyperdrive_agent0)
 
     # Close short
     close_short_event = hyperdrive_agent0.close_short(
         maturity_time=open_short_event.maturity_time, bonds=open_short_event.bond_amount
     )
     assert open_short_event.bond_amount == close_short_event.bond_amount
     assert open_short_event.maturity_time == close_short_event.maturity_time
-    assert len(hyperdrive_agent0.wallet.shorts) == 0
-    _ensure_agent_wallet_is_correct(hyperdrive_agent0.wallet, interactive_remote_hyperdrive.interface)
+    assert len(hyperdrive_agent0.get_wallet().shorts) == 0
+    _ensure_db_wallet_matches_agent_wallet_and_chain(interactive_remote_hyperdrive, hyperdrive_agent0)
 
     # Redeem withdrawal shares
     # Note that redeeming withdrawal shares for more than available in the pool
     # will pull out as much withdrawal shares as possible
     redeem_event = hyperdrive_agent0.redeem_withdraw_share(shares=remove_liquidity_event.withdrawal_share_amount)
     assert (
-        hyperdrive_agent0.wallet.withdraw_shares
+        hyperdrive_agent0.get_wallet().withdraw_shares
         == remove_liquidity_event.withdrawal_share_amount - redeem_event.withdrawal_share_amount
     )
-    _ensure_agent_wallet_is_correct(hyperdrive_agent0.wallet, interactive_remote_hyperdrive.interface)
-
-
-@pytest.mark.anvil
-@pytest.mark.parametrize("check_remote_chain", [True, False])
-def test_multi_account_bookkeeping(chain: ILocalChain, check_remote_chain: bool):
-    # Parameters for pool initialization. If empty, defaults to default values, allows for custom values if needed
-    # We explicitly set initial liquidity here to ensure we have withdrawal shares when trading
-    initial_pool_config = ILocalHyperdrive.Config(
-        initial_liquidity=FixedPoint(1_000),
-        initial_fixed_apr=FixedPoint("0.05"),
-        position_duration=60 * 60 * 24 * 365,  # 1 year
-    )
-    # Launches a local hyperdrive pool
-    # This deploys the pool
-    interactive_local_hyperdrive_0 = ILocalHyperdrive(chain, initial_pool_config)
-    interactive_local_hyperdrive_1 = ILocalHyperdrive(chain, initial_pool_config)
+    _ensure_db_wallet_matches_agent_wallet_and_chain(interactive_remote_hyperdrive, hyperdrive_agent0)
 
-    # Gather relevant objects from the local hyperdrive
-    hyperdrive_addresses_0 = interactive_local_hyperdrive_0.get_hyperdrive_address()
-    hyperdrive_addresses_1 = interactive_local_hyperdrive_1.get_hyperdrive_address()
-
-    # Connect to the local chain using the remote hyperdrive interface
-    if check_remote_chain:
-        remote_chain = IChain(chain.rpc_uri)
-        interactive_remote_hyperdrive_0 = IHyperdrive(remote_chain, hyperdrive_addresses_0)
-        interactive_remote_hyperdrive_1 = IHyperdrive(remote_chain, hyperdrive_addresses_1)
-    else:
-        interactive_remote_hyperdrive_0 = IHyperdrive(chain, hyperdrive_addresses_0)
-        interactive_remote_hyperdrive_1 = IHyperdrive(chain, hyperdrive_addresses_1)
-
-    # Generate trading agents from the interactive object
-    private_key = make_private_key()
-    _ = interactive_remote_hyperdrive_0.init_agent(private_key=private_key)
-
-    # Initializing an agent with an existing key should fail
-    with pytest.raises(ValueError):
-        _ = interactive_remote_hyperdrive_0.init_agent(private_key=private_key)
-
-    # Initializing an agent with an existing key on a separate pool should fail
-    with pytest.raises(ValueError):
-        _ = interactive_remote_hyperdrive_1.init_agent(private_key=private_key)
+    remote_chain.cleanup()
 
 
 @pytest.mark.anvil
-@pytest.mark.parametrize("check_remote_chain", [True, False])
-def test_no_policy_call(chain: ILocalChain, check_remote_chain: bool):
+def test_no_policy_call(fast_chain_fixture: LocalChain):
     """Deploy a local chain and point the remote interface to the local chain."""
-    initial_pool_config = ILocalHyperdrive.Config()
-    interactive_local_hyperdrive = ILocalHyperdrive(chain, initial_pool_config)
-    hyperdrive_addresses = interactive_local_hyperdrive.get_hyperdrive_address()
+    initial_pool_config = LocalHyperdrive.Config()
+    interactive_local_hyperdrive = LocalHyperdrive(fast_chain_fixture, initial_pool_config)
+    hyperdrive_addresses = interactive_local_hyperdrive.hyperdrive_address
     # Connect to the local chain using the remote hyperdrive interface
-    if check_remote_chain:
-        remote_chain = IChain(chain.rpc_uri)
-        interactive_remote_hyperdrive = IHyperdrive(remote_chain, hyperdrive_addresses)
-    else:
-        interactive_remote_hyperdrive = IHyperdrive(chain, hyperdrive_addresses)
+    # To avoid a port conflict with the existing db container in `fast_chain_fixture`,
+    # we use a separate chain port here
+    remote_chain = Chain(fast_chain_fixture.rpc_uri, Chain.Config(db_port=40000))
+    interactive_remote_hyperdrive = Hyperdrive(remote_chain, hyperdrive_addresses)
 
     # Create agent without policy passed in
     hyperdrive_agent = interactive_remote_hyperdrive.init_agent(private_key=make_private_key())
     # Attempt to execute agent policy, should throw value error
     with pytest.raises(ValueError):
         hyperdrive_agent.execute_policy_action()
 
-
-@pytest.mark.anvil
-@pytest.mark.parametrize("check_remote_chain", [True, False])
-def test_sync_wallet_from_chain(chain: ILocalChain, check_remote_chain: bool):
-    """Deploy a local chain and point the remote interface to the local chain."""
-    # Parameters for pool initialization. If empty, defaults to default values, allows for custom values if needed
-    # We explicitly set initial liquidity here to ensure we have withdrawal shares when trading
-    initial_pool_config = ILocalHyperdrive.Config(
-        initial_liquidity=FixedPoint(1_000),
-        initial_fixed_apr=FixedPoint("0.05"),
-        position_duration=60 * 60 * 24 * 365,  # 1 year
-    )
-    # Launches a local hyperdrive pool
-    # This deploys the pool
-    interactive_local_hyperdrive = ILocalHyperdrive(chain, initial_pool_config)
-
-    # Gather relevant objects from the local hyperdrive
-    hyperdrive_addresses = interactive_local_hyperdrive.get_hyperdrive_address()
-
-    # Connect to the local chain using the remote hyperdrive interface
-    if check_remote_chain:
-        remote_chain = IChain(chain.rpc_uri)
-        interactive_remote_hyperdrive = IHyperdrive(remote_chain, hyperdrive_addresses)
-    else:
-        interactive_remote_hyperdrive = IHyperdrive(chain, hyperdrive_addresses)
-
-    # Generate trading agents from the interactive object using the same underlying wallet
-    private_key = make_private_key()
-    hyperdrive_remote_agent = interactive_remote_hyperdrive.init_agent(private_key=private_key)
-    hyperdrive_local_agent = interactive_local_hyperdrive.init_agent(private_key=private_key)
-
-    # TODO check balance of calls in this test
-
-    # Add funds to the local agent, remote agent wallet doesn't update
-    hyperdrive_local_agent.add_funds(base=FixedPoint(1_111_111), eth=FixedPoint(111))
-    hyperdrive_local_agent.add_liquidity(base=FixedPoint(111_111))
-    hyperdrive_local_agent.open_long(base=FixedPoint(222))
-    hyperdrive_local_agent.open_short(bonds=FixedPoint(333))
-
-    # Sync the remote agent wallet from the chain and ensure it's correct
-    hyperdrive_remote_agent.sync_wallet_from_chain()
-    assert len(hyperdrive_remote_agent.wallet.longs) == 1
-    assert len(hyperdrive_remote_agent.wallet.shorts) == 1
-    # We only check balances of shorts
-    assert list(hyperdrive_remote_agent.wallet.shorts.values())[0].balance == FixedPoint(333)
-
-    # Add funds to the remote agent and see local agent wallet doesn't update
-    hyperdrive_remote_agent.add_funds(base=FixedPoint(1_111_111), eth=FixedPoint(111))
-    hyperdrive_remote_agent.add_liquidity(base=FixedPoint(111_111))
-    hyperdrive_remote_agent.open_long(base=FixedPoint(222))
-    hyperdrive_remote_agent.open_short(bonds=FixedPoint(333))
-
-    # Sync local wallet from chain and ensure it's correct
-    hyperdrive_local_agent.sync_wallet_from_chain()
-    assert len(hyperdrive_local_agent.wallet.longs) == 1
-    assert len(hyperdrive_local_agent.wallet.shorts) == 1
-    assert list(hyperdrive_local_agent.wallet.shorts.values())[0].balance == FixedPoint(666)
+    remote_chain.cleanup()
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/interactive/i_local_chain.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/interactive/local_chain.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,72 +1,64 @@
 """The chain objects that encapsulates a chain."""
 
 from __future__ import annotations
 
-import contextlib
-import logging
 import os
+import pathlib
 import subprocess
 import time
-from dataclasses import dataclass
+from dataclasses import asdict, dataclass
 from datetime import datetime, timedelta, timezone
 from pathlib import Path
 from typing import TYPE_CHECKING
 
-import docker
-from docker.errors import NotFound
-from docker.models.containers import Container
+import dill
+from eth_account.account import Account
+from eth_account.signers.local import LocalAccount
+from IPython.display import IFrame
 from web3.types import RPCEndpoint
 
-from agent0.chainsync import PostgresConfig
 from agent0.chainsync.db.hyperdrive.import_export_data import export_db_to_file, import_to_db
 from agent0.core.hyperdrive.crash_report import get_anvil_state_dump
 
+from .chain import Chain
 from .event_types import CreateCheckpoint
-from .i_chain import IChain
 
 if TYPE_CHECKING:
-    from .i_local_hyperdrive import ILocalHyperdrive
+    from .local_hyperdrive import LocalHyperdrive
 
 
 # pylint: disable=too-many-instance-attributes
-class ILocalChain(IChain):
+class LocalChain(Chain):
     """Launches a local anvil chain in a subprocess, along with a postgres container."""
 
     # Pylint is complaining that `load_state` is an abstract method, so we need to overwrite here.
     # However, `load_state` is just a function stub that needs to throw `NotImplementedError` if called.
     # pylint: disable=abstract-method
 
-    @dataclass
-    class Config:
+    @dataclass(kw_only=True)
+    class Config(Chain.Config):
         """The configuration for the local chain object."""
 
+        dashboard_port: int = 7777
+        """The URL port for the deployed dashboard."""
         block_time: int | None = None
         """If None, mines per transaction. Otherwise mines every `block_time` seconds."""
         block_timestamp_interval: int | None = 12
         """Number of seconds to advance time for every mined block. Uses real time if None."""
         chain_port: int = 10_000
         """The port to bind for the anvil chain. Will fail if this port is being used."""
         transaction_block_keeper: int = 10_000
         """The number of blocks to keep transaction records for. Undocumented in Anvil, we're being optimistic here."""
-        db_port: int = 5433
-        """
-        The port to bind for the postgres container. Will fail if this port is being used.
-        Defaults to 5433.
-        """
-        remove_existing_db_container: bool = True
-        """Whether to remove the existing container if it exists on container launch. Defaults to True."""
         snapshot_dir: str = ".interactive_state/snapshot/"
         """The directory where the snapshot will be stored. Defaults to `.interactive_state/snapshot/`."""
         saved_state_dir: str = ".interactive_state/"
         """The directory where the saved state will be stored. Defaults to `.interactive_state/`."""
-        experimental_data_threading: bool = False
-        """Flag for running the data pipeline in a separate thread. Defaults to False."""
 
-    def __init__(self, config: Config | None = None):
+    def __init__(self, config: Config | None = None, fork_uri: str | None = None, fork_block_number: int | None = None):
         """Initialize the Chain class that connects to an existing chain.
 
         Also launch a postgres docker container for gathering data.
 
         Arguments
         ---------
         config: Config | None
@@ -84,73 +76,100 @@
             "--code-size-limit",
             "9999999999",
             "--transaction-block-keeper",
             str(config.transaction_block_keeper),
         ]
         if config.block_time is not None:
             anvil_launch_args.extend(("--block-time", str(config.block_time)))
+
+        if fork_uri is not None:
+            anvil_launch_args.extend(["--fork-url", fork_uri])
+            if fork_block_number is not None:
+                anvil_launch_args.extend(["--fork-block-number", str(fork_block_number)])
+
         # This process never stops, so we run this in the background and explicitly clean up later
         self.anvil_process = subprocess.Popen(  # pylint: disable=consider-using-with
             # Suppressing output of anvil
             anvil_launch_args,
             stdout=subprocess.DEVNULL,
             stderr=subprocess.STDOUT,
         )
 
-        super().__init__(f"http://127.0.0.1:{str(config.chain_port)}")
+        # TODO HACK wait for anvil to start, ideally we would be looking for the output to stdout
+        # Forking takes a bit longer to spin up, so we only sleep when forking
+        if fork_uri is not None:
+            time.sleep(2)
 
-        # Remove protocol and replace . and : with dashes
-        formatted_rpc_url = (
-            self.rpc_uri.replace("http://", "").replace("https://", "").replace(".", "-").replace(":", "-")
-        )
-        db_container_name = f"postgres-interactive-hyperdrive-{formatted_rpc_url}"
-        self.postgres_config, self.postgres_container = self._initialize_postgres_container(
-            db_container_name, config.db_port, config.remove_existing_db_container
-        )
-        assert isinstance(self.postgres_container, Container)
+        super().__init__(f"http://127.0.0.1:{str(config.chain_port)}", config)
 
         # Snapshot bookkeeping
+        # TODO snapshot dir will be clobbered if you run multiple chains simultaneously
         self._snapshot_dir = config.snapshot_dir
         self._saved_snapshot_id: str
         self._has_saved_snapshot = False
-        self._deployed_hyperdrive_pools: list[ILocalHyperdrive] = []
-        self.experimental_data_threading = config.experimental_data_threading
+        self._deployed_hyperdrive_pools: list[LocalHyperdrive] = []
+
+        # Ensure snapshot dir exists
+        os.makedirs(self._snapshot_dir, exist_ok=True)
 
         if config.block_timestamp_interval is not None:
             self._set_block_timestamp_interval(config.block_timestamp_interval)
 
+        self.config = config
+        self.dashboard_subprocess: subprocess.Popen | None = None
+
         # TODO hack, wait for chain to init
         time.sleep(1)
 
     def cleanup(self):
         """Kills the subprocess in this class' destructor."""
         # Runs cleanup on all deployed pools
-        for pool in self._deployed_hyperdrive_pools:
-            pool._cleanup()  # pylint: disable=protected-access
-        self.postgres_container.kill()
-        self.anvil_process.kill()
+        try:
+            if self.anvil_process is not None:
+                self.anvil_process.kill()
+        except Exception:  # pylint: disable=broad-except
+            pass
+
+        try:
+            if self.dashboard_subprocess is not None:
+                self.dashboard_subprocess.kill()
+                self.dashboard_subprocess = None
+        except Exception:  # pylint: disable=broad-except
+            pass
+
         super().cleanup()
 
-    def __del__(self):
-        """Kill subprocess in this class' destructor."""
-        with contextlib.suppress(Exception):
-            self.cleanup()
-        super().__del__()
+    # def __del__(self):
+    #    """Kill subprocess in this class' destructor."""
+    #    with contextlib.suppress(Exception):
+    #        self.cleanup()
+    #    super().__del__()
 
     def get_deployer_account_private_key(self) -> str:
         """Get the private key of the deployer account.
 
         Returns
         -------
         str
             The private key for the deployer account.
         """
         # TODO this is the deployed account for anvil, get this programmatically
         return "0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"
 
+    def get_deployer_account_address(self) -> str:
+        """Get the public key of the deployer account.
+
+        Returns
+        -------
+        src
+            The public key for the deployer account.
+        """
+        account: LocalAccount = Account().from_key(self.get_deployer_account_private_key())
+        return account.address
+
     def _advance_chain_time(self, time_delta: int) -> None:
         # We explicitly set the next block timestamp to be exactly time_delta seconds
         # after the previous block. Hence, we first get the current block, followed by
         # an explicit set of the next block timestamp, followed by a mine.
         latest_blocktime = self._web3.eth.get_block("latest").get("timestamp", None)
         if latest_blocktime is None:
             raise AssertionError("The provided block has no timestamp")
@@ -168,15 +187,15 @@
         # ensure response is valid
         if "result" not in response:
             raise KeyError("Response did not have a result.")
 
     # pylint: disable=too-many-branches
     def advance_time(
         self, time_delta: int | timedelta, create_checkpoints: bool = True
-    ) -> dict[ILocalHyperdrive, list[CreateCheckpoint]]:
+    ) -> dict[LocalHyperdrive, list[CreateCheckpoint]]:
         """Advance time for this chain using the `evm_mine` RPC call.
 
         This function looks at the timestamp of the current block, then
         mines a block explicitly setting the timestamp to the current block timestamp + time_delta.
 
         If create_checkpoints is True, it will also create intermediate when advancing time.
 
@@ -203,34 +222,23 @@
         """
         # pylint: disable=too-many-locals
         if isinstance(time_delta, timedelta):
             time_delta = int(time_delta.total_seconds())
         else:
             time_delta = int(time_delta)  # convert int-like (e.g. np.int64) types to int
 
-        out_dict: dict[ILocalHyperdrive, list[CreateCheckpoint]] = {
-            pool: [] for pool in self._deployed_hyperdrive_pools
-        }
+        out_dict: dict[LocalHyperdrive, list[CreateCheckpoint]] = {pool: [] for pool in self._deployed_hyperdrive_pools}
 
         # Don't checkpoint when advancing time if `create_checkpoints` is false
         # or there are no deployed pools
         if (not create_checkpoints) or (len(self._deployed_hyperdrive_pools) == 0):
             self._advance_chain_time(time_delta)
-            # Advancing time mines a block, so we update data pipeline here
-            if not self.experimental_data_threading:
-                for pool in self._deployed_hyperdrive_pools:
-                    pool._run_blocking_data_pipeline()  # pylint: disable=protected-access
+            for pool in self._deployed_hyperdrive_pools:
+                pool._run_blocking_data_pipeline()  # pylint: disable=protected-access
         else:
-            # Creating checkpoints mines blocks very fast, which then makes the data pipeline not be able to keep up.
-            # We avoid this by skipping all the intermediate blocks in the database when advancing time.
-            if self.experimental_data_threading:
-                for pool in self._deployed_hyperdrive_pools:
-                    pool._ensure_data_caught_up()  # pylint: disable=protected-access
-                    pool._stop_data_pipeline()  # pylint: disable=protected-access
-
             # For every pool, check the checkpoint duration and advance the chain for that amount of time,
             # followed by creating a checkpoint for that pool.
             # TODO support multiple pools with different checkpoint durations
             checkpoint_durations = [
                 pool.interface.pool_config.checkpoint_duration for pool in self._deployed_hyperdrive_pools
             ]
             if not all(checkpoint_durations[0] == x for x in checkpoint_durations):
@@ -274,21 +282,16 @@
 
             # Final advance time to advance the remainder
             # Best effort, if offset is larger than the remainder, don't advance time again.
             if last_advance_time - offset > 0:
                 self._advance_chain_time(last_advance_time - offset)
 
             curr_block = self._web3.eth.get_block_number()
-            if self.experimental_data_threading:
-                # Restart the data pipeline on the current block time.
-                for pool in self._deployed_hyperdrive_pools:
-                    pool._launch_data_pipeline(curr_block)  # pylint: disable=protected-access
-            else:
-                for pool in self._deployed_hyperdrive_pools:
-                    pool._run_blocking_data_pipeline(curr_block)  # pylint: disable=protected-access
+            for pool in self._deployed_hyperdrive_pools:
+                pool._run_blocking_data_pipeline(curr_block)  # pylint: disable=protected-access
 
         return out_dict
 
     def save_state(self, save_dir: str | None = None, save_prefix: str | None = None) -> str:
         """Saves the interactive state using the `anvil_dumpState` RPC call.
         Saving/loading state can be done across chains.
 
@@ -344,27 +347,40 @@
         Arguments
         ---------
         load_dir: str
             The directory to load the state from.
         """
         raise NotImplementedError
 
+    def _anvil_save_snapshot(self) -> None:
+        response = self._web3.provider.make_request(method=RPCEndpoint("evm_snapshot"), params=[])
+        if "result" not in response:
+            raise KeyError("Response did not have a result.")
+        self._saved_snapshot_id = response["result"]
+
     def save_snapshot(self) -> None:
         """Saves a snapshot using the `evm_snapshot` RPC call.
         The chain can store one snapshot at a time, saving another snapshot overwrites the previous snapshot.
         Saving/loading snapshot only persist on the same chain, not across chains.
         """
-        response = self._web3.provider.make_request(method=RPCEndpoint("evm_snapshot"), params=[])
-        if "result" not in response:
-            raise KeyError("Response did not have a result.")
-        self._saved_snapshot_id = response["result"]
+        self._anvil_save_snapshot()
 
         # Save the db state
         self._dump_db(self._snapshot_dir)
 
+        # Save bookkeeping of deployed pools
+        # We save the addresses of deployed pools for loading
+        pool_filename = self._snapshot_dir + "/" + self.chain_id + "-pools.pkl"
+        pool_addr_list = [pool.hyperdrive_address for pool in self._deployed_hyperdrive_pools]
+        with open(pool_filename, "wb") as file:
+            dill.dump(pool_addr_list, file, dill.HIGHEST_PROTOCOL)
+
+        for pool in self._deployed_hyperdrive_pools:
+            pool._save_agent_bookkeeping(self._snapshot_dir)  # pylint: disable=protected-access
+
         # Need to save all agent's policy states
         for pool in self._deployed_hyperdrive_pools:
             pool._save_policy_state(self._snapshot_dir)  # pylint: disable=protected-access
 
         self._has_saved_snapshot = True
 
     def load_snapshot(self) -> None:
@@ -381,94 +397,165 @@
         if not self._has_saved_snapshot:
             raise ValueError("No saved snapshot to load")
 
         response = self._web3.provider.make_request(method=RPCEndpoint("evm_revert"), params=[self._saved_snapshot_id])
         if "result" not in response:
             raise KeyError("Response did not have a result.")
 
+        # Load the bookkeeping of deployed pools
+        pool_filename = self._snapshot_dir + "/" + self.chain_id + "-pools.pkl"
+        with open(pool_filename, "rb") as file:
+            hyperdrive_pools: list[str] = dill.load(file)
+
+        # Given the current list of deployed hyperdrive pools, we throw away any pools deployed
+        # after the snapshot
+        self._deployed_hyperdrive_pools = [
+            p for p in self._deployed_hyperdrive_pools if p.hyperdrive_address in hyperdrive_pools
+        ]
+        # NOTE: existing pool objects initialized after snapshot will no longer be valid.
+
         # load snapshot database state
         self._load_db(self._snapshot_dir)
 
+        # Update pool's agent bookkeeping
+        for pool in self._deployed_hyperdrive_pools:
+            pool._load_agent_bookkeeping(self._snapshot_dir)  # pylint: disable=protected-access
+
         # The hyperdrive interface in deployed pools need to wipe it's cache
         for pool in self._deployed_hyperdrive_pools:
             pool._reinit_state_after_load_snapshot()  # pylint: disable=protected-access
             pool._load_policy_state(self._snapshot_dir)  # pylint: disable=protected-access
 
-        self.save_snapshot()
+        # Save another anvil snapshot since reverting consumes the snapshot
+        self._anvil_save_snapshot()
 
-    def _initialize_postgres_container(
-        self, container_name: str, db_port: int, remove_existing_db_container: bool
-    ) -> tuple[PostgresConfig, Container]:
-        # Attempt to use the default socket if it exists
-        try:
-            client = docker.from_env()
-        except Exception:  # pylint: disable=broad-exception-caught
-            home_dir = os.path.expanduser("~")
-            socket_path = Path(f"{home_dir}") / ".docker" / "desktop" / "docker.sock"
-            if socket_path.exists():
-                logging.debug("Docker not found at default socket, using %s..", socket_path)
-                client = docker.DockerClient(base_url=f"unix://{socket_path}")
-            else:
-                logging.debug("Docker not found.")
-                client = docker.from_env()
+    def get_dashboard_iframe(self, width: int = 1000, height: int = 800) -> IFrame:
+        """Embeds the streamlit dashboard into a Jupyter notebook as an IFrame.
+
+        .. note::
+            The interactive hyperdrive script must be in a paused state (before cleanup) for the dashboard to
+            connect with the underlying database, otherwise `cleanup` and/or the main thread executed will kill the
+            streamlit server. Passing ``blocking=True`` will block execution of the main
+            script in this function until a keypress is registered.
 
-        postgres_config = PostgresConfig(
-            POSTGRES_USER="admin",
-            POSTGRES_PASSWORD="password",
-            POSTGRES_DB="",  # Filled in by the pool as needed
-            POSTGRES_HOST="127.0.0.1",
-            POSTGRES_PORT=db_port,
+        Arguments
+        ---------
+        width: int
+            Width, in pixels, of the IFrame.
+            Defaults to 1000.
+        height: int
+            Height, in pixels, of the IFrame.
+            Defaults to 800.
+
+        Returns
+        -------
+        IFrame
+            A dashboard IFrame that can be shown in a Jupyter notebook with the `display` command.
+        """
+        dashboard_run_command = self._get_dashboard_run_command(
+            flags=[
+                "--server.headless",
+                "true",
+                "--server.port",
+                str(self.config.dashboard_port),
+                "--server.address",
+                "localhost",
+            ]
         )
+        env = {key: str(val) for key, val in asdict(self.postgres_config).items()}
+        self.dashboard_subprocess = subprocess.Popen(  # pylint: disable=consider-using-with
+            dashboard_run_command,
+            env=env,
+            # stdout=subprocess.PIPE,
+            stderr=subprocess.STDOUT,
+        )
+        network_url = f"http://localhost:{self.config.dashboard_port}"
 
-        # Kill the test container if it already exists
-        try:
-            existing_container = client.containers.get(container_name)
-            assert isinstance(existing_container, Container)
-        except NotFound:
-            # Container doesn't exist, ignore
-            existing_container = None
-
-        if existing_container is not None and remove_existing_db_container:
-            existing_container.remove(v=True, force=True)
-
-        # TODO ensure this container auto removes by itself
-        container = client.containers.run(
-            image="postgres",
-            auto_remove=True,
-            environment={
-                "POSTGRES_USER": postgres_config.POSTGRES_USER,
-                "POSTGRES_PASSWORD": postgres_config.POSTGRES_PASSWORD,
-            },
-            name=container_name,
-            ports={"5432/tcp": ("127.0.0.1", postgres_config.POSTGRES_PORT)},
-            detach=True,
-            remove=True,
+        dashboard_iframe = IFrame(src=network_url, width=width, height=height)
+        time.sleep(2)  # TODO: This is a hack, need to sleep to let the page load
+        return dashboard_iframe
+
+    def _get_dashboard_run_command(self, flags: list[str] | None = None) -> list[str]:
+        """Returns the run command for launching a Streamlit dashboard.
+
+        Arguments
+        ---------
+        flags: list[str] | None, optional
+            List of streamlit flags to be added to the run command.
+            Commands and arguments should be separate entries, for example: ["--server.headless", "true"]
+            Defaults to an empty list, which passes no flags.
+
+        Returns
+        -------
+        str
+            The streamlit run command string.
+        """
+        if flags is None:
+            flags = []
+        # In order to support this command in both notebooks and scripts, we reference
+        # the path to the virtual environment relative to this file.
+        base_dir = pathlib.Path(__file__).parent.parent.parent.parent.parent.parent.resolve()
+        venv_dir = pathlib.Path(os.environ["VIRTUAL_ENV"])
+        streamlit_path = str(venv_dir / "bin" / "streamlit")
+        dashboard_path = str(base_dir / "src" / "agent0" / "chainsync" / "streamlit" / "Dashboard.py")
+        dashboard_run_command = (
+            [streamlit_path, "run"]
+            + flags
+            + [
+                dashboard_path,
+            ]
+        )
+        return dashboard_run_command
+
+    def run_dashboard(self, blocking: bool = False) -> None:
+        """Runs the streamlit dashboard in a subprocess connected to interactive hyperdrive.
+
+        .. note::
+            The interactive hyperdrive script must be in a paused state (before cleanup) for the dashboard to
+            connect with the underlying database, otherwise `cleanup` and/or the main thread executed will kill the
+            streamlit server. Passing ``blocking=True`` will block execution of the main
+            script in this function until a keypress is registered.
+
+        Arguments
+        ---------
+        blocking: bool
+            If True, will block execution of the main script in this function until a keypress is registered.
+            When in blocking mode, the server will be killed upon return of control to caller.
+            If False, will clean up subprocess in cleanup.
+        """
+
+        dashboard_run_command = self._get_dashboard_run_command(
+            flags=[
+                "--server.port",
+                str(self.config.dashboard_port),
+                "--server.address",
+                "localhost",
+            ]
         )
-        assert isinstance(container, Container)
+        env = {key: str(val) for key, val in asdict(self.postgres_config).items()}
 
-        return postgres_config, container
+        assert self.dashboard_subprocess is None
+        # Since dashboard is a non-terminating process, we need to manually control its lifecycle
+        self.dashboard_subprocess = subprocess.Popen(  # pylint: disable=consider-using-with
+            dashboard_run_command,
+            env=env,
+            stdout=subprocess.DEVNULL,
+            stderr=subprocess.STDOUT,
+        )
+        if blocking:
+            input("Press any key to kill dashboard server.")
+            self.dashboard_subprocess.kill()
+            self.dashboard_subprocess = None
 
-    def _add_deployed_pool_to_bookkeeping(self, pool: ILocalHyperdrive):
-        if self._has_saved_snapshot:
-            raise ValueError("Cannot add a new pool after saving a snapshot")
+    def _add_deployed_pool_to_bookkeeping(self, pool: LocalHyperdrive):
         self._deployed_hyperdrive_pools.append(pool)
 
     def _dump_db(self, save_dir: str):
         # TODO parameterize the save path
-        for pool in self._deployed_hyperdrive_pools:
-            if self.experimental_data_threading:
-                # Need to ensure data has caught up before snapshot
-                pool._ensure_data_caught_up()  # pylint: disable=protected-access
-            export_path = str(Path(save_dir) / pool._db_name)  # pylint: disable=protected-access
-            os.makedirs(export_path, exist_ok=True)
-            export_db_to_file(export_path, pool.db_session, raw=True)
+        export_path = str(Path(save_dir))  # pylint: disable=protected-access
+        os.makedirs(export_path, exist_ok=True)
+        export_db_to_file(export_path, self.db_session)
 
     def _load_db(self, load_dir: str):
         # TODO parameterize the load path
-        for pool in self._deployed_hyperdrive_pools:
-            if self.experimental_data_threading:
-                # We need to stop the underlying data pipeline before updating the underlying database
-                pool._stop_data_pipeline()  # pylint: disable=protected-access
-            import_path = str(Path(load_dir) / pool._db_name)  # pylint: disable=protected-access
-            import_to_db(pool.db_session, import_path, drop=True)
-            if self.experimental_data_threading:
-                pool._launch_data_pipeline()  # pylint: disable=protected-access
+        import_path = str(Path(load_dir))  # pylint: disable=protected-access
+        import_to_db(self.db_session, import_path, drop=True)
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/deterministic.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/deterministic.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/hyperdrive_policy.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/hyperdrive_policy.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-"""Base class for hyperdrive policies"""
+"""Base class for hyperdrive policies."""
 
 from fixedpointmath import FixedPoint
 
 from agent0.core.base import Trade
 from agent0.core.base.policies import BasePolicy
 from agent0.core.hyperdrive import HyperdriveMarketAction, HyperdriveWallet, TradeResult
 from agent0.core.hyperdrive.agent import close_long_trade, close_short_trade
@@ -43,15 +43,15 @@
             if maturity_time < pool_state.block_time and short.balance > minimum_trade_amount:
                 action_list.append(close_short_trade(short.balance, maturity_time, self.slippage_tolerance))
         return action_list
 
     def action(
         self, interface: HyperdriveReadInterface, wallet: HyperdriveWallet
     ) -> tuple[list[Trade[HyperdriveMarketAction]], bool]:
-        """Returns an empty list, indicating no action.
+        """Return an empty list, indicating no action.
 
         Arguments
         ---------
         interface: HyperdriveReadInterface
             Interface for the market on which this agent will be executing trades (MarketActions).
         wallet: HyperdriveWallet
             The agent's wallet.
@@ -61,15 +61,16 @@
         tuple[list[MarketAction], bool]
             A tuple where the first element is a list of actions,
             and the second element defines if the agent is done trading.
         """
         raise NotImplementedError
 
     def post_action(self, interface: HyperdriveReadInterface, trade_results: list[TradeResult]) -> None:
-        """Function that gets called after the actions specified by the `action` function have been executed.
+        """Execute any behavior after after the actions specified by the `action` function have been executed.
+
         This allows the policy to e.g., do additional bookkeeping based on the results of the executed actions.
 
         Arguments
         ---------
         interface: MarketInterface
             The trading market interface.
         trade_results: list[HyperdriveTradeResult]
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/lpandarb.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/lpandarb.py`

 * *Files 9% similar despite different names*

```diff
@@ -31,26 +31,29 @@
 TOLERANCE = 1e-18
 MAX_ITER = 50
 
 # TODO: we can either make these helper fns member functions of a parent class
 # or we can make them static utils and pass the agent object itself. Either way,
 # this will simplify the argument space down to a much smaller set.
 # pylint: disable=too-many-arguments
+# ruff: noqa: PLR0913
 # pylint: disable=too-many-locals
 
 
 def arb_fixed_rate_down(
     interface: HyperdriveReadInterface,
     pool_state: PoolState,
     wallet: HyperdriveWallet,
     max_trade_amount_base: FixedPoint,
     min_trade_amount_bonds: FixedPoint,
     slippage_tolerance: FixedPoint | None = None,
+    base_fee_multiple: float | None = None,
+    priority_fee_multiple: float | None = None,
 ) -> list[Trade[HyperdriveMarketAction]]:
-    """Returns an action list for arbitraging the fixed rate down to the variable rate.
+    """Return an action list for arbitraging the fixed rate down to the variable rate.
 
     Arguments
     ---------
     interface: HyperdriveReadInterface
         The Hyperdrive API interface object.
     pool_state: PoolState
         The hyperdrive pool state.
@@ -58,14 +61,18 @@
         The agent's wallet.
     max_trade_amount_base: FixedPoint
         The maximum amount of base allowed to trade.
     min_trade_amount_bonds: FixedPoint
         The minimum amount of bonds needed to open a trade.
     slippage_tolerance: FixedPoint | None, optional
         The slippage tolerance for trades. Defaults to None.
+    base_fee_multiple: float | None, optional
+        The base fee multiple for transactions. Defaults to None.
+    priority_fee_multiple: float | None, optional
+        The priority fee multiple for transactions. Defaults to None.
 
     Returns
     -------
     list[MarketAction]
         A list of actions for arbitration trades.
     """
     action_list = []
@@ -110,27 +117,29 @@
         )
         shares_needed = interface.calc_shares_in_given_bonds_out_down(bonds_needed, pool_state)
         amount_base = minimum(
             shares_needed * pool_state.pool_info.vault_share_price,
             max_long_shares * pool_state.pool_info.vault_share_price,
             max_trade_amount_base,
         )
-        action_list.append(open_long_trade(amount_base, slippage_tolerance))
+        action_list.append(open_long_trade(amount_base, slippage_tolerance, base_fee_multiple, priority_fee_multiple))
     return action_list
 
 
 def arb_fixed_rate_up(
     interface: HyperdriveReadInterface,
     pool_state: PoolState,
     wallet: HyperdriveWallet,
     max_trade_amount_base: FixedPoint,
     min_trade_amount_bonds: FixedPoint,
     slippage_tolerance: FixedPoint | None = None,
+    base_fee_multiple: float | None = None,
+    priority_fee_multiple: float | None = None,
 ) -> list[Trade[HyperdriveMarketAction]]:
-    """Returns an action list for arbitraging the fixed rate up to the variable rate.
+    """Return an action list for arbitraging the fixed rate up to the variable rate.
 
     Arguments
     ---------
     interface: HyperdriveReadInterface
         The Hyperdrive API interface object.
     pool_state: PoolState
         The hyperdrive pool state.
@@ -138,14 +147,18 @@
         The agent's wallet.
     max_trade_amount_base: FixedPoint
         The maximum amount of base allowed to trade.
     min_trade_amount_bonds: FixedPoint
         The minimum amount of bonds needed to open a trade.
     slippage_tolerance: FixedPoint | None, optional
         The slippage tolerance for trades. Defaults to None.
+    base_fee_multiple: float | None, optional
+        The base fee multiple for transactions. Defaults to None.
+    priority_fee_multiple: float | None, optional
+        The priority fee multiple for transactions. Defaults to None.
 
     Returns
     -------
     list[MarketAction]
         A list of actions for arbitration trades.
     """
     action_list = []
@@ -183,15 +196,15 @@
         max_short = interface.calc_max_short(max_trade_amount_base, pool_state)
         # TODO calc_max_short seems to be a bit off wrt the budget we have, likely
         # due to the underlying calc_open_short being off. We subtract a small amount
         # from the max short for a fix for now to fix test.
         # https://github.com/delvtech/hyperdrive/issues/969
         max_short -= FixedPoint("0.1")
         amount_bonds = minimum(bonds_needed, max_short)
-        action_list.append(open_short_trade(amount_bonds, slippage_tolerance))
+        action_list.append(open_short_trade(amount_bonds, slippage_tolerance, base_fee_multiple, priority_fee_multiple))
     return action_list
 
 
 def calc_shares_needed_for_bonds(
     interface: HyperdriveReadInterface,
     pool_state: PoolState,
     bonds_needed: FixedPoint,
@@ -253,17 +266,15 @@
     Returns
     -------
     tuple[FixedPoint, FixedPoint]
         The delta (bonds, shares) needed to hit the desired fixed rate.
     """
     divisor = FixedPoint(2)
     trade_delta_bonds = FixedPoint(0)
-    target_bonds = interface.calc_bonds_given_shares_and_rate(
-        target_rate=target_rate, target_shares=pool_state.pool_info.share_reserves, pool_state=pool_state
-    )
+    target_bonds = interface.calc_bonds_given_shares_and_rate(target_rate=target_rate, pool_state=pool_state)
     avoid_negative_share_reserves = False
     # We want to take as large of a step as possible while avoiding negative share reserves.
     # So we loop through, increasing the divisor until the share reserves are no longer negative.
     pool_delta_shares = FixedPoint(0)
     while avoid_negative_share_reserves is False:
         trade_delta_bonds = (target_bonds - pool_state.pool_info.bond_reserves) / divisor
         pool_delta_shares = calc_shares_needed_for_bonds(
@@ -309,37 +320,37 @@
             Total amount of bonds needed to be added into the pool to hit the target rate.
     """
     predicted_rate = FixedPoint(0)
     temp_pool_state = deepcopy(pool_state)
     iteration = 0
     total_shares_needed = FixedPoint(0)
     total_bonds_needed = FixedPoint(0)
-    logging.info("Targeting %.2f from %.2f", float(target_rate), float(interface.calc_fixed_rate(pool_state)))
+    logging.info("Targeting %.2f from %.2f", float(target_rate), float(interface.calc_spot_rate(pool_state)))
     while float(abs(predicted_rate - target_rate)) > TOLERANCE and iteration < MAX_ITER:
         iteration += 1
-        latest_fixed_rate = interface.calc_fixed_rate(temp_pool_state)
+        latest_fixed_rate = interface.calc_spot_rate(temp_pool_state)
         # get the predicted reserve levels
         bonds_needed, shares_needed = calc_delta_reserves_for_target_rate(
             interface, temp_pool_state, target_rate, min_trade_amount_bonds
         )
         # get the fixed rate for an updated pool state, without storing the state variable
         # TODO: This deepcopy is slow. https://github.com/delvtech/agent0/issues/1355
-        predicted_rate = interface.calc_fixed_rate(
+        predicted_rate = interface.calc_spot_rate(
             apply_step_to_pool_state(deepcopy(temp_pool_state), bonds_needed, shares_needed)
         )
         # adjust guess up or down based on how much the first guess overshot or undershot
         overshoot_or_undershoot = FixedPoint(0)
         if (target_rate - latest_fixed_rate) != FixedPoint(0):
             overshoot_or_undershoot = (predicted_rate - latest_fixed_rate) / (target_rate - latest_fixed_rate)
         if overshoot_or_undershoot != FixedPoint(0):
             bonds_needed = bonds_needed / overshoot_or_undershoot
         shares_to_pool = calc_shares_needed_for_bonds(interface, temp_pool_state, bonds_needed, min_trade_amount_bonds)
         # update pool state with second guess and continue from there
         temp_pool_state = apply_step_to_pool_state(temp_pool_state, bonds_needed, shares_to_pool)
-        predicted_rate = interface.calc_fixed_rate(temp_pool_state)
+        predicted_rate = interface.calc_spot_rate(temp_pool_state)
         # log info about the completed step
         logging.info(
             "iteration %3d: %s%% d_bonds=%s d_shares=%s predicted_precision=%s",
             iteration,
             format(float(predicted_rate), "22,.18f"),
             format(float(total_bonds_needed), "27,.18f"),
             format(float(total_shares_needed), "27,.18f"),
@@ -471,17 +482,15 @@
         """Initialize the bot.
 
         Arguments
         ---------
         policy_config: Config
             The custom arguments for this policy
         """
-        self.policy_config = policy_config
         self.min_trade_amount_bonds = policy_config.min_trade_amount_bonds
-
         super().__init__(policy_config)
 
     def action(
         self, interface: HyperdriveReadInterface, wallet: HyperdriveWallet
     ) -> tuple[list[Trade[HyperdriveMarketAction]], bool]:
         """Specify actions.
 
@@ -498,61 +507,67 @@
             A tuple where the first element is a list of actions,
             and the second element defines if the agent is done trading.
         """
         action_list = []
 
         # compute these once to avoid race conditions
         current_pool_state = interface.current_pool_state
-        current_fixed_rate = interface.calc_fixed_rate(current_pool_state)
+        current_fixed_rate = interface.calc_spot_rate(current_pool_state)
 
         # close matured positions
         self.close_matured_positions(wallet, current_pool_state, self.min_trade_amount_bonds)
 
         # open LP position
         max_trade_amount_base = wallet.balance.amount
-        lp_amount = self.policy_config.lp_portion * wallet.balance.amount
-        if wallet.lp_tokens == FixedPoint(0) and lp_amount > FixedPoint(0):
+        lp_amount = self.config.lp_portion * wallet.balance.amount  # type: ignore
+        if wallet.lp_tokens == FixedPoint(0) and lp_amount > FixedPoint(0):  # type: ignore
             # Add liquidity
             action_list.append(
                 add_liquidity_trade(
                     trade_amount=lp_amount,
-                    min_apr=current_fixed_rate - self.policy_config.rate_slippage,
-                    max_apr=current_fixed_rate + self.policy_config.rate_slippage,
+                    base_fee_multiple=self.config.base_fee_multiple,
+                    priority_fee_multiple=self.config.priority_fee_multiple,
+                    min_apr=current_fixed_rate - self.config.rate_slippage,  # type: ignore
+                    max_apr=current_fixed_rate + self.config.rate_slippage,  # type: ignore
                 )
             )
             max_trade_amount_base -= lp_amount
 
         variable_rate = current_pool_state.variable_rate
         # Variable rate can be None if underlying yield doesn't have a `getRate` function
         if variable_rate is None:
             variable_rate = interface.get_standardized_variable_rate()
 
         # arbitrage from here on out
         # check for a high fixed rate
-        if current_fixed_rate >= variable_rate + self.policy_config.high_fixed_rate_thresh:
+        if current_fixed_rate >= variable_rate + self.config.high_fixed_rate_thresh:  # type: ignore
             action_list.extend(
                 arb_fixed_rate_down(
                     interface,
                     current_pool_state,
                     wallet,
                     max_trade_amount_base,
                     self.min_trade_amount_bonds,
                     self.slippage_tolerance,
+                    self.config.base_fee_multiple,
+                    self.config.priority_fee_multiple,
                 )
             )
 
         # check for a low fixed rate
-        if current_fixed_rate <= variable_rate - self.policy_config.low_fixed_rate_thresh:
+        if current_fixed_rate <= variable_rate - self.config.low_fixed_rate_thresh:  # type: ignore
             action_list.extend(
                 arb_fixed_rate_up(
                     interface,
                     current_pool_state,
                     wallet,
                     max_trade_amount_base,
                     self.min_trade_amount_bonds,
                     self.slippage_tolerance,
+                    self.config.base_fee_multiple,
+                    self.config.priority_fee_multiple,
                 )
             )
 
-        if self.policy_config.done_on_empty and len(action_list) == 0:
+        if self.config.done_on_empty and len(action_list) == 0:  # type: ignore
             return [], True
         return action_list, False
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/lpandarb_test.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/lpandarb_test.py`

 * *Files 6% similar despite different names*

```diff
@@ -3,362 +3,361 @@
 from __future__ import annotations
 
 import logging
 
 import pytest
 from fixedpointmath import FixedPoint
 
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 from agent0.core.hyperdrive.interactive.event_types import AddLiquidity, CloseLong, CloseShort, OpenLong, OpenShort
-from agent0.core.hyperdrive.interactive.i_local_hyperdrive_agent import ILocalHyperdriveAgent
+from agent0.core.hyperdrive.interactive.local_hyperdrive_agent import LocalHyperdriveAgent
 from agent0.core.hyperdrive.policies import PolicyZoo
 
 # avoid unnecessary warning from using fixtures defined in outer scope
 # pylint: disable=redefined-outer-name
 
 TRADE_AMOUNTS = [0.003, 1e7]  # 0.003 is three times the minimum transaction amount of local test deploy
-# We hit the target rate to the 5th decimal of precision.
-# That means 0.050001324091154488 is close enough to a target rate of 0.05.
-PRECISION = FixedPoint(1e-5)
+# We hit the target rate to the 4th decimal of precision.
+# That means 0.05001324091154488 is close enough to a target rate of 0.05.
+PRECISION = FixedPoint(1e-4)
 YEAR_IN_SECONDS = 31_536_000
 
 # pylint: disable=missing-function-docstring,too-many-statements,logging-fstring-interpolation,missing-return-type-doc
 # pylint: disable=missing-return-doc,too-many-function-args
 
 
+# TODO use the existing fixtures instead of custom fixture here
 @pytest.fixture(scope="function")
-def interactive_hyperdrive(chain: ILocalChain) -> ILocalHyperdrive:
+def interactive_hyperdrive(fast_chain_fixture: LocalChain) -> LocalHyperdrive:
     """Create interactive hyperdrive.
 
     Arguments
     ---------
-    chain: LocalChain
-        Local chain.
+    fast_chain_fixture: LocalChain
+        Local chain fixture.
 
     Returns
     -------
     InteractiveHyperdrive
-        Interactive hyperdrive."""
-    interactive_config = ILocalHyperdrive.Config(
+        Interactive hyperdrive.
+    """
+    interactive_config = LocalHyperdrive.Config(
         position_duration=YEAR_IN_SECONDS,  # 1 year term
         initial_fixed_apr=FixedPoint("0.05"),
     )
-    return ILocalHyperdrive(chain, interactive_config)
+    return LocalHyperdrive(fast_chain_fixture, interactive_config)
 
 
 @pytest.fixture(scope="function")
-def arbitrage_andy(interactive_hyperdrive) -> ILocalHyperdriveAgent:
+def arbitrage_andy(interactive_hyperdrive) -> LocalHyperdriveAgent:
     """Create Arbitrage Andy interactive hyperdrive agent used to arbitrage the fixed rate to the variable rate.
 
     Arguments
     ---------
     interactive_hyperdrive: InteractiveHyperdrive
         Interactive hyperdrive.
 
     Returns
     -------
     InteractiveHyperdriveAgent
-        Arbitrage Andy interactive hyperdrive agent."""
+        Arbitrage Andy interactive hyperdrive agent.
+    """
     return create_arbitrage_andy(interactive_hyperdrive)
 
 
-def create_arbitrage_andy(interactive_hyperdrive) -> ILocalHyperdriveAgent:
+def create_arbitrage_andy(interactive_hyperdrive) -> LocalHyperdriveAgent:
     """Create Arbitrage Andy interactive hyperdrive agent used to arbitrage the fixed rate to the variable rate.
 
     Arguments
     ---------
     interactive_hyperdrive: InteractiveHyperdrive
         Interactive hyperdrive.
 
     Returns
     -------
     InteractiveHyperdriveAgent
-        Arbitrage Andy interactive hyperdrive agent."""
+        Arbitrage Andy interactive hyperdrive agent.
+    """
     andy_base = FixedPoint(1e9)
     andy_config = PolicyZoo.lp_and_arb.Config(
         lp_portion=FixedPoint(0),
         min_trade_amount_bonds=interactive_hyperdrive.interface.pool_config.minimum_transaction_amount,
     )
     return interactive_hyperdrive.init_agent(
-        base=andy_base, name="andy", policy=PolicyZoo.lp_and_arb, policy_config=andy_config
+        base=andy_base, eth=FixedPoint(10), name="andy", policy=PolicyZoo.lp_and_arb, policy_config=andy_config
     )
 
 
 @pytest.fixture(scope="function")
-def manual_agent(interactive_hyperdrive) -> ILocalHyperdriveAgent:
+def manual_agent(interactive_hyperdrive) -> LocalHyperdriveAgent:
     """Create manual interactive hyperdrive agent used to manually move markets.
 
     Arguments
     ---------
     interactive_hyperdrive: InteractiveHyperdrive
         Interactive hyperdrive.
 
     Returns
     -------
     InteractiveHyperdriveAgent
-        Manual interactive hyperdrive agent."""
-    return interactive_hyperdrive.init_agent(base=FixedPoint(1e9))
+        Manual interactive hyperdrive agent.
+    """
+    return interactive_hyperdrive.init_agent(base=FixedPoint(1e9), eth=FixedPoint(10))
 
 
 @pytest.mark.anvil
 @pytest.mark.parametrize("trade_amount", TRADE_AMOUNTS)
 def test_open_long(
-    interactive_hyperdrive: ILocalHyperdrive,
+    interactive_hyperdrive: LocalHyperdrive,
     trade_amount: float,
-    arbitrage_andy: ILocalHyperdriveAgent,
-    manual_agent: ILocalHyperdriveAgent,
+    arbitrage_andy: LocalHyperdriveAgent,
+    manual_agent: LocalHyperdriveAgent,
 ):
     """Open a long to hit the target rate."""
     # change the fixed rate
     manual_agent.open_short(bonds=FixedPoint(trade_amount))
 
     # report starting fixed rate
-    logging.info("starting fixed rate is %s", interactive_hyperdrive.interface.calc_fixed_rate())
+    logging.info("starting fixed rate is %s", interactive_hyperdrive.interface.calc_spot_rate())
 
     # arbitrage it back (the only trade capable of this is a long)
     arbitrage_andy.execute_policy_action()
 
     # report results
-    fixed_rate = interactive_hyperdrive.interface.calc_fixed_rate()
+    fixed_rate = interactive_hyperdrive.interface.calc_spot_rate()
     variable_rate = interactive_hyperdrive.interface.current_pool_state.variable_rate
     assert variable_rate is not None
     logging.info("ending fixed rate is %s", fixed_rate)
     logging.info("variable rate is %s", variable_rate)
     abs_diff = abs(fixed_rate - variable_rate)
     logging.info("difference is %s", abs_diff)
     assert abs_diff < PRECISION
 
 
 @pytest.mark.anvil
 @pytest.mark.parametrize("trade_amount", TRADE_AMOUNTS)
 def test_open_short(
-    interactive_hyperdrive: ILocalHyperdrive,
+    interactive_hyperdrive: LocalHyperdrive,
     trade_amount: float,
-    arbitrage_andy: ILocalHyperdriveAgent,
-    manual_agent: ILocalHyperdriveAgent,
+    arbitrage_andy: LocalHyperdriveAgent,
+    manual_agent: LocalHyperdriveAgent,
 ):
     """Open a short to hit the target rate."""
     # change the fixed rate
     manual_agent.open_long(base=FixedPoint(trade_amount))
 
     # report starting fixed rate
-    logging.info("starting fixed rate is %s", interactive_hyperdrive.interface.calc_fixed_rate())
+    logging.info("starting fixed rate is %s", interactive_hyperdrive.interface.calc_spot_rate())
 
     # arbitrage it back (the only trade capable of this is a short)
     arbitrage_andy.execute_policy_action()
 
     # report results
-    fixed_rate = interactive_hyperdrive.interface.calc_fixed_rate()
+    fixed_rate = interactive_hyperdrive.interface.calc_spot_rate()
     variable_rate = interactive_hyperdrive.interface.current_pool_state.variable_rate
     assert variable_rate is not None
     logging.info("ending fixed rate is %s", fixed_rate)
     logging.info("variable rate is %s", variable_rate)
     abs_diff = abs(fixed_rate - variable_rate)
     logging.info("difference is %s", abs_diff)
     assert abs_diff < PRECISION
 
 
 # pylint: disable=too-many-locals
 @pytest.mark.anvil
 @pytest.mark.parametrize("trade_amount", [0.003, 10])
 def test_close_long(
-    interactive_hyperdrive: ILocalHyperdrive,
+    interactive_hyperdrive: LocalHyperdrive,
     trade_amount: float,
-    arbitrage_andy: ILocalHyperdriveAgent,
-    manual_agent: ILocalHyperdriveAgent,
+    arbitrage_andy: LocalHyperdriveAgent,
+    manual_agent: LocalHyperdriveAgent,
 ):
     """Close a long to hit the target rate."""
     # report starting fixed rate
-    logging.info("starting fixed rate is %s", interactive_hyperdrive.interface.calc_fixed_rate())
+    logging.info("starting fixed rate is %s", interactive_hyperdrive.interface.calc_spot_rate())
 
     # give andy a long position twice the trade amount, to be sufficiently large when closing
     pool_bonds_before = interactive_hyperdrive.interface.current_pool_state.pool_info.bond_reserves
     pool_shares_before = interactive_hyperdrive.interface.current_pool_state.pool_info.share_reserves
     block_time_before = interactive_hyperdrive.interface.current_pool_state.block_time
     event = arbitrage_andy.open_long(base=FixedPoint(3 * trade_amount))
     pool_bonds_after = interactive_hyperdrive.interface.current_pool_state.pool_info.bond_reserves
     pool_shares_after = interactive_hyperdrive.interface.current_pool_state.pool_info.share_reserves
     block_time_after = interactive_hyperdrive.interface.current_pool_state.block_time
     d_bonds = pool_bonds_after - pool_bonds_before  # instead of event.bond_amount
-    d_shares = pool_shares_after - pool_shares_before  # instead of event.base_amount
+    d_shares = pool_shares_after - pool_shares_before  # instead of event.amount
     d_time = block_time_after - block_time_before
     logging.info("Andy opened long %s base.", 3 * trade_amount)
     logging.info("Δtime=%s", d_time)
     logging.info(
         " pool  Δbonds= %s%s, Δbase= %s%s", "+" if d_bonds > 0 else "", d_bonds, "+" if d_shares > 0 else "", d_shares
     )
+    assert event.as_base
     logging.info(
         " event Δbonds= %s%s, Δbase= %s%s",
         "+" if event.bond_amount > 0 else "",
         event.bond_amount,
-        "+" if event.base_amount > 0 else "",
-        event.base_amount,
+        "+" if event.amount > 0 else "",
+        event.amount,
     )
     # undo this trade manually
-    manual_agent.open_short(bonds=FixedPoint(event.bond_amount * FixedPoint(1.006075)))
+    event = manual_agent.open_short(bonds=FixedPoint(event.bond_amount * FixedPoint(1.006075)))
+    assert event.as_base
     logging.info(
         "manually opened short. event Δbonds= %s%s, Δbase= %s%s",
         "+" if event.bond_amount > 0 else "",
         event.bond_amount,
-        "+" if event.base_amount > 0 else "",
-        event.base_amount,
+        "+" if event.amount > 0 else "",
+        event.amount,
     )
 
     # report fixed rate
-    logging.info("fixed rate is %s", interactive_hyperdrive.interface.calc_fixed_rate())
+    logging.info("fixed rate is %s", interactive_hyperdrive.interface.calc_spot_rate())
 
     # change the fixed rate
     event = manual_agent.open_long(base=FixedPoint(trade_amount))
+    assert event.as_base
     logging.info(
         "manually opened short. event Δbonds= %s%s, Δbase= %s%s",
         "+" if event.bond_amount > 0 else "",
         event.bond_amount,
-        "+" if event.base_amount > 0 else "",
-        event.base_amount,
+        "+" if event.amount > 0 else "",
+        event.amount,
     )
     # report fixed rate
-    logging.info("fixed rate is %s", interactive_hyperdrive.interface.calc_fixed_rate())
+    logging.info("fixed rate is %s", interactive_hyperdrive.interface.calc_spot_rate())
 
     # arbitrage it all back in one trade
     pool_bonds_before = interactive_hyperdrive.interface.current_pool_state.pool_info.bond_reserves
     pool_shares_before = interactive_hyperdrive.interface.current_pool_state.pool_info.share_reserves
     block_time_before = interactive_hyperdrive.interface.current_pool_state.block_time
     event_list = arbitrage_andy.execute_policy_action()
     logging.info("Andy executed %s", event_list)
     event = event_list[0] if isinstance(event_list, list) else event_list
     assert isinstance(event, CloseLong)
     pool_bonds_after = interactive_hyperdrive.interface.current_pool_state.pool_info.bond_reserves
     pool_shares_after = interactive_hyperdrive.interface.current_pool_state.pool_info.share_reserves
     block_time_after = interactive_hyperdrive.interface.current_pool_state.block_time
     d_bonds = pool_bonds_after - pool_bonds_before  # instead of event.bond_amount
-    d_shares = pool_shares_after - pool_shares_before  # instead of event.base_amount
+    d_shares = pool_shares_after - pool_shares_before  # instead of event.amount
     d_time = block_time_after - block_time_before
+    assert event.as_base
     logging.info("Andy closed long; amount determined by policy.")
     logging.info("Δtime=%s", d_time)
     logging.info(
         " pool  Δbonds= %s%s, Δbase= %s%s", "+" if d_bonds > 0 else "", d_bonds, "+" if d_shares > 0 else "", d_shares
     )
     logging.info(
         " event Δbonds= %s%s, Δbase= %s%s",
         "+" if event.bond_amount > 0 else "",
         event.bond_amount,
-        "+" if event.base_amount > 0 else "",
-        event.base_amount,
+        "+" if event.amount > 0 else "",
+        event.amount,
     )
 
     # report results
-    fixed_rate = interactive_hyperdrive.interface.calc_fixed_rate()
+    fixed_rate = interactive_hyperdrive.interface.calc_spot_rate()
     variable_rate = interactive_hyperdrive.interface.current_pool_state.variable_rate
     logging.info("ending fixed rate is %s", fixed_rate)
     logging.info("variable rate is %s", variable_rate)
     assert variable_rate is not None
     abs_diff = abs(fixed_rate - variable_rate)
     logging.info("difference is %s", abs_diff)
     assert abs_diff < PRECISION
 
 
 @pytest.mark.anvil
-def test_already_at_target(interactive_hyperdrive: ILocalHyperdrive, arbitrage_andy: ILocalHyperdriveAgent):
+def test_already_at_target(interactive_hyperdrive: LocalHyperdrive, arbitrage_andy: LocalHyperdriveAgent):
     """Already at target, do nothing."""
     # report starting fixed rate
-    logging.info("starting fixed rate is %s", interactive_hyperdrive.interface.calc_fixed_rate())
-
-    # modify Andy to be done_on_empty
-    andy_policy = arbitrage_andy.agent.policy
-    assert isinstance(andy_policy, PolicyZoo.lp_and_arb)
-    assert hasattr(andy_policy, "policy_config") and isinstance(
-        getattr(andy_policy, "policy_config"), PolicyZoo.lp_and_arb.Config
-    )
-    andy_policy.policy_config.done_on_empty = True
+    logging.info("starting fixed rate is %s", interactive_hyperdrive.interface.calc_spot_rate())
 
     # arbitrage it back
     arbitrage_andy.execute_policy_action()
 
     # report results
-    fixed_rate = interactive_hyperdrive.interface.calc_fixed_rate()
+    fixed_rate = interactive_hyperdrive.interface.calc_spot_rate()
     variable_rate = interactive_hyperdrive.interface.current_pool_state.variable_rate
     logging.info("ending fixed rate is %s", fixed_rate)
     logging.info("variable rate is %s", variable_rate)
     assert variable_rate is not None
     abs_diff = abs(fixed_rate - variable_rate)
     logging.info("difference is %s", abs_diff)
     assert abs_diff < PRECISION
 
 
 @pytest.mark.anvil
-def test_reduce_long(interactive_hyperdrive: ILocalHyperdrive, arbitrage_andy: ILocalHyperdriveAgent):
+def test_reduce_long(interactive_hyperdrive: LocalHyperdrive, arbitrage_andy: LocalHyperdriveAgent):
     """Reduce a long position."""
-
     # give Andy a long
     event = arbitrage_andy.open_long(base=FixedPoint(10))
 
     # advance time to maturity
     interactive_hyperdrive.chain.advance_time(int(YEAR_IN_SECONDS / 2), create_checkpoints=False)
 
     # see if he reduces the long
     event = arbitrage_andy.execute_policy_action()
     event = event[0] if isinstance(event, list) else event
     logging.info("event is %s", event)
     assert isinstance(event, CloseLong)
 
 
 @pytest.mark.anvil
-def test_reduce_short(interactive_hyperdrive: ILocalHyperdrive, arbitrage_andy: ILocalHyperdriveAgent):
+def test_reduce_short(interactive_hyperdrive: LocalHyperdrive, arbitrage_andy: LocalHyperdriveAgent):
     """Reduce a short position."""
-
-    logging.info("starting fixed rate is %s", interactive_hyperdrive.interface.calc_fixed_rate())
+    logging.info("starting fixed rate is %s", interactive_hyperdrive.interface.calc_spot_rate())
 
     # give Andy a short
     event = arbitrage_andy.open_short(bonds=FixedPoint(10))
 
-    logging.info("fixed rate after open short is %s", interactive_hyperdrive.interface.calc_fixed_rate())
+    logging.info("fixed rate after open short is %s", interactive_hyperdrive.interface.calc_spot_rate())
 
     # advance time to maturity
     interactive_hyperdrive.chain.advance_time(int(YEAR_IN_SECONDS / 2), create_checkpoints=False)
 
     # see if he reduces the short
     event = arbitrage_andy.execute_policy_action()
     event = event[0] if isinstance(event, list) else event
     logging.info("event is %s", event)
     assert isinstance(event, CloseShort)
 
 
 @pytest.mark.anvil
-def test_safe_long_trading(interactive_hyperdrive: ILocalHyperdrive, manual_agent: ILocalHyperdriveAgent):
+def test_safe_long_trading(interactive_hyperdrive: LocalHyperdrive, manual_agent: LocalHyperdriveAgent):
     """Test that the agent doesn't overextend itself."""
     # setup
     larry_base = FixedPoint(1e4)
     larry_config = PolicyZoo.lp_and_arb.Config(
         lp_portion=FixedPoint("0.99"),
         min_trade_amount_bonds=interactive_hyperdrive.interface.pool_config.minimum_transaction_amount,
     )
     larry = interactive_hyperdrive.init_agent(
-        base=larry_base, name="larry", policy=PolicyZoo.lp_and_arb, policy_config=larry_config
+        base=larry_base, eth=FixedPoint(10), name="larry", policy=PolicyZoo.lp_and_arb, policy_config=larry_config
     )
     # change the fixed rate
     manual_agent.open_short(bonds=FixedPoint(100_000))
     # lp & arb
     action_result = larry.execute_policy_action()  # should not be able to arb the full amount after LPing
     # checks
     assert len(action_result) == 2  # LP & Arb (no closing trades)
     assert isinstance(action_result[0], AddLiquidity)  # LP first
     assert isinstance(action_result[1], OpenLong)  # then arb
 
 
 @pytest.mark.anvil
-def test_safe_short_trading(interactive_hyperdrive: ILocalHyperdrive, manual_agent: ILocalHyperdriveAgent):
+def test_safe_short_trading(interactive_hyperdrive: LocalHyperdrive, manual_agent: LocalHyperdriveAgent):
     """Test that the agent doesn't overextend itself."""
     # setup
     larry_base = FixedPoint(1e4)
     larry_config = PolicyZoo.lp_and_arb.Config(
         lp_portion=FixedPoint("0.9"),
         min_trade_amount_bonds=interactive_hyperdrive.interface.pool_config.minimum_transaction_amount,
     )
     larry = interactive_hyperdrive.init_agent(
-        base=larry_base, name="larry", policy=PolicyZoo.lp_and_arb, policy_config=larry_config
+        base=larry_base, eth=FixedPoint(10), name="larry", policy=PolicyZoo.lp_and_arb, policy_config=larry_config
     )
     # change the fixed rate
     manual_agent.open_long(base=FixedPoint(100_000))
     # lp & arb
     action_result = larry.execute_policy_action()  # should not be able to arb the full amount after LPing
     # checks
     assert len(action_result) == 2  # LP & Arb (no closing trades)
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/model_zoo_test.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/model_zoo_test.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/random.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/random.py`

 * *Files 9% similar despite different names*

```diff
@@ -27,14 +27,15 @@
 if TYPE_CHECKING:
     from agent0.core.hyperdrive import HyperdriveWallet
     from agent0.ethpy.hyperdrive import HyperdriveReadInterface
     from agent0.ethpy.hyperdrive.state import PoolState
 
 # We can allow unused arguments here because this is a template and extendable class.
 # pylint: disable=unused-argument
+# ruff: noqa: PLR0911 (lots of return statements)
 
 
 class Random(HyperdriveBasePolicy):
     """Random agent."""
 
     @classmethod
     def description(cls) -> str:
@@ -193,15 +194,19 @@
         # optionally ignore slippage tolerance
         ignore_slippage = self.rng.choice([True, False], size=1) if self.randomly_ignore_slippage_tolerance else False
         if ignore_slippage:
             slippage = None
         else:
             slippage = self.slippage_tolerance
         # return a trade using a specification that is parsable by the rest of the sim framework
-        return [open_short_trade(trade_amount, slippage, self.gas_limit)]
+        return [
+            open_short_trade(
+                trade_amount, slippage, self.config.base_fee_multiple, self.config.priority_fee_multiple, self.gas_limit
+            )
+        ]
 
     def close_random_short(
         self, interface: HyperdriveReadInterface, wallet: HyperdriveWallet
     ) -> list[Trade[HyperdriveMarketAction]]:
         """Fully close the short balance for a random mint time.
 
         Arguments
@@ -222,15 +227,24 @@
         # optionally ignore slippage tolerance
         ignore_slippage = self.rng.choice([True, False], size=1) if self.randomly_ignore_slippage_tolerance else False
         if ignore_slippage:
             slippage = None
         else:
             slippage = self.slippage_tolerance
         # return a trade using a specification that is parsable by the rest of the sim framework
-        return [close_short_trade(trade_amount, short_time, slippage, self.gas_limit)]
+        return [
+            close_short_trade(
+                trade_amount,
+                short_time,
+                slippage,
+                self.config.base_fee_multiple,
+                self.config.priority_fee_multiple,
+                self.gas_limit,
+            )
+        ]
 
     def open_long_with_random_amount(
         self, interface: HyperdriveReadInterface, wallet: HyperdriveWallet
     ) -> list[Trade[HyperdriveMarketAction]]:
         """Open a long with a random allowable amount.
 
         Arguments
@@ -285,15 +299,19 @@
         # optionally ignore slippage tolerance
         ignore_slippage = self.rng.choice([True, False], size=1) if self.randomly_ignore_slippage_tolerance else False
         if ignore_slippage:
             slippage = None
         else:
             slippage = self.slippage_tolerance
         # return a trade using a specification that is parsable by the rest of the sim framework
-        return [open_long_trade(trade_amount, slippage, self.gas_limit)]
+        return [
+            open_long_trade(
+                trade_amount, slippage, self.config.base_fee_multiple, self.config.priority_fee_multiple, self.gas_limit
+            )
+        ]
 
     def close_random_long(
         self, interface: HyperdriveReadInterface, wallet: HyperdriveWallet
     ) -> list[Trade[HyperdriveMarketAction]]:
         """Fully close the long balance for a random mint time.
 
         Arguments
@@ -314,15 +332,24 @@
         # optionally ignore slippage tolerance
         ignore_slippage = self.rng.choice([True, False], size=1) if self.randomly_ignore_slippage_tolerance else False
         if ignore_slippage:
             slippage = None
         else:
             slippage = self.slippage_tolerance
         # return a trade using a specification that is parsable by the rest of the sim framework
-        return [close_long_trade(trade_amount, long_time, slippage, self.gas_limit)]
+        return [
+            close_long_trade(
+                trade_amount,
+                long_time,
+                slippage,
+                self.config.base_fee_multiple,
+                self.config.priority_fee_multiple,
+                self.gas_limit,
+            )
+        ]
 
     def add_liquidity_with_random_amount(
         self, interface: HyperdriveReadInterface, wallet: HyperdriveWallet
     ) -> list[Trade[HyperdriveMarketAction]]:
         """Add liquidity with a random allowable amount.
 
         Arguments
@@ -342,15 +369,19 @@
             self.rng.normal(loc=float(wallet.balance.amount) * 0.1, scale=float(wallet.balance.amount) * 0.01)
         )
         # minimum_transaction_amount <= trade_amount
         trade_amount: FixedPoint = max(
             interface.pool_config.minimum_transaction_amount, min(wallet.balance.amount, initial_trade_amount)
         )
         # return a trade using a specification that is parsable by the rest of the sim framework
-        return [add_liquidity_trade(trade_amount, self.gas_limit)]
+        return [
+            add_liquidity_trade(
+                trade_amount, self.config.base_fee_multiple, self.config.priority_fee_multiple, self.gas_limit
+            )
+        ]
 
     def remove_liquidity_with_random_amount(
         self, interface: HyperdriveReadInterface, wallet: HyperdriveWallet
     ) -> list[Trade[HyperdriveMarketAction]]:
         """Remove liquidity with a random allowable amount.
 
         Arguments
@@ -376,15 +407,19 @@
         # optionally ignore slippage tolerance
         ignore_slippage = self.rng.choice([True, False], size=1) if self.randomly_ignore_slippage_tolerance else False
         if ignore_slippage:
             slippage = None
         else:
             slippage = self.slippage_tolerance
         # return a trade using a specification that is parsable by the rest of the sim framework
-        return [remove_liquidity_trade(trade_amount, slippage, self.gas_limit)]
+        return [
+            remove_liquidity_trade(
+                trade_amount, slippage, self.config.base_fee_multiple, self.config.priority_fee_multiple, self.gas_limit
+            )
+        ]
 
     def redeem_withdraw_shares_with_random_amount(
         self, interface: HyperdriveReadInterface, wallet: HyperdriveWallet
     ) -> list[Trade[HyperdriveMarketAction]]:
         """Redeem withdraw shares with a random allowable amount.
 
         Arguments
@@ -408,15 +443,19 @@
             interface.current_pool_state.pool_info.withdrawal_shares_ready_to_withdraw,
         )
         # minimum_transaction_amount <= trade_amount <= withdraw_shares
         trade_amount = max(
             interface.pool_config.minimum_transaction_amount, min(shares_available_to_withdraw, initial_trade_amount)
         )
         # return a trade using a specification that is parsable by the rest of the sim framework
-        return [redeem_withdraw_shares_trade(trade_amount, self.gas_limit)]
+        return [
+            redeem_withdraw_shares_trade(
+                trade_amount, self.config.base_fee_multiple, self.config.priority_fee_multiple, self.gas_limit
+            )
+        ]
 
     def action(
         self, interface: HyperdriveReadInterface, wallet: HyperdriveWallet
     ) -> tuple[list[Trade[HyperdriveMarketAction]], bool]:
         """Implement a random user strategy.
 
         The agent performs one of four possible trades:
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/random_hold.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/random_hold.py`

 * *Files 1% similar despite different names*

```diff
@@ -59,15 +59,15 @@
         bond_amount: FixedPoint
         maturity_time: int
         # Status flags
         ready_to_close: bool = False
         txn_sent: bool = False
 
     def __init__(self, policy_config: Config) -> None:
-        """Initializes the bot
+        """Initialize the policy.
 
         Arguments
         ---------
         policy_config: Config
             The custom arguments for this policy
         """
         # Bookkeeping data structure for keeping track of open positions
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/random_hold_test.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/random_hold_test.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,32 +1,32 @@
 """Test for the random hold Hyperdrive trading bot."""
 
 from __future__ import annotations
 
 import pytest
 from fixedpointmath import FixedPoint
 
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 from agent0.core.hyperdrive.interactive.event_types import CloseLong, CloseShort
 from agent0.core.hyperdrive.policies import PolicyZoo
 
 # pylint: disable=too-many-locals
 
 
 @pytest.mark.anvil
-def test_random_hold_policy(chain: ILocalChain):
+def test_random_hold_policy(fast_chain_fixture: LocalChain):
     # Parameters for pool initialization. If empty, defaults to default values, allows for custom values if needed
     # We explicitly set initial liquidity here to ensure we have withdrawal shares when trading
-    initial_pool_config = ILocalHyperdrive.Config(
+    initial_pool_config = LocalHyperdrive.Config(
         initial_liquidity=FixedPoint(1_000),
         initial_fixed_apr=FixedPoint("0.05"),
         position_duration=60 * 60 * 24 * 7,  # 1 week
         checkpoint_duration=60 * 60 * 24,  # 1 day
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, initial_pool_config)
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, initial_pool_config)
     random_hold_agent = interactive_hyperdrive.init_agent(
         base=FixedPoint(1_111_111),
         eth=FixedPoint(111),
         name="alice",
         policy=PolicyZoo.random_hold,
         policy_config=PolicyZoo.random_hold.Config(
             trade_chance=FixedPoint("1.0"),
@@ -43,27 +43,27 @@
         trade_events.extend(random_hold_agent.execute_policy_action())
     # We ensure no close trades went through
     trade_types = [type(e) for e in trade_events]
     assert CloseLong not in trade_types
     assert CloseShort not in trade_types
 
     # Advance time to be before min_hold_time
-    chain.advance_time(60 * 60 * 24 * 7, create_checkpoints=False)
+    fast_chain_fixture.advance_time(60 * 60 * 24 * 7, create_checkpoints=False)
 
     # Execute more random trades
     trade_events = []
     for _ in range(10):
         trade_events.extend(random_hold_agent.execute_policy_action())
     # We ensure no close trades went through
     trade_types = [type(e) for e in trade_events]
     assert CloseLong not in trade_types
     assert CloseShort not in trade_types
 
     # Advance time to be after min_hold_time
-    chain.advance_time(60 * 60 * 24 * 7, create_checkpoints=False)
+    fast_chain_fixture.advance_time(60 * 60 * 24 * 7, create_checkpoints=False)
 
     # Execute more random trades
     trade_events = []
     for _ in range(20):
         trade_events.extend(random_hold_agent.execute_policy_action())
     # We ensure close trades went through
     # TODO there's a chance the bot will randomly not return a close trade
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/random_test.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/random_test.py`

 * *Files 5% similar despite different names*

```diff
@@ -2,63 +2,63 @@
 
 from __future__ import annotations
 
 import pytest
 from fixedpointmath import FixedPoint
 
 from agent0.core.hyperdrive import HyperdriveActionType
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 from agent0.core.hyperdrive.interactive.event_types import (
     AddLiquidity,
     CloseLong,
     CloseShort,
     OpenLong,
     OpenShort,
     RedeemWithdrawalShares,
     RemoveLiquidity,
 )
 from agent0.core.hyperdrive.policies import PolicyZoo
 
 
 @pytest.mark.anvil
-def test_random_policy(chain: ILocalChain):
-    initial_pool_config = ILocalHyperdrive.Config(
-        initial_liquidity=FixedPoint(1_000),
+def test_random_policy(fast_chain_fixture: LocalChain):
+    initial_pool_config = LocalHyperdrive.Config(
+        initial_liquidity=FixedPoint(1_000_000),
         initial_fixed_apr=FixedPoint("0.05"),
         position_duration=60 * 60 * 24 * 7,  # 1 week
         checkpoint_duration=60 * 60 * 24,  # 1 day
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, initial_pool_config)
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, initial_pool_config)
 
     random_agent = interactive_hyperdrive.init_agent(
-        base=FixedPoint(1_000_000),
+        base=FixedPoint(100_000),
         eth=FixedPoint(100),
         name="alice",
         policy=PolicyZoo.random,
         policy_config=PolicyZoo.random.Config(
             slippage_tolerance=None,
             rng_seed=1234,
         ),
     )
     for _ in range(10):
         _ = random_agent.execute_policy_action()
 
 
 @pytest.mark.anvil
-def test_random_policy_trades(chain: ILocalChain):
-    initial_pool_config = ILocalHyperdrive.Config(
-        initial_liquidity=FixedPoint(1_000),
+def test_random_policy_trades(fast_chain_fixture: LocalChain):
+    initial_pool_config = LocalHyperdrive.Config(
+        initial_liquidity=FixedPoint(1_000_000),
         initial_fixed_apr=FixedPoint("0.05"),
         position_duration=60 * 60 * 24 * 7,  # 1 week
         checkpoint_duration=60 * 60 * 24,  # 1 day
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, initial_pool_config)
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, initial_pool_config)
 
     random_agent = interactive_hyperdrive.init_agent(
-        base=FixedPoint(1_000_000),
+        base=FixedPoint(100_000),
         eth=FixedPoint(100),
         name="alice",
         policy=PolicyZoo.random,
         policy_config=PolicyZoo.random.Config(
             slippage_tolerance=None,
             trade_chance=FixedPoint(1.0),
             allowable_actions=[],
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/simple_lp.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/simple_lp.py`

 * *Files 0% similar despite different names*

```diff
@@ -163,10 +163,10 @@
         if len(trade_results) > 0:
             if (
                 trade_results[-1].status.name == "SUCCESS"
                 and trade_results[-1].trade_object is not None
                 and trade_results[-1].tx_receipt is not None
             ):
                 if trade_results[-1].trade_object.market_action.action_type.name == "ADD_LIQUIDITY":
-                    self.total_base_spent += trade_results[-1].tx_receipt.base_amount
+                    self.total_base_spent += trade_results[-1].tx_receipt.amount
                 elif trade_results[-1].trade_object.market_action.action_type.name == "REMOVE_LIQUIDITY":
-                    self.total_base_spent -= trade_results[-1].tx_receipt.base_amount
+                    self.total_base_spent -= trade_results[-1].tx_receipt.amount
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/simple_lp_test.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/simple_lp_test.py`

 * *Files 5% similar despite different names*

```diff
@@ -3,38 +3,38 @@
 from __future__ import annotations
 
 import datetime
 
 import pytest
 from fixedpointmath import FixedPoint, isclose
 
-from agent0 import ILocalChain, ILocalHyperdrive, PolicyZoo
+from agent0 import LocalChain, LocalHyperdrive, PolicyZoo
 from agent0.core.hyperdrive.interactive.event_types import AddLiquidity, RemoveLiquidity
 
 # pylint: disable=too-many-locals
 
 
 @pytest.mark.anvil
-def test_simple_lp_policy(chain: ILocalChain):
+def test_simple_lp_policy(fast_chain_fixture: LocalChain):
     # Parameters for pool initialization. If empty, defaults to default values, allows for custom values if needed
     # We explicitly set initial liquidity here to ensure we have withdrawal shares when trading
-    initial_pool_config = ILocalHyperdrive.Config(
+    initial_pool_config = LocalHyperdrive.Config(
         initial_liquidity=FixedPoint("100"),
         initial_variable_rate=FixedPoint("0.01"),
         initial_fixed_apr=FixedPoint("0.05"),
         position_duration=60 * 60 * 24 * 30,  # 1 month
         checkpoint_duration=60 * 60 * 24,  # 1 day
         curve_fee=FixedPoint("0.01"),
         flat_fee=FixedPoint("0.0005"),
         governance_lp_fee=FixedPoint("0.15"),
         governance_zombie_fee=FixedPoint("0.03"),
         # This test requires the non-policy actions to be passed into the policy's post trade stage.
         always_execute_policy_post_action=True,
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, initial_pool_config)
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, initial_pool_config)
 
     # Deploy LP agent & add base liquidity
     pnl_target = FixedPoint("8.0")
     delta_liquidity = FixedPoint("100")
     minimum_liquidity_tokens = FixedPoint("100")
     lp_agent = interactive_hyperdrive.init_agent(
         base=FixedPoint("1_000_000"),
@@ -54,15 +54,15 @@
         base=FixedPoint("1_000_000"), eth=FixedPoint("1_000"), name="Bob"
     )
     trade_event_list = []
     while len(trade_event_list) == 0:
         trade_amount = FixedPoint("1_000")
         hyperdrive_agent0.add_funds(base=trade_amount)
         open_event = hyperdrive_agent0.open_short(trade_amount)
-        chain.advance_time(datetime.timedelta(weeks=1), create_checkpoints=False)
+        fast_chain_fixture.advance_time(datetime.timedelta(weeks=1), create_checkpoints=False)
         hyperdrive_agent0.close_short(open_event.maturity_time, open_event.bond_amount)
         trade_event_list = lp_agent.execute_policy_action()
 
     # only one trade per action execution
     assert len(trade_event_list) == 1
     # always should be add liquidity
     assert isinstance(trade_event_list[0], AddLiquidity)
@@ -78,15 +78,15 @@
     trade_event_list = []
     removed_liquidity = False
     while not removed_liquidity:
         trade_amount = FixedPoint("1_000")
         hyperdrive_agent1.add_funds(base=trade_amount)
         interactive_hyperdrive.set_variable_rate(FixedPoint("0.0"))  # LP gets no extra earnings from variable
         open_event = hyperdrive_agent1.open_long(trade_amount)
-        chain.advance_time(datetime.timedelta(weeks=1), create_checkpoints=False)
+        fast_chain_fixture.advance_time(datetime.timedelta(weeks=1), create_checkpoints=False)
         hyperdrive_agent1.close_long(open_event.maturity_time, open_event.bond_amount)
 
         trade_event_list = lp_agent.execute_policy_action()
         if len(trade_event_list) > 0:
             if isinstance(trade_event_list[0], RemoveLiquidity):
                 removed_liquidity = True
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/smart_long.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/smart_long.py`

 * *Files 1% similar despite different names*

```diff
@@ -106,15 +106,15 @@
 
         variable_rate = pool_state.variable_rate
         # Variable rate can be None if underlying yield doesn't have a `getRate` function
         if variable_rate is None:
             variable_rate = interface.get_standardized_variable_rate()
 
         # only open a long if the fixed rate is higher than variable rate
-        if (interface.calc_fixed_rate() - variable_rate) > self.risk_threshold and not has_opened_long:
+        if (interface.calc_spot_rate() - variable_rate) > self.risk_threshold and not has_opened_long:
             # calculate the total number of bonds we want to see in the pool
             total_bonds_to_match_variable_apr = interface.calc_bonds_given_shares_and_rate(target_rate=variable_rate)
             # get the delta bond amount & convert units
             bond_reserves: FixedPoint = pool_state.pool_info.bond_reserves
             # calculate how many bonds we take out of the pool
             new_bonds_to_match_variable_apr = (
                 bond_reserves - total_bonds_to_match_variable_apr
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/policies/zoo.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/policies/zoo.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/utilities/predict.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/utilities/predict.py`

 * *Files 1% similar despite different names*

```diff
@@ -191,14 +191,15 @@
         else:
             # scale up input to account for fees
             bonds_needed = bonds * (FixedPoint(1) - price_discount * curve_fee * governance_fee)
     elif base is not None and bonds is None:
         # we need to calculate bonds_needed
         base_needed = base
         # this is the wrong direction for the swap, but we don't have the function in the other direction
+        # tracked in issue https://github.com/delvtech/agent0/issues/1010
         bonds_needed = hyperdrive_interface.calc_bonds_out_given_shares_in_down(base_needed / share_price)
         # scale down output to account for fees
         if for_pool is False:
             bonds_needed /= FixedPoint(1) - price_discount * curve_fee * (FixedPoint(1) - governance_fee)
         else:
             bonds_needed /= FixedPoint(1) - price_discount * curve_fee
     else:
```

### Comparing `agent0-0.18.1/src/agent0/core/hyperdrive/utilities/predict_trade_test.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/utilities/predict_trade_test.py`

 * *Files 14% similar despite different names*

```diff
@@ -16,21 +16,20 @@
 - predicted delta matches actual delta (for user and pool)
 """
 
 from __future__ import annotations
 
 import logging
 from copy import deepcopy
-from decimal import Decimal
 
 import pytest
-from fixedpointmath import FixedPoint
+from fixedpointmath import FixedPoint, isclose
 from tabulate import tabulate
 
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 from agent0.core.hyperdrive.interactive.event_types import OpenLong, OpenShort
 from agent0.core.hyperdrive.utilities.predict import TradeDeltas, predict_long, predict_short
 
 # it's just a test
 # pylint: disable=logging-fstring-interpolation
 # pylint: disable=too-many-locals
 # allow magic value comparison (like < 1e-16)
@@ -61,27 +60,28 @@
 
 def _log_event(
     trade_type: str,
     input_type: str,
     base_needed: FixedPoint,
     event: OpenLong | OpenShort,
 ):
+    assert event.as_base
     logging.info(
         "opened %s with input %s=%s, output Δbonds= %s%s, Δbase= %s%s",
         trade_type,
         input_type,
         base_needed,
         "+" if event.bond_amount > 0 else "",
         event.bond_amount,
-        "+" if event.base_amount > 0 else "",
-        event.base_amount,
+        "+" if event.amount > 0 else "",
+        event.amount,
     )
 
 
-def test_prediction_example(chain: ILocalChain):
+def test_prediction_example(fast_chain_fixture: LocalChain):
     """Demonstrate the simplest case of a prediction.
 
     Output:
         +------------+--------------+---------------+--------------+
         | Entity     |         Base |         Bonds |       Shares |
         +============+==============+===============+==============+
         | user       | 100          |  104.95       | 100          |
@@ -89,77 +89,77 @@
         | pool       |  99.9952     | -104.955      |  99.9952     |
         +------------+--------------+---------------+--------------+
         | fee        |   0.0428367  |    0.0449786  |   0.0428367  |
         +------------+--------------+---------------+--------------+
         | governance |   0.00475964 |    0.00499762 |   0.00475964 |
         +------------+--------------+---------------+--------------+
     """
-    interactive_config = ILocalHyperdrive.Config(
+    interactive_config = LocalHyperdrive.Config(
         position_duration=YEAR_IN_SECONDS,  # 1 year term
         governance_lp_fee=FixedPoint(0.1),
         curve_fee=FixedPoint(0.01),
         flat_fee=FixedPoint(0),
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, interactive_config)
-    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9))
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, interactive_config)
+    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9), eth=FixedPoint(10))
     base_needed = FixedPoint(100)
     delta = predict_long(hyperdrive_interface=interactive_hyperdrive.interface, base=base_needed)
     event = agent.open_long(base=base_needed)
     _log_event("long", "base", base_needed, event[0] if isinstance(event, list) else event)
     _log_table(delta)
 
 
-def test_open_long_bonds(chain: ILocalChain):
+def test_open_long_bonds(fast_chain_fixture: LocalChain):
     """Demonstrate abililty to open long with bonds as input."""
-    interactive_config = ILocalHyperdrive.Config(
+    interactive_config = LocalHyperdrive.Config(
         position_duration=YEAR_IN_SECONDS,  # 1 year term
         governance_lp_fee=FixedPoint(0.1),
         curve_fee=FixedPoint(0.01),
         flat_fee=FixedPoint(0),
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, interactive_config)
-    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9))
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, interactive_config)
+    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9), eth=FixedPoint(10))
 
     bonds_needed = FixedPoint(100)
     delta = predict_long(interactive_hyperdrive.interface, bonds=bonds_needed)
     event = agent.open_long(base=delta.user.base)
     _log_event("long ", "bonds", bonds_needed, event[0] if isinstance(event, list) else event)
 
 
-def test_open_short_base(chain: ILocalChain):
+def test_open_short_base(fast_chain_fixture: LocalChain):
     """Demonstrate abililty to open short with base as input."""
-    interactive_config = ILocalHyperdrive.Config(
+    interactive_config = LocalHyperdrive.Config(
         position_duration=YEAR_IN_SECONDS,  # 1 year term
         governance_lp_fee=FixedPoint(0.1),
         curve_fee=FixedPoint(0.01),
         flat_fee=FixedPoint(0),
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, interactive_config)
-    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9))
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, interactive_config)
+    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9), eth=FixedPoint(10))
 
     base_needed = FixedPoint(100)
     delta = predict_short(interactive_hyperdrive.interface, base=base_needed)
     event = agent.open_short(bonds=delta.user.bonds)
     _log_event("short", "base ", base_needed, event[0] if isinstance(event, list) else event)
     _log_table(delta)
 
 
 @pytest.mark.anvil
-def test_predict_open_long_bonds(chain: ILocalChain):
+def test_predict_open_long_bonds(fast_chain_fixture: LocalChain):
     """Predict outcome of an open long, for a given amount of bonds."""
     # setup
-    interactive_config = ILocalHyperdrive.Config(
+    interactive_config = LocalHyperdrive.Config(
         position_duration=YEAR_IN_SECONDS,  # 1 year term
         governance_lp_fee=FixedPoint(0.1),
         curve_fee=FixedPoint(0.01),
         flat_fee=FixedPoint(0),
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, interactive_config)
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, interactive_config)
     hyperdrive_interface = interactive_hyperdrive.interface
-    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9))
+    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9), eth=FixedPoint(10))
     pool_state = deepcopy(hyperdrive_interface.current_pool_state)
 
     spot_price = hyperdrive_interface.calc_spot_price(pool_state)
     price_discount = FixedPoint(1) - spot_price
     curve_fee = pool_state.pool_config.fees.curve
     # convert from bonds to base, if needed
     bonds_needed = FixedPoint(100_000)
@@ -192,45 +192,47 @@
     actual_delta_shares = pool_shares_after - pool_shares_before
     actual_delta_base = pool_base_after - pool_base_before
     logging.info("actual pool delta bonds is %s", actual_delta_bonds)
     logging.info("actual pool delta shares is %s", actual_delta_shares)
     logging.info("actual pool delta base is %s", actual_delta_base)
     # measure user's outcome after the trade
     # does our prediction match the input
-    assert abs(Decimal(str(delta.user.base - base_needed))) < 1e-16
+    assert isclose(delta.user.base, base_needed, abs_tol=FixedPoint("1e-16"))
     # does the actual outcome match the prediction
     actual_delta_user_base = user_base_before - agent.agent.wallet.balance.amount
     logging.info("actual user delta base is %s", actual_delta_user_base)
-    assert abs(Decimal(str(actual_delta_user_base - base_needed))) < 1e-16
+    assert isclose(actual_delta_user_base, base_needed, abs_tol=FixedPoint("1e-16"))
     actual_delta_user_bonds = list(agent.agent.wallet.longs.values())[0].balance
     logging.info("actual user delta bonds is %s", actual_delta_user_bonds)
-    assert abs(Decimal(str(actual_delta_user_bonds - bonds_needed))) < 1e-3
+    # TODO fix tolerance
+    # https://github.com/delvtech/agent0/issues/1357
+    assert isclose(actual_delta_user_bonds, bonds_needed, abs_tol=FixedPoint("1e-2"))
+
+    bonds_discrepancy = (actual_delta_bonds - delta.pool.bonds) / delta.pool.bonds
+    shares_discrepancy = (actual_delta_shares - delta.pool.shares) / delta.pool.shares
+    logging.info(f"discrepancy (%) for bonds is {bonds_discrepancy}")
+    logging.info(f"discrepancy (%) for shares is {shares_discrepancy}")
 
-    bonds_discrepancy = Decimal(str((actual_delta_bonds - delta.pool.bonds) / delta.pool.bonds))
-    shares_discrepancy = Decimal(str((actual_delta_shares - delta.pool.shares) / delta.pool.shares))
-    logging.info(f"discrepancy (%) for bonds is {bonds_discrepancy:e}")
-    logging.info(f"discrepancy (%) for shares is {shares_discrepancy:e}")
-
-    assert abs(bonds_discrepancy) < 1e-4
-    assert abs(shares_discrepancy) < 1e-7
+    assert abs(bonds_discrepancy) < FixedPoint("1e-4")
+    assert abs(shares_discrepancy) < FixedPoint("1e-7")
 
 
 @pytest.mark.anvil
-def test_predict_open_long_base(chain: ILocalChain):
+def test_predict_open_long_base(fast_chain_fixture: LocalChain):
     """Predict outcome of an open long, for a given amount of base."""
     # setup
-    interactive_config = ILocalHyperdrive.Config(
+    interactive_config = LocalHyperdrive.Config(
         position_duration=YEAR_IN_SECONDS,  # 1 year term
         governance_lp_fee=FixedPoint(0),
         curve_fee=FixedPoint(0.01),
         flat_fee=FixedPoint(0),
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, interactive_config)
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, interactive_config)
     hyperdrive_interface = interactive_hyperdrive.interface
-    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9))
+    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9), eth=FixedPoint(10))
 
     base_needed = FixedPoint(100_000)
     delta = predict_long(hyperdrive_interface=hyperdrive_interface, base=base_needed)
     logging.info("bond_fees_to_pool is %s", delta.fee.bonds)
     logging.info("bond_fees_to_gov is %s", delta.governance.bonds)
     logging.info("predicted delta bonds is %s", delta.pool.bonds)
     logging.info("predicted delta shares is %s", delta.pool.shares)
@@ -255,41 +257,41 @@
     actual_delta_shares = pool_shares_after - pool_shares_before
     actual_delta_base = pool_base_after - pool_base_before
     logging.info("actual pool delta bonds is %s", actual_delta_bonds)
     logging.info("actual pool delta shares is %s", actual_delta_shares)
     logging.info("actual pool delta base is %s", actual_delta_base)
     # measure user's outcome after the trade
     # does our prediction match the input
-    assert abs(Decimal(str(delta.user.base - base_needed))) < 1e-16
+    assert isclose(delta.user.base, base_needed, abs_tol=FixedPoint("1e-16"))
     # does the actual outcome match the prediction
     actual_delta_user_base = user_base_before - agent.agent.wallet.balance.amount
     logging.info("actual user delta base is %s", actual_delta_user_base)
-    assert abs(Decimal(str(actual_delta_user_base - base_needed))) < 1e-16
+    assert isclose(actual_delta_user_base, base_needed, abs_tol=FixedPoint("1e-16"))
 
-    bonds_discrepancy = Decimal(str((actual_delta_bonds - delta.pool.bonds) / delta.pool.bonds))
-    shares_discrepancy = Decimal(str((actual_delta_shares - delta.pool.shares) / delta.pool.bonds))
-    logging.info(f"discrepancy (%) for bonds is {bonds_discrepancy:e}")
-    logging.info(f"discrepancy (%) for shares is {shares_discrepancy:e}")
+    bonds_discrepancy = (actual_delta_bonds - delta.pool.bonds) / delta.pool.bonds
+    shares_discrepancy = (actual_delta_shares - delta.pool.shares) / delta.pool.bonds
+    logging.info(f"discrepancy (%) for bonds is {bonds_discrepancy}")
+    logging.info(f"discrepancy (%) for shares is {shares_discrepancy}")
 
-    assert abs(bonds_discrepancy) < 1e-7
-    assert abs(shares_discrepancy) < 1e-7
+    assert abs(bonds_discrepancy) < FixedPoint("1e-7")
+    assert abs(shares_discrepancy) < FixedPoint("1e-7")
 
 
 @pytest.mark.anvil
-def test_predict_open_short_bonds(chain: ILocalChain):
+def test_predict_open_short_bonds(fast_chain_fixture: LocalChain):
     """Predict outcome of an open short, for a given amount of bonds."""
-    interactive_config = ILocalHyperdrive.Config(
+    interactive_config = LocalHyperdrive.Config(
         position_duration=YEAR_IN_SECONDS,  # 1 year term
         governance_lp_fee=FixedPoint(0.1),
         curve_fee=FixedPoint(0.01),
         flat_fee=FixedPoint(0),
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, interactive_config)
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, interactive_config)
     hyperdrive_interface = interactive_hyperdrive.interface
-    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9))
+    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9), eth=FixedPoint(10))
 
     bonds_needed = FixedPoint(100_000)
     delta = predict_short(hyperdrive_interface=hyperdrive_interface, bonds=bonds_needed)
     logging.info("predicted user delta shares is %s", delta.user.shares)
     logging.info("predicted fee delta base is %s", delta.fee.base)
     logging.info("predicted governance delta base is %s", delta.governance.base)
     logging.info("predicted pool delta bonds is %s", delta.pool.bonds)
@@ -315,43 +317,43 @@
     actual_delta_shares = pool_shares_after - pool_shares_before
     actual_delta_base = pool_base_after - pool_base_before
     logging.info("actual pool delta bonds is %s", actual_delta_bonds)
     logging.info("actual pool delta shares is %s", actual_delta_shares)
     logging.info("actual pool delta base is %s", actual_delta_base)
     # measure user's outcome after the trade
     # does our prediction match the input
-    assert abs(Decimal(str(delta.user.bonds - bonds_needed))) < 1e-16
+    assert isclose(delta.user.bonds, bonds_needed, abs_tol=FixedPoint("1e-16"))
     # does the actual outcome match the prediction
     actual_delta_user_base = user_base_before - agent.agent.wallet.balance.amount
     logging.info("actual user delta base is %s", actual_delta_user_base)
     actual_delta_user_bonds = list(agent.agent.wallet.shorts.values())[0].balance
     logging.info("actual user delta bonds is %s", actual_delta_user_bonds)
-    assert abs(Decimal(str(actual_delta_user_bonds - bonds_needed))) < 1e-3
+    assert isclose(actual_delta_user_bonds, bonds_needed, abs_tol=FixedPoint("1e-3"))
 
-    bonds_discrepancy = Decimal(str((actual_delta_bonds - delta.pool.bonds) / delta.pool.bonds))
-    shares_discrepancy = Decimal(str((actual_delta_shares - delta.pool.shares) / delta.pool.shares))
-    logging.info(f"discrepancy (%) for bonds is {bonds_discrepancy:e}")
-    logging.info(f"discrepancy (%) for shares is {shares_discrepancy:e}")
+    bonds_discrepancy = (actual_delta_bonds - delta.pool.bonds) / delta.pool.bonds
+    shares_discrepancy = (actual_delta_shares - delta.pool.shares) / delta.pool.shares
+    logging.info(f"discrepancy (%) for bonds is {bonds_discrepancy}")
+    logging.info(f"discrepancy (%) for shares is {shares_discrepancy}")
 
-    assert abs(bonds_discrepancy) < 1e-7
-    assert abs(shares_discrepancy) < 1e-7
+    assert abs(bonds_discrepancy) < FixedPoint("1e-7")
+    assert abs(shares_discrepancy) < FixedPoint("1e-7")
 
 
 @pytest.mark.anvil
-def test_predict_open_short_base(chain: ILocalChain):
+def test_predict_open_short_base(fast_chain_fixture: LocalChain):
     """Predict outcome of an open short, for a given amount of base."""
-    interactive_config = ILocalHyperdrive.Config(
+    interactive_config = LocalHyperdrive.Config(
         position_duration=YEAR_IN_SECONDS,  # 1 year term
         governance_lp_fee=FixedPoint(0.1),
         curve_fee=FixedPoint(0.01),
         flat_fee=FixedPoint(0),
     )
-    interactive_hyperdrive = ILocalHyperdrive(chain, interactive_config)
+    interactive_hyperdrive = LocalHyperdrive(fast_chain_fixture, interactive_config)
     hyperdrive_interface = interactive_hyperdrive.interface
-    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9))
+    agent = interactive_hyperdrive.init_agent(base=FixedPoint(1e9), eth=FixedPoint(10))
 
     # start with base_needed, convert to bonds_needed
     base_needed = FixedPoint(100_000)
     share_price = hyperdrive_interface.current_pool_state.pool_info.vault_share_price
     # this is the wrong direction for the swap, but we don't have the function in the other direction
     bonds_needed = hyperdrive_interface.calc_bonds_out_given_shares_in_down(
         (base_needed / hyperdrive_interface.current_pool_state.pool_info.vault_share_price)
@@ -383,22 +385,22 @@
     actual_delta_shares = pool_shares_after - pool_shares_before
     actual_delta_base = pool_base_after - pool_base_before
     logging.info("actual pool delta bonds is %s", actual_delta_bonds)
     logging.info("actual pool delta shares is %s", actual_delta_shares)
     logging.info("actual pool delta base is %s", actual_delta_base)
     # measure user's outcome after the trade
     # does our prediction match the input
-    assert abs(Decimal(str(delta.user.bonds - bonds_needed))) < 1e-16
+    assert isclose(delta.user.bonds, bonds_needed, abs_tol=FixedPoint("1e-16"))
     # does the actual outcome match the prediction
     actual_delta_user_base = user_base_before - agent.agent.wallet.balance.amount
     logging.info("actual user delta base is %s", actual_delta_user_base)
     actual_delta_user_bonds = list(agent.agent.wallet.shorts.values())[0].balance
     logging.info("actual user delta bonds is %s", actual_delta_user_bonds)
-    assert abs(Decimal(str(actual_delta_user_bonds - bonds_needed))) < 1e-3
+    assert isclose(actual_delta_user_bonds, bonds_needed, abs_tol=FixedPoint("1e-3"))
 
-    bonds_discrepancy = Decimal(str((actual_delta_bonds - delta.pool.bonds) / delta.pool.bonds))
-    shares_discrepancy = Decimal(str((actual_delta_shares - delta.pool.shares) / delta.pool.shares))
-    logging.info(f"discrepancy (%) for bonds is {bonds_discrepancy:e}")
-    logging.info(f"discrepancy (%) for shares is {shares_discrepancy:e}")
+    bonds_discrepancy = (actual_delta_bonds - delta.pool.bonds) / delta.pool.bonds
+    shares_discrepancy = (actual_delta_shares - delta.pool.shares) / delta.pool.shares
+    logging.info(f"discrepancy (%) for bonds is {bonds_discrepancy}")
+    logging.info(f"discrepancy (%) for shares is {shares_discrepancy}")
 
-    assert abs(bonds_discrepancy) < 1e-7
-    assert abs(shares_discrepancy) < 1e-7
+    assert abs(bonds_discrepancy) < FixedPoint("1e-7")
+    assert abs(shares_discrepancy) < FixedPoint("1e-7")
```

### Comparing `agent0-0.18.1/src/agent0/core/interactive_fuzz/fuzz_long_short_maturity_values.py` & `agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/fuzz_long_short_maturity_values.py`

 * *Files 4% similar despite different names*

```diff
@@ -24,24 +24,21 @@
 import sys
 from typing import Any, NamedTuple, Sequence
 
 import numpy as np
 from fixedpointmath import FixedPoint, isclose
 
 from agent0.core.hyperdrive.crash_report import build_crash_trade_result, log_hyperdrive_crash_report
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 from agent0.core.hyperdrive.interactive.event_types import CloseLong, CloseShort, OpenLong, OpenShort
-from agent0.core.interactive_fuzz.helpers import (
-    FuzzAssertionException,
-    advance_time_after_checkpoint,
-    execute_random_trades,
-    setup_fuzz,
-)
+from agent0.hyperfuzz import FuzzAssertionException
 from agent0.hypertypes.fixedpoint_types import CheckpointFP
 
+from .helpers import advance_time_after_checkpoint, execute_random_trades, setup_fuzz
+
 # main script has a lot of stuff going on
 # pylint: disable=too-many-locals
 
 
 def main(argv: Sequence[str] | None = None):
     """Primary entrypoint.
 
@@ -55,43 +52,36 @@
     fuzz_long_short_maturity_values(*parsed_args)
 
 
 def fuzz_long_short_maturity_values(
     num_trades: int,
     long_maturity_vals_epsilon: float,
     short_maturity_vals_epsilon: float,
-    chain_config: ILocalChain.Config | None = None,
-    log_to_stdout: bool = False,
+    chain_config: LocalChain.Config | None = None,
 ):
     """Does fuzzy invariant checks on closing longs and shorts past maturity.
 
     Parameters
     ----------
     num_trades: int
         Number of trades to perform during the fuzz tests.
     long_maturity_vals_epsilon: float
         The allowed error for maturity values equality tests for longs.
     short_maturity_vals_epsilon: float
         The allowed error for maturity values equality tests for shorts.
     chain_config: LocalChain.Config, optional
         Configuration options for the local chain.
-    log_to_stdout: bool, optional
-        If True, log to stdout in addition to a file.
-        Defaults to False.
     """
 
-    log_filename = ".logging/fuzz_long_short_maturity_values.log"
     # Parameters for local chain initialization, defines defaults in constructor
     # set a large block time so i can manually control when it ticks
     # TODO: set block time really high after contracts deployed:
     # chain_config = LocalChain.Config(block_time=1_000_000)
     chain, random_seed, rng, interactive_hyperdrive = setup_fuzz(
-        log_filename,
         chain_config,
-        log_to_stdout,
         fuzz_test_name="fuzz_long_short_maturity_values",
     )
     signer = interactive_hyperdrive.init_agent(eth=FixedPoint(100))
 
     # Add a small amount to ensure we're not at the edge of a checkpoint
     # This prevents the latter step of `chain.advance_time(position_duration+30)` advancing past a checkpoint
     # Also prevents `open_random_trades` from passing the create checkpoint barrier
@@ -158,15 +148,15 @@
             )
         except FuzzAssertionException as error:
             dump_state_dir = chain.save_state(save_prefix="fuzz_long_short_maturity_values")
             # The additional information going into the crash report
             additional_info = {
                 "fuzz_random_seed": random_seed,
                 "dump_state_dir": dump_state_dir,
-                "trade_ticker": interactive_hyperdrive.get_ticker(),
+                "trade_events": interactive_hyperdrive.get_trade_events(),
             }
             additional_info.update(error.exception_data)
 
             # The subset of information going into rollbar
             rollbar_data = {
                 "fuzz_random_seed": random_seed,
                 "dump_state_dir": dump_state_dir,
@@ -193,16 +183,15 @@
 
 class Args(NamedTuple):
     """Command line arguments for the invariant checker."""
 
     num_trades: int
     long_maturity_vals_epsilon: float
     short_maturity_vals_epsilon: float
-    chain_config: ILocalChain.Config
-    log_to_stdout: bool
+    chain_config: LocalChain.Config
 
 
 def namespace_to_args(namespace: argparse.Namespace) -> Args:
     """Converts argprase.Namespace to Args.
 
     Arguments
     ---------
@@ -215,16 +204,15 @@
         Formatted arguments
     """
     # TODO: replace this func with Args(**namespace)?
     return Args(
         num_trades=namespace.num_trades,
         long_maturity_vals_epsilon=namespace.long_maturity_vals_epsilon,
         short_maturity_vals_epsilon=namespace.short_maturity_vals_epsilon,
-        chain_config=ILocalChain.Config(chain_port=namespace.chain_port),
-        log_to_stdout=namespace.log_to_stdout,
+        chain_config=LocalChain.Config(chain_port=namespace.chain_port, log_to_stdout=namespace.log_to_stdout),
     )
 
 
 def parse_arguments(argv: Sequence[str] | None = None) -> Args:
     """Parses input arguments.
 
     Arguments
@@ -278,15 +266,15 @@
 def invariant_check(
     open_trade_event: OpenLong | OpenShort,
     close_trade_event: CloseLong | CloseShort,
     starting_checkpoint: CheckpointFP,
     maturity_checkpoint: CheckpointFP,
     long_maturity_vals_epsilon: float,
     short_maturity_vals_epsilon: float,
-    interactive_hyperdrive: ILocalHyperdrive,
+    interactive_hyperdrive: LocalHyperdrive,
 ) -> None:
     """Check the pool state invariants and throws an assertion exception if fails.
 
     Arguments
     ---------
     open_trade_event: OpenLong | OpenShort
         The OpenLong or OpenShort event that resulted from opening the position.
@@ -313,15 +301,16 @@
         # Ensure we close the trade for all of the opened bonds
         assert close_trade_event.bond_amount == open_trade_event.bond_amount
 
         # 0.05 would be a 5% fee.
         flat_fee_percent = interactive_hyperdrive.interface.pool_config.fees.flat
 
         # base out should be equal to bonds in minus the flat fee.
-        actual_long_base_amount = close_trade_event.base_amount
+        assert close_trade_event.as_base
+        actual_long_base_amount = close_trade_event.amount
         expected_long_base_amount = close_trade_event.bond_amount - close_trade_event.bond_amount * flat_fee_percent
 
         # assert with close event bond amount
         if not isclose(
             actual_long_base_amount, expected_long_base_amount, abs_tol=FixedPoint(str(long_maturity_vals_epsilon))
         ):
             difference_in_wei = abs(actual_long_base_amount.scaled_value - expected_long_base_amount.scaled_value)
@@ -352,15 +341,16 @@
 
         # get the final interest accrued
         expected_short_base_amount = (
             open_trade_event.bond_amount * (closing_vault_share_price / open_vault_share_price + flat_fee_percent)
             - share_reserves_delta_plus_flat_fee
         )
 
-        actual_short_base_amount = close_trade_event.base_amount
+        assert close_trade_event.as_base
+        actual_short_base_amount = close_trade_event.amount
         if not isclose(
             actual_short_base_amount, expected_short_base_amount, abs_tol=FixedPoint(str(short_maturity_vals_epsilon))
         ):
             difference_in_wei = abs(actual_short_base_amount.scaled_value - expected_short_base_amount.scaled_value)
             exception_message.append(
                 "The expected base returned (interest accrued) does not match the event's reported base returned."
             )
```

### Comparing `agent0-0.18.1/src/agent0/core/interactive_fuzz/fuzz_path_independence.py` & `agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/fuzz_path_independence.py`

 * *Files 3% similar despite different names*

```diff
@@ -39,25 +39,21 @@
 from typing import Any, NamedTuple, Sequence
 
 import pandas as pd
 import rollbar
 from fixedpointmath import FixedPoint, isclose
 
 from agent0.core.hyperdrive.crash_report import build_crash_trade_result, log_hyperdrive_crash_report
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
-from agent0.core.interactive_fuzz.helpers import (
-    FuzzAssertionException,
-    close_trades,
-    execute_random_trades,
-    permute_trade_events,
-    setup_fuzz,
-)
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 from agent0.ethpy.base.errors import ContractCallException
+from agent0.hyperfuzz import FuzzAssertionException
 from agent0.hyperlogs import ExtendedJSONEncoder
 
+from .helpers import close_trades, execute_random_trades, permute_trade_events, setup_fuzz
+
 
 # pylint: disable=too-many-locals
 def main(argv: Sequence[str] | None = None):
     """Primary entrypoint.
 
     Arguments
     ---------
@@ -71,16 +67,15 @@
 
 def fuzz_path_independence(
     num_trades: int,
     num_paths_checked: int,
     lp_share_price_epsilon: float,
     effective_share_reserves_epsilon: float,
     present_value_epsilon: float,
-    chain_config: ILocalChain.Config,
-    log_to_stdout: bool = False,
+    chain_config: LocalChain.Config,
 ):
     """Does fuzzy invariant checks for opening and closing longs and shorts.
 
     Parameters
     ----------
     num_trades: int
         Number of trades to perform during the fuzz tests.
@@ -90,31 +85,25 @@
         The allowed error for LP share price equality tests.
     effective_share_reserves_epsilon: float
         The allowed error for effective share reserves equality tests.
     present_value_epsilon: float
         The allowed error for present value equality tests.
     chain_config: LocalChain.Config, optional
         Configuration options for the local chain.
-    log_to_stdout: bool, optional
-        If True, log to stdout in addition to a file.
-        Defaults to False.
     """
     # pylint: disable=too-many-statements
     # pylint: disable=too-many-arguments
 
     # Make sure there exists enough permutations of paths to ensure independent operations
     # plus some buffer
     if perm(num_trades) < 2 * num_paths_checked:
         raise AssertionError("Need more trades to check {num_paths_checked} paths.")
 
-    log_filename = ".logging/fuzz_path_independence.log"
     chain, random_seed, rng, interactive_hyperdrive = setup_fuzz(
-        log_filename,
         chain_config,
-        log_to_stdout,
         # Trade crashes in this file have expected failures, hence we log interactive
         # hyperdrive crashes as info instead of critical.
         crash_log_level=logging.INFO,
         curve_fee=FixedPoint(0),
         flat_fee=FixedPoint(0),
         governance_lp_fee=FixedPoint(0),
         governance_zombie_fee=FixedPoint(0),
@@ -157,15 +146,15 @@
     first_run_ticker: pd.DataFrame | None = None
     invariance_checked: bool = False
     latest_error: Exception | None = None
 
     # In case all paths failed, we keep track of all tickers and crash reports for all paths
 
     trade_paths = []
-    ticker_paths = []
+    trade_event_paths = []
     for iteration in range(num_paths_checked):
         print(f"{iteration=}")
         logging.info("iteration %s out of %s", iteration, num_paths_checked - 1)
         # Load the snapshot
         chain.load_snapshot()
 
         # Generate a random permutation of the trades
@@ -191,42 +180,42 @@
         try:
             close_trades(random_trade_events)
         except ContractCallException:
             # Trades can fail here due to invalid order, we ignore and move on
             # These trades get logged as info
             # We track the ticker for each failed path here. This bookkeeping is only
             # used if all paths fail
-            ticker_paths.append(interactive_hyperdrive.get_ticker())
+            trade_event_paths.append(interactive_hyperdrive.get_trade_events())
             continue
 
         ending_checkpoint_id = interactive_hyperdrive.interface.calc_checkpoint_id()
         if starting_checkpoint_id != ending_checkpoint_id:
             message = "Trades were not closed in the same checkpoint"
             logging.warning(message)
             rollbar_data = {"fuzz_random_seed": random_seed}
             rollbar.report_message(message, "warning", extra_data=rollbar_data)
             continue
 
         # Check the reserve amounts; they should be unchanged now that all of the trades are closed
-        pool_state_df = interactive_hyperdrive.get_pool_state(coerce_float=False)
+        pool_state_df = interactive_hyperdrive.get_pool_info(coerce_float=False)
 
         # On first run, save final state
         if check_data is None:
             check_data = {}
             pool_state = interactive_hyperdrive.interface.get_hyperdrive_state()
             check_data["present_value"] = interactive_hyperdrive.interface.calc_present_value(pool_state)
             check_data["effective_share_reserves"] = interactive_hyperdrive.interface.calc_effective_share_reserves(
                 pool_state
             )
             check_data["initial_pool_state"] = pool_state_df[check_columns].iloc[-1].copy()
             check_data["hyperdrive_base_balance"] = pool_state.hyperdrive_base_balance
             check_data["minimum_share_reserves"] = pool_state.pool_config.minimum_share_reserves
             check_data["curr_checkpoint_id"] = ending_checkpoint_id
             first_run_state_dump_dir = chain.save_state(save_prefix="fuzz_path_independence")
-            first_run_ticker = interactive_hyperdrive.get_ticker()
+            first_run_ticker = interactive_hyperdrive.get_trade_events()
 
         # On subsequent run, check against the saved final state
         else:
             invariance_checked = True
             # Sanity check, ensure checkpoint id is the same after all runs
             assert ending_checkpoint_id == check_data["curr_checkpoint_id"]
 
@@ -242,15 +231,15 @@
 
                 # The additional information going into the crash report
                 additional_info = {
                     "fuzz_random_seed": random_seed,
                     "first_run_state_dump_dir": first_run_state_dump_dir,
                     "dump_state_dir": dump_state_dir,
                     "first_run_trade_ticker": first_run_ticker,
-                    "trade_ticker": interactive_hyperdrive.get_ticker(),
+                    "trade_events": interactive_hyperdrive.get_trade_events(),
                 }
                 additional_info.update(error.exception_data)
 
                 # The subset of information going into rollbar
                 rollbar_data = {
                     "fuzz_random_seed": random_seed,
                     "first_run_state_dump_dir": first_run_state_dump_dir,
@@ -274,15 +263,15 @@
     # If the number of successful paths < 2, we print and log a warning
     if not invariance_checked:
         warning_message = "No invariance checks were performed due to failed paths."
         logging.warning(warning_message)
         rollbar_data = {
             "fuzz_random_seed": random_seed,
             "close_random_paths": [[trade for _, trade in path] for path in trade_paths],
-            "ticker_paths": ticker_paths,
+            "trade_event_paths": trade_event_paths,
         }
         rollbar.report_message(
             warning_message,
             "warning",
             extra_data=json.loads(json.dumps(rollbar_data, indent=2, cls=ExtendedJSONEncoder)),
         )
 
@@ -299,16 +288,15 @@
     """Command line arguments for the invariant checker."""
 
     num_trades: int
     num_paths_checked: int
     lp_share_price_epsilon: float
     effective_share_reserves_epsilon: float
     present_value_epsilon: float
-    chain_config: ILocalChain.Config
-    log_to_stdout: bool
+    chain_config: LocalChain.Config
 
 
 def namespace_to_args(namespace: argparse.Namespace) -> Args:
     """Converts argprase.Namespace to Args.
 
     Arguments
     ---------
@@ -322,16 +310,15 @@
     """
     return Args(
         num_trades=namespace.num_trades,
         num_paths_checked=namespace.num_paths_checked,
         lp_share_price_epsilon=namespace.lp_share_price_epsilon,
         effective_share_reserves_epsilon=namespace.effective_share_reserves_epsilon,
         present_value_epsilon=namespace.present_value_epsilon,
-        chain_config=ILocalChain.Config(chain_port=namespace.chain_port),
-        log_to_stdout=namespace.log_to_stdout,
+        chain_config=LocalChain.Config(chain_port=namespace.chain_port, log_to_stdout=namespace.log_to_stdout),
     )
 
 
 def parse_arguments(argv: Sequence[str] | None = None) -> Args:
     """Parses input arguments.
 
     Arguments
@@ -392,15 +379,15 @@
         argv = sys.argv
     return namespace_to_args(parser.parse_args())
 
 
 def invariant_check(
     check_data: dict[str, Any],
     check_epsilon: dict[str, Any],
-    interactive_hyperdrive: ILocalHyperdrive,
+    interactive_hyperdrive: LocalHyperdrive,
 ) -> None:
     """Check the pool state invariants and throws an assertion exception if fails.
 
     Arguments
     ---------
     check_data: dict[str, Any]
         The trade data to check.
```

### Comparing `agent0-0.18.1/src/agent0/core/interactive_fuzz/fuzz_present_value.py` & `agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/fuzz_present_value.py`

 * *Files 2% similar despite different names*

```diff
@@ -25,16 +25,18 @@
 from typing import Any, NamedTuple, Sequence
 
 import numpy as np
 from fixedpointmath import FixedPoint, isclose
 
 from agent0.core.hyperdrive import HyperdriveActionType
 from agent0.core.hyperdrive.crash_report import build_crash_trade_result, log_hyperdrive_crash_report
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
-from agent0.core.interactive_fuzz.helpers import FuzzAssertionException, setup_fuzz
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
+from agent0.hyperfuzz import FuzzAssertionException
+
+from .helpers import setup_fuzz
 
 # tests have lots of stuff
 # pylint: disable=too-many-locals
 # pylint: disable=too-many-statements
 
 
 def main(argv: Sequence[str] | None = None):
@@ -48,34 +50,27 @@
     # Setup the experiment
     parsed_args = parse_arguments(argv)
     fuzz_present_value(*parsed_args)
 
 
 def fuzz_present_value(
     test_epsilon: float,
-    chain_config: ILocalChain.Config,
-    log_to_stdout: bool = False,
+    chain_config: LocalChain.Config,
 ):
     """Does fuzzy invariant checks for opening and closing longs and shorts.
 
     Parameters
     ----------
     test_epsilon: float
         The allowed error for present value equality tests.
     chain_config: LocalChain.Config, optional
         Configuration options for the local chain.
-    log_to_stdout: bool, optional
-        If True, log to stdout in addition to a file.
-        Defaults to False.
     """
-    log_filename = ".logging/fuzz_present_value.log"
     chain, random_seed, rng, interactive_hyperdrive = setup_fuzz(
-        log_filename,
         chain_config,
-        log_to_stdout,
         curve_fee=FixedPoint(0),
         flat_fee=FixedPoint(0),
         governance_lp_fee=FixedPoint(0),
         governance_zombie_fee=FixedPoint(0),
         fuzz_test_name="fuzz_present_value",
     )
 
@@ -92,79 +87,81 @@
         HyperdriveActionType.CLOSE_LONG,
         HyperdriveActionType.OPEN_SHORT,
         HyperdriveActionType.CLOSE_SHORT,
         HyperdriveActionType.ADD_LIQUIDITY,
         HyperdriveActionType.REMOVE_LIQUIDITY,
     ]:
         # Keep the agent flush
-        if agent.wallet.balance.amount < FixedPoint("1e10"):
-            agent.add_funds(base=FixedPoint("1e10") - agent.wallet.balance.amount)
+        if agent.get_wallet().balance.amount < FixedPoint("1e10"):
+            agent.add_funds(base=FixedPoint("1e10") - agent.get_wallet().balance.amount)
 
         # Set up trade amount bounds
         min_trade = interactive_hyperdrive.interface.pool_config.minimum_transaction_amount
-        max_budget = agent.wallet.balance.amount
+        max_budget = agent.get_wallet().balance.amount
         trade_amount = None
 
         # Execute the trade
         match trade_type:
             case HyperdriveActionType.OPEN_LONG:
                 max_trade = interactive_hyperdrive.interface.calc_max_long(
                     max_budget, interactive_hyperdrive.interface.current_pool_state
                 )
                 trade_amount = FixedPoint(
                     scaled_value=int(np.floor(rng.uniform(low=min_trade.scaled_value, high=max_trade.scaled_value)))
                 )
                 trade_event = agent.open_long(base=trade_amount)
             case HyperdriveActionType.CLOSE_LONG:
-                maturity_time, open_trade = next(iter(agent.wallet.longs.items()))
+                maturity_time, open_trade = next(iter(agent.get_wallet().longs.items()))
                 trade_event = agent.close_long(maturity_time=maturity_time, bonds=open_trade.balance)
             case HyperdriveActionType.OPEN_SHORT:
                 max_trade = interactive_hyperdrive.interface.calc_max_short(
                     max_budget, interactive_hyperdrive.interface.current_pool_state
                 )
                 trade_amount = FixedPoint(
                     scaled_value=int(np.floor(rng.uniform(low=min_trade.scaled_value, high=max_trade.scaled_value)))
                 )
                 trade_event = agent.open_short(trade_amount)
             case HyperdriveActionType.CLOSE_SHORT:
-                maturity_time, open_trade = next(iter(agent.wallet.shorts.items()))
+                maturity_time, open_trade = next(iter(agent.get_wallet().shorts.items()))
                 trade_event = agent.close_short(maturity_time=maturity_time, bonds=open_trade.balance)
             case HyperdriveActionType.ADD_LIQUIDITY:
                 # recompute initial present value for liquidity actions
                 check_data["initial_present_value"] = interactive_hyperdrive.interface.calc_present_value(
                     interactive_hyperdrive.interface.current_pool_state
                 )
                 trade_amount = FixedPoint(
                     scaled_value=int(
-                        np.floor(rng.uniform(low=min_trade.scaled_value, high=agent.wallet.balance.amount.scaled_value))
+                        np.floor(
+                            rng.uniform(low=min_trade.scaled_value, high=agent.get_wallet().balance.amount.scaled_value)
+                        )
                     )
                 )
                 trade_event = agent.add_liquidity(trade_amount)
             case HyperdriveActionType.REMOVE_LIQUIDITY:
                 # recompute initial present value for liquidity actions
                 check_data["initial_present_value"] = interactive_hyperdrive.interface.calc_present_value(
                     interactive_hyperdrive.interface.current_pool_state
                 )
-                trade_amount = agent.wallet.lp_tokens
-                trade_event = agent.remove_liquidity(agent.wallet.lp_tokens)
+                trade_amount = agent.get_wallet().lp_tokens
+                trade_event = agent.remove_liquidity(agent.get_wallet().lp_tokens)
             case _:
                 raise ValueError(f"Invalid {trade_type=}")
 
         # run invariance check
         check_data["trade_type"] = trade_type
         try:
             invariant_check(check_data, test_epsilon, interactive_hyperdrive)
         except FuzzAssertionException as error:
             dump_state_dir = chain.save_state(save_prefix="fuzz_present_value")
 
             # The additional information going into the crash report
             additional_info = {
                 "fuzz_random_seed": random_seed,
                 "dump_state_dir": dump_state_dir,
-                "trade_ticker": interactive_hyperdrive.get_ticker(),
+                "trade_events": interactive_hyperdrive.get_trade_events(),
             }
             additional_info.update(check_data)  # add check_data fields
             additional_info.update(error.exception_data)
 
             # The subset of information going into rollbar
             rollbar_data = {
                 "fuzz_random_seed": random_seed,
@@ -196,16 +193,15 @@
     logging.info("Test passed!")
 
 
 class Args(NamedTuple):
     """Command line arguments for the invariant checker."""
 
     test_epsilon: float
-    chain_config: ILocalChain.Config
-    log_to_stdout: bool
+    chain_config: LocalChain.Config
 
 
 def namespace_to_args(namespace: argparse.Namespace) -> Args:
     """Converts argprase.Namespace to Args.
 
     Arguments
     ---------
@@ -215,16 +211,15 @@
     Returns
     -------
     Args
         Formatted arguments
     """
     return Args(
         test_epsilon=namespace.test_epsilon,
-        chain_config=ILocalChain.Config(chain_port=namespace.chain_port),
-        log_to_stdout=namespace.log_to_stdout,
+        chain_config=LocalChain.Config(chain_port=namespace.chain_port, log_to_stdout=namespace.log_to_stdout),
     )
 
 
 def parse_arguments(argv: Sequence[str] | None = None) -> Args:
     """Parses input arguments.
 
     Arguments
@@ -261,15 +256,15 @@
         argv = sys.argv
     return namespace_to_args(parser.parse_args())
 
 
 def invariant_check(
     check_data: dict[str, Any],
     test_epsilon: float,
-    interactive_hyperdrive: ILocalHyperdrive,
+    interactive_hyperdrive: LocalHyperdrive,
 ) -> None:
     """Check the pool state invariants and throws an assertion exception if fails.
 
     Arguments
     ---------
     check_data: dict[str, Any]
         The trade data to check.
@@ -300,15 +295,15 @@
         exception_data["invariance_check:lp_share_price_difference_in_wei"] = difference_in_wei
         failed = True
 
     # present value should always be >= idle
     # idle shares are the shares that are not reserved by open positions
     # TODO: Add calculate_idle_share_reserves to hyperdrivepy and use that here.
     current_present_value = interactive_hyperdrive.interface.calc_present_value(pool_state)
-    idle_shares = interactive_hyperdrive.interface.get_idle_shares(pool_state.block_number)
+    idle_shares = interactive_hyperdrive.interface.get_idle_shares(pool_state)
     if current_present_value < idle_shares:
         difference_in_wei = abs(current_present_value.scaled_value - idle_shares.scaled_value)
         exception_message.append("The present value is not greater than or equal to the idle.")
         exception_message.append(f"{current_present_value=} < {idle_shares=}, {difference_in_wei=}")
         exception_data["invariance_check:idle_shares"] = idle_shares
         exception_data["invariance_check:current_present_value"] = current_present_value
         exception_data["invariance_check:present_value_difference_in_wei"] = difference_in_wei
```

### Comparing `agent0-0.18.1/src/agent0/core/interactive_fuzz/fuzz_profit_check.py` & `agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/fuzz_profit_check.py`

 * *Files 4% similar despite different names*

```diff
@@ -29,21 +29,18 @@
 import sys
 from typing import Any, NamedTuple, Sequence
 
 import numpy as np
 from fixedpointmath import FixedPoint
 
 from agent0.core.hyperdrive.crash_report import build_crash_trade_result, log_hyperdrive_crash_report
-from agent0.core.hyperdrive.interactive import ILocalChain
-from agent0.core.interactive_fuzz.helpers import (
-    FuzzAssertionException,
-    advance_time_after_checkpoint,
-    advance_time_before_checkpoint,
-    setup_fuzz,
-)
+from agent0.core.hyperdrive.interactive import LocalChain
+from agent0.hyperfuzz import FuzzAssertionException
+
+from .helpers import advance_time_after_checkpoint, advance_time_before_checkpoint, setup_fuzz
 
 # pylint: disable=too-many-locals
 
 
 def main(argv: Sequence[str] | None = None):
     """Primary entrypoint.
 
@@ -52,33 +49,27 @@
     argv: Sequence[str]
         The argv values returned from argparser.
     """
     parsed_args = parse_arguments(argv)
     fuzz_profit_check(*parsed_args)
 
 
-def fuzz_profit_check(chain_config: ILocalChain.Config | None = None, log_to_stdout: bool = False):
+def fuzz_profit_check(chain_config: LocalChain.Config | None = None):
     """Fuzzes invariant checks for profit from long and short positions.
 
     Parameters
     ----------
     chain_config: LocalChain.Config, optional
         Configuration options for the local chain.
-    log_to_stdout: bool, optional
-        If True, log to stdout in addition to a file.
-        Defaults to False.
     """
     # pylint: disable=too-many-statements
 
     # Setup the environment
-    log_filename = ".logging/fuzz_profit_check.log"
     chain, random_seed, rng, interactive_hyperdrive = setup_fuzz(
-        log_filename,
         chain_config,
-        log_to_stdout,
         fuzz_test_name="fuzz_profit_check",
         flat_fee=FixedPoint(0),
         curve_fee=FixedPoint(0.001),  # 0.1%
         governance_lp_fee=FixedPoint(0),
         governance_zombie_fee=FixedPoint(0),
         var_interest=FixedPoint(0.0),
     )
@@ -95,15 +86,15 @@
                 )
             )
         )
     )
 
     # Generate funded trading agent
     long_agent = interactive_hyperdrive.init_agent(base=long_trade_amount, eth=FixedPoint(100), name="alice")
-    long_agent_initial_balance = long_agent.wallet.balance.amount
+    long_agent_initial_balance = long_agent.get_wallet().balance.amount
 
     # Advance time to be right after a checkpoint boundary
     logging.info("Advance time...")
     advance_time_after_checkpoint(chain, interactive_hyperdrive)
 
     # Open a long
     logging.info("Open a long...")
@@ -139,15 +130,15 @@
             )
         )
     )
     # Generate funded trading agent
     # the short trade amount is in bonds, but we know we will need much less base
     # we can play it safe by initializing with that much base
     short_agent = interactive_hyperdrive.init_agent(base=short_trade_amount, eth=FixedPoint(100), name="bob")
-    short_agent_initial_balance = short_agent.wallet.balance.amount
+    short_agent_initial_balance = short_agent.get_wallet().balance.amount
 
     # Advance time to be right after a checkpoint boundary
     logging.info("Advance time...")
     advance_time_after_checkpoint(chain, interactive_hyperdrive)
 
     # Set trade amount to the new wallet position (due to losing money from the previous open/close)
     logging.info("Open a short...")
@@ -170,31 +161,31 @@
     assert starting_checkpoint_id == ending_checkpoint_id
 
     logging.info("Check invariants...")
     # Ensure that the prior trades did not result in a profit
     check_data = {
         "long_trade_amount": long_trade_amount,
         "long_agent_initial_balance": long_agent_initial_balance,
-        "long_agent_final_balance": long_agent.wallet.balance.amount,
+        "long_agent_final_balance": long_agent.get_wallet().balance.amount,
         "long_events": {"open": open_long_event, "close": close_long_event},
         "short_trade_amount": short_trade_amount,
-        "short_agent_final_balance": short_agent.wallet.balance.amount,
+        "short_agent_final_balance": short_agent.get_wallet().balance.amount,
         "short_agent_initial_balance": short_agent_initial_balance,
         "short_events": {"open": open_short_event, "close": close_short_event},
     }
     try:
         invariant_check(check_data)
     except FuzzAssertionException as error:
         dump_state_dir = chain.save_state(save_prefix="fuzz_profit_check")
 
         # The additional information going into the crash report
         additional_info = {
             "fuzz_random_seed": random_seed,
             "dump_state_dir": dump_state_dir,
-            "trade_ticker": interactive_hyperdrive.get_ticker(),
+            "trade_events": interactive_hyperdrive.get_trade_events(),
         }
         additional_info.update(error.exception_data)
 
         # The subset of information going into rollbar
         rollbar_data = {
             "fuzz_random_seed": random_seed,
             "dump_state_dir": dump_state_dir,
@@ -222,16 +213,15 @@
     chain.cleanup()
     logging.info("Test passed!")
 
 
 class Args(NamedTuple):
     """Command line arguments for the invariant checker."""
 
-    chain_config: ILocalChain.Config
-    log_to_stdout: bool
+    chain_config: LocalChain.Config
 
 
 def namespace_to_args(namespace: argparse.Namespace) -> Args:
     """Converts argprase.Namespace to Args.
 
     Arguments
     ---------
@@ -240,16 +230,15 @@
 
     Returns
     -------
     Args
         Formatted arguments
     """
     return Args(
-        chain_config=ILocalChain.Config(chain_port=namespace.chain_port),
-        log_to_stdout=namespace.log_to_stdout,
+        chain_config=LocalChain.Config(chain_port=namespace.chain_port, log_to_stdout=namespace.log_to_stdout),
     )
 
 
 def parse_arguments(argv: Sequence[str] | None = None) -> Args:
     """Parses input arguments.
 
     Arguments
@@ -285,21 +274,25 @@
     """Check the pool state invariants.
 
     Arguments
     ---------
     check_data: dict[str, Any]
         The trade data to check.
     """
+    # pylint: disable=too-many-statements
+
     failed = False
     exception_message: list[str] = ["Fuzz Profit Check Invariant Check"]
     exception_data: dict[str, Any] = {}
 
     # Check long trade
-    base_amount_returned: FixedPoint = check_data["long_events"]["close"].base_amount
-    base_amount_provided: FixedPoint = check_data["long_events"]["open"].base_amount
+    assert check_data["long_events"]["close"].as_base
+    base_amount_returned: FixedPoint = check_data["long_events"]["close"].amount
+    assert check_data["long_events"]["open"].as_base
+    base_amount_provided: FixedPoint = check_data["long_events"]["open"].amount
     if base_amount_returned >= base_amount_provided:
         difference_in_wei = abs(base_amount_returned.scaled_value - base_amount_provided.scaled_value)
         exception_message.append("LONG: Amount returned on closing was too large.")
         exception_message.append(
             f"{base_amount_returned=} should not be >= {base_amount_provided=}. {difference_in_wei=}"
         )
         exception_data["invariance_check:long_base_amount_returned"] = base_amount_returned
@@ -317,16 +310,18 @@
         )
         exception_data["invariance_check:long_agent_initial_balance"] = initial_agent_balance
         exception_data["invariance_check:long_agent_final_balance"] = final_agent_balance
         exception_data["invariance_check:long_agent_balance_difference_in_wei"] = difference_in_wei
         failed = True
 
     # Check short trade
-    base_amount_returned: FixedPoint = check_data["short_events"]["close"].base_amount
-    base_amount_provided: FixedPoint = check_data["short_events"]["open"].base_amount
+    assert check_data["short_events"]["close"].as_base
+    base_amount_returned: FixedPoint = check_data["short_events"]["close"].amount
+    assert check_data["short_events"]["open"].as_base
+    base_amount_provided: FixedPoint = check_data["short_events"]["open"].amount
     if base_amount_returned >= base_amount_provided:
         difference_in_wei = abs(base_amount_returned.scaled_value - base_amount_provided.scaled_value)
         exception_message.append("SHORT: Amount returned on closing was too large.")
         exception_message.append(
             f"{base_amount_returned=} should not be >= {base_amount_provided=}. {difference_in_wei=}"
         )
         exception_data["invariance_check:short_base_amount_returned"] = base_amount_returned
```

### Comparing `agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/advance_time.py` & `agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/helpers/advance_time.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,17 +1,15 @@
 """Helpers for advancing time wrt checkpoint boundaries"""
 
 from numpy.random._generator import Generator
 
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 
 
-def advance_time_before_checkpoint(
-    chain: ILocalChain, rng: Generator, interactive_hyperdrive: ILocalHyperdrive
-) -> None:
+def advance_time_before_checkpoint(chain: LocalChain, rng: Generator, interactive_hyperdrive: LocalHyperdrive) -> None:
     """Advance time on the chain a random amount that is less than the next checkpoint time.
 
     Arguments
     ---------
     chain: LocalChain
         An instantiated LocalChain.
     rng: `Generator <https://numpy.org/doc/stable/reference/random/generator.html>`_
@@ -37,15 +35,15 @@
         rng.integers(low=0, high=advance_upper_bound),
         create_checkpoints=True,  # we don't want to create one, but only because we haven't advanced enough
     )
     # Do a final check to make sure that the checkpoint didn't happen
     assert len(checkpoint_info[interactive_hyperdrive]) == 0, "Checkpoint was created when it should not have been."
 
 
-def advance_time_after_checkpoint(chain: ILocalChain, interactive_hyperdrive: ILocalHyperdrive) -> None:
+def advance_time_after_checkpoint(chain: LocalChain, interactive_hyperdrive: LocalHyperdrive) -> None:
     """Advance time on the chain to the next checkpoint boundary plus some buffer.
 
     Arguments
     ---------
     chain: LocalChain
         An instantiated LocalChain.
     interactive_hyperdrive: InteractiveHyperdrive
```

### Comparing `agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/close_random_trades.py` & `agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/helpers/close_random_trades.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 """Close trades in a random order."""
 
 from __future__ import annotations
 
 from numpy.random._generator import Generator
 
 from agent0.core.hyperdrive.interactive.event_types import OpenLong, OpenShort
-from agent0.core.hyperdrive.interactive.i_local_hyperdrive_agent import ILocalHyperdriveAgent
+from agent0.core.hyperdrive.interactive.local_hyperdrive_agent import LocalHyperdriveAgent
 
 
 def permute_trade_events(
-    trade_events: list[tuple[ILocalHyperdriveAgent, OpenLong | OpenShort]],
+    trade_events: list[tuple[LocalHyperdriveAgent, OpenLong | OpenShort]],
     rng: Generator,
-) -> list[tuple[ILocalHyperdriveAgent, OpenLong | OpenShort]]:
+) -> list[tuple[LocalHyperdriveAgent, OpenLong | OpenShort]]:
     """Given a list of trade events, returns the list in random order.
 
     Arguments
     ---------
     trade_events: list[tuple[InteractiveHyperdriveAgent, OpenLong | OpenShort]]
         A list with an entry per trade, containing a tuple with:
             - the agent executing the trade
@@ -29,15 +29,15 @@
         The trade event list in random order
     """
     trade_indices = rng.permuted(list(range(len(trade_events))))
     return [trade_events[int(trade_index)] for trade_index in trade_indices]
 
 
 def close_trades(
-    trade_events: list[tuple[ILocalHyperdriveAgent, OpenLong | OpenShort]],
+    trade_events: list[tuple[LocalHyperdriveAgent, OpenLong | OpenShort]],
 ) -> None:
     """Close trades provided.
 
     Arguments
     ---------
     trade_events: list[tuple[InteractiveHyperdriveAgent, OpenLong | OpenShort]]
         A list with an entry per trade, containing a tuple with:
```

### Comparing `agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/execute_random_trades.py` & `agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/helpers/execute_random_trades.py`

 * *Files 2% similar despite different names*

```diff
@@ -5,26 +5,26 @@
 from typing import Literal, overload
 
 import numpy as np
 from fixedpointmath import FixedPoint
 from numpy.random._generator import Generator
 
 from agent0.core.hyperdrive import HyperdriveActionType
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 from agent0.core.hyperdrive.interactive.event_types import OpenLong, OpenShort
-from agent0.core.hyperdrive.interactive.i_local_hyperdrive_agent import ILocalHyperdriveAgent
+from agent0.core.hyperdrive.interactive.local_hyperdrive_agent import LocalHyperdriveAgent
 
 
 def execute_random_trades(
     num_trades: int,
-    chain: ILocalChain,
+    chain: LocalChain,
     rng: Generator,
-    interactive_hyperdrive: ILocalHyperdrive,
+    interactive_hyperdrive: LocalHyperdrive,
     advance_time: bool = False,
-) -> list[tuple[ILocalHyperdriveAgent, OpenLong | OpenShort]]:
+) -> list[tuple[LocalHyperdriveAgent, OpenLong | OpenShort]]:
     """Conduct some trades specified by the trade list.
     If advance time is true, the sum of all time passed between all trades will be between 0 and the position duration.
 
     Arguments
     ---------
     num_trades: int
         The number of trades to execute.
@@ -55,15 +55,15 @@
         intermediate_points = np.sort(rng.integers(low=0, high=max_advance_time, size=num_trades + 1))
         # Find cumulative differences of intermediate points for how much time to wait between each trade
         time_diffs = np.diff(intermediate_points)
 
     # Generate a list of trades
     available_actions = np.array([HyperdriveActionType.OPEN_LONG, HyperdriveActionType.OPEN_SHORT])
     # Do the trades
-    trade_events: list[tuple[ILocalHyperdriveAgent, OpenLong | OpenShort]] = []
+    trade_events: list[tuple[LocalHyperdriveAgent, OpenLong | OpenShort]] = []
     for trade_index, trade_type in enumerate([rng.choice(available_actions, size=1)[0] for _ in range(num_trades)]):
         trade_amount = _get_open_trade_amount(trade_type, rng, interactive_hyperdrive)
         # the short trade amount is technically bonds, but we know that will be less than the required base
         agent = interactive_hyperdrive.init_agent(base=trade_amount, eth=FixedPoint(100))
         trade_event = _execute_trade(trade_type, trade_amount, agent)
         trade_events.append((agent, trade_event))
         if advance_time:
@@ -75,15 +75,15 @@
             )
     return trade_events
 
 
 def _get_open_trade_amount(
     trade_type: HyperdriveActionType,
     rng: Generator,
-    interactive_hyperdrive: ILocalHyperdrive,
+    interactive_hyperdrive: LocalHyperdrive,
     max_budget: FixedPoint = FixedPoint("1e9"),
     percent_max: FixedPoint = FixedPoint("0.75"),
 ) -> FixedPoint:
     """Get a trade amount for a given trade and Hyperdrive pool.
 
     Arguments
     ---------
@@ -118,26 +118,26 @@
 
     max_trade = max_trade * percent_max
     return FixedPoint(scaled_value=int(np.floor(rng.uniform(low=min_trade.scaled_value, high=max_trade.scaled_value))))
 
 
 @overload
 def _execute_trade(
-    trade_type: Literal[HyperdriveActionType.OPEN_LONG], trade_amount: FixedPoint, agent: ILocalHyperdriveAgent
+    trade_type: Literal[HyperdriveActionType.OPEN_LONG], trade_amount: FixedPoint, agent: LocalHyperdriveAgent
 ) -> OpenLong: ...
 
 
 @overload
 def _execute_trade(
-    trade_type: Literal[HyperdriveActionType.OPEN_SHORT], trade_amount: FixedPoint, agent: ILocalHyperdriveAgent
+    trade_type: Literal[HyperdriveActionType.OPEN_SHORT], trade_amount: FixedPoint, agent: LocalHyperdriveAgent
 ) -> OpenShort: ...
 
 
 def _execute_trade(
-    trade_type: HyperdriveActionType, trade_amount: FixedPoint, agent: ILocalHyperdriveAgent
+    trade_type: HyperdriveActionType, trade_amount: FixedPoint, agent: LocalHyperdriveAgent
 ) -> OpenLong | OpenShort:
     """Execute a trade given the type, amount, and agent.
 
     Arguments
     ---------
     trade_type: HyperdriveActionType
         A trade to be executed on the Hyperdrive pool.
```

### Comparing `agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/fuzz_assertion_exception.py` & `agent0-0.20.0/src/agent0/hyperfuzz/fuzz_assertion_exception.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/core/interactive_fuzz/helpers/setup_fuzz.py` & `agent0-0.20.0/src/agent0/hyperfuzz/unit_fuzz/helpers/setup_fuzz.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,46 +1,37 @@
-"""Setup an interactive enfironment for fuzz testing."""
+"""Setup an interactive environment for fuzz testing."""
 
 from __future__ import annotations
 
 import logging
 
 import numpy as np
 from fixedpointmath import FixedPoint
 from numpy.random._generator import Generator
 
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
-from agent0.hyperlogs import setup_logging
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 
 
 def setup_fuzz(
-    log_filename: str,
-    chain_config: ILocalChain.Config | None = None,
-    log_to_stdout: bool = False,
+    chain_config: LocalChain.Config | None = None,
     log_to_rollbar: bool = True,
     crash_log_level: int | None = None,
     fuzz_test_name: str | None = None,
     curve_fee: FixedPoint | None = None,
     flat_fee: FixedPoint | None = None,
     governance_lp_fee: FixedPoint | None = None,
     governance_zombie_fee: FixedPoint | None = None,
     var_interest: FixedPoint | None = None,
-) -> tuple[ILocalChain, int, Generator, ILocalHyperdrive]:
+) -> tuple[LocalChain, int, Generator, LocalHyperdrive]:
     """Setup the fuzz experiment.
 
     Arguments
     ---------
-    log_filename: str
-        Output location for the logging file,
-        which will include state information if the test fails.
     chain_config: LocalChain.Config, optional
         Configuration options for the local chain.
-    log_to_stdout: bool, optional
-        If True, log to stdout in addition to a file.
-        Defaults to False.
     log_to_rollbar: bool, optional
         If True, log errors rollbar. Defaults to True.
     crash_log_level: int | None, optional
         The log level to log crashes at. Defaults to critical.
     fuzz_test_name: str | None, optional
         The prefix to prepend to rollbar exception messages
     curve_fee: FixedPoint | None, optional
@@ -66,23 +57,18 @@
             rng: `Generator <https://numpy.org/doc/stable/reference/random/generator.html>`_
                 The numpy Generator provides access to a wide range of distributions, and stores the random state.
             interactive_hyperdrive: InteractiveHyperdrive
                 An instantiated InteractiveHyperdrive object.
     """
     # pylint: disable=too-many-arguments
     # pylint: disable=too-many-locals
-    setup_logging(
-        log_filename=log_filename,
-        delete_previous_logs=False,
-        log_stdout=log_to_stdout,
-    )
 
     # Setup local chain
-    config = chain_config if chain_config else ILocalChain.Config()
-    chain = ILocalChain(config=config)
+    config = chain_config if chain_config else LocalChain.Config()
+    chain = LocalChain(config=config)
     random_seed = np.random.randint(
         low=1, high=99999999
     )  # No seed, we want this to be random every time it is executed
     rng = np.random.default_rng(random_seed)
 
     # Parameters for pool initialization.
     # Using a day for checkpoint duration to speed things up
@@ -90,15 +76,15 @@
         crash_log_level = logging.CRITICAL
 
     crash_report_additional_info = {
         "fuzz_random_seed": random_seed,
         "fuzz_test_name": fuzz_test_name,
     }
 
-    initial_pool_config = ILocalHyperdrive.Config(
+    initial_pool_config = LocalHyperdrive.Config(
         preview_before_trade=True,
         checkpoint_duration=60 * 60 * 24,  # 1 day
         # TODO calc_max_short doesn't work with a week position duration, setting to 30 days
         position_duration=60 * 60 * 24 * 30,  # 30 days
         log_to_rollbar=log_to_rollbar,
         rollbar_log_prefix=fuzz_test_name,
         crash_log_level=crash_log_level,
@@ -116,10 +102,10 @@
         initial_pool_config.governance_lp_fee = governance_lp_fee
     if governance_zombie_fee is not None:
         initial_pool_config.governance_zombie_fee = governance_zombie_fee
 
     if var_interest is not None:
         initial_pool_config.initial_variable_rate = var_interest
 
-    interactive_hyperdrive = ILocalHyperdrive(chain, initial_pool_config)
+    interactive_hyperdrive = LocalHyperdrive(chain, initial_pool_config)
 
     return chain, random_seed, rng, interactive_hyperdrive
```

### Comparing `agent0-0.18.1/src/agent0/core/test_utils/cycle_trade_policy.py` & `agent0-0.20.0/src/agent0/core/test_utils/cycle_trade_policy.py`

 * *Files 3% similar despite different names*

```diff
@@ -82,24 +82,27 @@
         elif self.counter == 2:
             # Open Short
             action_list.append(open_short_trade(FixedPoint(333), self.slippage_tolerance))
         elif self.counter == 3:
             # Remove All Liquidity
             action_list.append(remove_liquidity_trade(wallet.lp_tokens))
         elif self.counter == 4:
+            # Re-add liquidity to allow for closing positions
+            action_list.append(add_liquidity_trade(trade_amount=FixedPoint(111_111)))
+        elif self.counter == 5:
             # Close All Longs
             assert len(wallet.longs) == 1
             for long_time, long in wallet.longs.items():
                 action_list.append(close_long_trade(long.balance, long_time, self.slippage_tolerance))
-        elif self.counter == 5:
+        elif self.counter == 6:
             # Close All Shorts
             assert len(wallet.shorts) == 1
             for short_time, short in wallet.shorts.items():
                 action_list.append(close_short_trade(short.balance, short_time, self.slippage_tolerance))
-        elif self.counter == 6:
+        elif self.counter == 7:
             # Redeem all withdrawal shares
             action_list.append(redeem_withdraw_shares_trade(wallet.withdraw_shares))
         else:
             done_trading = True
         self.counter += 1
         return action_list, done_trading
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/__init__.py` & `agent0-0.20.0/src/agent0/ethpy/base/__init__.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/abi/load_abis.py` & `agent0-0.20.0/src/agent0/ethpy/base/abi/load_abis.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/contract/deploy_contract.py` & `agent0-0.20.0/src/agent0/ethpy/base/contract/deploy_contract.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/errors/errors.py` & `agent0-0.20.0/src/agent0/ethpy/base/errors/errors.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/errors/errors_test.py` & `agent0-0.20.0/src/agent0/ethpy/base/errors/errors_test.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,11 @@
 """Tests for errors.py"""
 
 from __future__ import annotations
+
 import pytest
 
 from .errors import decode_error_selector_for_contract
 
 
 class TestDecodeErrorSelector:
     """Tests for decode_error_selector_for_contract."""
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/receipts.py` & `agent0-0.20.0/src/agent0/ethpy/base/receipts.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/retry_utils.py` & `agent0-0.20.0/src/agent0/ethpy/base/retry_utils.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/retry_utils_test.py` & `agent0-0.20.0/src/agent0/ethpy/base/retry_utils_test.py`

 * *Files 18% similar despite different names*

```diff
@@ -1,26 +1,23 @@
 """Test executing transactions."""
 
-from typing import cast
-
 import pytest
-from eth_typing import URI
-from web3 import HTTPProvider
 
-from agent0.ethpy.base import initialize_web3_with_http_provider, retry_call
-from agent0.ethpy.test_fixtures import DeployedHyperdrivePool
+from agent0.core.hyperdrive.interactive import LocalChain
+from agent0.ethpy.base import retry_call
 
 
 @pytest.mark.anvil
-def test_retry_call_success(local_hyperdrive_pool: DeployedHyperdrivePool, caplog: pytest.LogCaptureFixture):
+def test_retry_call_success(fast_chain_fixture: LocalChain, caplog: pytest.LogCaptureFixture):
     """Verify that a bogus call produces the correct number of retries."""
     retry_count = 5
     # getting the block should always work
-    rpc_uri = cast(HTTPProvider, local_hyperdrive_pool.web3.provider).endpoint_uri or URI("http://localhost:8545")
-    web3 = initialize_web3_with_http_provider(rpc_uri)
+
+    web3 = fast_chain_fixture._web3  # pylint: disable=protected-access
+
     _ = retry_call(retry_count, None, web3.eth.get_block, "latest", full_transactions=True)
     retries = [r for r in caplog.records if r.message.startswith("Retry")]
     assert len(retries) == 0
 
 
 @pytest.mark.anvil
 def test_retry_call_fail(caplog: pytest.LogCaptureFixture):
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/rpc_interface.py` & `agent0-0.20.0/src/agent0/ethpy/base/rpc_interface.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/transactions.py` & `agent0-0.20.0/src/agent0/ethpy/base/transactions.py`

 * *Files 9% similar despite different names*

```diff
@@ -17,14 +17,16 @@
 
 from .errors.errors import ContractCallException, ContractCallType, decode_error_selector_for_contract
 from .errors.types import UnknownBlockError
 from .retry_utils import retry_call
 
 DEFAULT_READ_RETRY_COUNT = 5
 DEFAULT_WRITE_RETRY_COUNT = 1
+DEFAULT_BASE_FEE_MULTIPLE = 1
+DEFAULT_PRIORITY_FEE_MULTIPLE = 1
 
 # pylint: disable=too-many-lines
 # we have lots of parameters in smart_contract_transact and async_smart_contract_transact
 # too many branches in smart_contract_preview_transaction
 # ruff: noqa: PLR0912
 # too many arguments in function async_smart_contract_transact
 # ruff: noqa: PLR0913
@@ -162,15 +164,15 @@
     *fn_args: Unknown
         The arguments passed to the contract method.
     block_number: BlockNumber | None
         If set, will query the chain on the specified block
     read_retry_count: int | None
         The number of times to retry the read call if it fails. Defaults to 5.
     txn_options_value: int | None
-        The value field to set for transaction options.
+        The value field for the transaction.
     **fn_kwargs: Unknown
         The keyword arguments passed to the contract method.
 
     Returns
     -------
     dict[str, Any]
         Return values of the previewed transaction.
@@ -379,14 +381,16 @@
     func_handle: ContractFunction,
     signer: LocalAccount,
     web3: Web3,
     nonce: Nonce | None = None,
     read_retry_count: int | None = None,
     txn_options_value: int | None = None,
     txn_options_gas: int | None = None,
+    txn_options_base_fee_multiple: float | None = None,
+    txn_options_priority_fee_multiple: float | None = None,
 ) -> TxParams:
     """Build a transaction for the given function.
 
     Arguments
     ---------
     func_handle: ContractFunction
         The function to call
@@ -395,25 +399,33 @@
     web3: Web3
         web3 container object
     nonce: Nonce | None
         The nonce to use for this transaction. Defaults to setting it to the result of `get_transaction_count`.
     read_retry_count: BlockNumber | None
         The number of times to retry the read call if it fails. Defaults to 5.
     txn_options_value: int | None
-        The value field to set for transaction options.
+        The value field for the transaction.
     txn_options_gas: int | None = None
-        The gas field to set for transaction options. Defaults to estimateGas output.
+        The amount of gas used by the transaction. Defaults to estimateGas output.
+    txn_options_base_fee_multiple: float | None = None
+        The multiple applied to the base fee for the transaction. Defaults to 1.
+    txn_options_priority_fee_multiple: float | None = None
+        The multiple applied to the priority fee for the transaction. Defaults to 1.
 
     Returns
     -------
     TxParams
         The unsent raw transaction.
     """
     if read_retry_count is None:
         read_retry_count = DEFAULT_READ_RETRY_COUNT
+    if txn_options_base_fee_multiple is None:
+        txn_options_base_fee_multiple = DEFAULT_BASE_FEE_MULTIPLE
+    if txn_options_priority_fee_multiple is None:
+        txn_options_priority_fee_multiple = DEFAULT_PRIORITY_FEE_MULTIPLE
     signer_checksum_address = Web3.to_checksum_address(signer.address)
     # TODO figure out which exception here to retry on
     base_nonce = retry_call(read_retry_count, None, web3.eth.get_transaction_count, signer_checksum_address)
     if nonce is None:
         nonce = base_nonce
     # We explicitly check to ensure explicit nonce is larger than what web3 is reporting
     if base_nonce > nonce:
@@ -429,30 +441,28 @@
         }
     )
     if txn_options_value is not None:
         transaction_kwargs["value"] = Wei(txn_options_value)
 
     # Assign gas parameters
     # other than the optional gas parameter, this is the default behavior of web3py, exposed here for clarity
-    max_priority_fee = web3.eth.max_priority_fee
+    max_priority_fee = int(web3.eth.max_priority_fee * txn_options_priority_fee_multiple)
     pending_block = web3.eth.get_block("pending")
     base_fee = pending_block.get("baseFeePerGas", None)
-    if base_fee is None:
+    if base_fee is not None:
+        base_fee *= txn_options_base_fee_multiple
+    else:
         raise AssertionError("The latest block does not have a baseFeePerGas")
-    max_fee_per_gas = max_priority_fee + base_fee
-    if txn_options_gas is not None:
-        transaction_kwargs["gas"] = txn_options_gas
+    max_fee_per_gas = int(max_priority_fee + base_fee)
     transaction_kwargs["maxFeePerGas"] = Wei(max_fee_per_gas)
     transaction_kwargs["maxPriorityFeePerGas"] = Wei(max_priority_fee)
+    if txn_options_gas is not None:
+        transaction_kwargs["gas"] = txn_options_gas
 
-    # Building transactions can also fail, so we add retry here
-    unsent_txn = retry_call(
-        read_retry_count, _retry_preview_check, func_handle.build_transaction, TxParams(transaction_kwargs)
-    )
-    return unsent_txn
+    return func_handle.build_transaction(TxParams(transaction_kwargs))
 
 
 async def _async_send_transaction_and_wait_for_receipt(
     unsent_txn: TxParams, signer: LocalAccount, web3: Web3, timeout: float | None = None
 ) -> TxReceipt:
     """Send a transaction and waits for the receipt asynchronously.
 
@@ -470,15 +480,15 @@
 
     Returns
     -------
     TxReceipt
         a TypedDict; success can be checked via tx_receipt["status"]
     """
     signed_txn = signer.sign_transaction(unsent_txn)
-    tx_hash = web3.eth.send_raw_transaction(signed_txn.rawTransaction)
+    tx_hash = web3.eth.send_raw_transaction(signed_txn.raw_transaction)
     tx_receipt = await async_wait_for_transaction_receipt(web3, tx_hash, timeout=timeout)
 
     # Error checking when transaction doesn't throw an error, but instead
     # has errors in the tx_receipt
     # The block number of this call failing is the previous block
     block_number = tx_receipt.get("blockNumber") - 1
     # Check status here
@@ -500,14 +510,16 @@
     function_name_or_signature: str,
     *fn_args,
     nonce: Nonce | None = None,
     read_retry_count: int | None = None,
     write_retry_count: int | None = None,
     txn_options_value: int | None = None,
     txn_options_gas: int | None = None,
+    txn_options_base_fee_multiple: float | None = None,
+    txn_options_priority_fee_multiple: float | None = None,
     timeout: float | None = None,
     **fn_kwargs,
 ) -> TxReceipt:
     """Execute a named function on a contract that requires a signature & gas.
 
     Copy of `smart_contract_transact`, but using async wait for `wait_for_transaction_receipt`
 
@@ -526,17 +538,21 @@
     nonce: Nonce | None
         If set, will explicitly set the nonce to this value, otherwise will use web3 to get transaction count
     read_retry_count: BlockNumber | None
         The number of times to retry the read call if it fails. Defaults to 5.
     write_retry_count: BlockNumber | None
         The number of times to retry the transact call if it fails. Defaults to no retries.
     txn_options_value: int | None
-        The value field to set for transaction options.
+        The value field for the transaction.
     txn_options_gas : int | None
-        The gas field to set for transaction options.
+        The amount of gas used by the transaction.
+    txn_options_base_fee_multiple: float | None = None
+        The multiple applied to the base fee for the transaction. Defaults to 1.
+    txn_options_priority_fee_multiple: float | None = None
+        The multiple applied to the priority fee for the transaction. Defaults to 1.
     timeout: float | None, optional
         The number of seconds to wait for the transaction to be mined.
         Default is defined in `_async_send_transaction_and_wait_for_receipt`.
     **fn_kwargs: Unknown
         The keyword arguments passed to the contract method.
 
     Returns
@@ -562,14 +578,16 @@
             func_handle,
             signer,
             web3,
             nonce=nonce,
             read_retry_count=read_retry_count,
             txn_options_value=txn_options_value,
             txn_options_gas=txn_options_gas,
+            txn_options_base_fee_multiple=txn_options_base_fee_multiple,
+            txn_options_priority_fee_multiple=txn_options_priority_fee_multiple,
         )
         return await retry_call(
             write_retry_count,
             _retry_txn_check,
             _async_send_transaction_and_wait_for_receipt,
             unsent_txn,
             signer,
@@ -669,15 +687,15 @@
 
     Returns
     -------
     TxReceipt
         a TypedDict; success can be checked via tx_receipt["status"]
     """
     signed_txn = signer.sign_transaction(unsent_txn)
-    tx_hash = web3.eth.send_raw_transaction(signed_txn.rawTransaction)
+    tx_hash = web3.eth.send_raw_transaction(signed_txn.raw_transaction)
     tx_receipt = wait_for_transaction_receipt(web3, tx_hash, timeout=timeout)
 
     # Error checking when transaction doesn't throw an error, but instead
     # has errors in the tx_receipt
     # The block number of this call failing is the previous block
     block_number = tx_receipt.get("blockNumber") - 1
     # Check status here
@@ -697,14 +715,16 @@
     function_name_or_signature: str,
     *fn_args,
     nonce: Nonce | None = None,
     read_retry_count: int | None = None,
     write_retry_count: int | None = None,
     txn_options_value: int | None = None,
     txn_options_gas: int | None = None,
+    txn_options_base_fee_multiple: float | None = None,
+    txn_options_priority_fee_multiple: float | None = None,
     timeout: float | None = None,
     **fn_kwargs,
 ) -> TxReceipt:
     """Execute a named function on a contract that requires a signature & gas.
 
     Arguments
     ---------
@@ -721,17 +741,21 @@
     nonce: Nonce | None
         If set, will explicitly set the nonce to this value, otherwise will use web3 to get transaction count
     read_retry_count: BlockNumber | None
         The number of times to retry the read call if it fails. Defaults to 5.
     write_retry_count: BlockNumber | None
         The number of times to retry the transact call if it fails. Defaults to no retries.
     txn_options_value: int | None
-        The value field to set for transaction options.
+        The value field for the transaction.
     txn_options_gas : int | None
-        The gas field to set for transaction options.
+        The amount of gas used by the transaction.
+    txn_options_base_fee_multiple: float | None = None
+        The multiple applied to the base fee for the transaction. Defaults to 1.
+    txn_options_priority_fee_multiple: float | None = None
+        The multiple applied to the priority fee for the transaction. Defaults to 1.
     timeout: float | None, optional
         The number of seconds to wait for the transaction to be mined.
         Default is defined in `send_transaction_and_wait_for_receipt`.
     **fn_kwargs: Unknown
         The keyword arguments passed to the contract method.
 
     Returns
@@ -757,14 +781,16 @@
             func_handle,
             signer,
             web3,
             nonce=nonce,
             read_retry_count=read_retry_count,
             txn_options_value=txn_options_value,
             txn_options_gas=txn_options_gas,
+            txn_options_base_fee_multiple=txn_options_base_fee_multiple,
+            txn_options_priority_fee_multiple=txn_options_priority_fee_multiple,
         )
         return retry_call(
             write_retry_count,
             _retry_txn_check,
             send_transaction_and_wait_for_receipt,
             unsent_txn,
             signer,
@@ -897,15 +923,15 @@
     if base_fee is None:
         raise AssertionError("The latest block does not have a baseFeePerGas")
     max_fee_per_gas = max_priority_fee + base_fee
     unsent_txn["gas"] = web3.eth.estimate_gas(unsent_txn)
     unsent_txn["maxFeePerGas"] = Wei(max_fee_per_gas)
     unsent_txn["maxPriorityFeePerGas"] = Wei(max_priority_fee)
     signed_txn = signer.sign_transaction(unsent_txn)
-    tx_hash = web3.eth.send_raw_transaction(signed_txn.rawTransaction)
+    tx_hash = web3.eth.send_raw_transaction(signed_txn.raw_transaction)
     return await async_wait_for_transaction_receipt(web3, tx_hash)
 
 
 # TODO clean up args
 # pylint: disable=too-many-arguments
 def eth_transfer(
     web3: Web3,
@@ -961,15 +987,15 @@
         raise AssertionError("The latest block does not have a baseFeePerGas")
     max_fee_per_gas = max_priority_fee + base_fee
     unsent_txn["gas"] = web3.eth.estimate_gas(unsent_txn)
     unsent_txn["maxFeePerGas"] = Wei(max_fee_per_gas)
     unsent_txn["maxPriorityFeePerGas"] = Wei(max_priority_fee)
     signed_txn = signer.sign_transaction(unsent_txn)
 
-    tx_hash = web3.eth.send_raw_transaction(signed_txn.rawTransaction)
+    tx_hash = web3.eth.send_raw_transaction(signed_txn.raw_transaction)
     return web3.eth.wait_for_transaction_receipt(tx_hash)
 
 
 def fetch_contract_transactions_for_block(
     web3: Web3, contract: Contract, block_number: BlockNumber, read_retry_count: int | None = None
 ) -> list[TxData]:
     """Fetch transactions related to a contract for a given block number.
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/base/web3_setup.py` & `agent0-0.20.0/src/agent0/ethpy/base/web3_setup.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/assets.py` & `agent0-0.20.0/src/agent0/ethpy/hyperdrive/assets.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/deploy.py` & `agent0-0.20.0/src/agent0/ethpy/hyperdrive/deploy.py`

 * *Files 8% similar despite different names*

```diff
@@ -4,14 +4,15 @@
 
 from typing import NamedTuple
 
 from eth_account.account import Account
 from eth_account.signers.local import LocalAccount
 from eth_typing import ChecksumAddress
 from fixedpointmath import FixedPoint
+from hexbytes import HexBytes
 from web3 import Web3
 from web3.constants import ADDRESS_ZERO
 from web3.contract.contract import Contract
 from web3.types import TxReceipt
 
 from agent0.ethpy.base import initialize_web3_with_http_provider
 from agent0.ethpy.base.receipts import get_transaction_logs
@@ -21,37 +22,42 @@
     ERC20MintableContract,
     ERC4626HyperdriveCoreDeployerContract,
     ERC4626HyperdriveDeployerCoordinatorContract,
     ERC4626Target0DeployerContract,
     ERC4626Target1DeployerContract,
     ERC4626Target2DeployerContract,
     ERC4626Target3DeployerContract,
-    ERC4626Target4DeployerContract,
     FactoryConfig,
     HyperdriveFactoryContract,
     IHyperdriveContract,
+    LPMathContract,
     MockERC4626Contract,
     Options,
     PoolDeployConfig,
 )
+from agent0.hypertypes.types.ERC4626Target0DeployerContract import erc4626target0deployer_bytecode
+from agent0.hypertypes.types.ERC4626Target1DeployerContract import erc4626target1deployer_bytecode
+from agent0.hypertypes.types.ERC4626Target2DeployerContract import erc4626target2deployer_bytecode
+from agent0.hypertypes.types.ERC4626Target3DeployerContract import erc4626target3deployer_bytecode
 
 # Deploying a Hyperdrive pool requires a long sequence of contract and RPCs,
 # resulting in long functions with many parameter arguments.
 # pylint: disable=too-many-arguments
 # pylint: disable=too-many-locals
 
 UINT256_MAX = int(2**256 - 1)
 
 
 class DeployedHyperdrivePool(NamedTuple):
     """Collection of attributes associated with a locally deployed chain with a Hyperdrive pool."""
 
     web3: Web3
     deploy_account: LocalAccount
-    hyperdrive_contract: Contract
+    hyperdrive_contract: IHyperdriveContract
+    # Keeping the base and vault shares contract generic
     base_token_contract: Contract
     vault_shares_token_contract: Contract
     deploy_block_number: int
 
 
 def deploy_hyperdrive_from_factory(
     rpc_uri: str,
@@ -105,14 +111,15 @@
     web3 = initialize_web3_with_http_provider(rpc_uri, reset_provider=False)
     # Create the pre-funded account on the Delv devnet
     deploy_account = _initialize_deployment_account(web3, deployer_private_key)
     deploy_account_addr = Web3.to_checksum_address(deploy_account.address)
 
     # Update various configs with the deploy account address
     factory_deploy_config.governance = deploy_account_addr
+    factory_deploy_config.deployerCoordinatorManager = deploy_account_addr
     factory_deploy_config.hyperdriveGovernance = deploy_account_addr
     factory_deploy_config.feeCollector = deploy_account_addr
     factory_deploy_config.sweepCollector = deploy_account_addr
 
     # Deploy the factory and base token contracts
     factory_contract, deployer_contract, factory_deploy_config = _deploy_hyperdrive_factory(
         web3,
@@ -223,33 +230,52 @@
     # Set config from forwarder factory contract here
     factory_deploy_config.linkerFactory = forwarder_factory_contract.address
     factory_deploy_config.linkerCodeHash = forwarder_factory_contract.functions.ERC20LINK_HASH().call()
     # Deploy hyperdrive factory
     factory_contract = HyperdriveFactoryContract.deploy(
         w3=web3,
         account=deploy_account_addr,
-        constructorArgs=HyperdriveFactoryContract.ConstructorArgs(factory_deploy_config),
+        constructorArgs=HyperdriveFactoryContract.ConstructorArgs(factory_deploy_config, "HyperdriveFactory"),
     )
+
+    lp_math_contract = LPMathContract.deploy(w3=web3, account=deploy_account_addr)
+    # Deploying the target deployer contracts requires linking to the LPMath contract.
+    # We do this by replacing the `linked_str` pattern with address of lp_math_contract.
+    # The `linked_str` pattern is the identifier of the LP Math contract for
+    # "contracts/src/libraries/LPMath.sol"
+    linked_str = "__$2b4fa6f02a36eedfe41c65e8dd342257d3$__"
+    linked_contract_addr = lp_math_contract.address[2:].lower()
+    ERC4626Target0DeployerContract.bytecode = HexBytes(
+        str(erc4626target0deployer_bytecode).replace(linked_str, linked_contract_addr)
+    )
+    ERC4626Target1DeployerContract.bytecode = HexBytes(
+        str(erc4626target1deployer_bytecode).replace(linked_str, linked_contract_addr)
+    )
+    ERC4626Target2DeployerContract.bytecode = HexBytes(
+        str(erc4626target2deployer_bytecode).replace(linked_str, linked_contract_addr)
+    )
+    ERC4626Target3DeployerContract.bytecode = HexBytes(
+        str(erc4626target3deployer_bytecode).replace(linked_str, linked_contract_addr)
+    )
+
     core_deployer_contract = ERC4626HyperdriveCoreDeployerContract.deploy(w3=web3, account=deploy_account_addr)
     target0_contract = ERC4626Target0DeployerContract.deploy(w3=web3, account=deploy_account_addr)
     target1_contract = ERC4626Target1DeployerContract.deploy(w3=web3, account=deploy_account_addr)
     target2_contract = ERC4626Target2DeployerContract.deploy(w3=web3, account=deploy_account_addr)
     target3_contract = ERC4626Target3DeployerContract.deploy(w3=web3, account=deploy_account_addr)
-    target4_contract = ERC4626Target4DeployerContract.deploy(w3=web3, account=deploy_account_addr)
     deployer_contract = ERC4626HyperdriveDeployerCoordinatorContract.deploy(
         w3=web3,
         account=deploy_account_addr,
         constructorArgs=ERC4626HyperdriveDeployerCoordinatorContract.ConstructorArgs(
             factory=factory_contract.address,
             coreDeployer=core_deployer_contract.address,
             target0Deployer=target0_contract.address,
             target1Deployer=target1_contract.address,
             target2Deployer=target2_contract.address,
             target3Deployer=target3_contract.address,
-            target4Deployer=target4_contract.address,
         ),
     )
     add_deployer_coordinator_function = factory_contract.functions.addDeployerCoordinator(deployer_contract.address)
     function_name = add_deployer_coordinator_function.fn_name
     function_args = add_deployer_coordinator_function.args
     receipt = smart_contract_transact(
         web3,
@@ -416,16 +442,16 @@
         or pool_deploy_config.checkpointDuration > max_checkpoint_duration
     ):
         raise ValueError(
             f"{pool_deploy_config.checkpointDuration=} must be between "
             f"{min_checkpoint_duration=} and {max_checkpoint_duration=}"
         )
 
-    # There are 5 contracts to deploy, we call deployTarget on all of them
-    for target_index in range(5):
+    # There are 4 contracts to deploy, we call deployTarget on all of them
+    for target_index in range(4):
         deploy_target_function = factory_contract.functions.deployTarget(
             deploymentId=deployment_id,
             deployerCoordinator=deployer_coordinator_address,
             config=pool_deploy_config,
             extraData=bytes(0),  # Vec::new().info()
             fixedAPR=initial_fixed_apr.scaled_value,
             timeStretchAPR=initial_time_stretch_apr.scaled_value,
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/_block_getters.py` & `agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/_block_getters.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/_contract_calls.py` & `agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/_contract_calls.py`

 * *Files 16% similar despite different names*

```diff
@@ -129,14 +129,15 @@
         interface.web3,
         interface.hyperdrive_contract,
         sender,
         "checkpoint",
         *fn_args,
         read_retry_count=interface.read_retry_count,
         write_retry_count=interface.write_retry_count,
+        timeout=interface.txn_receipt_timeout,
     )
     trade_result = parse_logs(tx_receipt, interface.hyperdrive_contract, "createCheckpoint")
     return trade_result
 
 
 def _set_variable_rate(
     interface: HyperdriveReadWriteInterface,
@@ -148,38 +149,41 @@
         interface.web3,
         interface.vault_shares_token_contract,
         sender,
         "setRate",
         new_rate.scaled_value,
         read_retry_count=interface.read_retry_count,
         write_retry_count=interface.write_retry_count,
+        timeout=interface.txn_receipt_timeout,
     )
 
 
 # pylint: disable=too-many-locals
 async def _async_open_long(
     interface: HyperdriveReadWriteInterface,
     agent: LocalAccount,
     trade_amount: FixedPoint,
     slippage_tolerance: FixedPoint | None = None,
     gas_limit: int | None = None,
+    txn_options_base_fee_multiple: float | None = None,
+    txn_options_priority_fee_multiple: float | None = None,
     nonce: Nonce | None = None,
     preview_before_trade: bool = False,
 ) -> ReceiptBreakdown:
     """See API for documentation."""
     agent_checksum_address = Web3.to_checksum_address(agent.address)
     # min_vault_share_price: int
     #   Minium share price at which to open the long.
     #   This allows traders to protect themselves from opening a long in
     #   a checkpoint where negative interest has accrued.
     min_vault_share_price = 0  # TODO: give the user access to this parameter
     min_output = 0  # TODO: give the user access to this parameter
 
     # We use the yield as the base token in steth pools
-    if interface.is_steth:
+    if interface.base_is_eth:
         as_base_option = False
     else:
         as_base_option = True
 
     fn_args = (
         trade_amount.scaled_value,
         min_output,
@@ -228,14 +232,17 @@
             agent,
             "openLong",
             *fn_args,
             nonce=nonce,
             read_retry_count=interface.read_retry_count,
             write_retry_count=interface.write_retry_count,
             txn_options_gas=gas_limit,
+            txn_options_base_fee_multiple=txn_options_base_fee_multiple,
+            txn_options_priority_fee_multiple=txn_options_priority_fee_multiple,
+            timeout=interface.txn_receipt_timeout,
         )
         trade_result = parse_logs(tx_receipt, interface.hyperdrive_contract, "openLong")
     except Exception as exc:
         # We add the preview block as an arg to the exception
         exc.args += (f"Call previewed in block {current_block}",)
         raise exc
     return trade_result
@@ -245,23 +252,25 @@
 async def _async_close_long(
     interface: HyperdriveReadWriteInterface,
     agent: LocalAccount,
     trade_amount: FixedPoint,
     maturity_time: int,
     slippage_tolerance: FixedPoint | None = None,
     gas_limit: int | None = None,
+    txn_options_base_fee_multiple: float | None = None,
+    txn_options_priority_fee_multiple: float | None = None,
     nonce: Nonce | None = None,
     preview_before_trade: bool = False,
 ) -> ReceiptBreakdown:
     """See API for documentation."""
     agent_checksum_address = Web3.to_checksum_address(agent.address)
     min_output = 0
 
     # We use the yield as the base token in steth pools
-    if interface.is_steth:
+    if interface.base_is_eth:
         as_base_option = False
     else:
         as_base_option = True
 
     fn_args = (
         maturity_time,
         trade_amount.scaled_value,
@@ -308,14 +317,17 @@
             agent,
             "closeLong",
             *fn_args,
             nonce=nonce,
             read_retry_count=interface.read_retry_count,
             write_retry_count=interface.write_retry_count,
             txn_options_gas=gas_limit,
+            txn_options_base_fee_multiple=txn_options_base_fee_multiple,
+            txn_options_priority_fee_multiple=txn_options_priority_fee_multiple,
+            timeout=interface.txn_receipt_timeout,
         )
         trade_result = parse_logs(tx_receipt, interface.hyperdrive_contract, "closeLong")
     except Exception as exc:
         # We add the preview block as an arg to the exception
         exc.args += (f"Call previewed in block {current_block}",)
         raise exc
     return trade_result
@@ -324,23 +336,25 @@
 # pylint: disable=too-many-locals
 async def _async_open_short(
     interface: HyperdriveReadWriteInterface,
     agent: LocalAccount,
     trade_amount: FixedPoint,
     slippage_tolerance: FixedPoint | None = None,
     gas_limit: int | None = None,
+    txn_options_base_fee_multiple: float | None = None,
+    txn_options_priority_fee_multiple: float | None = None,
     nonce: Nonce | None = None,
     preview_before_trade: bool = False,
 ) -> ReceiptBreakdown:
     """See API for documentation."""
     agent_checksum_address = Web3.to_checksum_address(agent.address)
     max_deposit = int(MAX_WEI)
 
     # We use the yield as the base token in steth pools
-    if interface.is_steth:
+    if interface.base_is_eth:
         as_base_option = False
     else:
         as_base_option = True
 
     # min_vault_share_price: int
     #   Minium share price at which to open the short.
     #   This allows traders to protect themselves from opening a long in
@@ -392,14 +406,17 @@
             agent,
             "openShort",
             *fn_args,
             nonce=nonce,
             read_retry_count=interface.read_retry_count,
             write_retry_count=interface.write_retry_count,
             txn_options_gas=gas_limit,
+            txn_options_base_fee_multiple=txn_options_base_fee_multiple,
+            txn_options_priority_fee_multiple=txn_options_priority_fee_multiple,
+            timeout=interface.txn_receipt_timeout,
         )
         trade_result = parse_logs(tx_receipt, interface.hyperdrive_contract, "openShort")
     except Exception as exc:
         # We add the preview block as an arg to the exception
         exc.args += (f"Call previewed in block {current_block}",)
         raise exc
     return trade_result
@@ -408,23 +425,25 @@
 async def _async_close_short(
     interface: HyperdriveReadWriteInterface,
     agent: LocalAccount,
     trade_amount: FixedPoint,
     maturity_time: int,
     slippage_tolerance: FixedPoint | None = None,
     gas_limit: int | None = None,
+    txn_options_base_fee_multiple: float | None = None,
+    txn_options_priority_fee_multiple: float | None = None,
     nonce: Nonce | None = None,
     preview_before_trade: bool = False,
 ) -> ReceiptBreakdown:
     """See API for documentation."""
     agent_checksum_address = Web3.to_checksum_address(agent.address)
     min_output = 0
 
     # We use the yield as the base token in steth pools
-    if interface.is_steth:
+    if interface.base_is_eth:
         as_base_option = False
     else:
         as_base_option = True
 
     fn_args = (
         maturity_time,
         trade_amount.scaled_value,
@@ -471,14 +490,17 @@
             agent,
             "closeShort",
             *fn_args,
             nonce=nonce,
             read_retry_count=interface.read_retry_count,
             write_retry_count=interface.write_retry_count,
             txn_options_gas=gas_limit,
+            txn_options_base_fee_multiple=txn_options_base_fee_multiple,
+            txn_options_priority_fee_multiple=txn_options_priority_fee_multiple,
+            timeout=interface.txn_receipt_timeout,
         )
         trade_result = parse_logs(tx_receipt, interface.hyperdrive_contract, "closeShort")
     except Exception as exc:
         # We add the preview block as an arg to the exception
         exc.args += (f"Call previewed in block {current_block}",)
         raise exc
     return trade_result
@@ -488,27 +510,29 @@
     interface: HyperdriveReadWriteInterface,
     agent: LocalAccount,
     trade_amount: FixedPoint,
     min_apr: FixedPoint,
     max_apr: FixedPoint,
     slippage_tolerance: FixedPoint | None = None,
     gas_limit: int | None = None,
+    txn_options_base_fee_multiple: float | None = None,
+    txn_options_priority_fee_multiple: float | None = None,
     nonce: Nonce | None = None,
     preview_before_trade: bool = False,
 ) -> ReceiptBreakdown:
     """See API for documentation."""
     # TODO implement slippage tolerance for this. Explicitly setting min_lp_share_price to 0.
     if slippage_tolerance is not None:
         raise NotImplementedError("Slippage tolerance for add liquidity not yet supported")
 
     agent_checksum_address = Web3.to_checksum_address(agent.address)
     min_lp_share_price = 0
 
     # We use the yield as the base token in steth pools
-    if interface.is_steth:
+    if interface.base_is_eth:
         as_base_option = False
     else:
         as_base_option = True
 
     fn_args = (
         trade_amount.scaled_value,
         min_lp_share_price,
@@ -541,37 +565,42 @@
             agent,
             "addLiquidity",
             *fn_args,
             nonce=nonce,
             read_retry_count=interface.read_retry_count,
             write_retry_count=interface.write_retry_count,
             txn_options_gas=gas_limit,
+            txn_options_base_fee_multiple=txn_options_base_fee_multiple,
+            txn_options_priority_fee_multiple=txn_options_priority_fee_multiple,
+            timeout=interface.txn_receipt_timeout,
         )
         trade_result = parse_logs(tx_receipt, interface.hyperdrive_contract, "addLiquidity")
     except Exception as exc:
         # We add the preview block as an arg to the exception
         exc.args += (f"Call previewed in block {current_block}",)
         raise exc
     return trade_result
 
 
 async def _async_remove_liquidity(
     interface: HyperdriveReadWriteInterface,
     agent: LocalAccount,
     trade_amount: FixedPoint,
     gas_limit: int | None = None,
+    txn_options_base_fee_multiple: float | None = None,
+    txn_options_priority_fee_multiple: float | None = None,
     nonce: Nonce | None = None,
     preview_before_trade: bool = False,
 ) -> ReceiptBreakdown:
     """See API for documentation."""
     agent_checksum_address = Web3.to_checksum_address(agent.address)
     min_output = 0
 
     # We use the yield as the base token in steth pools
-    if interface.is_steth:
+    if interface.base_is_eth:
         as_base_option = False
     else:
         as_base_option = True
 
     fn_args = (
         trade_amount.scaled_value,
         min_output,
@@ -601,37 +630,43 @@
             agent,
             "removeLiquidity",
             *fn_args,
             nonce=nonce,
             read_retry_count=interface.read_retry_count,
             write_retry_count=interface.write_retry_count,
             txn_options_gas=gas_limit,
+            txn_options_base_fee_multiple=txn_options_base_fee_multiple,
+            txn_options_priority_fee_multiple=txn_options_priority_fee_multiple,
+            timeout=interface.txn_receipt_timeout,
         )
         trade_result = parse_logs(tx_receipt, interface.hyperdrive_contract, "removeLiquidity")
     except Exception as exc:
         # We add the preview block as an arg to the exception
         exc.args += (f"Call previewed in block {current_block}",)
         raise exc
     return trade_result
 
 
 async def _async_redeem_withdraw_shares(
     interface: HyperdriveReadWriteInterface,
     agent: LocalAccount,
     trade_amount: FixedPoint,
     gas_limit: int | None = None,
+    txn_options_base_fee_multiple: float | None = None,
+    txn_options_priority_fee_multiple: float | None = None,
     nonce: Nonce | None = None,
+    preview_before_trade: bool = False,
 ) -> ReceiptBreakdown:
     """See API for documentation."""
     # for now, assume an underlying vault share price of at least 1, should be higher by a bit
     agent_checksum_address = Web3.to_checksum_address(agent.address)
     min_output = FixedPoint(scaled_value=1)
 
     # We use the yield as the base token in steth pools
-    if interface.is_steth:
+    if interface.base_is_eth:
         as_base_option = False
     else:
         as_base_option = True
 
     fn_args = (
         trade_amount.scaled_value,
         min_output.scaled_value,
@@ -641,40 +676,43 @@
             bytes(0),  # extraData
         ),
     )
     # To catch any solidity errors, we always preview transactions on the current block
     # before calling smart contract transact
     # Since current_pool_state.block_number is a property, we want to get the static block here
     current_block = interface.current_pool_state.block_number
-    preview_result = smart_contract_preview_transaction(
-        interface.hyperdrive_contract,
-        agent_checksum_address,
-        "redeemWithdrawalShares",
-        *fn_args,
-        block_number=current_block,
-        read_retry_count=interface.read_retry_count,
-    )
-    # Here, a preview call of redeem withdrawal shares will still be successful without logs if
-    # the amount of shares to redeem is larger than what's in the wallet. We want to catch this error
-    # here with a useful error message, so we check that explicitly here
-
-    if preview_result["withdrawalSharesRedeemed"] == 0 and trade_amount > 0:
-        raise ValueError("Preview call for redeem withdrawal shares returned 0 for non-zero input trade amount")
+    if preview_before_trade is True:
+        preview_result = smart_contract_preview_transaction(
+            interface.hyperdrive_contract,
+            agent_checksum_address,
+            "redeemWithdrawalShares",
+            *fn_args,
+            block_number=current_block,
+            read_retry_count=interface.read_retry_count,
+        )
+        # Here, a preview call of redeem withdrawal shares will still be successful without logs if
+        # the amount of shares to redeem is larger than what's in the wallet. We want to catch this error
+        # here with a useful error message, so we check that explicitly here
+        if preview_result["withdrawalSharesRedeemed"] == 0 and trade_amount > 0:
+            raise ValueError("Preview call for redeem withdrawal shares returned 0 for non-zero input trade amount")
 
     try:
         tx_receipt = await async_smart_contract_transact(
             interface.web3,
             interface.hyperdrive_contract,
             agent,
             "redeemWithdrawalShares",
             *fn_args,
             nonce=nonce,
             read_retry_count=interface.read_retry_count,
             write_retry_count=interface.write_retry_count,
             txn_options_gas=gas_limit,
+            txn_options_base_fee_multiple=txn_options_base_fee_multiple,
+            txn_options_priority_fee_multiple=txn_options_priority_fee_multiple,
+            timeout=interface.txn_receipt_timeout,
         )
         trade_result = parse_logs(tx_receipt, interface.hyperdrive_contract, "redeemWithdrawalShares")
     except Exception as exc:
         # We add the preview block as an arg to the exception
         exc.args += (f"Call previewed in block {current_block}",)
         raise exc
     return trade_result
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/interface_test.py` & `agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/interface_test.py`

 * *Files 17% similar despite different names*

```diff
@@ -10,28 +10,30 @@
 
 
 class TestHyperdriveInterface:
     """Tests for the Hyperdrive interface inheritence system."""
 
     def test_inheritance(
         self,
-        hyperdrive_read_interface: HyperdriveReadInterface,
-        hyperdrive_read_write_interface: HyperdriveReadWriteInterface,
+        hyperdrive_read_interface_fixture: HyperdriveReadInterface,
+        hyperdrive_read_write_interface_fixture: HyperdriveReadWriteInterface,
     ):
         # child class should inherit type from parent class
-        assert isinstance(hyperdrive_read_write_interface, HyperdriveReadInterface)
+        assert isinstance(hyperdrive_read_write_interface_fixture, HyperdriveReadInterface)
         # parent class is not the same type as the child class
-        assert not isinstance(hyperdrive_read_interface, HyperdriveReadWriteInterface)
+        assert not isinstance(hyperdrive_read_interface_fixture, HyperdriveReadWriteInterface)
         # child class can convert to parent class, and then would not be the same type as child class
-        assert not isinstance(hyperdrive_read_write_interface.get_read_interface(), HyperdriveReadWriteInterface)
+        assert not isinstance(
+            hyperdrive_read_write_interface_fixture.get_read_interface(), HyperdriveReadWriteInterface
+        )
         # parent class has read attributes
-        assert hasattr(hyperdrive_read_interface, "read_retry_count")
+        assert hasattr(hyperdrive_read_interface_fixture, "read_retry_count")
         # parent class does not have write attributes
-        assert not hasattr(hyperdrive_read_interface, "write_retry_count")
+        assert not hasattr(hyperdrive_read_interface_fixture, "write_retry_count")
         # child class has write attributes
-        assert hasattr(hyperdrive_read_write_interface, "write_retry_count")
+        assert hasattr(hyperdrive_read_write_interface_fixture, "write_retry_count")
         # child class can convert to parent class, then it would not have write attributes
-        assert not hasattr(hyperdrive_read_write_interface.get_read_interface(), "write_retry_count")
+        assert not hasattr(hyperdrive_read_write_interface_fixture.get_read_interface(), "write_retry_count")
         # write functions
-        assert not hasattr(hyperdrive_read_interface, "async_open_long")
-        assert hasattr(hyperdrive_read_write_interface, "async_open_long")
-        assert not hasattr(hyperdrive_read_write_interface.get_read_interface(), "async_open_long")
+        assert not hasattr(hyperdrive_read_interface_fixture, "async_open_long")
+        assert hasattr(hyperdrive_read_write_interface_fixture, "async_open_long")
+        assert not hasattr(hyperdrive_read_write_interface_fixture.get_read_interface(), "async_open_long")
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/read_interface.py` & `agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/read_interface.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,25 +1,23 @@
 """High-level interface for a Hyperdrive pool."""
 
 from __future__ import annotations
 
 import copy
 import logging
-import os
 from typing import TYPE_CHECKING, cast
 
 from eth_account import Account
 from fixedpointmath import FixedPoint
-from web3.exceptions import BadFunctionCallOutput
+from web3.exceptions import BadFunctionCallOutput, ContractLogicError
 from web3.types import BlockData, BlockIdentifier, Timestamp
 
-from agent0.ethpy import build_eth_config
 from agent0.ethpy.base import initialize_web3_with_http_provider
-from agent0.ethpy.hyperdrive.addresses import fetch_hyperdrive_addresses_from_uri
 from agent0.ethpy.hyperdrive.deploy import DeployedHyperdrivePool
+from agent0.ethpy.hyperdrive.get_expected_hyperdrive_version import get_expected_hyperdrive_version
 from agent0.ethpy.hyperdrive.state import PoolState
 from agent0.ethpy.hyperdrive.transactions import (
     get_hyperdrive_checkpoint,
     get_hyperdrive_checkpoint_exposure,
     get_hyperdrive_pool_config,
     get_hyperdrive_pool_info,
 )
@@ -35,137 +33,153 @@
     _get_variable_rate,
     _get_vault_shares,
 )
 from ._mock_contract import (
     _calc_bonds_given_shares_and_rate,
     _calc_bonds_out_given_shares_in_down,
     _calc_checkpoint_id,
+    _calc_checkpoint_timestamp,
     _calc_close_long,
     _calc_close_short,
     _calc_effective_share_reserves,
-    _calc_fees_out_given_bonds_in,
-    _calc_fees_out_given_shares_in,
-    _calc_fixed_rate,
+    _calc_idle_share_reserves_in_base,
     _calc_max_long,
     _calc_max_short,
+    _calc_max_spot_price,
     _calc_open_long,
     _calc_open_short,
+    _calc_pool_deltas_after_open_long,
+    _calc_pool_deltas_after_open_short,
     _calc_position_duration_in_years,
     _calc_present_value,
     _calc_shares_in_given_bonds_out_down,
     _calc_shares_in_given_bonds_out_up,
     _calc_shares_out_given_bonds_in_down,
+    _calc_solvency,
     _calc_spot_price,
+    _calc_spot_price_after_long,
+    _calc_spot_price_after_short,
+    _calc_spot_rate,
+    _calc_spot_rate_after_long,
+    _calc_targeted_long,
     _calc_time_stretch,
 )
 
 # We expect to have many instance attributes & public methods since this is a large API.
 # pylint: disable=too-many-lines
 # pylint: disable=too-many-instance-attributes
 # pylint: disable=too-many-public-methods
 # pylint: disable=too-many-arguments
+# ruff: noqa: PLR0913
 # We only worry about protected access for anyone outside of this folder.
 # pylint: disable=protected-access
 
 
 if TYPE_CHECKING:
     from eth_account.signers.local import LocalAccount
     from eth_typing import BlockNumber, ChecksumAddress
     from web3 import Web3
 
-    from agent0.ethpy import EthConfig
-
 
 class HyperdriveReadInterface:
     """Read-only end-point API for interfacing with a deployed Hyperdrive pool."""
 
     _deployed_hyperdrive_pool: DeployedHyperdrivePool | None = None
 
     def __init__(
         self,
-        eth_config: EthConfig | None = None,
-        hyperdrive_address: ChecksumAddress | None = None,
+        hyperdrive_address: ChecksumAddress,
+        rpc_uri: str | None = None,
         web3: Web3 | None = None,
         read_retry_count: int | None = None,
+        txn_receipt_timeout: float | None = None,
     ) -> None:
-        """The HyperdriveReadInterface API. This is the primary endpoint for
-        users to simulate transactions on Hyperdrive smart contracts.
+        """Initialize the HyperdriveReadInterface API.
+
+        This is the primary endpoint for users to simulate transactions on Hyperdrive smart contracts.
 
         Arguments
         ---------
-        eth_config: EthConfig, optional
-            Configuration dataclass for the ethereum environment.
-            If given, then it is constructed from environment variables.
-        hyperdrive_address: ChecksumAddress | None, optional
+        hyperdrive_address: ChecksumAddress
             This is a contract address for a deployed hyperdrive.
-            If given, then the `eth_config.artifacts_uri` variable is not used, and this address is used instead.
-            If not given, then we use the erc4626_hyperdrive contract from `eth_config.artifacts_uri`.
+        rpc_uri: str, optional
+            The URI to initialize the web3 provider. Not used if web3 is provided.
         web3: Web3, optional
             web3 provider object, optional
-            If given, a web3 object is constructed using the `eth_config.rpc_uri` as the http provider.
+            If not given, a web3 object is constructed using the `rpc_uri` as the http provider.
         read_retry_count: int | None, optional
             The number of times to retry the read call if it fails. Defaults to 5.
+        txn_receipt_timeout: float | None, optional
+            The timeout for waiting for a transaction receipt in seconds. Defaults to 120.
         """
         # Handle defaults for config and addresses.
-        self.eth_config: EthConfig = build_eth_config() if eth_config is None else eth_config
-        if hyperdrive_address is None:
-            hyperdrive_address = fetch_hyperdrive_addresses_from_uri(
-                os.path.join(self.eth_config.artifacts_uri, "addresses.json")
-            )["erc4626_hyperdrive"]
-
         self.hyperdrive_address = hyperdrive_address
+
         # Setup provider for communicating with the chain.
+        if web3 is None and rpc_uri is None:
+            raise ValueError("Must provide either `web3` or `rpc_uri`")
         if web3 is None:
-            web3 = initialize_web3_with_http_provider(self.eth_config.rpc_uri, reset_provider=False)
+            assert rpc_uri is not None
+            web3 = initialize_web3_with_http_provider(rpc_uri, reset_provider=False)
         self.web3 = web3
 
         # Setup Hyperdrive contract
         self.hyperdrive_contract: IHyperdriveContract = IHyperdriveContract.factory(w3=self.web3)(
             web3.to_checksum_address(self.hyperdrive_address)
         )
 
+        # Check version here to ensure the contract is the correct version
+        hyperdrive_version = self.hyperdrive_contract.functions.version().call()
+        expected_version = get_expected_hyperdrive_version()
+        if hyperdrive_version not in expected_version:
+            raise ValueError(
+                f"Hyperdrive address {self.hyperdrive_address} is version {hyperdrive_version}, "
+                f"does not match one of the expected versions {expected_version}"
+            )
+
         # We get the yield address and contract from the pool config
         self.pool_config = get_hyperdrive_pool_config(self.hyperdrive_contract)
         base_token_contract_address = self.pool_config.base_token
         vault_shares_token_address = self.pool_config.vault_shares_token
 
         # TODO Although the underlying function might not be a MockERC4626Contract,
         # the pypechain contract factory happily accepts any address and exposes
         # all functions from that contract. The code will only break if we try to
         # call a non-existent function on the underlying contract address.
         self.vault_shares_token_contract: MockERC4626Contract = MockERC4626Contract.factory(w3=self.web3)(
             address=web3.to_checksum_address(vault_shares_token_address)
         )
 
-        # Check symbol to see if the underlying vault is steth market
-        vault_shares_token_symbol = self.vault_shares_token_contract.functions.symbol().call()
-        if "stETH" in vault_shares_token_symbol:
-            self.is_steth = True
-            # If we're using steth, we use the yield token as the base token (i.e., steth)
+        # Agent0 doesn't support eth as base, so if it is, we use the yield token as the base, and
+        # calls to trades will use "as_base=False"
+        if base_token_contract_address == "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE":
+            self.base_is_eth = True
+            # If the base token is eth, we use the yield token as the base token (e.g., steth)
             # and pass in "as_base=False" to the contract calls.
             # This simplifies accounting to have only one base token for steth.
             # The alternative of having eth as base token requires keeping track of both
             # tokens in order to support `removeLiquidity`, as we can't remove liquidity into
             # eth.
             base_token_contract_address = vault_shares_token_address
         else:
-            self.is_steth = False
+            self.base_is_eth = False
 
         self.base_token_contract: ERC20MintableContract = ERC20MintableContract.factory(w3=self.web3)(
             web3.to_checksum_address(base_token_contract_address)
         )
 
         # Fill in the initial state cache.
         self._current_pool_state = self.get_hyperdrive_state()
         self.last_state_block_number = copy.copy(self._current_pool_state.block_number)
 
         # Set the retry count for contract calls using the interface when previewing/transacting
         # TODO these parameters are currently only used for trades against hyperdrive
         # and uses defaults for other smart_contract_read functions, e.g., get_pool_info.
         self.read_retry_count = read_retry_count
+        self.txn_receipt_timeout = txn_receipt_timeout
         self._deployed_hyperdrive_pool = self._create_deployed_hyperdrive_pool()
 
     def _create_deployed_hyperdrive_pool(self) -> DeployedHyperdrivePool:
         return DeployedHyperdrivePool(
             web3=self.web3,
             deploy_account=Account().from_key("0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"),
             hyperdrive_contract=self.hyperdrive_contract,
@@ -293,14 +307,20 @@
         try:
             variable_rate = self.get_variable_rate(block_number)
         except BadFunctionCallOutput:
             logging.warning(
                 "Underlying yield contract has no `getRate` function, setting `state.variable_rate` as `None`."
             )
             variable_rate = None
+        # Some contracts throw a logic error
+        except ContractLogicError:
+            logging.warning(
+                "Underlying yield contract reverted `getRate` function, setting `state.variable_rate` as `None`."
+            )
+            variable_rate = None
 
         vault_shares = self.get_vault_shares(block_number)
         total_supply_withdrawal_shares = self.get_total_supply_withdrawal_shares(block_number)
         hyperdrive_base_balance = self.get_hyperdrive_base_balance(block_number)
         hyperdrive_eth_balance = self.get_hyperdrive_eth_balance()
         gov_fees_accrued = self.get_gov_fees_accrued(block_number)
         return PoolState(
@@ -365,32 +385,31 @@
         FixedPoint
             The quantity of vault shares for the yield source at the provided block.
         """
         if block_number is None:
             block_number = self.get_block_number(self.get_current_block())
         return _get_vault_shares(self.vault_shares_token_contract, self.hyperdrive_contract, block_number)
 
-    def get_idle_shares(self, block_number: BlockNumber | None) -> FixedPoint:
+    def get_idle_shares(self, pool_state: PoolState | None) -> FixedPoint:
         """Get the balance of idle shares that the Hyperdrive pool has.
 
         Arguments
         ---------
-        block_number: BlockNumber, optional
-            The number for any minted block.
-            Defaults to the current block number.
+        pool_state: PoolState | None, optional
+            The state of the pool, which includes block details, pool config, and pool info.
+            If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
             The quantity of vault shares for the yield source at the provided block.
         """
-        if block_number is None:
-            block_number = self.get_block_number(self.get_current_block())
-        pool_state = self.current_pool_state
-        long_exposure_shares = self.current_pool_state.pool_info.long_exposure / pool_state.pool_info.vault_share_price
+        if pool_state is None:
+            pool_state = self.current_pool_state
+        long_exposure_shares = pool_state.pool_info.long_exposure / pool_state.pool_info.vault_share_price
         idle_shares = (
             pool_state.pool_info.share_reserves - long_exposure_shares - pool_state.pool_config.minimum_share_reserves
         )
         return idle_shares
 
     def get_variable_rate(self, block_number: BlockNumber | None = None) -> FixedPoint:
         """Use an RPC to get the yield source variable rate.
@@ -410,32 +429,28 @@
             The variable rate for the yield source at the provided block.
         """
         if block_number is None:
             block_number = self.get_block_number(self.get_current_block())
         return _get_variable_rate(self.vault_shares_token_contract, block_number)
 
     def get_standardized_variable_rate(self, time_range: int = 604800) -> FixedPoint:
-        """Computes a standardized variable rate using vault share prices from checkpoints
-        in the last `time_period` seconds.
+        """Get a standardized variable rate using vault share prices from checkpoints in the last `time_range` seconds.
 
-        .. note:: This function will throw an error if the pool was deployed within the last
-        `time_period` seconds.
+        .. note:: This function will throw an error if the pool was deployed within the last `time_range` seconds.
 
         Arguments
         ---------
         time_range: int
-            The time range (in seconds) to use to calculate the variable rate
-            to look for checkpoints.
+            The time range (in seconds) to use to calculate the variable rate to look for checkpoints.
 
         Returns
         -------
         FixedPoint
             The standardized variable rate.
         """
-
         # Get the vault share price of the checkpoint in the past `time_range`
         current_block_time = self.get_block_timestamp(self.current_pool_state.block)
         start_checkpoint_id = self.calc_checkpoint_id(block_timestamp=Timestamp(current_block_time - time_range))
         start_vault_share_price = self.get_checkpoint(start_checkpoint_id).vault_share_price
 
         # Vault share price is 0 if checkpoint doesn't exist
         # This happens if the pool was deployed within the past `time_range`
@@ -509,37 +524,37 @@
         -------
         FixedPoint
             The result of hyperdrive_contract.functions.getUncollectedGovernanceFees
         """
         return _get_gov_fees_accrued(self.hyperdrive_contract, block_number)
 
     def calc_position_duration_in_years(self, pool_state: PoolState | None = None) -> FixedPoint:
-        """Returns the pool config position duration as a fraction of a year.
+        """Return the pool config position duration as a fraction of a year.
 
         This "annualized" time value is used in some calculations, such as the Fixed APR.
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
-        pool_state: PoolState, optional
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
             The annualized position duration
         """
         if pool_state is None:
             pool_state = self.current_pool_state
         return _calc_position_duration_in_years(pool_state)
 
     def calc_time_stretch(self, target_rate: FixedPoint, target_position_duration: FixedPoint) -> FixedPoint:
-        """Returns the time stretch parameter given a target fixed rate and position duration.
+        """Return the time stretch parameter given a target fixed rate and position duration.
 
         Arguments
         ---------
         target_rate: FixedPoint
             The fixed rate that the Hyperdrive pool will be initialized with.
         target_position_duration: FixedPoint
             The position duration that the Hyperdrive pool will be initialized with.
@@ -547,20 +562,40 @@
         Returns
         -------
         FixedPoint
             The time stretch constant.
         """
         return _calc_time_stretch(target_rate, target_position_duration)
 
+    def calc_checkpoint_timestamp(self, time: int | Timestamp, pool_state: PoolState | None = None) -> Timestamp:
+        """Converts a timestamp to the checkpoint timestamp that it corresponds to.
+
+        Arguments
+        ---------
+        time: int | Timestamp
+            Any timestamp (in seconds) before or at the present.
+        pool_state: PoolState | None, optional
+            The state of the pool, which includes block details, pool config, and pool info.
+            If not given, use the current pool state.
+
+        Returns
+        -------
+        Timestamp
+            The checkpoint timestamp.
+        """
+        if pool_state is None:
+            pool_state = self.current_pool_state
+        return _calc_checkpoint_timestamp(pool_state, int(time))
+
     def calc_checkpoint_id(
         self, checkpoint_duration: int | None = None, block_timestamp: Timestamp | None = None
     ) -> Timestamp:
         """Calculate the Checkpoint ID for a given timestamp.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
         checkpoint_duration: int, optional
             The time, in seconds, between checkpoints.
             Defaults to the current pool's checkpoint duration.
@@ -577,468 +612,600 @@
         """
         if checkpoint_duration is None:
             checkpoint_duration = self.pool_config.checkpoint_duration
         if block_timestamp is None:
             block_timestamp = self.current_pool_state.block_time
         return _calc_checkpoint_id(checkpoint_duration, block_timestamp)
 
-    def calc_fixed_rate(self, pool_state: PoolState | None = None) -> FixedPoint:
-        r"""Calculate the fixed rate for a given pool state.
+    def calc_spot_rate(self, pool_state: PoolState | None = None) -> FixedPoint:
+        r"""Calculate the spot fixed rate for a given pool state.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs. The simulation follows the formula:
 
         .. math::
             r = ((1 / p) - 1) / t = (1 - p) / (p * t)
 
         Arguments
         ---------
-        pool_state: PoolState, optional
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
             The fixed rate apr for the Hyperdrive pool state.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_fixed_rate(pool_state)
+        return _calc_spot_rate(pool_state)
 
     def calc_spot_price(self, pool_state: PoolState | None = None) -> FixedPoint:
         """Calculate the spot price for a given Hyperdrive pool.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
-        pool_state: PoolState, optional
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
             The spot price for the Hyperdrive pool state.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
         return _calc_spot_price(pool_state)
 
+    def calc_max_spot_price(self, pool_state: PoolState | None = None) -> FixedPoint:
+        """Get the pool's max spot price.
+
+        Arguments
+        ---------
+        pool_state: PoolState | None, optional
+            The state of the pool, which includes block details, pool config, and pool info.
+            If not given, use the current pool state.
+
+        Returns
+        -------
+        FixedPoint
+            The pool's maximum achievable spot price.
+        """
+        if pool_state is None:
+            pool_state = self.current_pool_state
+        return _calc_max_spot_price(pool_state)
+
     def calc_effective_share_reserves(self, pool_state: PoolState | None = None) -> FixedPoint:
         """Calculate the adjusted share reserves for a given Hyperdrive pool.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
-        pool_state: PoolState, optional
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
             The effective (aka zeta-adjusted) share reserves.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
         return _calc_effective_share_reserves(pool_state)
 
+    def calc_idle_share_reserves_in_base(self, pool_state: PoolState | None = None) -> FixedPoint:
+        """Calculates the idle share reserves in base of the pool.
+
+        Arguments
+        ---------
+        pool_state: PoolState | None, optional
+            The state of the pool, which includes block details, pool config, and pool info.
+            If not given, use the current pool state.
+
+        Returns
+        -------
+        FixedPoint
+            The pool's idle share reserves in base.
+        """
+        if pool_state is None:
+            pool_state = self.current_pool_state
+        return _calc_idle_share_reserves_in_base(pool_state)
+
+    def calc_bonds_given_shares_and_rate(
+        self, target_rate: FixedPoint, target_shares: FixedPoint | None = None, pool_state: PoolState | None = None
+    ) -> FixedPoint:
+        r"""Return the bond reserves for the market share reserves and a given fixed rate.
+
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
+        to simulate the contract outputs. The calculation is based on the formula:
+
+        .. math::
+            \mu * (z - \zeta) * (1 + \text{apr} * t)^{1 / \tau}
+
+        .. todo::
+            This function name matches the Rust implementation, but is not preferred because
+            "given_shares_and_rate" is in the wrong order (should be rate_and_shares) according to arguments
+            and really "given_*" could be removed because it can be inferred from arguments.
+            Need to fix it from the bottom up.
+
+        Arguments
+        ---------
+        target_rate: FixedPoint
+            The target apr for which to calculate the bond reserves given the pools current share reserves.
+        target_shares: FixedPoint, optional
+            The target share reserves for the pool
+        pool_state: PoolState | None, optional
+            The state of the pool, which includes block details, pool config, and pool info.
+            If not given, use the current pool state.
+
+        Returns
+        -------
+        FixedPoint
+            The output bonds.
+        """
+        if pool_state is None:
+            pool_state = self.current_pool_state
+        return _calc_bonds_given_shares_and_rate(pool_state, target_rate, target_shares)
+
     def calc_open_long(self, base_amount: FixedPoint, pool_state: PoolState | None = None) -> FixedPoint:
         """Calculate the long amount that will be opened for a given base amount after fees.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
         base_amount: FixedPoint
             The amount to spend, in base.
-        pool_state: PoolState, optional
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
             The amount of bonds purchased.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
         return _calc_open_long(pool_state, base_amount)
 
-    def calc_close_long(
-        self, bond_amount: FixedPoint, maturity_time: int, pool_state: PoolState | None = None
+    def calc_pool_deltas_after_open_long(
+        self, base_amount: FixedPoint, pool_state: PoolState | None = None
     ) -> FixedPoint:
-        """Calculates the amount of shares that will be returned after fees for closing a long.
+        """Calculate the bond deltas to be applied to the pool after opening a long.
 
         Arguments
         ---------
-        bond_amount: FixedPoint
-            The amount of bonds to sell.
-        maturity_time: int
-            The maturity time of the bond.
-        pool_state: PoolState, optional
+        base_amount: FixedPoint
+            The amount of base used to open a long.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The amount of shares returned.
+            The amount of bonds to remove from the pool reserves.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_close_long(pool_state, bond_amount, maturity_time)
+        return _calc_pool_deltas_after_open_long(pool_state, base_amount)
 
-    def calc_open_short(self, bond_amount: FixedPoint, pool_state: PoolState | None = None) -> FixedPoint:
-        """Calculate the amount of base the trader will need to deposit for a short of a given size, after fees.
+    def calc_spot_price_after_long(
+        self, base_amount: FixedPoint, bond_amount: FixedPoint | None = None, pool_state: PoolState | None = None
+    ) -> FixedPoint:
+        """Calculate the spot price for a given Hyperdrive pool after a long is opened for `base_amount`.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
-        bond_amount: FixedPoint
-            The amount to of bonds to short.
-        pool_state: PoolState, optional
+        base_amount: FixedPoint
+            The amount of base provided for the long.
+        bond_amount: FixedPoint | None, optional
+            The amount of bonds that would be purchased by the long.
+            The default is to use whatever is returned by `calc_open_long(base_amount)`.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The amount of base required to short the bonds (aka the "max loss").
+            The spot price for the Hyperdrive pool state.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_open_short(
-            pool_state, bond_amount, _calc_spot_price(pool_state), pool_state.pool_info.vault_share_price
-        )
+        return _calc_spot_price_after_long(pool_state, base_amount, bond_amount)
 
-    def calc_close_short(
-        self,
-        bond_amount: FixedPoint,
-        open_vault_share_price: FixedPoint,
-        close_vault_share_price: FixedPoint,
-        maturity_time: int,
-        pool_state: PoolState | None = None,
+    def calc_spot_rate_after_long(
+        self, base_amount: FixedPoint, bond_amount: FixedPoint | None = None, pool_state: PoolState | None = None
     ) -> FixedPoint:
-        """Gets the amount of shares the trader will receive from closing a short.
+        """Calculate the spot rate for a given Hyperdrive pool after a long is opened for `base_amount`.
+
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
+        to simulate the contract outputs.
 
         Arguments
         ---------
-        bond_amount: FixedPoint
-            The amount to of bonds provided.
-        open_vault_share_price: FixedPoint
-            The checkpoint share price when the short was opened.
-        close_vault_share_price: FixedPoint
-            The share price when the short was closed.
-            If the short isn't mature, this is the current share price.
-            If the short is mature, this is the share price of the maturity checkpoint.
-        maturity_time: int
-            The maturity time of the short.
-        pool_state: PoolState, optional
+        base_amount: FixedPoint
+            The amount of base provided for the long.
+        bond_amount: FixedPoint | None, optional
+            The amount of bonds that would be purchased by the long.
+            The default is to use whatever is returned by `calc_open_long(base_amount)`.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The amount of shares the trader will receive for closing the short.
+            The spot rate for the Hyperdrive pool state.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_close_short(
-            pool_state, bond_amount, open_vault_share_price, close_vault_share_price, maturity_time
-        )
+        return _calc_spot_rate_after_long(pool_state, base_amount, bond_amount)
 
-    def calc_bonds_out_given_shares_in_down(
-        self, amount_in: FixedPoint, pool_state: PoolState | None = None
-    ) -> FixedPoint:
-        """Calculates the amount of bonds a user will receive from the pool by
-        providing a specified amount of shares. We underestimate the amount of
-        bonds. The amount returned is before fees are applied.
+    def calc_max_long(self, budget: FixedPoint, pool_state: PoolState | None = None) -> FixedPoint:
+        """Calculate the maximum allowable long for the given Hyperdrive pool and agent budget.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
-        amount_in: FixedPoint
-            The amount of shares going into the pool.
-        pool_state: PoolState, optional
+        budget: FixedPoint
+            How much money the agent is able to spend, in base.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The amount of bonds out.
+            The maximum long, in units of base.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_bonds_out_given_shares_in_down(pool_state, amount_in)
+        return _calc_max_long(pool_state, budget)
 
-    def calc_shares_in_given_bonds_out_up(
-        self, amount_in: FixedPoint, pool_state: PoolState | None = None
+    def calc_close_long(
+        self, bond_amount: FixedPoint, maturity_time: int, pool_state: PoolState | None = None
     ) -> FixedPoint:
-        """Calculates the amount of shares a user must provide the pool to receive
-        a specified amount of bonds. We overestimate the amount of shares in.
-        The amount returned is before fees are applied.
-
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
-        to simulate the contract outputs.
+        """Calculate the amount of shares that will be returned after fees for closing a long.
 
         Arguments
         ---------
-        amount_in: FixedPoint
-            The amount of bonds to target.
-        pool_state: PoolState, optional
+        bond_amount: FixedPoint
+            The amount of bonds to sell.
+        maturity_time: int
+            The maturity time of the bond.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The amount of shares in to reach the target.
+            The amount of shares returned.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_shares_in_given_bonds_out_up(pool_state, amount_in)
+        return _calc_close_long(pool_state, bond_amount, maturity_time, int(pool_state.block_time))
 
-    def calc_shares_in_given_bonds_out_down(
-        self, amount_in: FixedPoint, pool_state: PoolState | None = None
+    def calc_targeted_long(
+        self,
+        budget: FixedPoint,
+        target_rate: FixedPoint,
+        max_iterations: int | None = None,
+        allowable_error: FixedPoint | None = None,
+        pool_state: PoolState | None = None,
     ) -> FixedPoint:
-        """Calculates the amount of shares a user must provide the pool to receive
-        a specified amount of bonds. We underestimate the amount of shares in.
-        The amount returned is before fees are applied.
+        """Calculate the amount of bonds that can be purchased for the given budget.
+
+        Arguments
+        ---------
+        budget: FixedPont
+            The account budget in base for making a long.
+        target_rate: FixedPoint
+            The target fixed rate.
+        max_iterations: int | None, optional
+            The number of iterations to use for the Newtonian method.
+            Defaults to 7.
+        allowable_error: FixedPoint | None, optional
+            The amount of error supported for reaching the target rate.
+            Defaults to 1e-4.
+        pool_state: PoolState | None, optional
+            The state of the pool, which includes block details, pool config, and pool info.
+            If not given, use the current pool state.
+
+        Returns
+        -------
+        FixedPoint
+            The amount of shares returned.
+        """
+        if pool_state is None:
+            pool_state = self.current_pool_state
+        return _calc_targeted_long(pool_state, budget, target_rate, max_iterations, allowable_error)
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+    def calc_open_short(self, bond_amount: FixedPoint, pool_state: PoolState | None = None) -> FixedPoint:
+        """Calculate the amount of base the trader will need to deposit for a short of a given size, after fees.
+
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
-        amount_in: FixedPoint
-            The amount of bonds to target.
-        pool_state: PoolState, optional
+        bond_amount: FixedPoint
+            The amount to of bonds to short.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
-            If not provided, use the current pool state.
+            If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The amount of shares in to reach the target.
+            The amount of base required to short the bonds (aka the "max loss").
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_shares_in_given_bonds_out_down(pool_state, amount_in)
+        return _calc_open_short(pool_state, bond_amount, pool_state.pool_info.vault_share_price)
 
-    def calc_shares_out_given_bonds_in_down(
-        self, amount_in: FixedPoint, pool_state: PoolState | None = None
+    def calc_pool_deltas_after_open_short(
+        self, bond_amount: FixedPoint, pool_state: PoolState | None = None
     ) -> FixedPoint:
-        """Calculates the amount of shares a user will receive from the pool by
-        providing a specified amount of bonds. We underestimate the amount of
-        shares out. The amount returned is before fees are applied.
+        """Calculate the amount of shares the pool will add after opening a short.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        Arguments
+        ---------
+        bond_amount: FixedPoint
+            The amount to of bonds to short.
+        pool_state: PoolState | None, optional
+            The state of the pool, which includes block details, pool config, and pool info.
+            If not given, use the current pool state.
+
+        Returns
+        -------
+        FixedPoint
+            The amount of base to add to the pool share reserves.
+        """
+        if pool_state is None:
+            pool_state = self.current_pool_state
+        return _calc_pool_deltas_after_open_short(pool_state, bond_amount)
+
+    def calc_spot_price_after_short(
+        self, bond_amount: FixedPoint, base_amount: FixedPoint | None = None, pool_state: PoolState | None = None
+    ) -> FixedPoint:
+        """Calculate the spot price for a given Hyperdrive pool after a short is opened for `base_amount`.
+
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
-        amount_in: FixedPoint
-            The amount of bonds in.
-        pool_state: PoolState, optional
+        bond_amount: FixedPoint
+            The amount that woud be used to open a short.
+        base_amount: FixedPoint | None, optional
+            The amount of base provided for the short.
+            The default is to use whatever is returned by `calc_open_short(bond_amount)`.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
-            If not provided, use the current pool state.
+            If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The amount of shares out.
+            The spot price for the Hyperdrive pool state.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_shares_out_given_bonds_in_down(pool_state, amount_in)
-
-    def calc_fees_out_given_bonds_in(
-        self, bonds_in: FixedPoint, maturity_time: int | None = None, pool_state: PoolState | None = None
-    ) -> tuple[FixedPoint, FixedPoint, FixedPoint]:
-        r"""Calculates the fees that would be deducted for an amount of bonds entering the pool.
+        return _calc_spot_price_after_short(pool_state, bond_amount, base_amount)
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
-        to simulate the contract outputs. It implements the formula:
+    def calc_max_short(self, budget: FixedPoint, pool_state: PoolState | None = None) -> FixedPoint:
+        """Calculate the maximum allowable short for the given Hyperdrive pool and agent budget.
 
-        .. math::
-            \begin{align*}
-                &\text{curve_fee} = \frac{(1 - p) * \phi_{\text{curve}} * d_y * t}{c}
-                &\text{gov_fee} = \text{curve_fee} * \phi_{\text{gov}}
-                &\text{flat_fee} = \frac{d_y * (1 - t) * \phi_{\text{flat}}}{c}
-            \end{align*}
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
+        to simulate the contract outputs.
 
         Arguments
         ---------
-        bonds_in: FixedPoint
-            The amount of bonds being added to the pool.
-        maturity_time: int, optional
-            The maturity timestamp of the open position, in epoch seconds.
-        pool_state: PoolState, optional
+        budget: FixedPoint
+            How much money the agent is able to spend, in base.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
-        tuple[FixedPoint, FixedPoint, FixedPoint]
-            curve_fee: FixedPoint
-                Curve fee, in shares.
-            flat_fee: FixedPoint
-                Flat fee, in shares.
-            gov_fee: FixedPoint
-                Governance fee, in shares.
+        FixedPoint
+            The maximum short, in units of bonds.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_fees_out_given_bonds_in(pool_state, bonds_in, maturity_time)
+        return _calc_max_short(pool_state, budget)
 
-    def calc_fees_out_given_shares_in(
-        self, shares_in: FixedPoint, maturity_time: int | None = None, pool_state: PoolState | None = None
-    ) -> tuple[FixedPoint, FixedPoint, FixedPoint]:
-        r"""Calculates the fees that go to the LPs and governance.
+    def calc_close_short(
+        self,
+        bond_amount: FixedPoint,
+        open_vault_share_price: FixedPoint,
+        close_vault_share_price: FixedPoint,
+        maturity_time: int,
+        pool_state: PoolState | None = None,
+    ) -> FixedPoint:
+        """Get the amount of shares the trader will receive from closing a short.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
-        to simulate the contract outputs. It implements the formula:
+        Arguments
+        ---------
+        bond_amount: FixedPoint
+            The amount to of bonds provided.
+        open_vault_share_price: FixedPoint
+            The checkpoint share price when the short was opened.
+        close_vault_share_price: FixedPoint
+            The share price when the short was closed.
+            If the short isn't mature, this is the current share price.
+            If the short is mature, this is the share price of the maturity checkpoint.
+        maturity_time: int
+            The maturity time of the short.
+        pool_state: PoolState | None, optional
+            The state of the pool, which includes block details, pool config, and pool info.
+            If not given, use the current pool state.
 
-        .. math::
-            \begin{align*}
-                &\text{curve_fee} = ((1 / p) - 1) * \phi_{\text{curve}} * c * dz
-                &\text{gov_fee} = \text{shares} * \phi_{\text{gov}}
-                &\text{flat_fee} = \frac{d_y * (1 - t) * \phi_{\text{flat}}}{c}
-            \end{align*}
+        Returns
+        -------
+        FixedPoint
+            The amount of shares the trader will receive for closing the short.
+        """
+        if pool_state is None:
+            pool_state = self.current_pool_state
+        return _calc_close_short(
+            pool_state, bond_amount, open_vault_share_price, close_vault_share_price, maturity_time
+        )
+
+    def calc_present_value(self, pool_state: PoolState | None = None) -> FixedPoint:
+        """Calculate the present value of LPs capital in the pool.
 
         Arguments
         ---------
-        shares_in: FixedPoint
-            The amount of shares being added to the pool.
-        maturity_time: int, optional
-            The maturity timestamp of the open position, in epoch seconds.
-        pool_state: PoolState, optional
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
-        tuple[FixedPoint, FixedPoint, FixedPoint]
-            curve_fee: FixedPoint
-                Curve fee, in shares.
-            flat_fee: FixedPoint
-                Flat fee, in shares.
-            gov_fee: FixedPoint
-                Governance fee, in shares.
+        FixedPoint
+            The present value of all LP capital in the pool.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_fees_out_given_shares_in(pool_state, shares_in, maturity_time)
+        return _calc_present_value(pool_state, pool_state.block_time)
 
-    def calc_bonds_given_shares_and_rate(
-        self, target_rate: FixedPoint, target_shares: FixedPoint | None = None, pool_state: PoolState | None = None
-    ) -> FixedPoint:
-        r"""Returns the bond reserves for the market share reserves
-        and a given fixed rate.
+    def calc_solvency(self, pool_state: PoolState | None = None) -> FixedPoint:
+        """Calculate the pool's solvency.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
-        to simulate the contract outputs. The calculation is based on the formula:
+        Arguments
+        ---------
+        pool_state: PoolState | None, optional
+            The state of the pool, which includes block details, pool config, and pool info.
+            If not given, use the current pool state.
 
-        .. math::
-            \mu * (z - \zeta) * (1 + \text{apr} * t)^{1 / \tau}
+        Returns
+        -------
+        FixedPoint
+            solvency = share_reserves - long_exposure / vault_share_price - minimum_share_reserves
+        """
+        if pool_state is None:
+            pool_state = self.current_pool_state
+        return _calc_solvency(pool_state)
 
-        .. todo::
-            This function name matches the Rust implementation, but is not preferred because
-            "given_shares_and_rate" is in the wrong order (should be rate_and_shares) according to arguments
-            and really "given_*" could be removed because it can be inferred from arguments.
-            Need to fix it from the bottom up.
+    def calc_bonds_out_given_shares_in_down(
+        self, amount_in: FixedPoint, pool_state: PoolState | None = None
+    ) -> FixedPoint:
+        """Calculate the amount of bonds a user will receive from the pool by providing a specified amount of shares.
+
+        We underestimate the amount of bonds. The amount returned is before fees are applied.
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
+        to simulate the contract outputs.
 
         Arguments
         ---------
-        target_rate: FixedPoint
-            The target apr for which to calculate the bond reserves given the pools current share reserves.
-        target_shares: FixedPoint, optional
-            The target share reserves for the pool
-        pool_state: PoolState, optional
+        amount_in: FixedPoint
+            The amount of shares going into the pool.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The output bonds.
+            The amount of bonds out.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_bonds_given_shares_and_rate(pool_state, target_rate, target_shares)
+        return _calc_bonds_out_given_shares_in_down(pool_state, amount_in)
 
-    def calc_max_long(self, budget: FixedPoint, pool_state: PoolState | None = None) -> FixedPoint:
-        """Calculate the maximum allowable long for the given Hyperdrive pool and agent budget.
+    def calc_shares_in_given_bonds_out_up(
+        self, amount_in: FixedPoint, pool_state: PoolState | None = None
+    ) -> FixedPoint:
+        """Calculate the amount of shares a user must provide the pool to receive a specified amount of bonds.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        We overestimate the amount of shares in. The amount returned is before fees are applied.
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
-        budget: FixedPoint
-            How much money the agent is able to spend, in base.
-        pool_state: PoolState, optional
+        amount_in: FixedPoint
+            The amount of bonds to target.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
             If not given, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The maximum long, in units of base.
+            The amount of shares in to reach the target.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_max_long(pool_state, budget)
+        return _calc_shares_in_given_bonds_out_up(pool_state, amount_in)
 
-    def calc_max_short(self, budget: FixedPoint, pool_state: PoolState | None = None) -> FixedPoint:
-        """Calculate the maximum allowable short for the given Hyperdrive pool and agent budget.
+    def calc_shares_in_given_bonds_out_down(
+        self, amount_in: FixedPoint, pool_state: PoolState | None = None
+    ) -> FixedPoint:
+        """Calculate the amount of shares a user must provide the pool to receive a specified amount of bonds.
 
-        The function does not perform contract calls, but instead relies on the Hyperdrive-rust sdk
+        We underestimate the amount of shares in. The amount returned is before fees are applied.
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
         to simulate the contract outputs.
 
         Arguments
         ---------
-        budget: FixedPoint
-            How much money the agent is able to spend, in base.
-        pool_state: PoolState, optional
+        amount_in: FixedPoint
+            The amount of bonds to target.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
-            If not given, use the current pool state.
+            If not provided, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The maximum short, in units of bonds.
+            The amount of shares in to reach the target.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_max_short(pool_state, budget)
+        return _calc_shares_in_given_bonds_out_down(pool_state, amount_in)
 
-    def calc_present_value(self, pool_state: PoolState | None = None) -> FixedPoint:
-        """Calculates the present value of LPs capital in the pool.
+    def calc_shares_out_given_bonds_in_down(
+        self, amount_in: FixedPoint, pool_state: PoolState | None = None
+    ) -> FixedPoint:
+        """Calculate the amount of shares a user will receive from the pool by providing a specified amount of bonds.
+
+        We underestimate the amount of shares out. The amount returned is before fees are applied.
+        The function does not perform contract calls, but instead relies on the Hyperdrive-rust api
+        to simulate the contract outputs.
 
         Arguments
         ---------
-        pool_state: PoolState, optional
+        amount_in: FixedPoint
+            The amount of bonds in.
+        pool_state: PoolState | None, optional
             The state of the pool, which includes block details, pool config, and pool info.
-            If not given, use the current pool state.
+            If not provided, use the current pool state.
 
         Returns
         -------
         FixedPoint
-            The present value of all LP capital in the pool.
+            The amount of shares out.
         """
         if pool_state is None:
             pool_state = self.current_pool_state
-        return _calc_present_value(pool_state, pool_state.block_time)
+        return _calc_shares_out_given_bonds_in_down(pool_state, amount_in)
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/read_write_interface.py` & `agent0-0.20.0/src/agent0/core/hyperdrive/agent/hyperdrive_actions.py`

 * *Files 20% similar despite different names*

```diff
@@ -1,403 +1,374 @@
-"""High-level interface for writing to Hyperdrive smart contracts."""
+"""Hyperdrive AMM action specification."""
 
 from __future__ import annotations
 
-from typing import TYPE_CHECKING
+from dataclasses import dataclass
+from enum import Enum
 
-from ._contract_calls import (
-    _async_add_liquidity,
-    _async_close_long,
-    _async_close_short,
-    _async_open_long,
-    _async_open_short,
-    _async_redeem_withdraw_shares,
-    _async_remove_liquidity,
-    _create_checkpoint,
-    _set_variable_rate,
-)
-from .read_interface import HyperdriveReadInterface
+from fixedpointmath import FixedPoint
 
-# We have no control over the number of arguments since it is specified by the smart contracts
+from agent0.core.base import BaseMarketAction, MarketType, Trade
+
+
+class HyperdriveActionType(Enum):
+    r"""The descriptor of an action in a market."""
+
+    INITIALIZE_MARKET = "initialize_market"
+
+    OPEN_LONG = "open_long"
+    CLOSE_LONG = "close_long"
+
+    OPEN_SHORT = "open_short"
+    CLOSE_SHORT = "close_short"
+
+    ADD_LIQUIDITY = "add_liquidity"
+    REMOVE_LIQUIDITY = "remove_liquidity"
+    REDEEM_WITHDRAW_SHARE = "redeem_withdraw_share"
+
+
+# TODO: consolidate these arguments (pass in just the config?)
+# these functions have lots of arguments
 # pylint: disable=too-many-arguments
 # ruff: noqa: PLR0913
-# We only worry about protected access for anyone outside of this folder.
-# pylint: disable=protected-access
 
 
-if TYPE_CHECKING:
-    from eth_account.signers.local import LocalAccount
-    from eth_typing import BlockNumber, ChecksumAddress
-    from fixedpointmath import FixedPoint
-    from web3 import Web3
-    from web3.types import Nonce
-
-    from agent0.ethpy import EthConfig
-    from agent0.ethpy.hyperdrive.receipt_breakdown import ReceiptBreakdown
-
-
-class HyperdriveReadWriteInterface(HyperdriveReadInterface):
-    """Read-write end-point API for interfacing with a deployed Hyperdrive pool."""
-
-    def __init__(
-        self,
-        eth_config: EthConfig | None = None,
-        hyperdrive_address: ChecksumAddress | None = None,
-        web3: Web3 | None = None,
-        read_retry_count: int | None = None,
-        write_retry_count: int | None = None,
-    ) -> None:
-        """Initialize the primary endpoint for users to execute transactions on Hyperdrive smart contracts.
-
-        Arguments
-        ---------
-        eth_config: EthConfig, optional
-            Configuration dataclass for the ethereum environment.
-            If given, then it is constructed from environment variables.
-        hyperdrive_address: ChecksumAddress | None, optional
-            This is a contract address for a deployed hyperdrive.
-            If given, then the `eth_config.artifacts_uri` variable is not used, and this address is used instead.
-            If not given, then we use the erc4626_hyperdrive contract from `eth_config.artifacts_uri`.
-        web3: Web3, optional
-            web3 provider object, optional
-            If given, a web3 object is constructed using the `eth_config.rpc_uri` as the http provider.
-        read_retry_count: int | None, optional
-            The number of times to retry the read call if it fails. Defaults to 5.
-        write_retry_count: int | None, optional
-            The number of times to retry the transact call if it fails. Defaults to no retries.
-        """
-        super().__init__(eth_config, hyperdrive_address, web3, read_retry_count)
-        self.write_retry_count = write_retry_count
-
-    def get_read_interface(self) -> HyperdriveReadInterface:
-        """Return the current instance as an instance of the parent (HyperdriveReadInterface) class.
-
-        Returns
-        -------
-        HyperdriveReadInterface
-            This instantiated object, but as a ReadInterface.
-        """
-        return HyperdriveReadInterface(self.eth_config, self.hyperdrive_address, self.web3, self.read_retry_count)
-
-    def create_checkpoint(
-        self, sender: LocalAccount, block_number: BlockNumber | None = None, checkpoint_time: int | None = None
-    ) -> ReceiptBreakdown:
-        """Create a Hyperdrive checkpoint.
-
-        Arguments
-        ---------
-        sender: LocalAccount
-            The sender account that is executing and signing the trade transaction.
-        block_number: BlockNumber, optional
-            The number for any minted block.
-            Defaults to the current block number.
-        checkpoint_time: int, optional
-            The checkpoint time to use. Defaults to the corresponding checkpoint for the provided block_number
-
-        Returns
-        -------
-        ReceiptBreakdown
-            A dataclass containing the output event of the contract call.
-        """
-        return _create_checkpoint(self, sender, block_number, checkpoint_time)
-
-    def set_variable_rate(self, sender: LocalAccount, new_rate: FixedPoint) -> None:
-        """Set the variable rate for the yield source.
-
-        .. note:: This function assumes there's an underlying `setRate` function in the contract.
-        This call will fail if the deployed yield contract doesn't have a `setRate` function.
-
-        Arguments
-        ---------
-        sender: LocalAccount
-            The sender account that is executing and signing the trade transaction.
-        new_rate: FixedPoint
-            The new variable rate for the yield source.
-        """
-        _set_variable_rate(self, sender, new_rate)
-
-    async def async_open_long(
-        self,
-        agent: LocalAccount,
-        trade_amount: FixedPoint,
-        slippage_tolerance: FixedPoint | None = None,
-        gas_limit: int | None = None,
-        nonce: Nonce | None = None,
-    ) -> ReceiptBreakdown:
-        """Contract call to open a long position.
-
-        Arguments
-        ---------
-        agent: LocalAccount
-            The account for the agent that is executing and signing the trade transaction.
-        trade_amount: FixedPoint
-            The size of the position, in base.
-        slippage_tolerance: FixedPoint, optional
-            Amount of slippage allowed from the trade.
-            If given, then the trade will not execute unless the slippage is below this value.
-            If not given, then execute the trade regardless of the slippage.
-        gas_limit: int | None, optional
-            The maximum amount of gas used by the transaction.
-            Defaults to `eth_estimateGas` RPC output.
-        nonce: Nonce, optional
-            An optional explicit nonce to set with the transaction.
-
-        Returns
-        -------
-        ReceiptBreakdown
-            A dataclass containing the maturity time and the absolute values for token quantities changed.
-        """
-        return await _async_open_long(
-            self, agent, trade_amount, slippage_tolerance, gas_limit, nonce, self.eth_config.preview_before_trade
-        )
-
-    # We do not control the number of arguments; this is set by hyperdrive-rs
-    # pylint: disable=too-many-arguments
-    async def async_close_long(
-        self,
-        agent: LocalAccount,
-        trade_amount: FixedPoint,
-        maturity_time: int,
-        slippage_tolerance: FixedPoint | None = None,
-        gas_limit: int | None = None,
-        nonce: Nonce | None = None,
-    ) -> ReceiptBreakdown:
-        """Contract call to close a long position.
-
-        Arguments
-        ---------
-        agent: LocalAccount
-            The account for the agent that is executing and signing the trade transaction.
-        trade_amount: FixedPoint
-            The amount of bonds you wish to close.
-        maturity_time: int
-            The token maturity time in seconds.
-        slippage_tolerance: FixedPoint, optional
-            Amount of slippage allowed from the trade.
-            If given, then the trade will not execute unless the slippage is below this value.
-            If not given, then execute the trade regardless of the slippage.
-        gas_limit: int | None, optional
-            The maximum amount of gas used by the transaction.
-            Defaults to `eth_estimateGas` RPC output.
-        nonce: Nonce, optional
-            An optional explicit nonce to set with the transaction.
-
-        Returns
-        -------
-        ReceiptBreakdown
-            A dataclass containing the maturity time and the absolute values for token quantities changed.
-        """
-        return await _async_close_long(
-            self,
-            agent,
-            trade_amount,
-            maturity_time,
-            slippage_tolerance,
-            gas_limit,
-            nonce,
-            self.eth_config.preview_before_trade,
-        )
-
-    async def async_open_short(
-        self,
-        agent: LocalAccount,
-        trade_amount: FixedPoint,
-        slippage_tolerance: FixedPoint | None = None,
-        gas_limit: int | None = None,
-        nonce: Nonce | None = None,
-    ) -> ReceiptBreakdown:
-        """Contract call to open a short position.
-
-        Arguments
-        ---------
-        agent: LocalAccount
-            The account for the agent that is executing and signing the trade transaction.
-        trade_amount: FixedPoint
-            The size of the position, in base.
-        slippage_tolerance: FixedPoint, optional
-            Amount of slippage allowed from the trade.
-            If given, then the trade will not execute unless the slippage is below this value.
-            If not given, then execute the trade regardless of the slippage.
-        gas_limit: int | None, optional
-            The maximum amount of gas used by the transaction.
-            Defaults to `eth_estimateGas` RPC output.
-        nonce: Nonce, optional
-            An explicit nonce to set with the transaction.
-
-        Returns
-        -------
-        ReceiptBreakdown
-            A dataclass containing the maturity time and the absolute values for token quantities changed.
-        """
-        return await _async_open_short(
-            self,
-            agent,
-            trade_amount,
-            slippage_tolerance,
-            gas_limit,
-            nonce,
-            self.eth_config.preview_before_trade,
-        )
-
-    # We do not control the number of arguments; this is set by hyperdrive-rs
-    # pylint: disable=too-many-arguments
-    async def async_close_short(
-        self,
-        agent: LocalAccount,
-        trade_amount: FixedPoint,
-        maturity_time: int,
-        slippage_tolerance: FixedPoint | None = None,
-        gas_limit: int | None = None,
-        nonce: Nonce | None = None,
-    ) -> ReceiptBreakdown:
-        """Contract call to close a short position.
-
-        Arguments
-        ---------
-        agent: LocalAccount
-            The account for the agent that is executing and signing the trade transaction.
-        trade_amount: FixedPoint
-            The size of the position, in base.
-        maturity_time: int
-            The token maturity time in seconds.
-        slippage_tolerance: FixedPoint, optional
-            Amount of slippage allowed from the trade.
-            If given, then the trade will not execute unless the slippage is below this value.
-            If not given, then execute the trade regardless of the slippage.
-        gas_limit: int | None, optional
-            The maximum amount of gas used by the transaction.
-            Defaults to `eth_estimateGas` RPC output.
-        nonce: Nonce | None, optional
-            An explicit nonce to set with the transaction.
-
-        Returns
-        -------
-        ReceiptBreakdown
-            A dataclass containing the maturity time and the absolute values for token quantities changed.
-        """
-        return await _async_close_short(
-            self,
-            agent,
-            trade_amount,
-            maturity_time,
-            slippage_tolerance,
-            gas_limit,
-            nonce,
-            self.eth_config.preview_before_trade,
-        )
-
-    # We do not control the number of arguments; this is set by hyperdrive-rs
-    # pylint: disable=too-many-arguments
-    async def async_add_liquidity(
-        self,
-        agent: LocalAccount,
-        trade_amount: FixedPoint,
-        min_apr: FixedPoint,
-        max_apr: FixedPoint,
-        slippage_tolerance: FixedPoint | None = None,
-        gas_limit: int | None = None,
-        nonce: Nonce | None = None,
-    ) -> ReceiptBreakdown:
-        """Contract call to add liquidity to the Hyperdrive pool.
-
-        Arguments
-        ---------
-        agent: LocalAccount
-            The account for the agent that is executing and signing the trade transaction.
-        trade_amount: FixedPoint
-            The size of the position, in base.
-        min_apr: FixedPoint
-            The minimum allowable APR after liquidity is added.
-        max_apr: FixedPoint
-            The maximum allowable APR after liquidity is added.
-        slippage_tolerance: FixedPoint, optional
-            Amount of slippage allowed from the trade.
-            If given, then the trade will not execute unless the slippage is below this value.
-            If not given, then execute the trade regardless of the slippage.
-        gas_limit: int | None, optional
-            The maximum amount of gas used by the transaction.
-            Defaults to `eth_estimateGas` RPC output.
-        nonce: Nonce | None, optional
-            An explicit nonce to set with the transaction.
-
-        Returns
-        -------
-        ReceiptBreakdown
-            A dataclass containing the absolute values for token quantities changed.
-        """
-        return await _async_add_liquidity(
-            self,
-            agent,
-            trade_amount,
-            min_apr,
-            max_apr,
+# pylint: disable=too-many-instance-attributes
+@dataclass
+class HyperdriveMarketAction(BaseMarketAction[HyperdriveActionType]):
+    r"""Market action specification."""
+
+    # these two variables are required to be set by the strategy
+    action_type: HyperdriveActionType
+    # amount to supply for the action
+    trade_amount: FixedPoint  # TODO: should this be a Quantity, not a float? Make sure, then delete fixme
+    # maturity time is set only for trades that act on existing positions (close long or close short)
+    maturity_time: int | None = None
+    # slippage tolerance percent where 0.01 would be a 1% tolerance
+    slippage_tolerance: FixedPoint | None = None
+    # maximum amount of gas to be used for the transaction
+    gas_limit: int | None = None
+    # gas price base multiple
+    base_fee_multiple: float | None = None
+    # gas price priority multipe
+    priority_fee_multiple: float | None = None
+    # min_apr and max_apr used only for add_liquidity trades to control slippage
+    min_apr: FixedPoint = FixedPoint(scaled_value=1)
+    max_apr: FixedPoint = FixedPoint(scaled_value=2**256 - 1)
+
+
+def open_long_trade(
+    trade_amount: FixedPoint,
+    slippage_tolerance: FixedPoint | None = None,
+    base_fee_multiple: float | None = None,
+    priority_fee_multiple: float | None = None,
+    gas_limit: int | None = None,
+) -> Trade[HyperdriveMarketAction]:
+    """Return a trade object for opening a long.
+
+    Arguments
+    ---------
+    trade_amount: FixedPoint
+        The amount of base you wish to use to open a long.
+    slippage_tolerance: FixedPoint, optional
+        Amount of slippage allowed from the trade.
+        If given, then the trade will not execute unless the slippage is below this value.
+        If not given, then execute the trade regardless of the slippage.
+    base_fee_multiple: float | None, optional
+        The base fee multiple for the transaction.
+    priority_fee_multiple: float | None, optional
+        The priority fee multiple for the transaction.
+    gas_limit: int | None, optional
+        The maximum amount of gas used by the transaction.
+        Defaults to `eth_estimateGas` RPC output.
+
+    Returns
+    -------
+    Trade[HyperdriveMarketAction]
+        The trade object for opening a long in a Hyperdrive pool.
+    """
+    return Trade(
+        market_type=MarketType.HYPERDRIVE,
+        market_action=HyperdriveMarketAction(
+            action_type=HyperdriveActionType.OPEN_LONG,
+            trade_amount=trade_amount,
+            slippage_tolerance=slippage_tolerance,
+            base_fee_multiple=base_fee_multiple,
+            priority_fee_multiple=priority_fee_multiple,
+            gas_limit=gas_limit,
+        ),
+    )
+
+
+def close_long_trade(
+    trade_amount: FixedPoint,
+    maturity_time: int,
+    slippage_tolerance: FixedPoint | None = None,
+    base_fee_multiple: float | None = None,
+    priority_fee_multiple: float | None = None,
+    gas_limit: int | None = None,
+) -> Trade[HyperdriveMarketAction]:
+    """Return a trade object for closing a long.
+
+    Arguments
+    ---------
+    trade_amount: FixedPoint
+        The amount of bonds you wish to close.
+    maturity_time: int
+        The token maturity time in seconds.
+    slippage_tolerance: FixedPoint, optional
+        Amount of slippage allowed from the trade.
+        If given, then the trade will not execute unless the slippage is below this value.
+        If not given, then execute the trade regardless of the slippage.
+    base_fee_multiple: float | None, optional
+        The base fee multiple for the transaction.
+    priority_fee_multiple: float | None, optional
+        The priority fee multiple for the transaction.
+    gas_limit: int | None, optional
+        The maximum amount of gas used by the transaction.
+        Defaults to `eth_estimateGas` RPC output.
+
+    Returns
+    -------
+    Trade[HyperdriveMarketAction]
+        The trade object for closing a long in a Hyperdrive pool.
+    """
+    return Trade(
+        market_type=MarketType.HYPERDRIVE,
+        market_action=HyperdriveMarketAction(
+            action_type=HyperdriveActionType.CLOSE_LONG,
+            trade_amount=trade_amount,
+            maturity_time=maturity_time,
+            slippage_tolerance=slippage_tolerance,
+            base_fee_multiple=base_fee_multiple,
+            priority_fee_multiple=priority_fee_multiple,
+            gas_limit=gas_limit,
+        ),
+    )
+
+
+def open_short_trade(
+    trade_amount: FixedPoint,
+    slippage_tolerance: FixedPoint | None = None,
+    base_fee_multiple: float | None = None,
+    priority_fee_multiple: float | None = None,
+    gas_limit: int | None = None,
+) -> Trade[HyperdriveMarketAction]:
+    """Return a trade object for opening a short.
+
+    Arguments
+    ---------
+    trade_amount: FixedPoint
+        The amount of bonds you wish to short.
+    slippage_tolerance: FixedPoint, optional
+        Amount of slippage allowed from the trade.
+        If given, then the trade will not execute unless the slippage is below this value.
+        If not given, then execute the trade regardless of the slippage.
+    base_fee_multiple: float | None, optional
+        The base fee multiple for the transaction.
+    priority_fee_multiple: float | None, optional
+        The priority fee multiple for the transaction.
+    gas_limit: int | None, optional
+        The maximum amount of gas used by the transaction.
+        Defaults to `eth_estimateGas` RPC output.
+
+    Returns
+    -------
+    Trade[HyperdriveMarketAction]
+        The trade object for opening a short in a Hyperdrive pool.
+    """
+    return Trade(
+        market_type=MarketType.HYPERDRIVE,
+        market_action=HyperdriveMarketAction(
+            action_type=HyperdriveActionType.OPEN_SHORT,
+            trade_amount=trade_amount,
+            slippage_tolerance=slippage_tolerance,
+            base_fee_multiple=base_fee_multiple,
+            priority_fee_multiple=priority_fee_multiple,
+            gas_limit=gas_limit,
+        ),
+    )
+
+
+def close_short_trade(
+    trade_amount: FixedPoint,
+    maturity_time: int,
+    slippage_tolerance: FixedPoint | None = None,
+    base_fee_multiple: float | None = None,
+    priority_fee_multiple: float | None = None,
+    gas_limit: int | None = None,
+) -> Trade[HyperdriveMarketAction]:
+    """Return a trade object for closing a short.
+
+    Arguments
+    ---------
+    trade_amount: FixedPoint
+        The amount of bonds you wish to close.
+    maturity_time: int
+        The token maturity time in seconds.
+    slippage_tolerance: FixedPoint, optional
+        Amount of slippage allowed from the trade.
+        If given, then the trade will not execute unless the slippage is below this value.
+        If not given, then execute the trade regardless of the slippage.
+    base_fee_multiple: float | None, optional
+        The base fee multiple for the transaction.
+    priority_fee_multiple: float | None, optional
+        The priority fee multiple for the transaction.
+    gas_limit: int | None, optional
+        The maximum amount of gas used by the transaction.
+        Defaults to `eth_estimateGas` RPC output.
+
+    Returns
+    -------
+    Trade[HyperdriveMarketAction]
+        The trade object for closing a short in a Hyperdrive pool.
+    """
+    return Trade(
+        market_type=MarketType.HYPERDRIVE,
+        market_action=HyperdriveMarketAction(
+            action_type=HyperdriveActionType.CLOSE_SHORT,
+            trade_amount=trade_amount,
+            maturity_time=maturity_time,
+            slippage_tolerance=slippage_tolerance,
+            base_fee_multiple=base_fee_multiple,
+            priority_fee_multiple=priority_fee_multiple,
+            gas_limit=gas_limit,
+        ),
+    )
+
+
+def add_liquidity_trade(
+    trade_amount: FixedPoint,
+    base_fee_multiple: float | None = None,
+    priority_fee_multiple: float | None = None,
+    gas_limit: int | None = None,
+    min_apr: FixedPoint | None = None,
+    max_apr: FixedPoint | None = None,
+) -> Trade[HyperdriveMarketAction]:
+    """Return a trade object for adding liquidity.
+
+    Arguments
+    ---------
+    trade_amount: FixedPoint
+        The amount of liquidity you wish to add to the pool.
+    base_fee_multiple: float | None, optional
+        The base fee multiple for the transaction.
+    priority_fee_multiple: float | None, optional
+        The priority fee multiple for the transaction.
+    gas_limit: int | None, optional
+        The maximum amount of gas used by the transaction.
+        Defaults to `eth_estimateGas` RPC output.
+    min_apr: FixedPoint, optional
+        Minimum allowable APR after liquidity is added.
+        If this is not met, the trade will not execute.
+        Defaults to the minimum solidity FixedPoint (1e-18)
+    max_apr: FixedPoint, optional
+        Maximum allowable APR after liquidity is added.
+        If this is not met, the trade will not execute.
+        Defaults to the maximum solidity FixedPoint (2**256-1)
+
+    Returns
+    -------
+    Trade[HyperdriveMarketAction]
+        The trade object for adding liquidity to a Hyperdrive pool.
+    """
+    if min_apr is None:
+        min_apr = FixedPoint(scaled_value=1)
+    if max_apr is None:
+        max_apr = FixedPoint(scaled_value=2**256 - 1)
+
+    return Trade(
+        market_type=MarketType.HYPERDRIVE,
+        market_action=HyperdriveMarketAction(
+            action_type=HyperdriveActionType.ADD_LIQUIDITY,
+            trade_amount=trade_amount,
+            base_fee_multiple=base_fee_multiple,
+            priority_fee_multiple=priority_fee_multiple,
+            gas_limit=gas_limit,
+            min_apr=min_apr,
+            max_apr=max_apr,
+        ),
+    )
+
+
+def remove_liquidity_trade(
+    trade_amount: FixedPoint,
+    slippage_tolerance: FixedPoint | None = None,
+    base_fee_multiple: float | None = None,
+    priority_fee_multiple: float | None = None,
+    gas_limit: int | None = None,
+) -> Trade[HyperdriveMarketAction]:
+    """Return a trade object for removing liquidity.
+
+    Arguments
+    ---------
+    trade_amount: FixedPoint
+        The amount of liquidity you wish to remove from the pool.
+    slippage_tolerance: FixedPoint, optional
+        Amount of slippage allowed from the trade.
+        If given, then the trade will not execute unless the slippage is below this value.
+        If not given, then execute the trade regardless of the slippage.
+    base_fee_multiple: float | None, optional
+        The base fee multiple for the transaction.
+    priority_fee_multiple: float | None, optional
+        The priority fee multiple for the transaction.
+    gas_limit: int | None, optional
+        The maximum amount of gas used by the transaction.
+        Defaults to `eth_estimateGas` RPC output.
+
+    Returns
+    -------
+    Trade[HyperdriveMarketAction]
+        The trade object for removing liquidity from a Hyperdrive pool.
+
+    .. warning::
+        Slippage tolerance is not implemented for remove liquidity trades, field will be ignored.
+    """
+    return Trade(
+        market_type=MarketType.HYPERDRIVE,
+        market_action=HyperdriveMarketAction(
+            action_type=HyperdriveActionType.REMOVE_LIQUIDITY,
+            trade_amount=trade_amount,
             slippage_tolerance=slippage_tolerance,
+            base_fee_multiple=base_fee_multiple,
+            priority_fee_multiple=priority_fee_multiple,
+            gas_limit=gas_limit,
+        ),
+    )
+
+
+def redeem_withdraw_shares_trade(
+    trade_amount: FixedPoint,
+    base_fee_multiple: float | None = None,
+    priority_fee_multiple: float | None = None,
+    gas_limit: int | None = None,
+) -> Trade[HyperdriveMarketAction]:
+    """Return a trade object for redeeming withdraw shares.
+
+    Arguments
+    ---------
+    trade_amount: FixedPoint
+        The amount of withdraw shares you wish to redeem from the pool.
+    base_fee_multiple: float | None, optional
+        The base fee multiple for the transaction.
+    priority_fee_multiple: float | None, optional
+        The priority fee multiple for the transaction.
+    gas_limit: int | None, optional
+        The maximum amount of gas used by the transaction.
+        Defaults to `eth_estimateGas` RPC output.
+
+    Returns
+    -------
+    Trade[HyperdriveMarketAction]
+        The trade object for redeeming withdraw shares from a Hyperdrive pool.
+    """
+    # TODO implement slippage tolerance for withdrawal
+    return Trade(
+        market_type=MarketType.HYPERDRIVE,
+        market_action=HyperdriveMarketAction(
+            action_type=HyperdriveActionType.REDEEM_WITHDRAW_SHARE,
+            trade_amount=trade_amount,
+            base_fee_multiple=base_fee_multiple,
+            priority_fee_multiple=priority_fee_multiple,
             gas_limit=gas_limit,
-            nonce=nonce,
-            preview_before_trade=self.eth_config.preview_before_trade,
-        )
-
-    async def async_remove_liquidity(
-        self,
-        agent: LocalAccount,
-        trade_amount: FixedPoint,
-        gas_limit: int | None = None,
-        nonce: Nonce | None = None,
-    ) -> ReceiptBreakdown:
-        """Contract call to remove liquidity from the Hyperdrive pool.
-
-        Arguments
-        ---------
-        agent: LocalAccount
-            The account for the agent that is executing and signing the trade transaction.
-        trade_amount: FixedPoint
-            The size of the position, in base.
-        gas_limit: int | None, optional
-            The maximum amount of gas used by the transaction.
-            Defaults to `eth_estimateGas` RPC output.
-        nonce: Nonce | None, optional
-            An explicit nonce to set with the transaction.
-
-        Returns
-        -------
-        ReceiptBreakdown
-            A dataclass containing the absolute values for token quantities changed.
-        """
-        return await _async_remove_liquidity(
-            self, agent, trade_amount, gas_limit, nonce, self.eth_config.preview_before_trade
-        )
-
-    async def async_redeem_withdraw_shares(
-        self,
-        agent: LocalAccount,
-        trade_amount: FixedPoint,
-        gas_limit: int | None = None,
-        nonce: Nonce | None = None,
-    ) -> ReceiptBreakdown:
-        """Contract call to redeem withdraw shares from Hyperdrive pool.
-
-        This should be done after closing liquidity.
-
-        .. note::
-            This is not guaranteed to redeem all shares. The pool will try to redeem as
-            many as possible, up to the withdrawPool.readyToRedeem limit, without reverting.
-            This will revert if the min_output is too high or the user is trying to withdraw
-            more shares than they have.
-
-        Arguments
-        ---------
-        agent: LocalAccount
-            The account for the agent that is executing and signing the trade transaction.
-        trade_amount: FixedPoint
-            The size of the position, in base.
-        gas_limit: int | None, optional
-            The maximum amount of gas used by the transaction.
-            Defaults to `eth_estimateGas` RPC output.
-        nonce: Nonce | None, optional
-            An explicit nonce to set with the transaction.
-
-        Returns
-        -------
-        ReceiptBreakdown
-            A dataclass containing the absolute values for token quantities changed.
-        """
-        return await _async_redeem_withdraw_shares(self, agent, trade_amount, gas_limit, nonce)
+        ),
+    )
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/interface/read_write_interface_test.py` & `agent0-0.20.0/src/agent0/ethpy/hyperdrive/interface/read_write_interface_test.py`

 * *Files 8% similar despite different names*

```diff
@@ -21,18 +21,18 @@
 # we need to use the outer name for fixtures
 # pylint: disable=redefined-outer-name
 
 
 class TestHyperdriveReadWriteInterface:
     """Tests for the HyperdriveReadWriteInterface api class."""
 
-    def test_set_variable_rate(self, hyperdrive_read_write_interface: HyperdriveReadWriteInterface):
-        variable_rate = hyperdrive_read_write_interface.get_variable_rate()
+    def test_set_variable_rate(self, hyperdrive_read_write_interface_fixture: HyperdriveReadWriteInterface):
+        variable_rate = hyperdrive_read_write_interface_fixture.get_variable_rate()
         new_rate = variable_rate * FixedPoint("0.1")
         # TODO: Setup a fixture to create a funded local account
         extra_key_bytes = text_if_str(to_bytes, "extra_entropy")
         key_bytes = keccak(os.urandom(32) + extra_key_bytes)
-        private_key = Account()._parsePrivateKey(key_bytes)  # pylint: disable=protected-access
+        private_key = Account()._parse_private_key(key_bytes)  # pylint: disable=protected-access
         sender: LocalAccount = Account().from_key(private_key)
-        set_anvil_account_balance(hyperdrive_read_write_interface.web3, sender.address, 10**19)
-        hyperdrive_read_write_interface.set_variable_rate(sender, new_rate)
-        assert hyperdrive_read_write_interface.get_variable_rate() == new_rate
+        set_anvil_account_balance(hyperdrive_read_write_interface_fixture.web3, sender.address, 10**19)
+        hyperdrive_read_write_interface_fixture.set_variable_rate(sender, new_rate)
+        assert hyperdrive_read_write_interface_fixture.get_variable_rate() == new_rate
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/receipt_breakdown.py` & `agent0-0.20.0/src/agent0/ethpy/hyperdrive/receipt_breakdown.py`

 * *Files 3% similar despite different names*

```diff
@@ -14,42 +14,40 @@
     r"""A granular breakdown of important values in a trade receipt."""
 
     trader: str = ""
     destination: str = ""
     provider: str = ""
     asset_id: int = 0
     maturity_time_seconds: int = 0
-    base_amount: FixedPoint = FixedPoint(0)
+    amount: FixedPoint = FixedPoint(0)
     bond_amount: FixedPoint = FixedPoint(0)
     lp_amount: FixedPoint = FixedPoint(0)
     withdrawal_share_amount: FixedPoint = FixedPoint(0)
     vault_share_price: FixedPoint = FixedPoint(0)
     checkpoint_vault_share_price: FixedPoint = FixedPoint(0)
-    vault_share_amount: FixedPoint = FixedPoint(0)
     base_proceeds: FixedPoint = FixedPoint(0)
     base_payment: FixedPoint = FixedPoint(0)
     as_base: bool = False
     lp_share_price: FixedPoint = FixedPoint(0)
     # checkpoint event params
     checkpoint_time: int = 0
     matured_shorts: FixedPoint = FixedPoint(0)
     matured_longs: FixedPoint = FixedPoint(0)
 
     def __post_init__(self):
         # lots of attributes to check
         # pylint: disable=too-many-boolean-expressions
         if (
-            self.base_amount < 0
+            self.amount < 0
             or self.bond_amount < 0
             or self.maturity_time_seconds < 0
             or self.lp_amount < 0
             or self.withdrawal_share_amount < 0
             or self.vault_share_price < 0
             or self.checkpoint_vault_share_price < 0
-            or self.vault_share_amount < 0
             or self.base_proceeds < 0
             or self.lp_share_price < 0
             or self.checkpoint_time < 0
             or self.matured_shorts < 0
             or self.matured_longs < 0
         ):
             raise ValueError(
```

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/state/pool_state.py` & `agent0-0.20.0/src/agent0/ethpy/hyperdrive/state/pool_state.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/ethpy/hyperdrive/transactions.py` & `agent0-0.20.0/src/agent0/ethpy/hyperdrive/transactions.py`

 * *Files 1% similar despite different names*

```diff
@@ -134,21 +134,20 @@
     if len(hyperdrive_event_logs) > 1:
         raise AssertionError("Too many logs found")
     log_args = hyperdrive_event_logs[0]["args"]
 
     trade_result = ReceiptBreakdown()
     values = ["trader", "destination", "provider", "assetId", "checkpointTime", "asBase"]
     fixedpoint_values = [
-        "baseAmount",
+        "amount",
         "bondAmount",
         "lpAmount",
         "withdrawalShareAmount",
         "vaultSharePrice",
         "checkpointVaultSharePrice",
-        "vaultShareAmount",
         "baseProceeds",
         "basePayment",
         "lpSharePrice",
         "maturedShorts",
         "maturedLongs",
     ]
```

### Comparing `agent0-0.18.1/src/agent0/hyperlogs/json_encoder.py` & `agent0-0.20.0/src/agent0/hyperlogs/json_encoder.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,12 +1,13 @@
 """Extend the dfault JSON encoder to include additional types."""
 
 import json
 from dataclasses import asdict, is_dataclass
 from datetime import datetime
+from decimal import Decimal
 from enum import Enum
 from traceback import format_tb
 from types import TracebackType
 from typing import Any
 
 import numpy as np
 import pandas as pd
@@ -44,14 +45,16 @@
             return int(o)
         if isinstance(o, np.floating):
             return float(o)
         if isinstance(o, np.ndarray):
             return o.tolist()
         if isinstance(o, FixedPoint):
             return str(o)
+        if isinstance(o, Decimal):
+            return str(o)
         if isinstance(o, Generator):
             return "NumpyGenerator"
         if isinstance(o, datetime):
             return str(o)
         if isinstance(o, TracebackType):
             return format_tb(o)
         if isinstance(o, Exception):
```

### Comparing `agent0-0.18.1/src/agent0/hyperlogs/logs.py` & `agent0-0.20.0/src/agent0/hyperlogs/logs.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/hyperlogs/logs_test.py` & `agent0-0.20.0/src/agent0/hyperlogs/logs_test.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/hyperlogs/rollbar_utilities.py` & `agent0-0.20.0/src/agent0/hyperlogs/rollbar_utilities.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/hypertypes/README.md` & `agent0-0.20.0/src/agent0/hypertypes/README.md`

 * *Files 2% similar despite different names*

```diff
@@ -32,17 +32,18 @@
 ERC20Mintable.sol
 ERC4626HyperdriveCoreDeployer.sol
 ERC4626HyperdriveDeployerCoordinator.sol
 ERC4626Target0Deployer.sol
 ERC4626Target1deployer.sol
 ERC4626Target2Deployer.sol
 ERC4626Target3Deployer.sol
-ERC4626Target4Deployer.sol
 HyperdriveFactory.sol
+HyperdriveRegistry.sol
 IHyperdrive.sol
+LPMath.sol
 MockERC4626.sol
 ```
 
 You then can update the generated `hypertypes` python package by running `pypechain` on this folder:
 
 ```bash
 pip install --upgrade pip && pip install --upgrade pypechain
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/fixedpoint_types.py` & `agent0-0.20.0/src/agent0/hypertypes/fixedpoint_types.py`

 * *Files 9% similar despite different names*

```diff
@@ -56,14 +56,15 @@
     base_token: str
     vault_shares_token: str
     linker_factory: str
     linker_code_hash: bytes
     initial_vault_share_price: FixedPoint
     minimum_share_reserves: FixedPoint
     minimum_transaction_amount: FixedPoint
+    circuit_breaker_delta: FixedPoint
     position_duration: int
     checkpoint_duration: int
     time_stretch: FixedPoint
     governance: str
     fee_collector: str
     sweep_collector: str
     # TODO: Pyright:
@@ -75,8 +76,10 @@
             self.fees: FeesFP = FeesFP(*self.fees)
 
 
 @dataclass
 class CheckpointFP:
     """Checkpoint struct."""
 
+    weighted_spot_price: FixedPoint
+    last_weighted_spot_price_update_time: int
     vault_share_price: FixedPoint
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/ERC20ForwarderFactoryContract.py` & `agent0-0.20.0/src/agent0/hypertypes/types/ERC20ForwarderFactoryContract.py`

 * *Files 1% similar despite different names*

```diff
@@ -35,15 +35,15 @@
 from hexbytes import HexBytes
 from typing_extensions import Self
 from web3 import Web3
 from web3.contract.contract import Contract, ContractConstructor, ContractFunction, ContractFunctions
 from web3.exceptions import FallbackNotFound
 from web3.types import ABI, ABIFunction, BlockIdentifier, CallOverride, TxParams
 
-from .utilities import dataclass_to_tuple, get_abi_input_types, rename_returned_types
+from .utilities import dataclass_to_tuple, get_abi_input_types, rename_returned_types, try_bytecode_hexbytes
 
 structs = {}
 
 
 class ERC20ForwarderFactoryERC20LINK_HASHContractFunction(ContractFunction):
     """ContractFunction for the ERC20LINK_HASH method."""
 
@@ -341,15 +341,15 @@
 )
 
 
 class ERC20ForwarderFactoryContract(Contract):
     """A web3.py Contract class for the ERC20ForwarderFactory contract."""
 
     abi: ABI = erc20forwarderfactory_abi
-    bytecode: bytes = HexBytes(erc20forwarderfactory_bytecode)
+    bytecode: bytes | None = try_bytecode_hexbytes(erc20forwarderfactory_bytecode, "erc20forwarderfactory")
 
     def __init__(self, address: ChecksumAddress | None = None) -> None:
         try:
             # Initialize parent Contract class
             super().__init__(address=address)
             self.functions = ERC20ForwarderFactoryContractFunctions(erc20forwarderfactory_abi, self.w3, address)  # type: ignore
 
@@ -415,15 +415,15 @@
         current_nonce = w3.eth.get_transaction_count(account.address)
         deployment_tx.update({"nonce": current_nonce})
 
         # Sign the transaction with local account private key
         signed_tx = account.sign_transaction(deployment_tx)
 
         # Send the signed transaction and wait for receipt
-        tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
+        tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
         tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
 
         deployed_contract = deployer(address=tx_receipt.contractAddress)  # type: ignore
         return deployed_contract
 
     @classmethod
     def factory(cls, w3: Web3, class_name: str | None = None, **kwargs: Any) -> Type[Self]:
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/ERC20MintableContract.py` & `agent0-0.20.0/src/agent0/hypertypes/types/ERC20MintableContract.py`

 * *Files 2% similar despite different names*

```diff
@@ -41,15 +41,15 @@
     ContractEvents,
     ContractFunction,
     ContractFunctions,
 )
 from web3.exceptions import FallbackNotFound
 from web3.types import ABI, BlockIdentifier, CallOverride, EventData, TxParams
 
-from .utilities import dataclass_to_tuple, rename_returned_types
+from .utilities import dataclass_to_tuple, rename_returned_types, try_bytecode_hexbytes
 
 structs = {}
 
 
 class ERC20MintableDOMAIN_SEPARATORContractFunction(ContractFunction):
     """ContractFunction for the DOMAIN_SEPARATOR method."""
 
@@ -488,14 +488,41 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(bool, rename_returned_types(structs, return_types, raw_values))
 
 
+class ERC20MintableIsUnrestrictedContractFunction(ContractFunction):
+    """ContractFunction for the isUnrestricted method."""
+
+    def __call__(self, arg1: str) -> ERC20MintableIsUnrestrictedContractFunction:  # type: ignore
+        clone = super().__call__(dataclass_to_tuple(arg1))
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> bool:
+        """returns bool."""
+        # Define the expected return types from the smart contract call
+
+        return_types = bool
+
+        # Call the function
+
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+        return cast(bool, rename_returned_types(structs, return_types, raw_values))
+
+
 class ERC20MintableMaxMintAmountContractFunction(ContractFunction):
     """ContractFunction for the maxMintAmount method."""
 
     def __call__(self) -> ERC20MintableMaxMintAmountContractFunction:  # type: ignore
         clone = super().__call__()
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -712,14 +739,36 @@
     ) -> None:
         """returns None."""
         # Define the expected return types from the smart contract call
 
         # Call the function
 
 
+class ERC20MintableSetMaxMintAmountContractFunction(ContractFunction):
+    """ContractFunction for the setMaxMintAmount method."""
+
+    def __call__(self, maxMintAmount: int) -> ERC20MintableSetMaxMintAmountContractFunction:  # type: ignore
+        clone = super().__call__(dataclass_to_tuple(maxMintAmount))
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> None:
+        """returns None."""
+        # Define the expected return types from the smart contract call
+
+        # Call the function
+
+
 class ERC20MintableSetPublicCapabilityContractFunction(ContractFunction):
     """ContractFunction for the setPublicCapability method."""
 
     def __call__(self, functionSig: bytes, enabled: bool) -> ERC20MintableSetPublicCapabilityContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(functionSig), dataclass_to_tuple(enabled))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -778,14 +827,36 @@
     ) -> None:
         """returns None."""
         # Define the expected return types from the smart contract call
 
         # Call the function
 
 
+class ERC20MintableSetUnrestrictedMintStatusContractFunction(ContractFunction):
+    """ContractFunction for the setUnrestrictedMintStatus method."""
+
+    def __call__(self, target: str, status: bool) -> ERC20MintableSetUnrestrictedMintStatusContractFunction:  # type: ignore
+        clone = super().__call__(dataclass_to_tuple(target), dataclass_to_tuple(status))
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> None:
+        """returns None."""
+        # Define the expected return types from the smart contract call
+
+        # Call the function
+
+
 class ERC20MintableSetUserRoleContractFunction(ContractFunction):
     """ContractFunction for the setUserRole method."""
 
     def __call__(self, user: str, role: int, enabled: bool) -> ERC20MintableSetUserRoleContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(user), dataclass_to_tuple(role), dataclass_to_tuple(enabled))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -963,34 +1034,40 @@
 
     getUserRoles: ERC20MintableGetUserRolesContractFunction
 
     isCapabilityPublic: ERC20MintableIsCapabilityPublicContractFunction
 
     isCompetitionMode: ERC20MintableIsCompetitionModeContractFunction
 
+    isUnrestricted: ERC20MintableIsUnrestrictedContractFunction
+
     maxMintAmount: ERC20MintableMaxMintAmountContractFunction
 
     mint: ERC20MintableMintContractFunction
 
     name: ERC20MintableNameContractFunction
 
     nonces: ERC20MintableNoncesContractFunction
 
     owner: ERC20MintableOwnerContractFunction
 
     permit: ERC20MintablePermitContractFunction
 
     setAuthority: ERC20MintableSetAuthorityContractFunction
 
+    setMaxMintAmount: ERC20MintableSetMaxMintAmountContractFunction
+
     setPublicCapability: ERC20MintableSetPublicCapabilityContractFunction
 
     setRoleCapability: ERC20MintableSetRoleCapabilityContractFunction
 
     setTargetCustomAuthority: ERC20MintableSetTargetCustomAuthorityContractFunction
 
+    setUnrestrictedMintStatus: ERC20MintableSetUnrestrictedMintStatusContractFunction
+
     setUserRole: ERC20MintableSetUserRoleContractFunction
 
     symbol: ERC20MintableSymbolContractFunction
 
     totalSupply: ERC20MintableTotalSupplyContractFunction
 
     transfer: ERC20MintableTransferContractFunction
@@ -1123,14 +1200,22 @@
             "isCompetitionMode",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="isCompetitionMode",
         )
+        self.isUnrestricted = ERC20MintableIsUnrestrictedContractFunction.factory(
+            "isUnrestricted",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="isUnrestricted",
+        )
         self.maxMintAmount = ERC20MintableMaxMintAmountContractFunction.factory(
             "maxMintAmount",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="maxMintAmount",
@@ -1179,14 +1264,22 @@
             "setAuthority",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="setAuthority",
         )
+        self.setMaxMintAmount = ERC20MintableSetMaxMintAmountContractFunction.factory(
+            "setMaxMintAmount",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="setMaxMintAmount",
+        )
         self.setPublicCapability = ERC20MintableSetPublicCapabilityContractFunction.factory(
             "setPublicCapability",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="setPublicCapability",
@@ -1203,14 +1296,22 @@
             "setTargetCustomAuthority",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="setTargetCustomAuthority",
         )
+        self.setUnrestrictedMintStatus = ERC20MintableSetUnrestrictedMintStatusContractFunction.factory(
+            "setUnrestrictedMintStatus",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="setUnrestrictedMintStatus",
+        )
         self.setUserRole = ERC20MintableSetUserRoleContractFunction.factory(
             "setUserRole",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="setUserRole",
@@ -2093,14 +2194,21 @@
             "name": "isCompetitionMode",
             "inputs": [],
             "outputs": [{"name": "", "type": "bool", "internalType": "bool"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
+            "name": "isUnrestricted",
+            "inputs": [{"name": "", "type": "address", "internalType": "address"}],
+            "outputs": [{"name": "", "type": "bool", "internalType": "bool"}],
+            "stateMutability": "view",
+        },
+        {
+            "type": "function",
             "name": "maxMintAmount",
             "inputs": [],
             "outputs": [{"name": "", "type": "uint256", "internalType": "uint256"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
@@ -2160,14 +2268,21 @@
             "name": "setAuthority",
             "inputs": [{"name": "newAuthority", "type": "address", "internalType": "contract Authority"}],
             "outputs": [],
             "stateMutability": "nonpayable",
         },
         {
             "type": "function",
+            "name": "setMaxMintAmount",
+            "inputs": [{"name": "_maxMintAmount", "type": "uint256", "internalType": "uint256"}],
+            "outputs": [],
+            "stateMutability": "nonpayable",
+        },
+        {
+            "type": "function",
             "name": "setPublicCapability",
             "inputs": [
                 {"name": "functionSig", "type": "bytes4", "internalType": "bytes4"},
                 {"name": "enabled", "type": "bool", "internalType": "bool"},
             ],
             "outputs": [],
             "stateMutability": "nonpayable",
@@ -2191,14 +2306,24 @@
                 {"name": "customAuthority", "type": "address", "internalType": "contract Authority"},
             ],
             "outputs": [],
             "stateMutability": "nonpayable",
         },
         {
             "type": "function",
+            "name": "setUnrestrictedMintStatus",
+            "inputs": [
+                {"name": "_target", "type": "address", "internalType": "address"},
+                {"name": "_status", "type": "bool", "internalType": "bool"},
+            ],
+            "outputs": [],
+            "stateMutability": "nonpayable",
+        },
+        {
+            "type": "function",
             "name": "setUserRole",
             "inputs": [
                 {"name": "user", "type": "address", "internalType": "address"},
                 {"name": "role", "type": "uint8", "internalType": "uint8"},
                 {"name": "enabled", "type": "bool", "internalType": "bool"},
             ],
             "outputs": [],
@@ -2322,23 +2447,23 @@
             ],
             "anonymous": False,
         },
     ],
 )
 # pylint: disable=line-too-long
 erc20mintable_bytecode = HexStr(
-    "0x6101206040523480156200001257600080fd5b5060405162001f1b38038062001f1b833981016040819052620000359162000296565b8230818189898960006200004a8482620003e4565b506001620000598382620003e4565b5060ff81166080524660a0526200006f6200011f565b60c0525050600680546001600160a01b038086166001600160a01b03199283168117909355600780549186169190921617905560405190915033907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a36040516001600160a01b0382169033907fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b7638998019890600090a35050505090151560e05261010052506200052e92505050565b60007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f6000604051620001539190620004b0565b6040805191829003822060208301939093528101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201523060a082015260c00160405160208183030381529060405280519060200120905090565b634e487b7160e01b600052604160045260246000fd5b600082601f830112620001e357600080fd5b81516001600160401b0380821115620002005762000200620001bb565b604051601f8301601f19908116603f011681019082821181831017156200022b576200022b620001bb565b816040528381526020925086838588010111156200024857600080fd5b600091505b838210156200026c57858201830151818301840152908201906200024d565b600093810190920192909252949350505050565b805180151581146200029157600080fd5b919050565b60008060008060008060c08789031215620002b057600080fd5b86516001600160401b0380821115620002c857600080fd5b620002d68a838b01620001d1565b97506020890151915080821115620002ed57600080fd5b50620002fc89828a01620001d1565b955050604087015160ff811681146200031457600080fd5b60608801519094506001600160a01b03811681146200033257600080fd5b9250620003426080880162000280565b915060a087015190509295509295509295565b600181811c908216806200036a57607f821691505b6020821081036200038b57634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115620003df57600081815260208120601f850160051c81016020861015620003ba5750805b601f850160051c820191505b81811015620003db57828155600101620003c6565b5050505b505050565b81516001600160401b03811115620004005762000400620001bb565b620004188162000411845462000355565b8462000391565b602080601f831160018114620004505760008415620004375750858301515b600019600386901b1c1916600185901b178555620003db565b600085815260208120601f198616915b82811015620004815788860151825594840194600190910190840162000460565b5085821015620004a05787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b6000808354620004c08162000355565b60018281168015620004db5760018114620004f15762000522565b60ff198416875282151583028701945062000522565b8760005260208060002060005b85811015620005195781548a820152908401908201620004fe565b50505082870194505b50929695505050505050565b60805160a05160c05160e0516101005161197e6200059d600039600081816102b10152818161090c0152610d830152600081816103ab015281816108b40152818161098a01528181610cc90152610d2b015260006108900152600061085b015260006102eb015261197e6000f3fe608060405234801561001057600080fd5b50600436106101fb5760003560e01c80637a8c63b51161011a578063b7009613116100ad578063dd62ed3e1161007c578063dd62ed3e146104ce578063e688747b146104f9578063ea7ca2761461052f578063ed0d0efb14610566578063f2fde38b1461058657600080fd5b8063b70096131461046c578063bf7e214f1461047f578063c53a398514610492578063d505accf146104bb57600080fd5b806395d89b41116100e957806395d89b411461042b5780639dc29fac14610433578063a0712d6814610446578063a9059cbb1461045957600080fd5b80637a8c63b5146103a65780637a9e5e4b146103cd5780637ecebe00146103e05780638da5cb5b1461040057600080fd5b8063313ce567116101925780634b5159da116101615780634b5159da1461034d57806367aff4841461036057806370a0823114610373578063728b952b1461039357600080fd5b8063313ce567146102e65780633644e5151461031f57806340c10f191461032757806342966c681461033a57600080fd5b80630ea9b75b116101ce5780630ea9b75b1461028e57806318160ddd146102a3578063239c70ae146102ac57806323b872dd146102d357600080fd5b806306a36aee1461020057806306fdde0314610233578063095ea7b3146102485780630bade8a41461026b575b600080fd5b61022061020e366004611436565b60096020526000908152604090205481565b6040519081526020015b60405180910390f35b61023b610599565b60405161022a9190611453565b61025b6102563660046114a1565b610627565b604051901515815260200161022a565b61025b6102793660046114ea565b600a6020526000908152604090205460ff1681565b6102a161029c366004611524565b610694565b005b61022060025481565b6102207f000000000000000000000000000000000000000000000000000000000000000081565b61025b6102e136600461156b565b610775565b61030d7f000000000000000000000000000000000000000000000000000000000000000081565b60405160ff909116815260200161022a565b610220610857565b6102a16103353660046114a1565b6108b2565b6102a16103483660046115ac565b610988565b6102a161035b3660046115c5565b6109ed565b6102a161036e3660046115fc565b610a7f565b610220610381366004611436565b60036020526000908152604090205481565b6102a16103a136600461162a565b610b47565b61025b7f000000000000000000000000000000000000000000000000000000000000000081565b6102a16103db366004611436565b610bd0565b6102206103ee366004611436565b60056020526000908152604090205481565b600654610413906001600160a01b031681565b6040516001600160a01b03909116815260200161022a565b61023b610cba565b6102a16104413660046114a1565b610cc7565b6102a16104543660046115ac565b610d29565b61025b6104673660046114a1565b610dfb565b61025b61047a366004611658565b610e61565b600754610413906001600160a01b031681565b6104136104a0366004611436565b6008602052600090815260409020546001600160a01b031681565b6102a16104c936600461169f565b610f5f565b6102206104dc36600461162a565b600460209081526000928352604080842090915290825290205481565b61025b61050736600461170d565b6001600160e01b0319166000908152600b602052604090205460ff919091161c600116151590565b61025b61053d366004611740565b6001600160a01b0391909116600090815260096020526040902054600160ff9092161c16151590565b6102206105743660046114ea565b600b6020526000908152604090205481565b6102a1610594366004611436565b6111a3565b600080546105a69061176c565b80601f01602080910402602001604051908101604052809291908181526020018280546105d29061176c565b801561061f5780601f106105f45761010080835404028352916020019161061f565b820191906000526020600020905b81548152906001019060200180831161060257829003601f168201915b505050505081565b3360008181526004602090815260408083206001600160a01b038716808552925280832085905551919290917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925906106829086815260200190565b60405180910390a35060015b92915050565b6106aa336000356001600160e01b031916611221565b6106cf5760405162461bcd60e51b81526004016106c6906117a6565b60405180910390fd5b80156106ff576001600160e01b031982166000908152600b602052604090208054600160ff86161b179055610726565b6001600160e01b031982166000908152600b602052604090208054600160ff86161b191690555b816001600160e01b0319168360ff167fbfe16b2c35ce23dfd1ab0e7b5d086a10060c9b52d1574e1680c881b3b3a2b15183604051610768911515815260200190565b60405180910390a3505050565b6001600160a01b038316600090815260046020908152604080832033845290915281205460001981146107d1576107ac83826117e2565b6001600160a01b03861660009081526004602090815260408083203384529091529020555b6001600160a01b038516600090815260036020526040812080548592906107f99084906117e2565b90915550506001600160a01b0380851660008181526003602052604090819020805487019055519091871690600080516020611929833981519152906108429087815260200190565b60405180910390a360019150505b9392505050565b60007f0000000000000000000000000000000000000000000000000000000000000000461461088d576108886112cb565b905090565b507f000000000000000000000000000000000000000000000000000000000000000090565b7f00000000000000000000000000000000000000000000000000000000000000001561090a576108ee336000356001600160e01b031916611221565b61090a5760405162461bcd60e51b81526004016106c6906117f5565b7f000000000000000000000000000000000000000000000000000000000000000081111561097a5760405162461bcd60e51b815260206004820181905260248201527f4d6f636b455243343632363a20496e76616c6964206d696e7420616d6f756e7460448201526064016106c6565b6109848282611365565b5050565b7f0000000000000000000000000000000000000000000000000000000000000000156109e0576109c4336000356001600160e01b031916611221565b6109e05760405162461bcd60e51b81526004016106c6906117f5565b6109ea33826113bf565b50565b610a03336000356001600160e01b031916611221565b610a1f5760405162461bcd60e51b81526004016106c6906117a6565b6001600160e01b031982166000818152600a6020908152604091829020805460ff191685151590811790915591519182527f36d28126bef21a4f3765d7fcb7c45cead463ae4c41094ef3b771ede598544103910160405180910390a25050565b610a95336000356001600160e01b031916611221565b610ab15760405162461bcd60e51b81526004016106c6906117a6565b8015610ae0576001600160a01b03831660009081526009602052604090208054600160ff85161b179055610b06565b6001600160a01b03831660009081526009602052604090208054600160ff85161b191690555b8160ff16836001600160a01b03167f4c9bdd0c8e073eb5eda2250b18d8e5121ff27b62064fbeeeed4869bb99bc5bf283604051610768911515815260200190565b610b5d336000356001600160e01b031916611221565b610b795760405162461bcd60e51b81526004016106c6906117a6565b6001600160a01b0382811660008181526008602052604080822080546001600160a01b0319169486169485179055517fa4908e11a5f895b13d51526c331ac93cdd30e59772361c5d07874eb36bff20659190a35050565b6006546001600160a01b0316331480610c65575060075460405163b700961360e01b81526001600160a01b039091169063b700961390610c2490339030906001600160e01b0319600035169060040161182c565b602060405180830381865afa158015610c41573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c659190611859565b610c6e57600080fd5b600780546001600160a01b0319166001600160a01b03831690811790915560405133907fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b7638998019890600090a350565b600180546105a69061176c565b7f000000000000000000000000000000000000000000000000000000000000000015610d1f57610d03336000356001600160e01b031916611221565b610d1f5760405162461bcd60e51b81526004016106c6906117f5565b61098482826113bf565b7f000000000000000000000000000000000000000000000000000000000000000015610d8157610d65336000356001600160e01b031916611221565b610d815760405162461bcd60e51b81526004016106c6906117f5565b7f0000000000000000000000000000000000000000000000000000000000000000811115610df15760405162461bcd60e51b815260206004820181905260248201527f4d6f636b455243343632363a20496e76616c6964206d696e7420616d6f756e7460448201526064016106c6565b6109ea3382611365565b33600090815260036020526040812080548391908390610e1c9084906117e2565b90915550506001600160a01b03831660008181526003602052604090819020805485019055513390600080516020611929833981519152906106829086815260200190565b6001600160a01b038083166000908152600860205260408120549091168015610efd5760405163b700961360e01b81526001600160a01b0382169063b700961390610eb49088908890889060040161182c565b602060405180830381865afa158015610ed1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ef59190611859565b915050610850565b6001600160e01b031983166000908152600a602052604090205460ff1680610f5657506001600160e01b031983166000908152600b60209081526040808320546001600160a01b03891684526009909252909120541615155b95945050505050565b42841015610faf5760405162461bcd60e51b815260206004820152601760248201527f5045524d49545f444541444c494e455f4558504952454400000000000000000060448201526064016106c6565b60006001610fbb610857565b6001600160a01b038a811660008181526005602090815260409182902080546001810190915582517f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c98184015280840194909452938d166060840152608083018c905260a083019390935260c08083018b90528151808403909101815260e08301909152805192019190912061190160f01b6101008301526101028201929092526101228101919091526101420160408051601f198184030181528282528051602091820120600084529083018083525260ff871690820152606081018590526080810184905260a0016020604051602081039080840390855afa1580156110c7573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b038116158015906110fd5750876001600160a01b0316816001600160a01b0316145b61113a5760405162461bcd60e51b815260206004820152600e60248201526d24a72b20a624a22fa9a4a3a722a960911b60448201526064016106c6565b6001600160a01b0390811660009081526004602090815260408083208a8516808552908352928190208990555188815291928a16917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a350505050505050565b6111b9336000356001600160e01b031916611221565b6111d55760405162461bcd60e51b81526004016106c6906117a6565b600680546001600160a01b0319166001600160a01b03831690811790915560405133907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a350565b6007546000906001600160a01b031680158015906112ab575060405163b700961360e01b81526001600160a01b0382169063b70096139061126a9087903090889060040161182c565b602060405180830381865afa158015611287573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112ab9190611859565b806112c357506006546001600160a01b038581169116145b949350505050565b60007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60006040516112fd9190611876565b6040805191829003822060208301939093528101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201523060a082015260c00160405160208183030381529060405280519060200120905090565b80600260008282546113779190611915565b90915550506001600160a01b03821660008181526003602090815260408083208054860190555184815260008051602061192983398151915291015b60405180910390a35050565b6001600160a01b038216600090815260036020526040812080548392906113e79084906117e2565b90915550506002805482900390556040518181526000906001600160a01b03841690600080516020611929833981519152906020016113b3565b6001600160a01b03811681146109ea57600080fd5b60006020828403121561144857600080fd5b813561085081611421565b600060208083528351808285015260005b8181101561148057858101830151858201604001528201611464565b506000604082860101526040601f19601f8301168501019250505092915050565b600080604083850312156114b457600080fd5b82356114bf81611421565b946020939093013593505050565b80356001600160e01b0319811681146114e557600080fd5b919050565b6000602082840312156114fc57600080fd5b610850826114cd565b803560ff811681146114e557600080fd5b80151581146109ea57600080fd5b60008060006060848603121561153957600080fd5b61154284611505565b9250611550602085016114cd565b9150604084013561156081611516565b809150509250925092565b60008060006060848603121561158057600080fd5b833561158b81611421565b9250602084013561159b81611421565b929592945050506040919091013590565b6000602082840312156115be57600080fd5b5035919050565b600080604083850312156115d857600080fd5b6115e1836114cd565b915060208301356115f181611516565b809150509250929050565b60008060006060848603121561161157600080fd5b833561161c81611421565b925061155060208501611505565b6000806040838503121561163d57600080fd5b823561164881611421565b915060208301356115f181611421565b60008060006060848603121561166d57600080fd5b833561167881611421565b9250602084013561168881611421565b9150611696604085016114cd565b90509250925092565b600080600080600080600060e0888a0312156116ba57600080fd5b87356116c581611421565b965060208801356116d581611421565b955060408801359450606088013593506116f160808901611505565b925060a0880135915060c0880135905092959891949750929550565b6000806040838503121561172057600080fd5b61172983611505565b9150611737602084016114cd565b90509250929050565b6000806040838503121561175357600080fd5b823561175e81611421565b915061173760208401611505565b600181811c9082168061178057607f821691505b6020821081036117a057634e487b7160e01b600052602260045260246000fd5b50919050565b6020808252600c908201526b15539055551213d49256915160a21b604082015260600190565b634e487b7160e01b600052601160045260246000fd5b8181038181111561068e5761068e6117cc565b6020808252601d908201527f45524332304d696e7461626c653a206e6f7420617574686f72697a6564000000604082015260600190565b6001600160a01b0393841681529190921660208201526001600160e01b0319909116604082015260600190565b60006020828403121561186b57600080fd5b815161085081611516565b600080835481600182811c91508083168061189257607f831692505b602080841082036118b157634e487b7160e01b86526022600452602486fd5b8180156118c557600181146118da57611907565b60ff1986168952841515850289019650611907565b60008a81526020902060005b868110156118ff5781548b8201529085019083016118e6565b505084890196505b509498975050505050505050565b8082018082111561068e5761068e6117cc56feddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa2646970667358221220718fe45efb39734abd39281a35fb3c5ecedc8dc3fce9aa1a48a8d45eb5aaf03764736f6c63430008140033"
+    "0x6101006040523480156200001257600080fd5b506040516200202d3803806200202d833981016040819052620000359162000295565b8230818189898960006200004a8482620003e3565b506001620000598382620003e3565b5060ff81166080524660a0526200006f6200011e565b60c0525050600680546001600160a01b038086166001600160a01b03199283168117909355600780549186169190921617905560405190915033907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a36040516001600160a01b0382169033907fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b7638998019890600090a35050505090151560e052600c55506200052d92505050565b60007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f6000604051620001529190620004af565b6040805191829003822060208301939093528101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201523060a082015260c00160405160208183030381529060405280519060200120905090565b634e487b7160e01b600052604160045260246000fd5b600082601f830112620001e257600080fd5b81516001600160401b0380821115620001ff57620001ff620001ba565b604051601f8301601f19908116603f011681019082821181831017156200022a576200022a620001ba565b816040528381526020925086838588010111156200024757600080fd5b600091505b838210156200026b57858201830151818301840152908201906200024c565b600093810190920192909252949350505050565b805180151581146200029057600080fd5b919050565b60008060008060008060c08789031215620002af57600080fd5b86516001600160401b0380821115620002c757600080fd5b620002d58a838b01620001d0565b97506020890151915080821115620002ec57600080fd5b50620002fb89828a01620001d0565b955050604087015160ff811681146200031357600080fd5b60608801519094506001600160a01b03811681146200033157600080fd5b925062000341608088016200027f565b915060a087015190509295509295509295565b600181811c908216806200036957607f821691505b6020821081036200038a57634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115620003de57600081815260208120601f850160051c81016020861015620003b95750805b601f850160051c820191505b81811015620003da57828155600101620003c5565b5050505b505050565b81516001600160401b03811115620003ff57620003ff620001ba565b620004178162000410845462000354565b8462000390565b602080601f8311600181146200044f5760008415620004365750858301515b600019600386901b1c1916600185901b178555620003da565b600085815260208120601f198616915b8281101562000480578886015182559484019460019091019084016200045f565b50858210156200049f5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b6000808354620004bf8162000354565b60018281168015620004da5760018114620004f05762000521565b60ff198416875282151583028701945062000521565b8760005260208060002060005b85811015620005185781548a820152908401908201620004fd565b50505082870194505b50929695505050505050565b60805160a05160c05160e051611a9c62000591600039600081816103d4015281816105e701528181610701015281816109e001528181610a7f01528181610dbe0152610e20015260006109bc01526000610987015260006103140152611a9c6000f3fe608060405234801561001057600080fd5b506004361061021c5760003560e01c80637a8c63b511610125578063b7009613116100ad578063dd62ed3e1161007c578063dd62ed3e1461051a578063e688747b14610545578063ea7ca2761461057b578063ed0d0efb146105b2578063f2fde38b146105d257600080fd5b8063b7009613146104b8578063bf7e214f146104cb578063c53a3985146104de578063d505accf1461050757600080fd5b806395d89b41116100f457806395d89b41146104545780639dc29fac1461045c578063a0712d681461046f578063a9059cbb14610482578063aed307771461049557600080fd5b80637a8c63b5146103cf5780637a9e5e4b146103f65780637ecebe00146104095780638da5cb5b1461042957600080fd5b806323b872dd116101a857806342966c681161017757806342966c68146103635780634b5159da1461037657806367aff4841461038957806370a082311461039c578063728b952b146103bc57600080fd5b806323b872dd146102fc578063313ce5671461030f5780633644e5151461034857806340c10f191461035057600080fd5b8063095ea7b3116101ef578063095ea7b3146102915780630bade8a4146102b45780630ea9b75b146102d757806318160ddd146102ea578063239c70ae146102f357600080fd5b806305f05a941461022157806306a36aee1461023657806306fdde0314610269578063088a4ed01461027e575b600080fd5b61023461022f366004611502565b6105e5565b005b61025661024436600461153b565b60096020526000908152604090205481565b6040519081526020015b60405180910390f35b610271610671565b6040516102609190611558565b61023461028c3660046115a6565b6106ff565b6102a461029f3660046115bf565b61075c565b6040519015158152602001610260565b6102a46102c2366004611608565b600a6020526000908152604090205460ff1681565b6102346102e5366004611634565b6107c9565b61025660025481565b610256600c5481565b6102a461030a36600461167b565b6108a1565b6103367f000000000000000000000000000000000000000000000000000000000000000081565b60405160ff9091168152602001610260565b610256610983565b61023461035e3660046115bf565b6109de565b6102346103713660046115a6565b610a7d565b6102346103843660046116bc565b610ae2565b6102346103973660046116d8565b610b74565b6102566103aa36600461153b565b60036020526000908152604090205481565b6102346103ca366004611706565b610c3c565b6102a47f000000000000000000000000000000000000000000000000000000000000000081565b61023461040436600461153b565b610cc5565b61025661041736600461153b565b60056020526000908152604090205481565b60065461043c906001600160a01b031681565b6040516001600160a01b039091168152602001610260565b610271610daf565b61023461046a3660046115bf565b610dbc565b61023461047d3660046115a6565b610e1e565b6102a46104903660046115bf565b610eb9565b6102a46104a336600461153b565b600d6020526000908152604090205460ff1681565b6102a46104c6366004611734565b610f1f565b60075461043c906001600160a01b031681565b61043c6104ec36600461153b565b6008602052600090815260409020546001600160a01b031681565b61023461051536600461177b565b61101d565b610256610528366004611706565b600460209081526000928352604080842090915290825290205481565b6102a46105533660046117e9565b6001600160e01b0319166000908152600b602052604090205460ff919091161c600116151590565b6102a461058936600461181c565b6001600160a01b0391909116600090815260096020526040902054600160ff9092161c16151590565b6102566105c0366004611608565b600b6020526000908152604090205481565b6102346105e036600461153b565b611261565b7f00000000000000000000000000000000000000000000000000000000000000001561064657610621336000356001600160e01b0319166112df565b6106465760405162461bcd60e51b815260040161063d90611848565b60405180910390fd5b6001600160a01b03919091166000908152600d60205260409020805460ff1916911515919091179055565b6000805461067e9061187f565b80601f01602080910402602001604051908101604052809291908181526020018280546106aa9061187f565b80156106f75780601f106106cc576101008083540402835291602001916106f7565b820191906000526020600020905b8154815290600101906020018083116106da57829003601f168201915b505050505081565b7f0000000000000000000000000000000000000000000000000000000000000000156107575761073b336000356001600160e01b0319166112df565b6107575760405162461bcd60e51b815260040161063d90611848565b600c55565b3360008181526004602090815260408083206001600160a01b038716808552925280832085905551919290917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925906107b79086815260200190565b60405180910390a35060015b92915050565b6107df336000356001600160e01b0319166112df565b6107fb5760405162461bcd60e51b815260040161063d906118b9565b801561082b576001600160e01b031982166000908152600b602052604090208054600160ff86161b179055610852565b6001600160e01b031982166000908152600b602052604090208054600160ff86161b191690555b816001600160e01b0319168360ff167fbfe16b2c35ce23dfd1ab0e7b5d086a10060c9b52d1574e1680c881b3b3a2b15183604051610894911515815260200190565b60405180910390a3505050565b6001600160a01b038316600090815260046020908152604080832033845290915281205460001981146108fd576108d883826118f5565b6001600160a01b03861660009081526004602090815260408083203384529091529020555b6001600160a01b038516600090815260036020526040812080548592906109259084906118f5565b90915550506001600160a01b0380851660008181526003602052604090819020805487019055519091871690600080516020611a478339815191529061096e9087815260200190565b60405180910390a360019150505b9392505050565b60007f000000000000000000000000000000000000000000000000000000000000000046146109b9576109b4611389565b905090565b507f000000000000000000000000000000000000000000000000000000000000000090565b7f000000000000000000000000000000000000000000000000000000000000000015610a3657610a1a336000356001600160e01b0319166112df565b610a365760405162461bcd60e51b815260040161063d90611848565b336000908152600d602052604090205460ff16610a6f57600c54811115610a6f5760405162461bcd60e51b815260040161063d90611908565b610a798282611423565b5050565b7f000000000000000000000000000000000000000000000000000000000000000015610ad557610ab9336000356001600160e01b0319166112df565b610ad55760405162461bcd60e51b815260040161063d90611848565b610adf338261147d565b50565b610af8336000356001600160e01b0319166112df565b610b145760405162461bcd60e51b815260040161063d906118b9565b6001600160e01b031982166000818152600a6020908152604091829020805460ff191685151590811790915591519182527f36d28126bef21a4f3765d7fcb7c45cead463ae4c41094ef3b771ede598544103910160405180910390a25050565b610b8a336000356001600160e01b0319166112df565b610ba65760405162461bcd60e51b815260040161063d906118b9565b8015610bd5576001600160a01b03831660009081526009602052604090208054600160ff85161b179055610bfb565b6001600160a01b03831660009081526009602052604090208054600160ff85161b191690555b8160ff16836001600160a01b03167f4c9bdd0c8e073eb5eda2250b18d8e5121ff27b62064fbeeeed4869bb99bc5bf283604051610894911515815260200190565b610c52336000356001600160e01b0319166112df565b610c6e5760405162461bcd60e51b815260040161063d906118b9565b6001600160a01b0382811660008181526008602052604080822080546001600160a01b0319169486169485179055517fa4908e11a5f895b13d51526c331ac93cdd30e59772361c5d07874eb36bff20659190a35050565b6006546001600160a01b0316331480610d5a575060075460405163b700961360e01b81526001600160a01b039091169063b700961390610d1990339030906001600160e01b0319600035169060040161194a565b602060405180830381865afa158015610d36573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d5a9190611977565b610d6357600080fd5b600780546001600160a01b0319166001600160a01b03831690811790915560405133907fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b7638998019890600090a350565b6001805461067e9061187f565b7f000000000000000000000000000000000000000000000000000000000000000015610e1457610df8336000356001600160e01b0319166112df565b610e145760405162461bcd60e51b815260040161063d90611848565b610a79828261147d565b7f000000000000000000000000000000000000000000000000000000000000000015610e7657610e5a336000356001600160e01b0319166112df565b610e765760405162461bcd60e51b815260040161063d90611848565b336000908152600d602052604090205460ff16610eaf57600c54811115610eaf5760405162461bcd60e51b815260040161063d90611908565b610adf3382611423565b33600090815260036020526040812080548391908390610eda9084906118f5565b90915550506001600160a01b03831660008181526003602052604090819020805485019055513390600080516020611a47833981519152906107b79086815260200190565b6001600160a01b038083166000908152600860205260408120549091168015610fbb5760405163b700961360e01b81526001600160a01b0382169063b700961390610f729088908890889060040161194a565b602060405180830381865afa158015610f8f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fb39190611977565b91505061097c565b6001600160e01b031983166000908152600a602052604090205460ff168061101457506001600160e01b031983166000908152600b60209081526040808320546001600160a01b03891684526009909252909120541615155b95945050505050565b4284101561106d5760405162461bcd60e51b815260206004820152601760248201527f5045524d49545f444541444c494e455f45585049524544000000000000000000604482015260640161063d565b60006001611079610983565b6001600160a01b038a811660008181526005602090815260409182902080546001810190915582517f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c98184015280840194909452938d166060840152608083018c905260a083019390935260c08083018b90528151808403909101815260e08301909152805192019190912061190160f01b6101008301526101028201929092526101228101919091526101420160408051601f198184030181528282528051602091820120600084529083018083525260ff871690820152606081018590526080810184905260a0016020604051602081039080840390855afa158015611185573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b038116158015906111bb5750876001600160a01b0316816001600160a01b0316145b6111f85760405162461bcd60e51b815260206004820152600e60248201526d24a72b20a624a22fa9a4a3a722a960911b604482015260640161063d565b6001600160a01b0390811660009081526004602090815260408083208a8516808552908352928190208990555188815291928a16917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a350505050505050565b611277336000356001600160e01b0319166112df565b6112935760405162461bcd60e51b815260040161063d906118b9565b600680546001600160a01b0319166001600160a01b03831690811790915560405133907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a350565b6007546000906001600160a01b03168015801590611369575060405163b700961360e01b81526001600160a01b0382169063b7009613906113289087903090889060040161194a565b602060405180830381865afa158015611345573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113699190611977565b8061138157506006546001600160a01b038581169116145b949350505050565b60007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60006040516113bb9190611994565b6040805191829003822060208301939093528101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201523060a082015260c00160405160208183030381529060405280519060200120905090565b80600260008282546114359190611a33565b90915550506001600160a01b038216600081815260036020908152604080832080548601905551848152600080516020611a4783398151915291015b60405180910390a35050565b6001600160a01b038216600090815260036020526040812080548392906114a59084906118f5565b90915550506002805482900390556040518181526000906001600160a01b03841690600080516020611a4783398151915290602001611471565b6001600160a01b0381168114610adf57600080fd5b8015158114610adf57600080fd5b6000806040838503121561151557600080fd5b8235611520816114df565b91506020830135611530816114f4565b809150509250929050565b60006020828403121561154d57600080fd5b813561097c816114df565b600060208083528351808285015260005b8181101561158557858101830151858201604001528201611569565b506000604082860101526040601f19601f8301168501019250505092915050565b6000602082840312156115b857600080fd5b5035919050565b600080604083850312156115d257600080fd5b82356115dd816114df565b946020939093013593505050565b80356001600160e01b03198116811461160357600080fd5b919050565b60006020828403121561161a57600080fd5b61097c826115eb565b803560ff8116811461160357600080fd5b60008060006060848603121561164957600080fd5b61165284611623565b9250611660602085016115eb565b91506040840135611670816114f4565b809150509250925092565b60008060006060848603121561169057600080fd5b833561169b816114df565b925060208401356116ab816114df565b929592945050506040919091013590565b600080604083850312156116cf57600080fd5b611520836115eb565b6000806000606084860312156116ed57600080fd5b83356116f8816114df565b925061166060208501611623565b6000806040838503121561171957600080fd5b8235611724816114df565b91506020830135611530816114df565b60008060006060848603121561174957600080fd5b8335611754816114df565b92506020840135611764816114df565b9150611772604085016115eb565b90509250925092565b600080600080600080600060e0888a03121561179657600080fd5b87356117a1816114df565b965060208801356117b1816114df565b955060408801359450606088013593506117cd60808901611623565b925060a0880135915060c0880135905092959891949750929550565b600080604083850312156117fc57600080fd5b61180583611623565b9150611813602084016115eb565b90509250929050565b6000806040838503121561182f57600080fd5b823561183a816114df565b915061181360208401611623565b6020808252601d908201527f45524332304d696e7461626c653a206e6f7420617574686f72697a6564000000604082015260600190565b600181811c9082168061189357607f821691505b6020821081036118b357634e487b7160e01b600052602260045260246000fd5b50919050565b6020808252600c908201526b15539055551213d49256915160a21b604082015260600190565b634e487b7160e01b600052601160045260246000fd5b818103818111156107c3576107c36118df565b60208082526022908201527f45524332304d696e7461626c653a20496e76616c6964206d696e7420616d6f756040820152611b9d60f21b606082015260800190565b6001600160a01b0393841681529190921660208201526001600160e01b0319909116604082015260600190565b60006020828403121561198957600080fd5b815161097c816114f4565b600080835481600182811c9150808316806119b057607f831692505b602080841082036119cf57634e487b7160e01b86526022600452602486fd5b8180156119e357600181146119f857611a25565b60ff1986168952841515850289019650611a25565b60008a81526020902060005b86811015611a1d5781548b820152908501908301611a04565b505084890196505b509498975050505050505050565b808201808211156107c3576107c36118df56feddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa2646970667358221220ee82b227e7f66dbf4202c48dd54858551af503f4faa1835de1be2141e77d7eb764736f6c63430008140033"
 )
 
 
 class ERC20MintableContract(Contract):
     """A web3.py Contract class for the ERC20Mintable contract."""
 
     abi: ABI = erc20mintable_abi
-    bytecode: bytes = HexBytes(erc20mintable_bytecode)
+    bytecode: bytes | None = try_bytecode_hexbytes(erc20mintable_bytecode, "erc20mintable")
 
     def __init__(self, address: ChecksumAddress | None = None) -> None:
         try:
             # Initialize parent Contract class
             super().__init__(address=address)
             self.functions = ERC20MintableContractFunctions(erc20mintable_abi, self.w3, address)  # type: ignore
             self.events = ERC20MintableContractEvents(erc20mintable_abi, self.w3, address)  # type: ignore
@@ -2425,15 +2550,15 @@
         current_nonce = w3.eth.get_transaction_count(account.address)
         deployment_tx.update({"nonce": current_nonce})
 
         # Sign the transaction with local account private key
         signed_tx = account.sign_transaction(deployment_tx)
 
         # Send the signed transaction and wait for receipt
-        tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
+        tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
         tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
 
         deployed_contract = deployer(address=tx_receipt.contractAddress)  # type: ignore
         return deployed_contract
 
     @classmethod
     def factory(cls, w3: Web3, class_name: str | None = None, **kwargs: Any) -> Type[Self]:
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/ERC20MintableTypes.py` & `agent0-0.20.0/src/agent0/hypertypes/types/ERC20MintableTypes.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/ERC4626HyperdriveCoreDeployerContract.py` & `agent0-0.20.0/src/agent0/hypertypes/types/ERC4626HyperdriveCoreDeployerContract.py`

 * *Files 4% similar despite different names*

```diff
@@ -26,42 +26,40 @@
 
 from __future__ import annotations
 
 from typing import Any, Type, cast
 
 from eth_account.signers.local import LocalAccount
 from eth_typing import ChecksumAddress, HexStr
-from hexbytes import HexBytes
 from typing_extensions import Self
 from web3 import Web3
 from web3.contract.contract import Contract, ContractConstructor, ContractFunction, ContractFunctions
 from web3.exceptions import FallbackNotFound
 from web3.types import ABI, BlockIdentifier, CallOverride, TxParams
 
 from .IHyperdriveTypes import Fees, PoolConfig
-from .utilities import dataclass_to_tuple, rename_returned_types
+from .utilities import dataclass_to_tuple, rename_returned_types, try_bytecode_hexbytes
 
 structs = {
     "Fees": Fees,
     "PoolConfig": PoolConfig,
 }
 
 
-class ERC4626HyperdriveCoreDeployerDeployContractFunction(ContractFunction):
-    """ContractFunction for the deploy method."""
+class ERC4626HyperdriveCoreDeployerDeployHyperdriveContractFunction(ContractFunction):
+    """ContractFunction for the deployHyperdrive method."""
 
-    def __call__(self, config: PoolConfig, arg2: bytes, target0: str, target1: str, target2: str, target3: str, target4: str, salt: bytes) -> ERC4626HyperdriveCoreDeployerDeployContractFunction:  # type: ignore
+    def __call__(self, config: PoolConfig, arg2: bytes, target0: str, target1: str, target2: str, target3: str, salt: bytes) -> ERC4626HyperdriveCoreDeployerDeployHyperdriveContractFunction:  # type: ignore
         clone = super().__call__(
             dataclass_to_tuple(config),
             dataclass_to_tuple(arg2),
             dataclass_to_tuple(target0),
             dataclass_to_tuple(target1),
             dataclass_to_tuple(target2),
             dataclass_to_tuple(target3),
-            dataclass_to_tuple(target4),
             dataclass_to_tuple(salt),
         )
         self.kwargs = clone.kwargs
         self.args = clone.args
         return self
 
     def call(
@@ -81,53 +79,54 @@
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
 class ERC4626HyperdriveCoreDeployerContractFunctions(ContractFunctions):
     """ContractFunctions for the ERC4626HyperdriveCoreDeployer contract."""
 
-    deploy: ERC4626HyperdriveCoreDeployerDeployContractFunction
+    deployHyperdrive: ERC4626HyperdriveCoreDeployerDeployHyperdriveContractFunction
 
     def __init__(
         self,
         abi: ABI,
         w3: "Web3",
         address: ChecksumAddress | None = None,
         decode_tuples: bool | None = False,
     ) -> None:
         super().__init__(abi, w3, address, decode_tuples)
-        self.deploy = ERC4626HyperdriveCoreDeployerDeployContractFunction.factory(
-            "deploy",
+        self.deployHyperdrive = ERC4626HyperdriveCoreDeployerDeployHyperdriveContractFunction.factory(
+            "deployHyperdrive",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
-            function_identifier="deploy",
+            function_identifier="deployHyperdrive",
         )
 
 
 erc4626hyperdrivecoredeployer_abi: ABI = cast(
     ABI,
     [
         {
             "type": "function",
-            "name": "deploy",
+            "name": "deployHyperdrive",
             "inputs": [
                 {
                     "name": "_config",
                     "type": "tuple",
                     "internalType": "struct IHyperdrive.PoolConfig",
                     "components": [
                         {"name": "baseToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "vaultSharesToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "initialVaultSharePrice", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumShareReserves", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumTransactionAmount", "type": "uint256", "internalType": "uint256"},
+                        {"name": "circuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "positionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "checkpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "timeStretch", "type": "uint256", "internalType": "uint256"},
                         {"name": "governance", "type": "address", "internalType": "address"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {
@@ -144,33 +143,34 @@
                     ],
                 },
                 {"name": "", "type": "bytes", "internalType": "bytes"},
                 {"name": "_target0", "type": "address", "internalType": "address"},
                 {"name": "_target1", "type": "address", "internalType": "address"},
                 {"name": "_target2", "type": "address", "internalType": "address"},
                 {"name": "_target3", "type": "address", "internalType": "address"},
-                {"name": "_target4", "type": "address", "internalType": "address"},
                 {"name": "_salt", "type": "bytes32", "internalType": "bytes32"},
             ],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "nonpayable",
         }
     ],
 )
 # pylint: disable=line-too-long
 erc4626hyperdrivecoredeployer_bytecode = HexStr(
-    "0x608060405234801561001057600080fd5b50611f4d806100206000396000f3fe60806040523480156200001157600080fd5b50600436106200002e5760003560e01c8063ed871fd71462000033575b600080fd5b6200004a6200004436600462000253565b62000066565b6040516001600160a01b03909116815260200160405180910390f35b6040805133602082015290810182905260009060600160405160208183030381529060405280519060200120898888888888604051620000a690620000e6565b620000b796959493929190620003f4565b8190604051809103906000f5905080158015620000d8573d6000803e3d6000fd5b509998505050505050505050565b6119e6806200053283390190565b634e487b7160e01b600052604160045260246000fd5b6040516101c0810167ffffffffffffffff81118282101715620001315762000131620000f4565b60405290565b80356001600160a01b03811681146200014f57600080fd5b919050565b6000608082840312156200016757600080fd5b6040516080810181811067ffffffffffffffff821117156200018d576200018d620000f4565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b600082601f830112620001d057600080fd5b813567ffffffffffffffff80821115620001ee57620001ee620000f4565b604051601f8301601f19908116603f01168101908282118183101715620002195762000219620000f4565b816040528381528660208588010111156200023357600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600080600080600080888a036103008112156200027257600080fd5b610220808212156200028357600080fd5b6200028d6200010a565b91506200029a8b62000137565b8252620002aa60208c0162000137565b6020830152620002bd60408c0162000137565b604083015260608b0135606083015260808b0135608083015260a08b013560a083015260c08b013560c083015260e08b013560e0830152610100808c01358184015250610120808c013581840152506101406200031c818d0162000137565b90830152610160620003308c820162000137565b90830152610180620003448c820162000137565b908301526101a0620003598d8d830162000154565b9083015290985089013567ffffffffffffffff8111156200037957600080fd5b620003878b828c01620001be565b975050620003996102408a0162000137565b9550620003aa6102608a0162000137565b9450620003bb6102808a0162000137565b9350620003cc6102a08a0162000137565b9250620003dd6102c08a0162000137565b91506102e089013590509295985092959890939650565b86516001600160a01b031681526102c0810160208801516200042160208401826001600160a01b03169052565b5060408801516200043d60408401826001600160a01b03169052565b50606088015160608301526080880151608083015260a088015160a083015260c088015160c083015260e088015160e083015261010080890151818401525061012080890151818401525061014080890151620004a4828501826001600160a01b03169052565b5050610160888101516001600160a01b0390811691840191909152610180808a01518216908401526101a09889015180519984019990995260208901516101c084015260408901516101e084015260609098015161020083015295871661022082015293861661024085015291851661026084015284166102808301529092166102a0909201919091529056fe6102e06040523480156200001257600080fd5b50604051620019e6380380620019e683398101604081905262000035916200055b565b6001600081905586516001600160a01b0390811660809081526020808a018051841660a0908152928b01516101a0908152928b01516101c05260c0808c01516101e052610100808d015190915260e0808d01519052610120808d0151909152928b0180515190935282519091015161014090815282516040908101516101609081529351606090810151610180908152918d01518616610200528c015161022052908b0151600a80549186166001600160a01b0319928316179055928b0151600880549186169185169190911790558a01516009805491851691909316179091558188166102405281871661026052818616610280528185166102a0528184166102c0525188516200014a9392169162000156565b5050505050506200071a565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b0390811663095ea7b360e01b17909152620001b090859083906200022216565b6200021c57604080516001600160a01b038516602482015260006044808301919091528251808303909101815260649091019091526020810180516001600160e01b0390811663095ea7b360e01b1790915262000210918691620002d316565b6200021c8482620002d3565b50505050565b6000806000846001600160a01b031684604051620002419190620006c5565b6000604051808303816000865af19150503d806000811462000280576040519150601f19603f3d011682016040523d82523d6000602084013e62000285565b606091505b5091509150818015620002b3575080511580620002b3575080806020019051810190620002b39190620006f6565b8015620002ca57506000856001600160a01b03163b115b95945050505050565b6000620002ea6001600160a01b0384168362000346565b9050805160001415801562000312575080806020019051810190620003109190620006f6565b155b156200034157604051635274afe760e01b81526001600160a01b03841660048201526024015b60405180910390fd5b505050565b606062000356838360006200035d565b9392505050565b606081471015620003845760405163cd78605960e01b815230600482015260240162000338565b600080856001600160a01b03168486604051620003a29190620006c5565b60006040518083038185875af1925050503d8060008114620003e1576040519150601f19603f3d011682016040523d82523d6000602084013e620003e6565b606091505b509092509050620003f986838362000403565b9695505050505050565b6060826200041c57620004168262000467565b62000356565b81511580156200043457506001600160a01b0384163b155b156200045f57604051639996b31560e01b81526001600160a01b038516600482015260240162000338565b508062000356565b805115620004785780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b6040516101c081016001600160401b0381118282101715620004c357634e487b7160e01b600052604160045260246000fd5b60405290565b80516001600160a01b0381168114620004e157600080fd5b919050565b600060808284031215620004f957600080fd5b604051608081016001600160401b03811182821017156200052a57634e487b7160e01b600052604160045260246000fd5b8060405250809150825181526020830151602082015260408301516040820152606083015160608201525092915050565b6000806000806000808688036102c08112156200057757600080fd5b610220808212156200058857600080fd5b6200059262000491565b91506200059f89620004c9565b8252620005af60208a01620004c9565b6020830152620005c260408a01620004c9565b6040830152606089015160608301526080890151608083015260a089015160a083015260c089015160c083015260e089015160e0830152610100808a01518184015250610120808a0151818401525061014062000621818b01620004c9565b90830152610160620006358a8201620004c9565b90830152610180620006498a8201620004c9565b908301526101a06200065e8b8b8301620004e6565b818401525081975062000673818a01620004c9565b96505050620006866102408801620004c9565b9350620006976102608801620004c9565b9250620006a86102808801620004c9565b9150620006b96102a08801620004c9565b90509295509295509295565b6000825160005b81811015620006e85760208186018101518583015201620006cc565b506000920191825250919050565b6000602082840312156200070957600080fd5b815180151581146200035657600080fd5b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516111996200084d60003960008181610657015281816107ec0152610a4701526000818161059c015281816107bc0152818161084a01526109e501526000818161053501528181610a1b0152610a72015260008181610623015281816106c301526107590152600081816101e4015281816103a601528181610693015281816106f5015281816107270152818161078d0152818161081f0152818161087b015281816109b30152610a9b015260005050600050506000505060005050600050506000505060005050600050506000505060005050600050506000505060005050600050506111996000f3fe6080604052600436106101cd5760003560e01c80639cd241af116100f7578063d899e11211610095578063e4af29d111610064578063e4af29d1146102dd578063eac3e79914610611578063f3f7070714610645578063f698da2514610679576101cd565b8063d899e1121461058a578063dbbe8070146105be578063ded06231146105d1578063e44808bc146105f1576101cd565b8063a6e8a859116100d1578063a6e8a85914610523578063ab033ea9146102dd578063cba2e58d14610557578063cbc134341461056a576101cd565b80639cd241af14610503578063a22cb465146104b0578063a42dce80146102dd576101cd565b806330adf81f1161016f5780634ed2d6ac1161013e5780634ed2d6ac146104955780637180c8ca146104b057806377d05ff4146104d05780639032c726146104e3576101cd565b806330adf81f1461040e5780633e691db914610442578063414f826d146104625780634c2ac1d914610482576101cd565b806317fad7fc116101ab57806317fad7fc146103545780631c0f12b61461037457806321b57d531461039457806329b23fc1146103e0576101cd565b806301681a62146102dd57806302329a29146102ff578063074a6de91461031a575b3480156101d957600080fd5b5060003660606000807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316858560405161021c929190610b71565b600060405180830381855af49150503d8060008114610257576040519150601f19603f3d011682016040523d82523d6000602084013e61025c565b606091505b5091509150811561028057604051638bb0a34b60e01b815260040160405180910390fd5b600061028b82610b81565b90506001600160e01b03198116636e64089360e11b146102ad57815160208301fd5b8151600319810160048401908152926102ce91810160200190602401610bf2565b80519650602001945050505050f35b3480156102e957600080fd5b506102fd6102f8366004610cb7565b61068e565b005b34801561030b57600080fd5b506102fd6102f8366004610cf0565b34801561032657600080fd5b5061033a610335366004610d1d565b6106bb565b604080519283526020830191909152015b60405180910390f35b34801561036057600080fd5b506102fd61036f366004610db9565b6106f0565b34801561038057600080fd5b506102fd61038f366004610e4e565b610722565b3480156103a057600080fd5b506103c87f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b03909116815260200161034b565b3480156103ec57600080fd5b506104006103fb366004610e96565b610752565b60405190815260200161034b565b34801561041a57600080fd5b506104007f65619c8664d6db8aae8c236ad19598696159942a4245b23b45565cc18e97367381565b34801561044e57600080fd5b5061040061045d366004610ef0565b610786565b34801561046e57600080fd5b506102fd61047d366004610f2d565b6107b7565b610400610490366004610f4f565b6107e5565b3480156104a157600080fd5b506102fd61038f366004610fb3565b3480156104bc57600080fd5b506102fd6104cb366004610ffd565b61081a565b6104006104de366004610d1d565b610843565b3480156104ef57600080fd5b506102fd6104fe366004611032565b610876565b34801561050f57600080fd5b506102fd61051e3660046110b0565b6109ae565b34801561052f57600080fd5b506103c87f000000000000000000000000000000000000000000000000000000000000000081565b61033a610565366004610e96565b6109dd565b34801561057657600080fd5b5061033a610585366004610d1d565b610a13565b34801561059657600080fd5b506103c87f000000000000000000000000000000000000000000000000000000000000000081565b61033a6105cc366004610e96565b610a3f565b3480156105dd57600080fd5b506104006105ec366004610e96565b610a6b565b3480156105fd57600080fd5b506102fd61060c3660046110e8565b610a96565b34801561061d57600080fd5b506103c87f000000000000000000000000000000000000000000000000000000000000000081565b34801561065157600080fd5b506103c87f000000000000000000000000000000000000000000000000000000000000000081565b34801561068557600080fd5b50610400610ac7565b6106b77f0000000000000000000000000000000000000000000000000000000000000000610b55565b5050565b6000806106e77f0000000000000000000000000000000000000000000000000000000000000000610b55565b50935093915050565b6107197f0000000000000000000000000000000000000000000000000000000000000000610b55565b50505050505050565b61074b7f0000000000000000000000000000000000000000000000000000000000000000610b55565b5050505050565b600061077d7f0000000000000000000000000000000000000000000000000000000000000000610b55565b50949350505050565b60006107b17f0000000000000000000000000000000000000000000000000000000000000000610b55565b50919050565b6107e07f0000000000000000000000000000000000000000000000000000000000000000610b55565b505050565b60006108107f0000000000000000000000000000000000000000000000000000000000000000610b55565b5095945050505050565b6107e07f0000000000000000000000000000000000000000000000000000000000000000610b55565b600061086e7f0000000000000000000000000000000000000000000000000000000000000000610b55565b509392505050565b6000807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166108ab610ac7565b60405160248101919091527f65619c8664d6db8aae8c236ad19598696159942a4245b23b45565cc18e97367360448201526001600160a01b03808c1660648301528a16608482015288151560a482015260c4810188905260ff871660e4820152610104810186905261012481018590526101440160408051601f198184030181529181526020820180516001600160e01b03166314e5f07b60e01b179052516109549190611147565b600060405180830381855af49150503d806000811461098f576040519150601f19603f3d011682016040523d82523d6000602084013e610994565b606091505b5091509150816109a657805160208201fd5b805160208201f35b6109d77f0000000000000000000000000000000000000000000000000000000000000000610b55565b50505050565b600080610a097f0000000000000000000000000000000000000000000000000000000000000000610b55565b5094509492505050565b6000806106e77f0000000000000000000000000000000000000000000000000000000000000000610b55565b600080610a097f0000000000000000000000000000000000000000000000000000000000000000610b55565b600061077d7f0000000000000000000000000000000000000000000000000000000000000000610b55565b610abf7f0000000000000000000000000000000000000000000000000000000000000000610b55565b505050505050565b60408051808201825260018152603160f81b60209182015281517f2aef22f9d7df5f9d21c56d14029233f3fdaa91917727e1eb68e504d27072d6cd818301527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc681840152466060820152306080808301919091528351808303909101815260a0909101909252815191012090565b6060600080836001600160a01b03166000366040516109549291905b8183823760009101908152919050565b805160208201516001600160e01b03198082169291906004831015610bb05780818460040360031b1b83161693505b505050919050565b634e487b7160e01b600052604160045260246000fd5b60005b83811015610be9578181015183820152602001610bd1565b50506000910152565b600060208284031215610c0457600080fd5b815167ffffffffffffffff80821115610c1c57600080fd5b818401915084601f830112610c3057600080fd5b815181811115610c4257610c42610bb8565b604051601f8201601f19908116603f01168101908382118183101715610c6a57610c6a610bb8565b81604052828152876020848701011115610c8357600080fd5b610c94836020830160208801610bce565b979650505050505050565b6001600160a01b0381168114610cb457600080fd5b50565b600060208284031215610cc957600080fd5b8135610cd481610c9f565b9392505050565b80358015158114610ceb57600080fd5b919050565b600060208284031215610d0257600080fd5b610cd482610cdb565b6000606082840312156107b157600080fd5b600080600060608486031215610d3257600080fd5b8335925060208401359150604084013567ffffffffffffffff811115610d5757600080fd5b610d6386828701610d0b565b9150509250925092565b60008083601f840112610d7f57600080fd5b50813567ffffffffffffffff811115610d9757600080fd5b6020830191508360208260051b8501011115610db257600080fd5b9250929050565b60008060008060008060808789031215610dd257600080fd5b8635610ddd81610c9f565b95506020870135610ded81610c9f565b9450604087013567ffffffffffffffff80821115610e0a57600080fd5b610e168a838b01610d6d565b90965094506060890135915080821115610e2f57600080fd5b50610e3c89828a01610d6d565b979a9699509497509295939492505050565b60008060008060808587031215610e6457600080fd5b843593506020850135610e7681610c9f565b92506040850135610e8681610c9f565b9396929550929360600135925050565b60008060008060808587031215610eac57600080fd5b843593506020850135925060408501359150606085013567ffffffffffffffff811115610ed857600080fd5b610ee487828801610d0b565b91505092959194509250565b600060208284031215610f0257600080fd5b813567ffffffffffffffff811115610f1957600080fd5b610f2584828501610d0b565b949350505050565b60008060408385031215610f4057600080fd5b50508035926020909101359150565b600080600080600060a08688031215610f6757600080fd5b85359450602086013593506040860135925060608601359150608086013567ffffffffffffffff811115610f9a57600080fd5b610fa688828901610d0b565b9150509295509295909350565b60008060008060808587031215610fc957600080fd5b843593506020850135610fdb81610c9f565b9250604085013591506060850135610ff281610c9f565b939692955090935050565b6000806040838503121561101057600080fd5b823561101b81610c9f565b915061102960208401610cdb565b90509250929050565b600080600080600080600060e0888a03121561104d57600080fd5b873561105881610c9f565b9650602088013561106881610c9f565b955061107660408901610cdb565b945060608801359350608088013560ff8116811461109357600080fd5b9699959850939692959460a0840135945060c09093013592915050565b6000806000606084860312156110c557600080fd5b8335925060208401356110d781610c9f565b929592945050506040919091013590565b600080600080600060a0868803121561110057600080fd5b85359450602086013561111281610c9f565b9350604086013561112281610c9f565b925060608601359150608086013561113981610c9f565b809150509295509295909350565b60008251611159818460208701610bce565b919091019291505056fea2646970667358221220df83c1c67ddfbb1c741090baf8a0aaff066b2e016d20bdd8200387da2ffe15e364736f6c63430008140033a264697066735822122000882ef16cf4a226dca73e247421292b910b75cef42d69954ca009330fe95b5d64736f6c63430008140033"
+    "0x608060405234801561001057600080fd5b50611e19806100206000396000f3fe60806040523480156200001157600080fd5b50600436106200002e5760003560e01c8063907d12e91462000033575b600080fd5b6200004a6200004436600462000253565b62000066565b6040516001600160a01b03909116815260200160405180910390f35b604080513360208201529081018290526000908190606001604051602081830303815290604052805190602001208988888888604051620000a790620000e6565b620000b7959493929190620003ed565b8190604051809103906000f5905080158015620000d8573d6000803e3d6000fd5b509998505050505050505050565b6118b5806200052f83390190565b634e487b7160e01b600052604160045260246000fd5b6040516101e0810167ffffffffffffffff81118282101715620001315762000131620000f4565b60405290565b80356001600160a01b03811681146200014f57600080fd5b919050565b6000608082840312156200016757600080fd5b6040516080810181811067ffffffffffffffff821117156200018d576200018d620000f4565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b600082601f830112620001d057600080fd5b813567ffffffffffffffff80821115620001ee57620001ee620000f4565b604051601f8301601f19908116603f01168101908282118183101715620002195762000219620000f4565b816040528381528660208588010111156200023357600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060008060008060008789036103008112156200027157600080fd5b610240808212156200028257600080fd5b6200028c6200010a565b9150620002998a62000137565b8252620002a960208b0162000137565b6020830152620002bc60408b0162000137565b604083015260608a0135606083015260808a0135608083015260a08a013560a083015260c08a013560c083015260e08a013560e0830152610100808b01358184015250610120808b01358184015250610140808b0135818401525061016062000327818c0162000137565b908301526101806200033b8b820162000137565b908301526101a06200034f8b820162000137565b908301526101c0620003648c8c830162000154565b9083015290975088013567ffffffffffffffff8111156200038457600080fd5b620003928a828b01620001be565b965050620003a4610260890162000137565b9450620003b5610280890162000137565b9350620003c66102a0890162000137565b9250620003d76102c0890162000137565b91506102e0880135905092959891949750929550565b85516001600160a01b031681526102c0810160208701516200041a60208401826001600160a01b03169052565b5060408701516200043660408401826001600160a01b03169052565b50606087015160608301526080870151608083015260a087015160a083015260c087015160c083015260e087015160e083015261010080880151818401525061012080880151818401525061014080880151818401525061016080880151620004a9828501826001600160a01b03169052565b5050610180878101516001600160a01b03908116918401919091526101a0808901518216908401526101c09788015180519884019890985260208801516101e084015260408801516102008401526060909701516102208301529486166102408201529285166102608401529084166102808301529092166102a0909201919091529056fe6102e06040523480156200001257600080fd5b50604051620018b5380380620018b583398101604081905262000035916200055d565b6001600081905585516001600160a01b03908116608090815260208089018051841660a0908152928a01516101a0908152928a01516101c090815260c0808c01516101e05260e0808d015161020052610120808e0151909252610100808e0151909152610140808e0151909152918c01805151909152805190930151905281516040908101516101609081529251606090810151610180908152918c01518616610220528b015161024052918a0151600a80549186166001600160a01b0319928316179055918a01516008805491861691841691909117905591890151600980549185169190921617905581871661026052818616610280528185166102a0528184166102c0525187516200014d9392169162000158565b505050505062000716565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b0390811663095ea7b360e01b17909152620001b290859083906200022416565b6200021e57604080516001600160a01b038516602482015260006044808301919091528251808303909101815260649091019091526020810180516001600160e01b0390811663095ea7b360e01b1790915262000212918691620002d516565b6200021e8482620002d5565b50505050565b6000806000846001600160a01b031684604051620002439190620006c1565b6000604051808303816000865af19150503d806000811462000282576040519150601f19603f3d011682016040523d82523d6000602084013e62000287565b606091505b5091509150818015620002b5575080511580620002b5575080806020019051810190620002b59190620006f2565b8015620002cc57506000856001600160a01b03163b115b95945050505050565b6000620002ec6001600160a01b0384168362000348565b9050805160001415801562000314575080806020019051810190620003129190620006f2565b155b156200034357604051635274afe760e01b81526001600160a01b03841660048201526024015b60405180910390fd5b505050565b606062000358838360006200035f565b9392505050565b606081471015620003865760405163cd78605960e01b81523060048201526024016200033a565b600080856001600160a01b03168486604051620003a49190620006c1565b60006040518083038185875af1925050503d8060008114620003e3576040519150601f19603f3d011682016040523d82523d6000602084013e620003e8565b606091505b509092509050620003fb86838362000405565b9695505050505050565b6060826200041e57620004188262000469565b62000358565b81511580156200043657506001600160a01b0384163b155b156200046157604051639996b31560e01b81526001600160a01b03851660048201526024016200033a565b508062000358565b8051156200047a5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b6040516101e081016001600160401b0381118282101715620004c557634e487b7160e01b600052604160045260246000fd5b60405290565b80516001600160a01b0381168114620004e357600080fd5b919050565b600060808284031215620004fb57600080fd5b604051608081016001600160401b03811182821017156200052c57634e487b7160e01b600052604160045260246000fd5b8060405250809150825181526020830151602082015260408301516040820152606083015160608201525092915050565b60008060008060008587036102c08112156200057857600080fd5b610240808212156200058957600080fd5b6200059362000493565b9150620005a088620004cb565b8252620005b060208901620004cb565b6020830152620005c360408901620004cb565b6040830152606088015160608301526080880151608083015260a088015160a083015260c088015160c083015260e088015160e08301526101008089015181840152506101208089015181840152506101408089015181840152506101606200062e818a01620004cb565b9083015261018062000642898201620004cb565b908301526101a062000656898201620004cb565b908301526101c06200066b8a8a8301620004e8565b818401525081965062000680818901620004cb565b95505050620006936102608701620004cb565b9250620006a46102808701620004cb565b9150620006b56102a08701620004cb565b90509295509295909350565b6000825160005b81811015620006e45760208186018101518583015201620006c8565b506000920191825250919050565b6000602082840312156200070557600080fd5b815180151581146200035857600080fd5b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516110846200083160003960008181610571015281816106310152818161072a0152818161075a01526107b801526000818161052a01526109530152600081816105c501526106c70152600081816101d90152818161039b015281816106010152818161066301528181610695015281816106fb0152818161078d015281816107e901528181610921015261098601526000505060005050600050506000505060005050600050506000505060005050600050506000505060005050600050506000505060005050600050506110846000f3fe6080604052600436106101c25760003560e01c80639032c726116100f7578063cbc1343411610095578063e44808bc11610064578063e44808bc14610593578063e4af29d1146102d2578063eac3e799146105b3578063f698da25146105e7576101c2565b8063cbc134341461030f578063d899e1121461055f578063dbbe80701461054c578063ded06231146103d5576101c2565b8063a42dce80116100d1578063a42dce80146102d2578063a6e8a85914610518578063ab033ea9146102d2578063cba2e58d1461054c576101c2565b80639032c726146104d85780639cd241af146104f8578063a22cb465146104a5576101c2565b806330adf81f116101645780634c2ac1d91161013e5780634c2ac1d9146104775780634ed2d6ac1461048a5780637180c8ca146104a557806377d05ff4146104c5576101c2565b806330adf81f146104035780633e691db914610437578063414f826d14610457576101c2565b806317fad7fc116101a057806317fad7fc146103495780631c0f12b61461036957806321b57d531461038957806329b23fc1146103d5576101c2565b806301681a62146102d257806302329a29146102f4578063074a6de91461030f575b3480156101ce57600080fd5b5060003660606000807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168585604051610211929190610a5c565b600060405180830381855af49150503d806000811461024c576040519150601f19603f3d011682016040523d82523d6000602084013e610251565b606091505b5091509150811561027557604051638bb0a34b60e01b815260040160405180910390fd5b600061028082610a6c565b90506001600160e01b03198116636e64089360e11b146102a257815160208301fd5b8151600319810160048401908152926102c391810160200190602401610add565b80519650602001945050505050f35b3480156102de57600080fd5b506102f26102ed366004610ba2565b6105fc565b005b34801561030057600080fd5b506102f26102ed366004610bdb565b34801561031b57600080fd5b5061032f61032a366004610c08565b610629565b604080519283526020830191909152015b60405180910390f35b34801561035557600080fd5b506102f2610364366004610ca4565b61065e565b34801561037557600080fd5b506102f2610384366004610d39565b610690565b34801561039557600080fd5b506103bd7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b039091168152602001610340565b3480156103e157600080fd5b506103f56103f0366004610d81565b6106c0565b604051908152602001610340565b34801561040f57600080fd5b506103f57f65619c8664d6db8aae8c236ad19598696159942a4245b23b45565cc18e97367381565b34801561044357600080fd5b506103f5610452366004610ddb565b6106f4565b34801561046357600080fd5b506102f2610472366004610e18565b610725565b6103f5610485366004610e3a565b610753565b34801561049657600080fd5b506102f2610384366004610e9e565b3480156104b157600080fd5b506102f26104c0366004610ee8565b610788565b6103f56104d3366004610c08565b6107b1565b3480156104e457600080fd5b506102f26104f3366004610f1d565b6107e4565b34801561050457600080fd5b506102f2610513366004610f9b565b61091c565b34801561052457600080fd5b506103bd7f000000000000000000000000000000000000000000000000000000000000000081565b61032f61055a366004610d81565b61094b565b34801561056b57600080fd5b506103bd7f000000000000000000000000000000000000000000000000000000000000000081565b34801561059f57600080fd5b506102f26105ae366004610fd3565b610981565b3480156105bf57600080fd5b506103bd7f000000000000000000000000000000000000000000000000000000000000000081565b3480156105f357600080fd5b506103f56109b2565b6106257f0000000000000000000000000000000000000000000000000000000000000000610a40565b5050565b6000806106557f0000000000000000000000000000000000000000000000000000000000000000610a40565b50935093915050565b6106877f0000000000000000000000000000000000000000000000000000000000000000610a40565b50505050505050565b6106b97f0000000000000000000000000000000000000000000000000000000000000000610a40565b5050505050565b60006106eb7f0000000000000000000000000000000000000000000000000000000000000000610a40565b50949350505050565b600061071f7f0000000000000000000000000000000000000000000000000000000000000000610a40565b50919050565b61074e7f0000000000000000000000000000000000000000000000000000000000000000610a40565b505050565b600061077e7f0000000000000000000000000000000000000000000000000000000000000000610a40565b5095945050505050565b61074e7f0000000000000000000000000000000000000000000000000000000000000000610a40565b60006107dc7f0000000000000000000000000000000000000000000000000000000000000000610a40565b509392505050565b6000807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166108196109b2565b60405160248101919091527f65619c8664d6db8aae8c236ad19598696159942a4245b23b45565cc18e97367360448201526001600160a01b03808c1660648301528a16608482015288151560a482015260c4810188905260ff871660e4820152610104810186905261012481018590526101440160408051601f198184030181529181526020820180516001600160e01b03166314e5f07b60e01b179052516108c29190611032565b600060405180830381855af49150503d80600081146108fd576040519150601f19603f3d011682016040523d82523d6000602084013e610902565b606091505b50915091508161091457805160208201fd5b805160208201f35b6109457f0000000000000000000000000000000000000000000000000000000000000000610a40565b50505050565b6000806109777f0000000000000000000000000000000000000000000000000000000000000000610a40565b5094509492505050565b6109aa7f0000000000000000000000000000000000000000000000000000000000000000610a40565b505050505050565b60408051808201825260018152603160f81b60209182015281517f2aef22f9d7df5f9d21c56d14029233f3fdaa91917727e1eb68e504d27072d6cd818301527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc681840152466060820152306080808301919091528351808303909101815260a0909101909252815191012090565b6060600080836001600160a01b03166000366040516108c29291905b8183823760009101908152919050565b805160208201516001600160e01b03198082169291906004831015610a9b5780818460040360031b1b83161693505b505050919050565b634e487b7160e01b600052604160045260246000fd5b60005b83811015610ad4578181015183820152602001610abc565b50506000910152565b600060208284031215610aef57600080fd5b815167ffffffffffffffff80821115610b0757600080fd5b818401915084601f830112610b1b57600080fd5b815181811115610b2d57610b2d610aa3565b604051601f8201601f19908116603f01168101908382118183101715610b5557610b55610aa3565b81604052828152876020848701011115610b6e57600080fd5b610b7f836020830160208801610ab9565b979650505050505050565b6001600160a01b0381168114610b9f57600080fd5b50565b600060208284031215610bb457600080fd5b8135610bbf81610b8a565b9392505050565b80358015158114610bd657600080fd5b919050565b600060208284031215610bed57600080fd5b610bbf82610bc6565b60006060828403121561071f57600080fd5b600080600060608486031215610c1d57600080fd5b8335925060208401359150604084013567ffffffffffffffff811115610c4257600080fd5b610c4e86828701610bf6565b9150509250925092565b60008083601f840112610c6a57600080fd5b50813567ffffffffffffffff811115610c8257600080fd5b6020830191508360208260051b8501011115610c9d57600080fd5b9250929050565b60008060008060008060808789031215610cbd57600080fd5b8635610cc881610b8a565b95506020870135610cd881610b8a565b9450604087013567ffffffffffffffff80821115610cf557600080fd5b610d018a838b01610c58565b90965094506060890135915080821115610d1a57600080fd5b50610d2789828a01610c58565b979a9699509497509295939492505050565b60008060008060808587031215610d4f57600080fd5b843593506020850135610d6181610b8a565b92506040850135610d7181610b8a565b9396929550929360600135925050565b60008060008060808587031215610d9757600080fd5b843593506020850135925060408501359150606085013567ffffffffffffffff811115610dc357600080fd5b610dcf87828801610bf6565b91505092959194509250565b600060208284031215610ded57600080fd5b813567ffffffffffffffff811115610e0457600080fd5b610e1084828501610bf6565b949350505050565b60008060408385031215610e2b57600080fd5b50508035926020909101359150565b600080600080600060a08688031215610e5257600080fd5b85359450602086013593506040860135925060608601359150608086013567ffffffffffffffff811115610e8557600080fd5b610e9188828901610bf6565b9150509295509295909350565b60008060008060808587031215610eb457600080fd5b843593506020850135610ec681610b8a565b9250604085013591506060850135610edd81610b8a565b939692955090935050565b60008060408385031215610efb57600080fd5b8235610f0681610b8a565b9150610f1460208401610bc6565b90509250929050565b600080600080600080600060e0888a031215610f3857600080fd5b8735610f4381610b8a565b96506020880135610f5381610b8a565b9550610f6160408901610bc6565b945060608801359350608088013560ff81168114610f7e57600080fd5b9699959850939692959460a0840135945060c09093013592915050565b600080600060608486031215610fb057600080fd5b833592506020840135610fc281610b8a565b929592945050506040919091013590565b600080600080600060a08688031215610feb57600080fd5b853594506020860135610ffd81610b8a565b9350604086013561100d81610b8a565b925060608601359150608086013561102481610b8a565b809150509295509295909350565b60008251611044818460208701610ab9565b919091019291505056fea2646970667358221220a1ebff794cee653f4401d2e7f5cd0f71699e8e6035eecdbefdf993b541ee01f364736f6c63430008140033a2646970667358221220404b60a7753eb4634b7670134585e39e00b24c6673978e13037570721b331a6564736f6c63430008140033"
 )
 
 
 class ERC4626HyperdriveCoreDeployerContract(Contract):
     """A web3.py Contract class for the ERC4626HyperdriveCoreDeployer contract."""
 
     abi: ABI = erc4626hyperdrivecoredeployer_abi
-    bytecode: bytes = HexBytes(erc4626hyperdrivecoredeployer_bytecode)
+    bytecode: bytes | None = try_bytecode_hexbytes(
+        erc4626hyperdrivecoredeployer_bytecode, "erc4626hyperdrivecoredeployer"
+    )
 
     def __init__(self, address: ChecksumAddress | None = None) -> None:
         try:
             # Initialize parent Contract class
             super().__init__(address=address)
             self.functions = ERC4626HyperdriveCoreDeployerContractFunctions(erc4626hyperdrivecoredeployer_abi, self.w3, address)  # type: ignore
 
@@ -232,15 +232,15 @@
         current_nonce = w3.eth.get_transaction_count(account.address)
         deployment_tx.update({"nonce": current_nonce})
 
         # Sign the transaction with local account private key
         signed_tx = account.sign_transaction(deployment_tx)
 
         # Send the signed transaction and wait for receipt
-        tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
+        tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
         tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
 
         deployed_contract = deployer(address=tx_receipt.contractAddress)  # type: ignore
         return deployed_contract
 
     @classmethod
     def factory(cls, w3: Web3, class_name: str | None = None, **kwargs: Any) -> Type[Self]:
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/ERC4626HyperdriveDeployerCoordinatorContract.py` & `agent0-0.20.0/src/agent0/hypertypes/types/ERC4626HyperdriveDeployerCoordinatorContract.py`

 * *Files 1% similar despite different names*

```diff
@@ -37,15 +37,15 @@
 from web3 import Web3
 from web3.contract.contract import Contract, ContractConstructor, ContractFunction, ContractFunctions
 from web3.exceptions import FallbackNotFound
 from web3.types import ABI, ABIFunction, BlockIdentifier, CallOverride, TxParams
 
 from .HyperdriveDeployerCoordinatorTypes import Deployment
 from .IHyperdriveTypes import Fees, Options, PoolDeployConfig
-from .utilities import dataclass_to_tuple, get_abi_input_types, rename_returned_types
+from .utilities import dataclass_to_tuple, get_abi_input_types, rename_returned_types, try_bytecode_hexbytes
 
 structs = {
     "Fees": Fees,
     "PoolDeployConfig": PoolDeployConfig,
     "Deployment": Deployment,
     "Options": Options,
 }
@@ -74,18 +74,18 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
-class ERC4626HyperdriveDeployerCoordinatorDeployContractFunction(ContractFunction):
-    """ContractFunction for the deploy method."""
+class ERC4626HyperdriveDeployerCoordinatorDeployHyperdriveContractFunction(ContractFunction):
+    """ContractFunction for the deployHyperdrive method."""
 
-    def __call__(self, deploymentId: bytes, deployConfig: PoolDeployConfig, extraData: bytes, salt: bytes) -> ERC4626HyperdriveDeployerCoordinatorDeployContractFunction:  # type: ignore
+    def __call__(self, deploymentId: bytes, deployConfig: PoolDeployConfig, extraData: bytes, salt: bytes) -> ERC4626HyperdriveDeployerCoordinatorDeployHyperdriveContractFunction:  # type: ignore
         clone = super().__call__(
             dataclass_to_tuple(deploymentId),
             dataclass_to_tuple(deployConfig),
             dataclass_to_tuple(extraData),
             dataclass_to_tuple(salt),
         )
         self.kwargs = clone.kwargs
@@ -193,14 +193,41 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
+class ERC4626HyperdriveDeployerCoordinatorGetNumberOfTargetsContractFunction(ContractFunction):
+    """ContractFunction for the getNumberOfTargets method."""
+
+    def __call__(self) -> ERC4626HyperdriveDeployerCoordinatorGetNumberOfTargetsContractFunction:  # type: ignore
+        clone = super().__call__()
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> int:
+        """returns int."""
+        # Define the expected return types from the smart contract call
+
+        return_types = int
+
+        # Call the function
+
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+        return cast(int, rename_returned_types(structs, return_types, raw_values))
+
+
 class ERC4626HyperdriveDeployerCoordinatorInitializeContractFunction(ContractFunction):
     """ContractFunction for the initialize method."""
 
     def __call__(self, deploymentId: bytes, lp: str, contribution: int, apr: int, options: Options) -> ERC4626HyperdriveDeployerCoordinatorInitializeContractFunction:  # type: ignore
         clone = super().__call__(
             dataclass_to_tuple(deploymentId),
             dataclass_to_tuple(lp),
@@ -226,14 +253,41 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(int, rename_returned_types(structs, return_types, raw_values))
 
 
+class ERC4626HyperdriveDeployerCoordinatorNameContractFunction(ContractFunction):
+    """ContractFunction for the name method."""
+
+    def __call__(self) -> ERC4626HyperdriveDeployerCoordinatorNameContractFunction:  # type: ignore
+        clone = super().__call__()
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> str:
+        """returns str."""
+        # Define the expected return types from the smart contract call
+
+        return_types = str
+
+        # Call the function
+
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+        return cast(str, rename_returned_types(structs, return_types, raw_values))
+
+
 class ERC4626HyperdriveDeployerCoordinatorTarget0DeployerContractFunction(ContractFunction):
     """ContractFunction for the target0Deployer method."""
 
     def __call__(self) -> ERC4626HyperdriveDeployerCoordinatorTarget0DeployerContractFunction:  # type: ignore
         clone = super().__call__()
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -334,18 +388,18 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
-class ERC4626HyperdriveDeployerCoordinatorTarget4DeployerContractFunction(ContractFunction):
-    """ContractFunction for the target4Deployer method."""
+class ERC4626HyperdriveDeployerCoordinatorVersionContractFunction(ContractFunction):
+    """ContractFunction for the version method."""
 
-    def __call__(self) -> ERC4626HyperdriveDeployerCoordinatorTarget4DeployerContractFunction:  # type: ignore
+    def __call__(self) -> ERC4626HyperdriveDeployerCoordinatorVersionContractFunction:  # type: ignore
         clone = super().__call__()
         self.kwargs = clone.kwargs
         self.args = clone.args
         return self
 
     def call(
         self,
@@ -366,33 +420,37 @@
 
 
 class ERC4626HyperdriveDeployerCoordinatorContractFunctions(ContractFunctions):
     """ContractFunctions for the ERC4626HyperdriveDeployerCoordinator contract."""
 
     coreDeployer: ERC4626HyperdriveDeployerCoordinatorCoreDeployerContractFunction
 
-    deploy: ERC4626HyperdriveDeployerCoordinatorDeployContractFunction
+    deployHyperdrive: ERC4626HyperdriveDeployerCoordinatorDeployHyperdriveContractFunction
 
     deployTarget: ERC4626HyperdriveDeployerCoordinatorDeployTargetContractFunction
 
     deployments: ERC4626HyperdriveDeployerCoordinatorDeploymentsContractFunction
 
     factory: ERC4626HyperdriveDeployerCoordinatorFactoryContractFunction
 
+    getNumberOfTargets: ERC4626HyperdriveDeployerCoordinatorGetNumberOfTargetsContractFunction
+
     initialize: ERC4626HyperdriveDeployerCoordinatorInitializeContractFunction
 
+    name: ERC4626HyperdriveDeployerCoordinatorNameContractFunction
+
     target0Deployer: ERC4626HyperdriveDeployerCoordinatorTarget0DeployerContractFunction
 
     target1Deployer: ERC4626HyperdriveDeployerCoordinatorTarget1DeployerContractFunction
 
     target2Deployer: ERC4626HyperdriveDeployerCoordinatorTarget2DeployerContractFunction
 
     target3Deployer: ERC4626HyperdriveDeployerCoordinatorTarget3DeployerContractFunction
 
-    target4Deployer: ERC4626HyperdriveDeployerCoordinatorTarget4DeployerContractFunction
+    version: ERC4626HyperdriveDeployerCoordinatorVersionContractFunction
 
     def __init__(
         self,
         abi: ABI,
         w3: "Web3",
         address: ChecksumAddress | None = None,
         decode_tuples: bool | None = False,
@@ -402,21 +460,21 @@
             "coreDeployer",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="coreDeployer",
         )
-        self.deploy = ERC4626HyperdriveDeployerCoordinatorDeployContractFunction.factory(
-            "deploy",
+        self.deployHyperdrive = ERC4626HyperdriveDeployerCoordinatorDeployHyperdriveContractFunction.factory(
+            "deployHyperdrive",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
-            function_identifier="deploy",
+            function_identifier="deployHyperdrive",
         )
         self.deployTarget = ERC4626HyperdriveDeployerCoordinatorDeployTargetContractFunction.factory(
             "deployTarget",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
@@ -434,22 +492,38 @@
             "factory",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="factory",
         )
+        self.getNumberOfTargets = ERC4626HyperdriveDeployerCoordinatorGetNumberOfTargetsContractFunction.factory(
+            "getNumberOfTargets",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="getNumberOfTargets",
+        )
         self.initialize = ERC4626HyperdriveDeployerCoordinatorInitializeContractFunction.factory(
             "initialize",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="initialize",
         )
+        self.name = ERC4626HyperdriveDeployerCoordinatorNameContractFunction.factory(
+            "name",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="name",
+        )
         self.target0Deployer = ERC4626HyperdriveDeployerCoordinatorTarget0DeployerContractFunction.factory(
             "target0Deployer",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="target0Deployer",
@@ -474,21 +548,21 @@
             "target3Deployer",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="target3Deployer",
         )
-        self.target4Deployer = ERC4626HyperdriveDeployerCoordinatorTarget4DeployerContractFunction.factory(
-            "target4Deployer",
+        self.version = ERC4626HyperdriveDeployerCoordinatorVersionContractFunction.factory(
+            "version",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
-            function_identifier="target4Deployer",
+            function_identifier="version",
         )
 
 
 class ERC4626HyperdriveDeployerCoordinatorAddressEmptyCodeContractError:
     """ContractError for AddressEmptyCode."""
 
     # @combomethod destroys return types, so we are redefining functions as both class and instance
@@ -1984,41 +2058,41 @@
             "inputs": [
                 {"name": "_factory", "type": "address", "internalType": "address"},
                 {"name": "_coreDeployer", "type": "address", "internalType": "address"},
                 {"name": "_target0Deployer", "type": "address", "internalType": "address"},
                 {"name": "_target1Deployer", "type": "address", "internalType": "address"},
                 {"name": "_target2Deployer", "type": "address", "internalType": "address"},
                 {"name": "_target3Deployer", "type": "address", "internalType": "address"},
-                {"name": "_target4Deployer", "type": "address", "internalType": "address"},
             ],
             "stateMutability": "nonpayable",
         },
         {
             "type": "function",
             "name": "coreDeployer",
             "inputs": [],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
-            "name": "deploy",
+            "name": "deployHyperdrive",
             "inputs": [
                 {"name": "_deploymentId", "type": "bytes32", "internalType": "bytes32"},
                 {
                     "name": "_deployConfig",
                     "type": "tuple",
                     "internalType": "struct IHyperdrive.PoolDeployConfig",
                     "components": [
                         {"name": "baseToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "vaultSharesToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "minimumShareReserves", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumTransactionAmount", "type": "uint256", "internalType": "uint256"},
+                        {"name": "circuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "positionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "checkpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "timeStretch", "type": "uint256", "internalType": "uint256"},
                         {"name": "governance", "type": "address", "internalType": "address"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {
@@ -2052,14 +2126,15 @@
                     "components": [
                         {"name": "baseToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "vaultSharesToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "minimumShareReserves", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumTransactionAmount", "type": "uint256", "internalType": "uint256"},
+                        {"name": "circuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "positionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "checkpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "timeStretch", "type": "uint256", "internalType": "uint256"},
                         {"name": "governance", "type": "address", "internalType": "address"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {
@@ -2096,29 +2171,35 @@
                         {"name": "extraDataHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "initialSharePrice", "type": "uint256", "internalType": "uint256"},
                         {"name": "hyperdrive", "type": "address", "internalType": "address"},
                         {"name": "target0", "type": "address", "internalType": "address"},
                         {"name": "target1", "type": "address", "internalType": "address"},
                         {"name": "target2", "type": "address", "internalType": "address"},
                         {"name": "target3", "type": "address", "internalType": "address"},
-                        {"name": "target4", "type": "address", "internalType": "address"},
                     ],
                 }
             ],
             "stateMutability": "view",
         },
         {
             "type": "function",
             "name": "factory",
             "inputs": [],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
+            "name": "getNumberOfTargets",
+            "inputs": [],
+            "outputs": [{"name": "", "type": "uint256", "internalType": "uint256"}],
+            "stateMutability": "pure",
+        },
+        {
+            "type": "function",
             "name": "initialize",
             "inputs": [
                 {"name": "_deploymentId", "type": "bytes32", "internalType": "bytes32"},
                 {"name": "_lp", "type": "address", "internalType": "address"},
                 {"name": "_contribution", "type": "uint256", "internalType": "uint256"},
                 {"name": "_apr", "type": "uint256", "internalType": "uint256"},
                 {
@@ -2133,14 +2214,21 @@
                 },
             ],
             "outputs": [{"name": "lpShares", "type": "uint256", "internalType": "uint256"}],
             "stateMutability": "payable",
         },
         {
             "type": "function",
+            "name": "name",
+            "inputs": [],
+            "outputs": [{"name": "", "type": "string", "internalType": "string"}],
+            "stateMutability": "view",
+        },
+        {
+            "type": "function",
             "name": "target0Deployer",
             "inputs": [],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
@@ -2161,18 +2249,18 @@
             "name": "target3Deployer",
             "inputs": [],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
-            "name": "target4Deployer",
+            "name": "version",
             "inputs": [],
-            "outputs": [{"name": "", "type": "address", "internalType": "address"}],
-            "stateMutability": "view",
+            "outputs": [{"name": "", "type": "string", "internalType": "string"}],
+            "stateMutability": "pure",
         },
         {
             "type": "error",
             "name": "AddressEmptyCode",
             "inputs": [{"name": "target", "type": "address", "internalType": "address"}],
         },
         {
@@ -2206,23 +2294,25 @@
         {"type": "error", "name": "SenderIsNotFactory", "inputs": []},
         {"type": "error", "name": "TargetAlreadyDeployed", "inputs": []},
         {"type": "error", "name": "TransferFailed", "inputs": []},
     ],
 )
 # pylint: disable=line-too-long
 erc4626hyperdrivedeployercoordinator_bytecode = HexStr(
-    "0x6101606040523480156200001257600080fd5b50604051620024c8380380620024c8833981016040819052620000359162000089565b6001600160a01b0396871660805294861660a05292851660c05290841660e05283166101005282166101205216610140526200011e565b80516001600160a01b03811681146200008457600080fd5b919050565b600080600080600080600060e0888a031215620000a557600080fd5b620000b0886200006c565b9650620000c0602089016200006c565b9550620000d0604089016200006c565b9450620000e0606089016200006c565b9350620000f0608089016200006c565b92506200010060a089016200006c565b91506200011060c089016200006c565b905092959891949750929550565b60805160a05160c05160e051610100516101205161014051612310620001b86000396000818161022f015261099801526000818161029701526108840152600081816102ff0152610770015260008181610263015261065c0152600081816102cb01526104710152600081816103670152610e750152600081816103330152818161039601528181610aaa0152610c4601526123106000f3fe60806040526004361061009c5760003560e01c8063a085fa3011610064578063a085fa3014610251578063aa8cd6c414610285578063ab71905f146102b9578063b6cb1118146102ed578063c45a015514610321578063c83e1f511461035557600080fd5b80630b3c4f86146100a157806316abfc70146100de5780631ae6f515146100ff578063374040171461011f578063966ecd1c1461021d575b600080fd5b3480156100ad57600080fd5b506100c16100bc366004611b4c565b610389565b6040516001600160a01b0390911681526020015b60405180910390f35b6100f16100ec366004611bc8565b610a9d565b6040519081526020016100d5565b34801561010b57600080fd5b506100c161011a366004611c8d565b610c39565b34801561012b57600080fd5b5061021061013a366004611cf0565b6040805161012081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e0810182905261010081019190915250600090815260208181526040918290208251610120810184528154815260018201549281019290925260028101549282019290925260038201546001600160a01b0390811660608301526004830154811660808301526005830154811660a08301526006830154811660c08301526007830154811660e083015260089092015490911661010082015290565b6040516100d59190611d09565b34801561022957600080fd5b506100c17f000000000000000000000000000000000000000000000000000000000000000081565b34801561025d57600080fd5b506100c17f000000000000000000000000000000000000000000000000000000000000000081565b34801561029157600080fd5b506100c17f000000000000000000000000000000000000000000000000000000000000000081565b3480156102c557600080fd5b506100c17f000000000000000000000000000000000000000000000000000000000000000081565b3480156102f957600080fd5b506100c17f000000000000000000000000000000000000000000000000000000000000000081565b34801561032d57600080fd5b506100c17f000000000000000000000000000000000000000000000000000000000000000081565b34801561036157600080fd5b506100c17f000000000000000000000000000000000000000000000000000000000000000081565b6000336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146103d457604051634084351160e01b815260040160405180910390fd5b6000868152602081905260408120908490036105695780541561040a57604051633be1b34d60e11b815260040160405180910390fd5b61041386610f8f565b600061041f87876111a3565b90506000876040516020016104349190611d86565b60405160208183030381529060405280519060200120905060008780519060200120905060006104638a611223565b9050838160800181815250507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663195d4bfc828b8e8b6040516020016104bc929190918252602082015260400190565b604051602081830303815290604052805190602001206040518463ffffffff1660e01b81526004016104f093929190611fe5565b6020604051808303816000875af115801561050f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105339190612019565b9285555060018401556002830191909155600490910180546001600160a01b0319166001600160a01b0383161790559050610a94565b600087815260208190526040902054806105965760405163398b1c0960e21b815260040160405180910390fd5b80876040516020016105a89190611d86565b60405160208183030381529060405280519060200120146105dc5760405163332ee11f60e01b815260040160405180910390fd5b6001820154865160208801201461060657604051631a3272d160e31b815260040160405180910390fd5b61060f87610f8f565b600061061a88611223565b600284015460808201529050600186900361073b5760058301546001600160a01b03161561065a5760405162e896af60e31b815260040160405180910390fd5b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663195d4bfc8289338d8a6040516020016106a093929190612036565b604051602081830303815290604052805190602001206040518463ffffffff1660e01b81526004016106d493929190611fe5565b6020604051808303816000875af11580156106f3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107179190612019565b6005840180546001600160a01b0319166001600160a01b0383161790559350610a90565b8560020361084f5760068301546001600160a01b03161561076e5760405162e896af60e31b815260040160405180910390fd5b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663195d4bfc8289338d8a6040516020016107b493929190612036565b604051602081830303815290604052805190602001206040518463ffffffff1660e01b81526004016107e893929190611fe5565b6020604051808303816000875af1158015610807573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061082b9190612019565b6006840180546001600160a01b0319166001600160a01b0383161790559350610a90565b856003036109635760078301546001600160a01b0316156108825760405162e896af60e31b815260040160405180910390fd5b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663195d4bfc8289338d8a6040516020016108c893929190612036565b604051602081830303815290604052805190602001206040518463ffffffff1660e01b81526004016108fc93929190611fe5565b6020604051808303816000875af115801561091b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061093f9190612019565b6007840180546001600160a01b0319166001600160a01b0383161790559350610a90565b85600403610a775760088301546001600160a01b0316156109965760405162e896af60e31b815260040160405180910390fd5b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663195d4bfc8289338d8a6040516020016109dc93929190612036565b604051602081830303815290604052805190602001206040518463ffffffff1660e01b8152600401610a1093929190611fe5565b6020604051808303816000875af1158015610a2f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a539190612019565b6008840180546001600160a01b0319166001600160a01b0383161790559350610a90565b604051631d9f815960e11b815260040160405180910390fd5b5050505b95945050505050565b6000336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610ae857604051634084351160e01b815260040160405180910390fd5b610af06112d5565b6000868152602081905260409020600301546001600160a01b031680610b295760405163952b05cb60e01b815260040160405180910390fd5b6000610b37828888876112f6565b9050816001600160a01b03166377d05ff4828888886040518563ffffffff1660e01b8152600401610b6a93929190612057565b60206040518083038185885af1158015610b88573d6000803e3d6000fd5b50505050506040513d601f19601f82011682018060405250810190610bad91906120a7565b92506000610bbb82346120d6565b90508015610a9057604051600090339083908381818185875af1925050503d8060008114610c05576040519150601f19603f3d011682016040523d82523d6000602084013e610c0a565b606091505b5050905080610c2c576040516312171d8360e31b815260040160405180910390fd5b5050505095945050505050565b6000336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610c8457604051634084351160e01b815260040160405180910390fd5b600085815260208181526040918290208251610120810184528154815260018201549281019290925260028101549282019290925260038201546001600160a01b03908116606083018190526004840154821660808401526005840154821660a08401526006840154821660c08401526007840154821660e0840152600890930154166101008201529015610d2c57604051632c95caeb60e01b815260040160405180910390fd5b8051610d4b5760405163398b1c0960e21b815260040160405180910390fd5b60808101516001600160a01b03161580610d70575060a08101516001600160a01b0316155b80610d86575060c08101516001600160a01b0316155b80610d9c575060e08101516001600160a01b0316155b80610db357506101008101516001600160a01b0316155b15610dd15760405163e97cc2bf60e01b815260040160405180910390fd5b8051604051610de4908790602001611d86565b6040516020818303038152906040528051906020012014610e185760405163332ee11f60e01b815260040160405180910390fd5b8060200151848051906020012014610e4357604051631a3272d160e31b815260040160405180910390fd5b610e4c85610f8f565b6000610e5786611223565b905081604001518160800181815250506000879050600085905060007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663ed871fd7858a88608001518960a001518a60c001518b60e001518c61010001518b8b604051602001610eda929190918252602082015260400190565b604051602081830303815290604052805190602001206040518963ffffffff1660e01b8152600401610f139897969594939291906120e9565b6020604051808303816000875af1158015610f32573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f569190612019565b60009a8b5260208b90526040909a2060030180546001600160a01b0319166001600160a01b038c16179055509798975050505050505050565b610f9881611406565b60208101516001600160a01b0316610fc35760405163073f739d60e51b815260040160405180910390fd5b80602001516001600160a01b03166338d52e0f6040518163ffffffff1660e01b8152600401602060405180830381865afa158015611005573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110299190612019565b6001600160a01b031681600001516001600160a01b03161461105e57604051630722152560e11b815260040160405180910390fd5b600481600001516001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156110a2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110c69190612150565b6110d09190612173565b6110db90600a612270565b816080015110156110ff576040516349db44f560e01b815260040160405180910390fd5b600481600001516001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015611143573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111679190612150565b6111719190612173565b61117c90600a612270565b8160a0015110156111a0576040516318c9522360e11b815260040160405180910390fd5b50565b60208201516040516303d1689d60e11b8152670de0b6b3a764000060048201526000916001600160a01b0316906307a2d13a90602401602060405180830381865afa1580156111f6573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061121a91906120a7565b90505b92915050565b61122b61182a565b81516001600160a01b03908116825260208084015182169083015260408084015182169083015260608084015190830152608083015160a08084019190915283015160c08084019190915283015160e08084019190915283015161010080840191909152830151610120808401919091528301518116610140808401919091528301518116610160808401919091528301511661018080830191909152909101516101a082015290565b34156112f457604051631574f9f360e01b815260040160405180910390fd5b565b60008082602001511561136c57856001600160a01b031663c55dae636040518163ffffffff1660e01b8152600401602060405180830381865afa158015611341573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113659190612019565b90506113d1565b856001600160a01b0316630a4e14936040518163ffffffff1660e01b8152600401602060405180830381865afa1580156113aa573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113ce9190612019565b90505b6113e66001600160a01b038216863087611518565b6113fa6001600160a01b0382168786611585565b50600095945050505050565b6103e88160800151101561142d576040516349db44f560e01b815260040160405180910390fd5b8060e0015160000361145257604051635428734d60e01b815260040160405180910390fd5b8060e001518160c00151108061147a57508060e001518160c00151611477919061227f565b15155b156114985760405163253fffcf60e11b815260040160405180910390fd5b61018081015151670de0b6b3a764000010806114c45750670de0b6b3a764000081610180015160200151115b806114df5750670de0b6b3a764000081610180015160400151115b806114fa5750670de0b6b3a764000081610180015160600151115b156111a0576040516322f72cc360e11b815260040160405180910390fd5b6040516001600160a01b03848116602483015283811660448301526064820183905261157f9186918216906323b872dd906084015b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050611611565b50505050565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b1790526115d6848261167e565b61157f576040516001600160a01b0384811660248301526000604483015261160b91869182169063095ea7b39060640161154d565b61157f84825b60006116266001600160a01b03841683611721565b9050805160001415801561164b57508080602001905181019061164991906122a1565b155b1561167957604051635274afe760e01b81526001600160a01b03841660048201526024015b60405180910390fd5b505050565b6000806000846001600160a01b03168460405161169b91906122be565b6000604051808303816000865af19150503d80600081146116d8576040519150601f19603f3d011682016040523d82523d6000602084013e6116dd565b606091505b509150915081801561170757508051158061170757508080602001905181019061170791906122a1565b8015610a945750505050506001600160a01b03163b151590565b606061121a8383600084600080856001600160a01b0316848660405161174791906122be565b60006040518083038185875af1925050503d8060008114611784576040519150601f19603f3d011682016040523d82523d6000602084013e611789565b606091505b50915091506117998683836117a5565b925050505b9392505050565b6060826117ba576117b582611801565b61179e565b81511580156117d157506001600160a01b0384163b155b156117fa57604051639996b31560e01b81526001600160a01b0385166004820152602401611670565b508061179e565b8051156118115780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b604051806101c0016040528060006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b031681526020016000801916815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b031681526020016118f56040518060800160405280600081526020016000815260200160008152602001600081525090565b905290565b634e487b7160e01b600052604160045260246000fd5b6040516101a0810167ffffffffffffffff81118282101715611934576119346118fa565b60405290565b6040516060810167ffffffffffffffff81118282101715611934576119346118fa565b6001600160a01b03811681146111a057600080fd5b803561197d8161195d565b919050565b60006080828403121561199457600080fd5b6040516080810181811067ffffffffffffffff821117156119b7576119b76118fa565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b600061020082840312156119fb57600080fd5b611a03611910565b9050611a0e82611972565b8152611a1c60208301611972565b6020820152611a2d60408301611972565b6040820152606082013560608201526080820135608082015260a082013560a082015260c082013560c082015260e082013560e0820152610100808301358183015250610120611a7e818401611972565b90820152610140611a90838201611972565b90820152610160611aa2838201611972565b90820152610180611ab584848301611982565b9082015292915050565b600082601f830112611ad057600080fd5b813567ffffffffffffffff80821115611aeb57611aeb6118fa565b604051601f8301601f19908116603f01168101908282118183101715611b1357611b136118fa565b81604052838152866020858801011115611b2c57600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060008060006102808688031215611b6557600080fd5b85359450611b7687602088016119e8565b935061022086013567ffffffffffffffff811115611b9357600080fd5b611b9f88828901611abf565b95989497509495610240810135955061026001359392505050565b80151581146111a057600080fd5b600080600080600060a08688031215611be057600080fd5b853594506020860135611bf28161195d565b93506040860135925060608601359150608086013567ffffffffffffffff80821115611c1d57600080fd5b908701906060828a031215611c3157600080fd5b611c3961193a565b8235611c448161195d565b81526020830135611c5481611bba565b6020820152604083013582811115611c6b57600080fd5b611c778b828601611abf565b6040830152508093505050509295509295909350565b6000806000806102608587031215611ca457600080fd5b84359350611cb586602087016119e8565b925061022085013567ffffffffffffffff811115611cd257600080fd5b611cde87828801611abf565b94979396509394610240013593505050565b600060208284031215611d0257600080fd5b5035919050565b8151815260208083015190820152604080830151908201526060808301516001600160a01b039081169183019190915260808084015182169083015260a08084015182169083015260c08084015182169083015260e08084015182169083015261010080840151918216818401526101208301915b505092915050565b81516001600160a01b0316815261020081016020830151611db260208401826001600160a01b03169052565b506040830151611dcd60408401826001600160a01b03169052565b50606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151611e27828501826001600160a01b03169052565b5050610140838101516001600160a01b038116848301525050610160838101516001600160a01b0381168483015250506101808381015180518483015260208101516101a085015260408101516101c085015260608101516101e0850152611d7e565b80516001600160a01b031682526020810151611eb160208401826001600160a01b03169052565b506040810151611ecc60408401826001600160a01b03169052565b50606081015160608301526080810151608083015260a081015160a083015260c081015160c083015260e081015160e083015261010080820151818401525061012080820151818401525061014080820151611f32828501826001600160a01b03169052565b5050610160818101516001600160a01b038116848301525050610180818101516001600160a01b0381168483015250506101a08181015180518483015260208101516101c085015260408101516101e0850152606081015161020085015261157f565b60005b83811015611fb0578181015183820152602001611f98565b50506000910152565b60008151808452611fd1816020860160208601611f95565b601f01601f19169290920160200192915050565b6000610260611ff48387611e8a565b8061022084015261200781840186611fb9565b91505082610240830152949350505050565b60006020828403121561202b57600080fd5b815161179e8161195d565b6001600160a01b039390931683526020830191909152604082015260600190565b8381528260208201526060604082015260018060a01b03825116606082015260208201511515608082015260006040830151606060a084015261209d60c0840182611fb9565b9695505050505050565b6000602082840312156120b957600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b8181038181111561121d5761121d6120c0565b60006103006120f8838c611e8a565b8061022084015261210b8184018b611fb9565b6001600160a01b03998a1661024085015297891661026084015250509386166102808501529185166102a08401529093166102c08201526102e0019190915292915050565b60006020828403121561216257600080fd5b815160ff8116811461179e57600080fd5b60ff828116828216039081111561121d5761121d6120c0565b600181815b808511156121c75781600019048211156121ad576121ad6120c0565b808516156121ba57918102915b93841c9390800290612191565b509250929050565b6000826121de5750600161121d565b816121eb5750600061121d565b8160018114612201576002811461220b57612227565b600191505061121d565b60ff84111561221c5761221c6120c0565b50506001821b61121d565b5060208310610133831016604e8410600b841016171561224a575081810a61121d565b612254838361218c565b8060001904821115612268576122686120c0565b029392505050565b600061121a60ff8416836121cf565b60008261229c57634e487b7160e01b600052601260045260246000fd5b500690565b6000602082840312156122b357600080fd5b815161179e81611bba565b600082516122d0818460208701611f95565b919091019291505056fea26469706673582212208a7d70bd075f094dcea132bb047e60fb2c06b835979b972e9763cc00fe678f4e64736f6c63430008140033"
+    "0x6101406040523480156200001257600080fd5b50604051620023f8380380620023f8833981016040819052620000359162000082565b6001600160a01b0395861660805293851660a05291841660c052831660e052821661010052166101205262000103565b80516001600160a01b03811681146200007d57600080fd5b919050565b60008060008060008060c087890312156200009c57600080fd5b620000a78762000065565b9550620000b76020880162000065565b9450620000c76040880162000065565b9350620000d76060880162000065565b9250620000e76080880162000065565b9150620000f760a0880162000065565b90509295509295509295565b60805160a05160c05160e051610100516101205161226d6200018b6000396000818161030d0152610b1901526000818161037501526109fc0152600081816102d901526108df01526000818161034101526106d50152600081816103fd0152610e390152600081816103c90152818161045c015281816105fa0152610c08015261226d6000f3fe6080604052600436106100c25760003560e01c8063aa8cd6c41161007f578063c29d10c111610059578063c29d10c114610397578063c45a0155146103b7578063c83e1f51146103eb578063e99be3961461041f57600080fd5b8063aa8cd6c4146102fb578063ab71905f1461032f578063b6cb11181461036357600080fd5b806306fdde03146100c757806316abfc70146100f2578063374040171461011357806354fd4d50146102605780637f88be811461028f578063a085fa30146102c7575b600080fd5b3480156100d357600080fd5b506100dc610433565b6040516100e991906118f1565b60405180910390f35b610105610100366004611a27565b61044f565b6040519081526020016100e9565b34801561011f57600080fd5b506101ef61012e366004611aec565b6040805161010081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e081019190915250600090815260208181526040918290208251610100810184528154815260018201549281019290925260028101549282019290925260038201546001600160a01b0390811660608301526004830154811660808301526005830154811660a08301526006830154811660c083015260079092015490911660e082015290565b6040516100e991908151815260208083015190820152604080830151908201526060808301516001600160a01b039081169183019190915260808084015182169083015260a08084015182169083015260c08084015182169083015260e09283015116918101919091526101000190565b34801561026c57600080fd5b506040805180820190915260068152653b189718171b60d11b60208201526100dc565b34801561029b57600080fd5b506102af6102aa366004611c4e565b6105ed565b6040516001600160a01b0390911681526020016100e9565b3480156102d357600080fd5b506102af7f000000000000000000000000000000000000000000000000000000000000000081565b34801561030757600080fd5b506102af7f000000000000000000000000000000000000000000000000000000000000000081565b34801561033b57600080fd5b506102af7f000000000000000000000000000000000000000000000000000000000000000081565b34801561036f57600080fd5b506102af7f000000000000000000000000000000000000000000000000000000000000000081565b3480156103a357600080fd5b506102af6103b2366004611cbc565b610bfb565b3480156103c357600080fd5b506102af7f000000000000000000000000000000000000000000000000000000000000000081565b3480156103f757600080fd5b506102af7f000000000000000000000000000000000000000000000000000000000000000081565b34801561042b57600080fd5b506004610105565b6040518060600160405280602481526020016122146024913981565b6000336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461049a57604051634084351160e01b815260040160405180910390fd5b6104a2610f1b565b6000868152602081905260409020600301546001600160a01b0316806104db5760405163952b05cb60e01b815260040160405180910390fd5b60006104e982888887610f3c565b9050816001600160a01b03166377d05ff4828888886040518563ffffffff1660e01b815260040161051c93929190611d1f565b60206040518083038185885af115801561053a573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019061055f9190611d6f565b9250600061056d8234611d9e565b905080156105e057604051600090339083908381818185875af1925050503d80600081146105b7576040519150601f19603f3d011682016040523d82523d6000602084013e6105bc565b606091505b50509050806105de576040516312171d8360e31b815260040160405180910390fd5b505b5050505b95945050505050565b6000336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461063857604051634084351160e01b815260040160405180910390fd5b6000868152602081905260408120908490036107cd5780541561066e57604051633be1b34d60e11b815260040160405180910390fd5b6106778661104c565b60006106838787611260565b90506000876040516020016106989190611db1565b60405160208183030381529060405280519060200120905060008780519060200120905060006106c78a6112e0565b9050838160800181815250507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663847c08a5828b8e8b604051602001610720929190918252602082015260400190565b604051602081830303815290604052805190602001206040518463ffffffff1660e01b815260040161075493929190611fdb565b6020604051808303816000875af1158015610773573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610797919061200f565b9285555060018401556002830191909155600490910180546001600160a01b0319166001600160a01b03831617905590506105e4565b600087815260208190526040902054806107fa5760405163398b1c0960e21b815260040160405180910390fd5b808760405160200161080c9190611db1565b60405160208183030381529060405280519060200120146108405760405163332ee11f60e01b815260040160405180910390fd5b6001820154865160208801201461086a57604051631a3272d160e31b815260040160405180910390fd5b6108738761104c565b600061087e886112e0565b60028401546080820152905060018690036109a85760058301546001600160a01b0316156108be5760405162e896af60e31b815260040160405180910390fd5b604080513360208201529081018a9052606081018690526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063847c08a59083908a90608001604051602081830303815290604052805190602001206040518463ffffffff1660e01b815260040161094193929190611fdb565b6020604051808303816000875af1158015610960573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610984919061200f565b6005840180546001600160a01b0319166001600160a01b03831617905593506105e0565b85600203610ac55760068301546001600160a01b0316156109db5760405162e896af60e31b815260040160405180910390fd5b604080513360208201529081018a9052606081018690526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063847c08a59083908a90608001604051602081830303815290604052805190602001206040518463ffffffff1660e01b8152600401610a5e93929190611fdb565b6020604051808303816000875af1158015610a7d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610aa1919061200f565b6006840180546001600160a01b0319166001600160a01b03831617905593506105e0565b85600303610be25760078301546001600160a01b031615610af85760405162e896af60e31b815260040160405180910390fd5b604080513360208201529081018a9052606081018690526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063847c08a59083908a90608001604051602081830303815290604052805190602001206040518463ffffffff1660e01b8152600401610b7b93929190611fdb565b6020604051808303816000875af1158015610b9a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610bbe919061200f565b6007840180546001600160a01b0319166001600160a01b03831617905593506105e0565b604051631d9f815960e11b815260040160405180910390fd5b6000336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610c4657604051634084351160e01b815260040160405180910390fd5b600085815260208181526040918290208251610100810184528154815260018201549281019290925260028101549282019290925260038201546001600160a01b03908116606083018190526004840154821660808401526005840154821660a08401526006840154821660c08401526007909301541660e08201529015610ce157604051632c95caeb60e01b815260040160405180910390fd5b8051610d005760405163398b1c0960e21b815260040160405180910390fd5b60808101516001600160a01b03161580610d25575060a08101516001600160a01b0316155b80610d3b575060c08101516001600160a01b0316155b80610d51575060e08101516001600160a01b0316155b15610d6f5760405163e97cc2bf60e01b815260040160405180910390fd5b8051604051610d82908790602001611db1565b6040516020818303038152906040528051906020012014610db65760405163332ee11f60e01b815260040160405180910390fd5b8060200151848051906020012014610de157604051631a3272d160e31b815260040160405180910390fd5b610dea8561104c565b6000610df5866112e0565b60408084015160808084019190915284015160a085015160c086015160e08701518451602081018e90529485018a90529495508b9489946000946001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169463907d12e9948a948f94606001604051602081830303815290604052805190602001206040518863ffffffff1660e01b8152600401610e9f979695949392919061202c565b6020604051808303816000875af1158015610ebe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ee2919061200f565b60009a8b5260208b90526040909a2060030180546001600160a01b0319166001600160a01b038c16179055509798975050505050505050565b3415610f3a57604051631574f9f360e01b815260040160405180910390fd5b565b600080826020015115610fb257856001600160a01b031663c55dae636040518163ffffffff1660e01b8152600401602060405180830381865afa158015610f87573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fab919061200f565b9050611017565b856001600160a01b0316630a4e14936040518163ffffffff1660e01b8152600401602060405180830381865afa158015610ff0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611014919061200f565b90505b61102c6001600160a01b03821686308761139f565b6110406001600160a01b038216878661140c565b50600095945050505050565b6110558161149c565b60208101516001600160a01b03166110805760405163073f739d60e51b815260040160405180910390fd5b80602001516001600160a01b03166338d52e0f6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156110c2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110e6919061200f565b6001600160a01b031681600001516001600160a01b03161461111b57604051630722152560e11b815260040160405180910390fd5b600481600001516001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa15801561115f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111839190612089565b61118d91906120ac565b61119890600a6121a9565b816080015110156111bc576040516349db44f560e01b815260040160405180910390fd5b600481600001516001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015611200573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112249190612089565b61122e91906120ac565b61123990600a6121a9565b8160a00151101561125d576040516318c9522360e11b815260040160405180910390fd5b50565b60208201516040516303d1689d60e11b8152670de0b6b3a764000060048201526000916001600160a01b0316906307a2d13a90602401602060405180830381865afa1580156112b3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112d79190611d6f565b90505b92915050565b6112e86117ca565b81516001600160a01b03908116825260208084015182169083015260408084015182169083015260608084015190830152608083015160a08084019190915283015160c08084019190915283015160e080840191909152830151610100808401919091528301516101208084019190915283015161014080840191909152830151811661016080840191909152830151811661018080840191909152830151166101a080830191909152909101516101c082015290565b6040516001600160a01b0384811660248301528381166044830152606482018390526114069186918216906323b872dd906084015b604051602081830303815290604052915060e01b6020820180516001600160e01b0383818316178352505050506115b1565b50505050565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b17905261145d848261161e565b611406576040516001600160a01b0384811660248301526000604483015261149291869182169063095ea7b3906064016113d4565b61140684826115b1565b6103e8816080015110156114c3576040516349db44f560e01b815260040160405180910390fd5b8061010001516000036114e957604051635428734d60e01b815260040160405180910390fd5b8061010001518160e00151108061151357508061010001518160e0015161151091906121b8565b15155b156115315760405163253fffcf60e11b815260040160405180910390fd5b6101a081015151670de0b6b3a7640000108061155d5750670de0b6b3a7640000816101a0015160200151115b806115785750670de0b6b3a7640000816101a0015160400151115b806115935750670de0b6b3a7640000816101a0015160600151115b1561125d576040516322f72cc360e11b815260040160405180910390fd5b60006115c66001600160a01b038416836116c1565b905080516000141580156115eb5750808060200190518101906115e991906121da565b155b1561161957604051635274afe760e01b81526001600160a01b03841660048201526024015b60405180910390fd5b505050565b6000806000846001600160a01b03168460405161163b91906121f7565b6000604051808303816000865af19150503d8060008114611678576040519150601f19603f3d011682016040523d82523d6000602084013e61167d565b606091505b50915091508180156116a75750805115806116a75750808060200190518101906116a791906121da565b80156105e45750505050506001600160a01b03163b151590565b60606112d78383600084600080856001600160a01b031684866040516116e791906121f7565b60006040518083038185875af1925050503d8060008114611724576040519150601f19603f3d011682016040523d82523d6000602084013e611729565b606091505b5091509150611739868383611745565b925050505b9392505050565b60608261175a57611755826117a1565b61173e565b815115801561177157506001600160a01b0384163b155b1561179a57604051639996b31560e01b81526001600160a01b0385166004820152602401611610565b508061173e565b8051156117b15780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b604051806101e0016040528060006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b03168152602001600080191681526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b0316815260200161189c6040518060800160405280600081526020016000815260200160008152602001600081525090565b905290565b60005b838110156118bc5781810151838201526020016118a4565b50506000910152565b600081518084526118dd8160208601602086016118a1565b601f01601f19169290920160200192915050565b6020815260006112d760208301846118c5565b6001600160a01b038116811461125d57600080fd5b803561192481611904565b919050565b634e487b7160e01b600052604160045260246000fd5b6040516060810167ffffffffffffffff8111828210171561196257611962611929565b60405290565b6040516101c0810167ffffffffffffffff8111828210171561196257611962611929565b801515811461125d57600080fd5b600082601f8301126119ab57600080fd5b813567ffffffffffffffff808211156119c6576119c6611929565b604051601f8301601f19908116603f011681019082821181831017156119ee576119ee611929565b81604052838152866020858801011115611a0757600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600080600060a08688031215611a3f57600080fd5b853594506020860135611a5181611904565b93506040860135925060608601359150608086013567ffffffffffffffff80821115611a7c57600080fd5b908701906060828a031215611a9057600080fd5b611a9861193f565b8235611aa381611904565b81526020830135611ab38161198c565b6020820152604083013582811115611aca57600080fd5b611ad68b82860161199a565b6040830152508093505050509295509295909350565b600060208284031215611afe57600080fd5b5035919050565b600060808284031215611b1757600080fd5b6040516080810181811067ffffffffffffffff82111715611b3a57611b3a611929565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b60006102208284031215611b7e57600080fd5b611b86611968565b9050611b9182611919565b8152611b9f60208301611919565b6020820152611bb060408301611919565b6040820152606082013560608201526080820135608082015260a082013560a082015260c082013560c082015260e082013560e0820152610100808301358183015250610120808301358183015250610140611c0d818401611919565b90820152610160611c1f838201611919565b90820152610180611c31838201611919565b908201526101a0611c4484848301611b05565b9082015292915050565b60008060008060006102a08688031215611c6757600080fd5b85359450611c788760208801611b6b565b935061024086013567ffffffffffffffff811115611c9557600080fd5b611ca18882890161199a565b95989497509495610260810135955061028001359392505050565b6000806000806102808587031215611cd357600080fd5b84359350611ce48660208701611b6b565b925061024085013567ffffffffffffffff811115611d0157600080fd5b611d0d8782880161199a565b94979396509394610260013593505050565b8381528260208201526060604082015260018060a01b03825116606082015260208201511515608082015260006040830151606060a0840152611d6560c08401826118c5565b9695505050505050565b600060208284031215611d8157600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b818103818111156112da576112da611d88565b81516001600160a01b0316815261022081016020830151611ddd60208401826001600160a01b03169052565b506040830151611df860408401826001600160a01b03169052565b50606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151818401525061014080840151611e5e828501826001600160a01b03169052565b5050610160838101516001600160a01b038116848301525050610180838101516001600160a01b0381168483015250506101a08381015180518483015260208101516101c085015260408101516101e08501526060810151610200850152505092915050565b80516001600160a01b031682526020810151611eeb60208401826001600160a01b03169052565b506040810151611f0660408401826001600160a01b03169052565b50606081015160608301526080810151608083015260a081015160a083015260c081015160c083015260e081015160e083015261010080820151818401525061012080820151818401525061014080820151818401525061016080820151611f78828501826001600160a01b03169052565b5050610180818101516001600160a01b0381168483015250506101a0818101516001600160a01b0381168483015250506101c08181015180518483015260208101516101e085015260408101516102008501526060810151610220850152611406565b6000610280611fea8387611ec4565b80610240840152611ffd818401866118c5565b91505082610260830152949350505050565b60006020828403121561202157600080fd5b815161173e81611904565b600061030061203b838b611ec4565b8061024084015261204e8184018a6118c5565b6001600160a01b0398891661026085015296881661028084015250509285166102a084015293166102c08201526102e0019190915292915050565b60006020828403121561209b57600080fd5b815160ff8116811461173e57600080fd5b60ff82811682821603908111156112da576112da611d88565b600181815b808511156121005781600019048211156120e6576120e6611d88565b808516156120f357918102915b93841c93908002906120ca565b509250929050565b600082612117575060016112da565b81612124575060006112da565b816001811461213a576002811461214457612160565b60019150506112da565b60ff84111561215557612155611d88565b50506001821b6112da565b5060208310610133831016604e8410600b8410161715612183575081810a6112da565b61218d83836120c5565b80600019048211156121a1576121a1611d88565b029392505050565b60006112d760ff841683612108565b6000826121d557634e487b7160e01b600052601260045260246000fd5b500690565b6000602082840312156121ec57600080fd5b815161173e8161198c565b600082516122098184602087016118a1565b919091019291505056fe45524334363236487970657264726976654465706c6f796572436f6f7264696e61746f72a26469706673582212204bc2cebcdc2670c61026e8b02eea4eed5ebd35fb6ed5e103b2645e348789a76664736f6c63430008140033"
 )
 
 
 class ERC4626HyperdriveDeployerCoordinatorContract(Contract):
     """A web3.py Contract class for the ERC4626HyperdriveDeployerCoordinator contract."""
 
     abi: ABI = erc4626hyperdrivedeployercoordinator_abi
-    bytecode: bytes = HexBytes(erc4626hyperdrivedeployercoordinator_bytecode)
+    bytecode: bytes | None = try_bytecode_hexbytes(
+        erc4626hyperdrivedeployercoordinator_bytecode, "erc4626hyperdrivedeployercoordinator"
+    )
 
     def __init__(self, address: ChecksumAddress | None = None) -> None:
         try:
             # Initialize parent Contract class
             super().__init__(address=address)
             self.functions = ERC4626HyperdriveDeployerCoordinatorContractFunctions(erc4626hyperdrivedeployercoordinator_abi, self.w3, address)  # type: ignore
 
@@ -2246,18 +2336,16 @@
 
         target1Deployer: str
 
         target2Deployer: str
 
         target3Deployer: str
 
-        target4Deployer: str
-
     @classmethod
-    def constructor(cls, factory: str, coreDeployer: str, target0Deployer: str, target1Deployer: str, target2Deployer: str, target3Deployer: str, target4Deployer: str) -> ContractConstructor:  # type: ignore
+    def constructor(cls, factory: str, coreDeployer: str, target0Deployer: str, target1Deployer: str, target2Deployer: str, target3Deployer: str) -> ContractConstructor:  # type: ignore
         """Creates a transaction with the contract's constructor function.
 
         Parameters
         ----------
 
         w3 : Web3
             A web3 instance.
@@ -2274,15 +2362,14 @@
         return super().constructor(
             dataclass_to_tuple(factory),
             dataclass_to_tuple(coreDeployer),
             dataclass_to_tuple(target0Deployer),
             dataclass_to_tuple(target1Deployer),
             dataclass_to_tuple(target2Deployer),
             dataclass_to_tuple(target3Deployer),
-            dataclass_to_tuple(target4Deployer),
         )
 
     @classmethod
     def deploy(cls, w3: Web3, account: LocalAccount | ChecksumAddress, constructorArgs: ConstructorArgs) -> Self:
         """Deploys and instance of the contract.
 
         Parameters
@@ -2313,15 +2400,15 @@
         current_nonce = w3.eth.get_transaction_count(account.address)
         deployment_tx.update({"nonce": current_nonce})
 
         # Sign the transaction with local account private key
         signed_tx = account.sign_transaction(deployment_tx)
 
         # Send the signed transaction and wait for receipt
-        tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
+        tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
         tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
 
         deployed_contract = deployer(address=tx_receipt.contractAddress)  # type: ignore
         return deployed_contract
 
     @classmethod
     def factory(cls, w3: Web3, class_name: str | None = None, **kwargs: Any) -> Type[Self]:
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/ERC4626Target0DeployerContract.py` & `agent0-0.20.0/src/agent0/hypertypes/types/ERC4626Target3DeployerContract.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-"""A web3.py Contract class for the ERC4626Target0Deployer contract.
+"""A web3.py Contract class for the ERC4626Target3Deployer contract.
 
 DO NOT EDIT.  This file was generated by pypechain.  See documentation at
 https://github.com/delvtech/pypechain"""
 
 # contracts have PascalCase names
 # pylint: disable=invalid-name
 
@@ -26,34 +26,33 @@
 
 from __future__ import annotations
 
 from typing import Any, Type, cast
 
 from eth_account.signers.local import LocalAccount
 from eth_typing import ChecksumAddress, HexStr
-from hexbytes import HexBytes
 from typing_extensions import Self
 from web3 import Web3
 from web3.contract.contract import Contract, ContractConstructor, ContractFunction, ContractFunctions
 from web3.exceptions import FallbackNotFound
 from web3.types import ABI, BlockIdentifier, CallOverride, TxParams
 
 from .IHyperdriveTypes import Fees, PoolConfig
-from .utilities import dataclass_to_tuple, rename_returned_types
+from .utilities import dataclass_to_tuple, rename_returned_types, try_bytecode_hexbytes
 
 structs = {
     "Fees": Fees,
     "PoolConfig": PoolConfig,
 }
 
 
-class ERC4626Target0DeployerDeployContractFunction(ContractFunction):
-    """ContractFunction for the deploy method."""
+class ERC4626Target3DeployerDeployTargetContractFunction(ContractFunction):
+    """ContractFunction for the deployTarget method."""
 
-    def __call__(self, config: PoolConfig, arg2: bytes, salt: bytes) -> ERC4626Target0DeployerDeployContractFunction:  # type: ignore
+    def __call__(self, config: PoolConfig, arg2: bytes, salt: bytes) -> ERC4626Target3DeployerDeployTargetContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(config), dataclass_to_tuple(arg2), dataclass_to_tuple(salt))
         self.kwargs = clone.kwargs
         self.args = clone.args
         return self
 
     def call(
         self,
@@ -69,56 +68,57 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
-class ERC4626Target0DeployerContractFunctions(ContractFunctions):
-    """ContractFunctions for the ERC4626Target0Deployer contract."""
+class ERC4626Target3DeployerContractFunctions(ContractFunctions):
+    """ContractFunctions for the ERC4626Target3Deployer contract."""
 
-    deploy: ERC4626Target0DeployerDeployContractFunction
+    deployTarget: ERC4626Target3DeployerDeployTargetContractFunction
 
     def __init__(
         self,
         abi: ABI,
         w3: "Web3",
         address: ChecksumAddress | None = None,
         decode_tuples: bool | None = False,
     ) -> None:
         super().__init__(abi, w3, address, decode_tuples)
-        self.deploy = ERC4626Target0DeployerDeployContractFunction.factory(
-            "deploy",
+        self.deployTarget = ERC4626Target3DeployerDeployTargetContractFunction.factory(
+            "deployTarget",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
-            function_identifier="deploy",
+            function_identifier="deployTarget",
         )
 
 
-erc4626target0deployer_abi: ABI = cast(
+erc4626target3deployer_abi: ABI = cast(
     ABI,
     [
         {
             "type": "function",
-            "name": "deploy",
+            "name": "deployTarget",
             "inputs": [
                 {
                     "name": "_config",
                     "type": "tuple",
                     "internalType": "struct IHyperdrive.PoolConfig",
                     "components": [
                         {"name": "baseToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "vaultSharesToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "initialVaultSharePrice", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumShareReserves", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumTransactionAmount", "type": "uint256", "internalType": "uint256"},
+                        {"name": "circuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "positionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "checkpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "timeStretch", "type": "uint256", "internalType": "uint256"},
                         {"name": "governance", "type": "address", "internalType": "address"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {
@@ -139,35 +139,35 @@
             ],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "nonpayable",
         }
     ],
 )
 # pylint: disable=line-too-long
-erc4626target0deployer_bytecode = HexStr(
-    "0x608060405234801561001057600080fd5b506148b0806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063195d4bfc14610030575b600080fd5b61004361003e366004610227565b61005f565b6040516001600160a01b03909116815260200160405180910390f35b604080513360208201529081018290526000906060016040516020818303038152906040528051906020012084604051610098906100cb565b6100a29190610351565b8190604051809103906000f59050801580156100c2573d6000803e3d6000fd5b50949350505050565b6144168061046583390190565b634e487b7160e01b600052604160045260246000fd5b6040516101c0810167ffffffffffffffff81118282101715610112576101126100d8565b60405290565b80356001600160a01b038116811461012f57600080fd5b919050565b60006080828403121561014657600080fd5b6040516080810181811067ffffffffffffffff82111715610169576101696100d8565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b600082601f8301126101ab57600080fd5b813567ffffffffffffffff808211156101c6576101c66100d8565b604051601f8301601f19908116603f011681019082821181831017156101ee576101ee6100d8565b8160405283815286602085880101111561020757600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600083850361026081121561023e57600080fd5b6102208082121561024e57600080fd5b6102566100ee565b915061026186610118565b825261026f60208701610118565b602083015261028060408701610118565b6040830152606086013560608301526080860135608083015260a086013560a083015260c086013560c083015260e086013560e08301526101008087013581840152506101208087013581840152506101406102dd818801610118565b908301526101606102ef878201610118565b90830152610180610301878201610118565b908301526101a061031488888301610134565b9083015290935084013567ffffffffffffffff81111561033357600080fd5b61033f8682870161019a565b92505061024084013590509250925092565b81516001600160a01b031681526102208101602083015161037d60208401826001600160a01b03169052565b50604083015161039860408401826001600160a01b03169052565b50606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e0830152610100808401518184015250610120808401518184015250610140808401516103fe828501826001600160a01b03169052565b5050610160838101516001600160a01b038116848301525050610180838101516001600160a01b0381168483015250506101a08381015180518483015260208101516101c085015260408101516101e0850152606081015161020085015250509291505056fe6102406040523480156200001257600080fd5b5060405162004416380380620044168339810160408190526200003591620001e1565b600160005580516001600160a01b039081166080908152602080840151831660a0908152918401516101a0908152918401516101c05260c0808501516101e0526101008086015190915260e0808601519052610120808601519091529184018051519092528151015161014090815281516040908101516101609081529251606090810151610180908152918601518516610200528501516102205290840151600a80546001600160a01b03199081169286169290921790559184015160088054841691851691909117905590920151600980549093169116179055620002d4565b6040516101c081016001600160401b03811182821017156200014957634e487b7160e01b600052604160045260246000fd5b60405290565b80516001600160a01b03811681146200016757600080fd5b919050565b6000608082840312156200017f57600080fd5b604051608081016001600160401b0381118282101715620001b057634e487b7160e01b600052604160045260246000fd5b8060405250809150825181526020830151602082015260408301516040820152606083015160608201525092915050565b60006102208284031215620001f557600080fd5b620001ff62000117565b6200020a836200014f565b81526200021a602084016200014f565b60208201526200022d604084016200014f565b6040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101008084015181830152506101208084015181830152506101406200028c8185016200014f565b90820152610160620002a08482016200014f565b90820152610180620002b48482016200014f565b908201526101a0620002c9858583016200016c565b908201529392505050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516101e0516102005161022051614023620003f360003960008181610b440152611afd015260008181610b1d0152611ac0015260008181610bbe0152611cb5015260008181610b980152611c8f015260008181610b6e0152611c6901526000610cee01526000610cc901526000610ca401526000610c81015260008181610c310152611cdb015260008181610be401528181610e6f0152612370015260008181610c0a015261263e01526000818161054701528181610af1015281816120d4015281816122b1015281816125250152818161258b015261261001526000818161064f01528181610acc0152610e1601526140236000f3fe608060405234801561001057600080fd5b50600436106101fa5760003560e01c80637180c8ca1161011a578063becee9c3116100ad578063d81657431161007c578063d816574314610470578063e44808bc14610485578063e4af29d114610498578063e985e9c5146104ab578063fba56008146104be57600080fd5b8063becee9c31461042d578063c55dae631461044d578063c69e16ad14610455578063cf210e651461045d57600080fd5b8063a42dce80116100e9578063a42dce80146103df578063ab033ea9146103f2578063b0d9658014610405578063bd85b0391461041a57600080fd5b80637180c8ca146103935780637ecebe00146103a65780639cd241af146103b9578063a22cb465146103cc57600080fd5b806321ff32a91161019257806346fbf68e1161016157806346fbf68e146103355780634e41a1fb146103585780634ed2d6ac1461036b57806360246c881461037e57600080fd5b806321ff32a9146102d4578063313ce567146102f55780633656eec21461030f5780633e691db91461032257600080fd5b806314e5f07b116101ce57806314e5f07b1461027057806317fad7fc146102835780631c0f12b61461029657806320fc4881146102a957600080fd5b8062ad800c146101ff57806301681a621461022857806302329a291461023d5780630a4e149314610250575b600080fd5b61021261020d36600461351b565b6104ed565b60405161021f9190613584565b60405180910390f35b61023b6102363660046135ac565b610524565b005b61023b61024b3660046135d7565b610530565b610258610539565b6040516001600160a01b03909116815260200161021f565b61023b61027e366004613603565b61057c565b61023b6102913660046136d7565b610598565b61023b6102a436600461376c565b6105ae565b6102bc6102b736600461351b565b6105c1565b60405190516001600160801b0316815260200161021f565b6102e76102e23660046137b4565b610602565b60405190815260200161021f565b6102fd610648565b60405160ff909116815260200161021f565b6102e761031d3660046137f6565b6106e3565b6102e7610330366004613826565b61071c565b6103486103433660046135ac565b610727565b604051901515815260200161021f565b61021261036636600461351b565b61075d565b61023b610379366004613861565b61076b565b6103866107b9565b60405161021f91906138ab565b61023b6103a136600461394c565b6109e6565b6102e76103b43660046135ac565b6109f4565b61023b6103c736600461397a565b610a20565b61023b6103da36600461394c565b610a31565b61023b6103ed3660046135ac565b610a9d565b61023b6104003660046135ac565b610aa6565b61040d610aaf565b60405161021f91906139b2565b6102e761042836600461351b565b610d2b565b61044061043b366004613ac6565b610d4d565b60405161021f9190613b08565b610258610e08565b6102e7610e48565b6102e761046b36600461351b565b610e62565b610478610eab565b60405161021f9190613b4c565b61023b610493366004613c5d565b610fb7565b61023b6104a63660046135ac565b610fff565b6103486104b9366004613cbc565b611008565b6104c661104c565b6040805182516001600160801b03908116825260209384015116928101929092520161021f565b606061051f6104fb836110ab565b60405160200161050b9190613584565b6040516020818303038152906040526111d3565b919050565b61052d816111f7565b50565b61052d8161136d565b604080516001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000166020820152600091610579910161050b565b90565b61058d8989898989898989896113f0565b505050505050505050565b6105a68686868686866115e7565b505050505050565b6105bb848484843361169b565b50505050565b60408051602081019091526000815261051f6007600084815260200190815260200160002060405160200161050b91546001600160801b0316815260200190565b60008381526010602090815260408083206001600160a01b0386811685529083528184209085168452825280832054815192830152610641910161050b565b9392505050565b60006105797f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156106ab573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106cf9190613cea565b6040805160ff90921660208301520161050b565b6000828152600d602090815260408083206001600160a01b0385168452825280832054815192830152610716910161050b565b92915050565b60006107168261185c565b6001600160a01b0381166000908152600c6020908152604080832054905161051f9261050b9260ff169101901515815260200190565b606061051f6104fb83611984565b8361077581611a82565b6001600160a01b0316336001600160a01b0316146107a657604051632aab8bd360e01b815260040160405180910390fd5b6107b285858585611b3f565b5050505050565b610832604051806101e001604052806000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b600061083c611bac565b600654600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e95460008080527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54939450926001600160801b03909216916108a79190613d33565b6108b19190613d46565b905060008083116108c35760006108de565b6108de836108d86108d386611bc4565b611d5a565b90611d8a565b604080516101e0810182526001546001600160801b038082168352600354600f81900b60208501526005546001600160701b036201000082041695850195909552600160801b9485900482166060850152918490048116608084015260a0830187905260c08301889052600254849004811660e0840152600454808216610100850152918490048116610120840152908390048116610140830152600654808216610160840152929092049091166101808201529091506000906101a0810184156109b2576109ad8486611d9f565b6109b5565b60005b81526002546001600160801b03166020918201526040519192506109df9161050b918491016138ab565b5050505090565b6109f08282611db4565b5050565b6001600160a01b03811660009081526011602090815260408083205481519283015261051f910161050b565b610a2c83838333611b3f565b505050565b336000818152600f602090815260408083206001600160a01b03871680855290835292819020805460ff191686151590811790915590519081529192917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050565b61052d81611e3d565b61052d81611eb1565b610ab761344b565b604080516101c0810182526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000811682527f000000000000000000000000000000000000000000000000000000000000000081166020808401919091527f00000000000000000000000000000000000000000000000000000000000000008216838501527f00000000000000000000000000000000000000000000000000000000000000006060808501919091527f00000000000000000000000000000000000000000000000000000000000000006080808601919091527f000000000000000000000000000000000000000000000000000000000000000060a08601527f000000000000000000000000000000000000000000000000000000000000000060c08601527f000000000000000000000000000000000000000000000000000000000000000060e08601527f00000000000000000000000000000000000000000000000000000000000000006101008601527f0000000000000000000000000000000000000000000000000000000000000000610120860152600a5484166101408601526008548416610160860152600954909316610180850152845192830185527f000000000000000000000000000000000000000000000000000000000000000083527f0000000000000000000000000000000000000000000000000000000000000000838301527f0000000000000000000000000000000000000000000000000000000000000000838601527f0000000000000000000000000000000000000000000000000000000000000000908301526101a083019190915291516105799261050b9291016139b2565b6000818152600e602090815260408083205481519283015261051f910161050b565b606060008267ffffffffffffffff811115610d6a57610d6a613d59565b604051908082528060200260200182016040528015610d93578160200160208202803683370190505b50905060005b83811015610dec576000858583818110610db557610db5613d6f565b90506020020135905060008154905080848481518110610dd757610dd7613d6f565b60209081029190910101525050600101610d99565b50610e018160405160200161050b9190613b08565b5092915050565b604080516001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000166020820152600091610579910161050b565b6000610579600b5460405160200161050b91815260200190565b600061051f610e99610e947f000000000000000000000000000000000000000000000000000000000000000085613d33565b611f25565b60405160200161050b91815260200190565b6040805161018081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101829052610160810191909152610579600160405160200161050b919081546001600160801b038082168352608091821c602084015260018401548082166040850152821c60608401526002840154600f81900b83850152821c60a0840152600384015490811660c0840152811c60e083015260049092015460ff8082161515610100840152600882901c1615156101208301526001600160701b03601082901c1661014083015290911c6101608201526101800190565b84610fc181611a82565b6001600160a01b0316336001600160a01b031614610ff257604051632aab8bd360e01b815260040160405180910390fd5b6105a6868686868661169b565b61052d81611f69565b6001600160a01b038281166000908152600f60209081526040808320938516835292815282822054835160ff9091161515918101919091529091610716910161050b565b60408051808201909152600080825260208201526040805180820182526006546001600160801b03808216808452600160801b90920481166020938401908152845193840192909252905116918101919091526105799060600161050b565b606060f882901c6001600160f81b03831660006110c782611fdd565b905060008360038111156110dd576110dd613d07565b0361110f576040518060400160405280600d81526020016c048797065726472697665204c5609c1b81525093506111cb565b600183600381111561112357611123613d07565b0361114f57806040516020016111399190613d85565b60405160208183030381529060405293506111cb565b600283600381111561116357611163613d07565b0361117957806040516020016111399190613dbe565b600383600381111561118d5761118d613d07565b036111cb576040518060400160405280601b81526020017f48797065726472697665205769746864726177616c205368617265000000000081525093505b505050919050565b80604051636e64089360e11b81526004016111ee9190613584565b60405180910390fd5b6111ff612092565b600954336000908152600c60205260409020546001600160a01b039091169060ff161580156112375750336001600160a01b03821614155b801561124e5750600a546001600160a01b03163314155b1561126b576040516282b42960e81b815260040160405180910390fd5b60006112756120bc565b6040516370a0823160e01b81523060048201529091506000906001600160a01b038516906370a0823190602401602060405180830381865afa1580156112bf573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112e39190613df8565b90506112f96001600160a01b0385168483612147565b816113026120bc565b14611320576040516313dd85ff60e31b815260040160405180910390fd5b836001600160a01b0316836001600160a01b03167f951f51ee88c8e42633698bba90d1e53c0954470938036879e691c0232b47e09660405160405180910390a350505061052d6001600055565b336000908152600c602052604090205460ff1661139c576040516282b42960e81b815260040160405180910390fd5b600580548215156101000261ff00199091161790556040517f7c4d1fe30fdbfda9e9c4c43e759ef32e4db5128d4cb58ff3ae9583b89b6242a5906113e590831515815260200190565b60405180910390a150565b834211156114115760405163f87d927160e01b815260040160405180910390fd5b6001600160a01b0387166114385760405163f0dd15fd60e01b815260040160405180910390fd5b6001600160a01b0387811660008181526011602090815260408083205481518084018f905280830195909552948b166060850152891515608085015260a084019490945260c08084018990528451808503909101815260e08401909452835193019290922061190160f01b61010083015261010282018c90526101228201526101420160408051601f198184030181528282528051602091820120600080855291840180845281905260ff88169284019290925260608301869052608083018590529092509060019060a0016020604051602081039080840390855afa158015611526573d6000803e3d6000fd5b505050602060405103519050886001600160a01b0316816001600160a01b03161461156457604051638baa579f60e01b815260040160405180910390fd5b6001600160a01b03898116600081815260116020908152604080832080546001019055600f8252808320948d1680845294825291829020805460ff19168c151590811790915591519182527f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a35050505050505050505050565b6001600160a01b038616158061160457506001600160a01b038516155b156116225760405163f0dd15fd60e01b815260040160405180910390fd5b8281146116425760405163174861a760e31b815260040160405180910390fd5b60005b838110156116925761168a85858381811061166257611662613d6f565b90506020020135888886868681811061167d5761167d613d6f565b905060200201353361169b565b600101611645565b50505050505050565b6001600160a01b03841615806116b857506001600160a01b038316155b156116d65760405163f0dd15fd60e01b815260040160405180910390fd5b836001600160a01b0316816001600160a01b03161461179a576001600160a01b038085166000908152600f602090815260408083209385168352929052205460ff1661179a5760008581526010602090815260408083206001600160a01b038089168552908352818420908516845290915290205460001981146117985760008681526010602090815260408083206001600160a01b03808a168552908352818420908616845290915281208054859290611792908490613d46565b90915550505b505b6000858152600d602090815260408083206001600160a01b0388168452909152812080548492906117cc908490613d46565b90915550506000858152600d602090815260408083206001600160a01b038716845290915281208054849290611803908490613d33565b909155505060408051868152602081018490526001600160a01b038086169287821692918516917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a45050505050565b6000611866612092565b61186f82612199565b6008546001600160a01b03168061188960208501856135ac565b6001600160a01b0316146118b057604051630ad13b3360e21b815260040160405180910390fd5b336000908152600c602052604090205460ff161580156118d95750336001600160a01b03821614155b80156118f05750600a546001600160a01b03163314155b1561190d576040516282b42960e81b815260040160405180910390fd5b6000611917611bac565b600b8054600090915590915061192e8183876121cf565b9350826001600160a01b03167fa4bafc79b3f9fdba2427cd386f1fbc7d8779e9fd7229f6220d53bc04d3901e47611966868589612269565b60405190815260200160405180910390a250505061051f6001600055565b606060f882901c6001600160f81b03831660006119a082611fdd565b905060008360038111156119b6576119b6613d07565b036119e8576040518060400160405280600d81526020016c0485950455244524956452d4c5609c1b81525093506111cb565b60018360038111156119fc576119fc613d07565b03611a1257806040516020016111399190613e11565b6002836003811115611a2657611a26613d07565b03611a3c57806040516020016111399190613e49565b6003836003811115611a5057611a50613d07565b036111cb57505060408051808201909152600d81526c485950455244524956452d575360981b60208201529392505050565b604080513060208083019190915281830193909352815180820383018152606080830184528151918501919091206001600160f81b031960808401527f000000000000000000000000000000000000000000000000000000000000000090911b6bffffffffffffffffffffffff1916608183015260958201527f000000000000000000000000000000000000000000000000000000000000000060b5808301919091528251808303909101815260d5909101909152805191012090565b60008481526010602090815260408083206001600160a01b0385811680865291845282852090881680865290845293829020869055905185815290917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a350505050565b6000611bbf670de0b6b3a7640000612298565b905090565b611c286040518061018001604052806000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b60408051610180810182526001546001600160801b038082168352600354600f0b6020840152600160801b91829004811693830193909352606082018590527f000000000000000000000000000000000000000000000000000000000000000060808301527f000000000000000000000000000000000000000000000000000000000000000060a08301527f000000000000000000000000000000000000000000000000000000000000000060c08301527f000000000000000000000000000000000000000000000000000000000000000060e08301526002540482166101008201526004549091610120830191611d209116612325565b81526003546001600160801b03600160801b9182900481166020840152600454604090930192611d5292900416612325565b905292915050565b6000806000611d688461239b565b9150915080610e0157604051635516328b60e11b815260040160405180910390fd5b60006106418383670de0b6b3a7640000612428565b600061064183670de0b6b3a764000084612428565b600a546001600160a01b03163314611dde576040516282b42960e81b815260040160405180910390fd5b6001600160a01b0382166000818152600c6020908152604091829020805460ff191685151590811790915591519182527f902923dcd4814f6cef7005a70e01d5cf2035ab02d4523ef3b865f1d7bab885af910160405180910390a25050565b600a546001600160a01b03163314611e67576040516282b42960e81b815260040160405180910390fd5b600880546001600160a01b0319166001600160a01b0383169081179091556040517fe5693914d19c789bdee50a362998c0bc8d035a835f9871da5d51152f0582c34f90600090a250565b600a546001600160a01b03163314611edb576040516282b42960e81b815260040160405180910390fd5b600a80546001600160a01b0319166001600160a01b0383169081179091556040517f9d3e522e1e47a2f6009739342b9cc7b252a1888154e843ab55ee1c81745795ab90600090a250565b6000611f4d600e6000611f39600286612446565b81526020019081526020016000205461247b565b611f5f600e6000611f39600187612446565b6107169190613e75565b600a546001600160a01b03163314611f93576040516282b42960e81b815260040160405180910390fd5b600980546001600160a01b0319166001600160a01b0383169081179091556040517fc049058b1df2dd8902739ceb78992df12fa8369c06c450b3c6787137b452fdd290600090a250565b60408051604e80825260808201909252606091906000908260208201818036833701905050905060005b841561208457612018600a86613eab565b612023906030613d33565b60f81b8260016120338487613d46565b61203d9190613d46565b8151811061204d5761204d613d6f565b60200101906001600160f81b031916908160001a9053508061206e81613ebf565b915061207d9050600a86613ed8565b9450612007565b918290030190815292915050565b6002600054036120b557604051633ee5aeb560e01b815260040160405180910390fd5b6002600055565b6040516370a0823160e01b81523060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa158015612123573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611bbf9190613df8565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663a9059cbb60e01b179052610a2c9084906124a9565b60006121a860208301836135ac565b6001600160a01b03160361052d5760405163f0dd15fd60e01b815260040160405180910390fd5b6000806121dc8585611d8a565b90506121e78161250c565b9450846000036121fb576000915050610641565b61220b60408401602085016135d7565b1561223a576122338561222160208601866135ac565b61222e6040870187613eec565b61255c565b9150612261565b61225d8561224b60208601866135ac565b6122586040870187613eec565b612603565b8491505b509392505050565b600061227b60408301602084016135d7565b15612287575082610641565b6122918484611d8a565b9050610641565b6040516303d1689d60e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906307a2d13a906024015b602060405180830381865afa158015612301573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107169190613df8565b600080670de0b6b3a7640000612339612637565b6123439190613f33565b905080831161235357600061235d565b61235d8184613d46565b9150610641612394670de0b6b3a76400007f0000000000000000000000000000000000000000000000000000000000000000613f33565b8390611d9f565b60008060008060006123ac8661266d565b91509150806123c357506000958695509350505050565b6123d08660a0015161247b565b6123d9876129a7565b836123e7896000015161247b565b6123f19190613f4a565b6123fb9190613f4a565b6124059190613e75565b92505050600081121561241e5750600093849350915050565b9360019350915050565b600082600019048411830215820261243f57600080fd5b5091020490565b60006001600160f81b038211156124705760405163b7d0949760e01b815260040160405180910390fd5b5060f89190911b1790565b60006001600160ff1b038211156124a55760405163396ea70160e11b815260040160405180910390fd5b5090565b60006124be6001600160a01b03841683612a0b565b905080516000141580156124e35750808060200190518101906124e19190613f6a565b155b15610a2c57604051635274afe760e01b81526001600160a01b03841660048201526024016111ee565b6040516363737ac960e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063c6e6f592906024016122e4565b604051635d043b2960e11b8152600481018590526001600160a01b0384811660248301523060448301526000917f00000000000000000000000000000000000000000000000000000000000000009091169063ba087652906064016020604051808303816000875af11580156125d6573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906125fa9190613df8565b95945050505050565b6105bb6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000168486612147565b60006126637f000000000000000000000000000000000000000000000000000000000000000042613eab565b611bbf9042613d46565b6000806000612697612692856101600151866101400151611d8a90919063ffffffff16565b61247b565b6126b7612692866101200151876101000151612a1990919063ffffffff16565b6126c19190613e75565b90506000806126d886600001518760200151612a2e565b91509150806126ef57506000958695509350505050565b600083131561283f576000839050600061273d886000015189602001518a604001518b60a001518c60e00151670de0b6b3a764000061272e9190613d46565b8d606001518e60800151612a6d565b9350905082612756575060009788975095505050505050565b8181106127f4576000612790858a60400151858c60e00151670de0b6b3a76400006127819190613d46565b8d606001518e60800151612b7f565b94509050831580156127a557508860c0015183105b156127bc5750600098600198509650505050505050565b836127d257506000988998509650505050505050565b6127db8161247b565b6127e490613f87565b9960019950975050505050505050565b600088602001511261282b576128138860a00151856126929190613d46565b61281c90613f87565b98600198509650505050505050565b60a088015188516128139161269291613d46565b600083121561299857600061285384613f87565b905060006128878489604001518a60e00151670de0b6b3a76400006128789190613d46565b8b606001518c60800151612c42565b93509050826128a0575060009788975095505050505050565b8181106129255760006128da858a60400151858c60e00151670de0b6b3a76400006128cb9190613d46565b8d606001518e60800151612cee565b94509050831580156128ef57508860c0015183105b156129065750600098600198509650505050505050565b8361291c57506000988998509650505050505050565b6127e48161247b565b6000612957858a604001518b60e00151670de0b6b3a76400006129489190613d46565b8c606001518d60800151612dc5565b945090508361297157506000988998509650505050505050565b6127e461298e8a6060015184866129889190613d46565b90611d9f565b6126929083613d33565b50600095600195509350505050565b60006129da612692836101200151670de0b6b3a76400006129c89190613d46565b60608501516101008601519190612e74565b611f5f612692846101600151670de0b6b3a76400006129f99190613d46565b60608601516101408701519190612428565b606061064183836000612e9a565b60006106418383670de0b6b3a7640000612e74565b600080600083612a3d8661247b565b612a479190613e75565b90506000811215612a5f576000809250925050612a66565b9150600190505b9250929050565b6000806000881215612a8f57612a8288613f87565b612a8c9087613d33565b95505b600080612a9c8b8b612a2e565b9150915080612ab357600080935093505050612b73565b6000612ac2838b8a8a8a612f37565b90506000612ae5612add8a612ad78a8e612a19565b90612f66565b899089612e74565b905080821015612aff576000809550955050505050612b73565b808203670de0b6b3a76400008110612b3457612b2d612b26670de0b6b3a76400008c611d9f565b8290612f66565b9050612b4c565b612b49612b26670de0b6b3a76400008c612fd1565b90505b8b811015612b6557600080965096505050505050612b73565b8b9003955060019450505050505b97509795505050505050565b6000806000612b918989888888612fe6565b9050612ba186612ad7898b613d33565b975087811015612bb8576000809250925050612c37565b878103612bc6818688612e74565b9050670de0b6b3a76400008110612bf357612bec612b26670de0b6b3a764000089612fd1565b9050612c0b565b612c08612b26670de0b6b3a764000089611d9f565b90505b612c158186612fd1565b9050808a1015612c2d57600080935093505050612c37565b8903925060019150505b965096945050505050565b6000806000612c548888888888612fe6565b90506000612c7f670de0b6b3a7640000612c6e8888611d9f565b612c789190613d33565b8390612fd1565b9050670de0b6b3a76400008110612cac57612ca5612b26670de0b6b3a764000089612fd1565b9050612cc4565b612cc1612b26670de0b6b3a764000089611d9f565b90505b80881015612cda57600080935093505050612ce4565b8703925060019150505b9550959350505050565b6000806000612d008989888888612fe6565b905086881015612d17576000809250925050612c37565b9686900396612d268887612f66565b975087811015612d3d576000809250925050612c37565b878103612d4b818688612e74565b9050670de0b6b3a76400008110612d7857612d71612b26670de0b6b3a764000089612fd1565b9050612d90565b612d8d612b26670de0b6b3a764000089611d9f565b90505b612d9a8186612fd1565b905089811015612db257600080935093505050612c37565b9890980398600198509650505050505050565b6000806000612dd78888888888612f37565b90506000612dfb670de0b6b3a7640000612df18888612fd1565b6123949190613d33565b9050670de0b6b3a76400008110612e2857612e21612b26670de0b6b3a764000089611d9f565b9050612e40565b612e3d612b26670de0b6b3a764000089612fd1565b90505b612e4a8186611d9f565b905088811015612e6257600080935093505050612ce4565b97909703976001975095505050505050565b6000826000190484118302158202612e8b57600080fd5b50910281810615159190040190565b606081471015612ebf5760405163cd78605960e01b81523060048201526024016111ee565b600080856001600160a01b03168486604051612edb9190613fa3565b60006040518083038185875af1925050503d8060008114612f18576040519150601f19603f3d011682016040523d82523d6000602084013e612f1d565b606091505b5091509150612f2d86838361300b565b9695505050505050565b6000612f438585612f66565b612f5c612f5486612ad7868b611d8a565b859085612428565b612f2d9190613d33565b600081600003612f7f5750670de0b6b3a7640000610716565b82600003612f8f57506000610716565b6000612f9a8361247b565b90506000612faf612faa8661247b565b613067565b9050818102612fc6670de0b6b3a764000082613fbf565b9050612f2d8161328d565b600061064183670de0b6b3a764000084612e74565b6000612ff28585612f66565b612f5c61300386612ad7868b612a19565b859085612e74565b6060826130205761301b82613422565b610641565b815115801561303757506001600160a01b0384163b155b1561306057604051639996b31560e01b81526001600160a01b03851660048201526024016111ee565b5080610641565b60008082136130895760405163e61b497560e01b815260040160405180910390fd5b506001600160801b03811160071b81811c67ffffffffffffffff1060061b1781811c63ffffffff1060051b1781811c61ffff1060041b1781811c60ff10600390811b90911782811c600f1060021b1782811c909110600190811b90911782811c90911017609f8181036060019290921b91605f1982019061310c9084901c61247b565b6c465772b2bbbb5f824b15207a3081018102606090811d6d0388eaa27412d5aca026815d636e018202811d6d0df99ac502031bf953eff472fdcc018202811d6d13cdffb29d51d99322bdff5f2211018202811d6d0a0f742023def783a307a986912e018202811d6d01920d8043ca89b5239253284e42018202811d6c0b7a86d7375468fac667a0a527016c29508e458543d8aa4df2abee7883018302821d6d0139601a2efabe717e604cbb4894018302821d6d02247f7a7b6594320649aa03aba1018302821d6c8c3f38e95a6b1ff2ab1c3b343619018302821d6d02384773bdf1ac5676facced60901901830290911d6cb9a025d814b29c212b8b1a07cd1901909102780a09507084cc699bb0e71ea869ffffffffffffffffffffffff190105711340daa0d5f769dba1915cef59f0815a5506027d0267a36c0c95b3975ab3ee5b203a7614a3f75373f047d803ae7b6687f2b391909102017d57115e47018c7177eebf7cd370a3356a1b7863008a5ae8028c72b88642840160ae1d92915050565b6000680248ce36a70cb26b3e1982136132a857506000919050565b680755bf798b4a1bf1e582126132d1576040516373a2d6b160e01b815260040160405180910390fd5b6503782dace9d9604e83901b059150600060606bb17217f7d1cf79abc9e3b39884821b056001605f1b01901d6bb17217f7d1cf79abc9e3b3988102909303926c240c330e9fb2d9cbaf0fd5aafb1984018402606090811d6d0277594991cfc85f6e2461837cd9018502811d6d1a521255e34f6a5061b25ef1c9c319018502811d6db1bbb201f443cf962f1a1d3db4a5018502811d6e02c72388d9f74f51a9331fed693f1419018502811d6e05180bb14799ab47a8a8cb2a527d57016d02d16720577bd19bf614176fe9ea6c10fe68e7fd37d0007b713f765087018702831d9081019087016d01d3967ed30fc4f89c02bab570811901810290921d6e0587f503bb6ea29d25fcb7401964500186026d360d7aeea093263ecc6e0ecb291760621b018181059550929350909190612f2d74029d9dc38563c32e5c2f6dc192ee70ef65f9978af3860260c38690031c61247b565b8051156134325780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b604051806101c0016040528060006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b031681526020016000801916815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b031681526020016135166040518060800160405280600081526020016000815260200160008152602001600081525090565b905290565b60006020828403121561352d57600080fd5b5035919050565b60005b8381101561354f578181015183820152602001613537565b50506000910152565b60008151808452613570816020860160208601613534565b601f01601f19169290920160200192915050565b6020815260006106416020830184613558565b6001600160a01b038116811461052d57600080fd5b6000602082840312156135be57600080fd5b813561064181613597565b801515811461052d57600080fd5b6000602082840312156135e957600080fd5b8135610641816135c9565b60ff8116811461052d57600080fd5b60008060008060008060008060006101208a8c03121561362257600080fd5b8935985060208a0135975060408a013561363b81613597565b965060608a013561364b81613597565b955060808a013561365b816135c9565b945060a08a0135935060c08a0135613672816135f4565b8093505060e08a013591506101008a013590509295985092959850929598565b60008083601f8401126136a457600080fd5b50813567ffffffffffffffff8111156136bc57600080fd5b6020830191508360208260051b8501011115612a6657600080fd5b600080600080600080608087890312156136f057600080fd5b86356136fb81613597565b9550602087013561370b81613597565b9450604087013567ffffffffffffffff8082111561372857600080fd5b6137348a838b01613692565b9096509450606089013591508082111561374d57600080fd5b5061375a89828a01613692565b979a9699509497509295939492505050565b6000806000806080858703121561378257600080fd5b84359350602085013561379481613597565b925060408501356137a481613597565b9396929550929360600135925050565b6000806000606084860312156137c957600080fd5b8335925060208401356137db81613597565b915060408401356137eb81613597565b809150509250925092565b6000806040838503121561380957600080fd5b82359150602083013561381b81613597565b809150509250929050565b60006020828403121561383857600080fd5b813567ffffffffffffffff81111561384f57600080fd5b82016060818503121561064157600080fd5b6000806000806080858703121561387757600080fd5b84359350602085013561388981613597565b92506040850135915060608501356138a081613597565b939692955090935050565b815181526020808301519082015260408083015190820152606080830151908201526080808301519082015260a0808301519082015260c0808301519082015260e08083015190820152610100808301519082015261012080830151908201526101408083015190820152610160808301519082015261018080830151908201526101a080830151908201526101c091820151918101919091526101e00190565b6000806040838503121561395f57600080fd5b823561396a81613597565b9150602083013561381b816135c9565b60008060006060848603121561398f57600080fd5b8335925060208401356139a181613597565b929592945050506040919091013590565b81516001600160a01b03168152610220810160208301516139de60208401826001600160a01b03169052565b5060408301516139f960408401826001600160a01b03169052565b50606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151818401525061014080840151613a5f828501826001600160a01b03169052565b5050610160838101516001600160a01b038116848301525050610180838101516001600160a01b0381168483015250506101a08381015180518483015260208101516101c085015260408101516101e085015260608101516102008501525b505092915050565b60008060208385031215613ad957600080fd5b823567ffffffffffffffff811115613af057600080fd5b613afc85828601613692565b90969095509350505050565b6020808252825182820181905260009190848201906040850190845b81811015613b4057835183529284019291840191600101613b24565b50909695505050505050565b81516001600160801b0316815261018081016020830151613b7860208401826001600160801b03169052565b506040830151613b9360408401826001600160801b03169052565b506060830151613bae60608401826001600160801b03169052565b506080830151613bc36080840182600f0b9052565b5060a0830151613bde60a08401826001600160801b03169052565b5060c0830151613bf960c08401826001600160801b03169052565b5060e0830151613c1460e08401826001600160801b03169052565b506101008381015115159083015261012080840151151590830152610140808401516001600160701b031690830152610160808401516001600160801b03811682850152613abe565b600080600080600060a08688031215613c7557600080fd5b853594506020860135613c8781613597565b93506040860135613c9781613597565b9250606086013591506080860135613cae81613597565b809150509295509295909350565b60008060408385031215613ccf57600080fd5b8235613cda81613597565b9150602083013561381b81613597565b600060208284031215613cfc57600080fd5b8151610641816135f4565b634e487b7160e01b600052602160045260246000fd5b634e487b7160e01b600052601160045260246000fd5b8082018082111561071657610716613d1d565b8181038181111561071657610716613d1d565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b700243cb832b9323934bb32902637b7339d1607d1b815260008251613db1816011850160208701613534565b9190910160110192915050565b710243cb832b9323934bb329029b437b93a1d160751b815260008251613deb816012850160208701613534565b9190910160120192915050565b600060208284031215613e0a57600080fd5b5051919050565b6f242ca822a9222924ab2296a627a7239d60811b815260008251613e3c816010850160208701613534565b9190910160100192915050565b70242ca822a9222924ab2296a9a427a92a1d60791b815260008251613db1816011850160208701613534565b8181036000831280158383131683831282161715610e0157610e01613d1d565b634e487b7160e01b600052601260045260246000fd5b600082613eba57613eba613e95565b500690565b600060018201613ed157613ed1613d1d565b5060010190565b600082613ee757613ee7613e95565b500490565b6000808335601e19843603018112613f0357600080fd5b83018035915067ffffffffffffffff821115613f1e57600080fd5b602001915036819003821315612a6657600080fd5b808202811582820484141761071657610716613d1d565b8082018281126000831280158216821582161715613abe57613abe613d1d565b600060208284031215613f7c57600080fd5b8151610641816135c9565b6000600160ff1b8201613f9c57613f9c613d1d565b5060000390565b60008251613fb5818460208701613534565b9190910192915050565b600082613fce57613fce613e95565b600160ff1b821460001984141615613fe857613fe8613d1d565b50059056fea264697066735822122038e6185065502f10f1ba8527a9a20978026c6798678a776b5be9c19cf30c27b164736f6c63430008140033a264697066735822122013120061d82cdb7743f0ab36237a245fb60aa5adcbec649b8f5bb5ff9b9fefea64736f6c63430008140033"
+erc4626target3deployer_bytecode = HexStr(
+    "0x608060405234801561001057600080fd5b5061465f806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063847c08a514610030575b600080fd5b61004361003e366004610227565b61005f565b6040516001600160a01b03909116815260200160405180910390f35b604080513360208201529081018290526000906060016040516020818303038152906040528051906020012084604051610098906100cb565b6100a2919061035d565b8190604051809103906000f59050801580156100c2573d6000803e3d6000fd5b50949350505050565b6141ad8061047d83390190565b634e487b7160e01b600052604160045260246000fd5b6040516101e0810167ffffffffffffffff81118282101715610112576101126100d8565b60405290565b80356001600160a01b038116811461012f57600080fd5b919050565b60006080828403121561014657600080fd5b6040516080810181811067ffffffffffffffff82111715610169576101696100d8565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b600082601f8301126101ab57600080fd5b813567ffffffffffffffff808211156101c6576101c66100d8565b604051601f8301601f19908116603f011681019082821181831017156101ee576101ee6100d8565b8160405283815286602085880101111561020757600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600083850361028081121561023e57600080fd5b6102408082121561024e57600080fd5b6102566100ee565b915061026186610118565b825261026f60208701610118565b602083015261028060408701610118565b6040830152606086013560608301526080860135608083015260a086013560a083015260c086013560c083015260e086013560e08301526101008087013581840152506101208087013581840152506101408087013581840152506101606102e9818801610118565b908301526101806102fb878201610118565b908301526101a061030d878201610118565b908301526101c061032088888301610134565b9083015290935084013567ffffffffffffffff81111561033f57600080fd5b61034b8682870161019a565b92505061026084013590509250925092565b81516001600160a01b031681526102408101602083015161038960208401826001600160a01b03169052565b5060408301516103a460408401826001600160a01b03169052565b50606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151818401525061014080840151818401525061016080840151610416828501826001600160a01b03169052565b5050610180838101516001600160a01b0381168483015250506101a0838101516001600160a01b0381168483015250506101c08381015180518483015260208101516101e08501526040810151610200850152606081015161022085015250509291505056fe6102606040523480156200001257600080fd5b50604051620041ad380380620041ad8339810160408190526200003591620001ec565b600160005580516001600160a01b039081166080908152602080840151831660a0908152918401516101a0908152918401516101c090815260c0808601516101e05260e08087015161020052610120808801519092526101008088015190915261014080880151909152918601805151909152805190920151905280516040908101516101609081529151606090810151610180908152918601518516610220528501516102405290840151600a80546001600160a01b031990811692861692909217905590840151600880548316918516919091179055920151600980549093169116179055620002eb565b6040516101e081016001600160401b03811182821017156200015457634e487b7160e01b600052604160045260246000fd5b60405290565b80516001600160a01b03811681146200017257600080fd5b919050565b6000608082840312156200018a57600080fd5b604051608081016001600160401b0381118282101715620001bb57634e487b7160e01b600052604160045260246000fd5b8060405250809150825181526020830151602082015260408301516040820152606083015160608201525092915050565b600061024082840312156200020057600080fd5b6200020a62000122565b62000215836200015a565b815262000225602084016200015a565b602082015262000238604084016200015a565b6040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e0820152610100808401518183015250610120808401518183015250610140808401518183015250610160620002a38185016200015a565b90820152610180620002b78482016200015a565b908201526101a0620002cb8482016200015a565b908201526101c0620002e08585830162000177565b908201529392505050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516101e051610200516102205161024051613d1562000498600039600050506000505060008181610495015281816104c401526104f101526000818161032e0152818161073c01528181610c1a01526118dd0152600081816108e9015281816109d401528181610a6701528181610b2f015281816118b70152818161242d015281816124900152818161278b015281816127c701526129bd01526000818161038f0152818161095901528181610e820152611891015260006120320152600061218d0152600081816111050152612161015260005050600081816103d1015281816109ac01528181610ea301526119030152600081816103b00152818161046a015281816109860152818161103d0152612cee01526000818161028001528181610dd901528181610ed501528181610f5c01528181610fbd0152610ff5015260008181611d9301528181612b4c01528181612bc601528181612c5501528181612eef01528181612f550152612fd1015260008181612b1f0152612b800152613d156000f3fe60806040526004361061004a5760003560e01c8063074a6de91461004f578063414f826d146100895780634c2ac1d9146100ab57806377d05ff4146100cc578063cbc13434146100df575b600080fd5b34801561005b57600080fd5b5061006f61006a3660046137a9565b6100ff565b604080519283526020830191909152015b60405180910390f35b34801561009557600080fd5b506100a96100a43660046137f9565b61011a565b005b6100be6100b936600461381b565b610128565b604051908152602001610080565b6100be6100da3660046137a9565b610143565b3480156100eb57600080fd5b5061006f6100fa3660046137a9565b61015a565b60008061010d858585610168565b915091505b935093915050565b6101248282610229565b5050565b600061013786868686866102e8565b90505b95945050505050565b6000610150848484610893565b90505b9392505050565b60008061010d858585610c04565b600080610173610d57565b61017c83610d81565b6000610186610dba565b905061019b610193610dd2565b826004610e08565b506101a9338783888861139d565b90935091506101bb602085018561387f565b6001600160a01b0316337f4ce1e73a001c994d4d884cd1e382579f9c1e81eccf26e70ece8caa1b60a8c2cf8486856101f960408b0160208c016138b6565b604080519485526020850193909352918301521515606082015260800160405180910390a3506101126001600055565b610231610d57565b600061023b610dba565b6000848152600760205260409020600101549091506001600160801b03161561026f5761026881836114e0565b50506102de565b6000610279610dd2565b90506102a57f0000000000000000000000000000000000000000000000000000000000000000856138e9565b1515806102b157508381105b156102cf5760405163ecd29e8160e01b815260040160405180910390fd5b6102da848385610e08565b5050505b6101246001600055565b60006102f2610d57565b600554610100900460ff161561031b576040516321081abf60e01b815260040160405180910390fd5b6103236116db565b61032c82610d81565b7f000000000000000000000000000000000000000000000000000000000000000086101561036d5760405163211ddda360e11b815260040160405180910390fd5b60006103f561037a6116fc565b600154600160801b90046001600160801b03167f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000007f000000000000000000000000000000000000000000000000000000000000000061171d565b90508481108061040457508381115b1561042257604051633b61151160e11b815260040160405180910390fd5b60008061042f8986611743565b91509150600061043d610dd2565b905061044b81836004610e08565b5060008181526007602052604081205461048e906001600160801b03167f000000000000000000000000000000000000000000000000000000000000000061181c565b90506104ba7f000000000000000000000000000000000000000000000000000000000000000082613913565b85118061051957507f00000000000000000000000000000000000000000000000000000000000000008111801561051957506105167f000000000000000000000000000000000000000000000000000000000000000082613926565b85105b1561053757604051630552b01360e31b815260040160405180910390fd5b50600654600360f81b6000908152600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e9549091610583916001600160801b0390911690613926565b6000808052600e6020527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54919250906105be908390613913565b905060008060006105ce87611848565b604051635f9d50ab60e11b815290915073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__9063bf3aa156906106089084906004016139b7565b602060405180830381865af4158015610625573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061064991906139c6565b915061065c61065789611982565b6119b0565b6001546001600160801b038082168352600354600f0b6020840152600160801b9091041660408083019190915251635f9d50ab60e11b815273__$2b4fa6f02a36eedfe41c65e8dd342257d3$__9063bf3aa156906106be9084906004016139b7565b602060405180830381865af41580156106db573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106ff91906139c6565b9250818310156107225760405163184d952160e11b815260040160405180910390fd5b61073884836107318187613926565b91906119d6565b99507f00000000000000000000000000000000000000000000000000000000000000008a101561077b5760405163211ddda360e11b815260040160405180910390fd5b508d8d610788828c6119f4565b10156107a75760405163c972651760e01b815260040160405180910390fd5b6107bf60006107b960208e018e61387f565b8c611a09565b60006107ca88611ab2565b9050806107ea57604051638bdf918d60e01b815260040160405180910390fd5b60008515610801576107fc84876119f4565b610804565b60005b90508c610814602082018261387f565b6001600160a01b03167fa59daf574c5c8db34377de83bceea2aa1433cc506d656f5e8f46e5f4b5c58a868e868d61085160408701602088016138b6565b60408051948552602085019390935291830152151560608201526080810185905260a00160405180910390a250505050505050505050505061013a6001600055565b600061089d610d57565b6108a56116db565b6108ae82610d81565b60055460ff16156108d257604051637983c05160e01b815260040160405180910390fd5b6000806108df8685611743565b909250905061090f7f000000000000000000000000000000000000000000000000000000000000000060026139df565b82101561092f57604051632afb507160e21b815260040160405180910390fd5b6005805460ff1916600117905560405163594f0e8f60e11b815260048101839052602481018290527f00000000000000000000000000000000000000000000000000000000000000006044820152606481018690527f000000000000000000000000000000000000000000000000000000000000000060848201527f000000000000000000000000000000000000000000000000000000000000000060a482015260027f000000000000000000000000000000000000000000000000000000000000000002830393506000908190819073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__9063b29e1d1e9060c401606060405180830381865af4158015610a3b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a5f91906139f6565b9250925092507f0000000000000000000000000000000000000000000000000000000000000000610a908484611abf565b1015610aaf5760405163216f4ab160e21b815260040160405180910390fd5b610ab883611ae5565b600180546001600160801b0319166001600160801b0392909216919091179055610ae182611b0f565b600380546001600160801b0319166001600160801b0392909216919091179055610b0a81611ae5565b600180546001600160801b03928316600160801b029216919091179055610b536000807f0000000000000000000000000000000000000000000000000000000000000000611a09565b610b6b6000610b6560208a018a61387f565b88611a09565b610b7e610b76610dd2565b856004610e08565b50610b8c602088018861387f565b6001600160a01b03167fdfe2bf9f580df5ec15438120ffa6f0603237c4e6b65d07140a4695317da4f952878b87610bc960408d0160208e016138b6565b6040805194855260208501939093529183015215156060820152608081018b905260a00160405180910390a250505050506101536001600055565b600080610c0f610d57565b610c1883610d81565b7f0000000000000000000000000000000000000000000000000000000000000000851015610c595760405163211ddda360e11b815260040160405180910390fd5b6000610c63610dba565b9050610c70610193610dd2565b50610c7d60003388611b4b565b610c92600360f81b610b65602087018761387f565b6000610cad610ca4602087018761387f565b8884898961139d565b9094509050610cbc8188613926565b92506000610cc983611c1c565b509050610cd9602087018761387f565b6001600160a01b0316337f56e07298e87dce53d3298b9775b947b87b39b2dde51df86371f0540885da83c98a8887610d1760408d0160208e016138b6565b60408051948552602085019390935291830152151560608201526080810188905260a0810185905260c00160405180910390a35050506101126001600055565b600260005403610d7a57604051633ee5aeb560e01b815260040160405180910390fd5b6002600055565b6000610d90602083018361387f565b6001600160a01b031603610db75760405163f0dd15fd60e01b815260040160405180910390fd5b50565b6000610dcd670de0b6b3a7640000611d7a565b905090565b6000610dfe7f0000000000000000000000000000000000000000000000000000000000000000426138e9565b610dcd9042613926565b600083815260076020526040812060018101546001600160801b0316151580610e3057504285115b15610e4957600101546001600160801b03169050610153565b6000806000610e56610dd2565b9050808803610ece57869250610ec7610e6d6116fc565b600154600160801b90046001600160801b03167f00000000000000000000000000000000000000000000000000000000000000007f0000000000000000000000000000000000000000000000000000000000000000611e07565b9150610f8a565b6000610efa7f00000000000000000000000000000000000000000000000000000000000000008a613913565b90505b818103610f1557879350610f12610e6d6116fc565b92505b6000818152600760205260409020600101546001600160801b031693508315610f57576000818152600760205260409020546001600160801b03169250610f88565b610f817f000000000000000000000000000000000000000000000000000000000000000082613913565b9050610efd565b505b610f9383611ae5565b6001850180546001600160801b0319166001600160801b0392909216919091179055610fe9610fe27f00000000000000000000000000000000000000000000000000000000000000008a613926565b8984611e1e565b6110278861102161101a7f000000000000000000000000000000000000000000000000000000000000000083613913565b4290611f5c565b84611e1e565b61103087611f71565b50600090506007816110627f00000000000000000000000000000000000000000000000000000000000000008c613926565b815260208101919091526040016000908120600101546001600160801b0316915061108e60028b612115565b6000818152600e60205260408120549192508b8b83156111d457600192506000806110bd86898d86600061214a565b9150915080600b60008282546110d39190613913565b909155506110ef9050866000846110e981611982565b88612219565b6110f98183613913565b915061112986838a8e877f0000000000000000000000000000000000000000000000000000000000000000612393565b915061113d61113883856123d7565b6123ec565b6005805460029061115e9084906201000090046001600160701b0316613a24565b92506101000a8154816001600160701b0302191690836001600160701b0316021790555061118b82611ae5565b600580546010906111ad908490600160801b90046001600160801b0316613a44565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050505b60006111e1600184612115565b6000818152600e602052604090205490915080156112f0576001945060008061120e838b8f88600161214a565b9150915080600b60008282546112249190613913565b9091555061124090508360008461123a81611982565b8a612416565b61124a8183613926565b915061125961113883876123d7565b6005805460029061127a9084906201000090046001600160701b0316613a24565b92506101000a8154816001600160701b0302191690836001600160701b031602179055506112a782611ae5565b600580546010906112c9908490600160801b90046001600160801b0316613a44565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050505b84156113285761131c61130287611982565b61130b83611982565b6113159190613a64565b6000612607565b611326838f6114e0565b505b600061133384611c1c565b50604080518e815260208101879052908101899052606081018490526080810182905290915085907fff888cf98d2696e95c8c39aa98c9ad55a5378008f7a56614c9353b7137a57ab79060a00160405180910390a250999f9e505050505050505050505050505050565b6000806113a985611ab2565b505060065485906001600160801b0316808211156113ce57806001600160801b031691505b816000036113e35760008092509250506114d6565b6113f2600360f81b8984611b4b565b6006546000906114189084906001600160801b03600160801b90910481169085166119d6565b905061142383611ae5565b61142d9083613a84565b600680546001600160801b0319166001600160801b039290921691909117905561145681611ae5565b60068054601090611478908490600160801b90046001600160801b0316613a84565b92506101000a8154816001600160801b0302191690836001600160801b031602179055506114a78188876126ba565b93506114b38684612754565b8410156114d35760405163c972651760e01b815260040160405180910390fd5b50505b9550959350505050565b600654600360f81b6000908152600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e9549091829161152b916001600160801b031690613926565b90508060000361153f5760019150506116d5565b600061154a85612769565b90508060000361155f576001925050506116d5565b60008061156d838589612805565b91509150806115835760009450505050506116d5565b60008073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__632c03ef68858a6040518363ffffffff1660e01b81526004016115bf929190613aa4565b6040805180830381865af41580156115db573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115ff9190613b1a565b9150915061161d61160f82611982565b61161890613b3e565b612979565b92508261163357600096505050505050506116d5565b61163c82611ae5565b600680546000906116579084906001600160801b0316613a44565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555061168481611ae5565b600680546010906116a6908490600160801b90046001600160801b0316613a44565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550600196505050505050505b92915050565b34156116fa57604051631574f9f360e01b815260040160405180910390fd5b565b600154600354600091610dcd916001600160801b0390911690600f0b611abf565b60008061172c87878786611e07565b9050611738818561181c565b979650505050505050565b6000808061175760408501602086016138b6565b1561177c576117728561176d6040870187613b5a565b612b0f565b9093509050611798565b50346117948561178f6040870187613b5a565b612c48565b8492505b6117a0610dba565b9150801561181357604051600090339083908381818185875af1925050503d80600081146117ea576040519150601f19603f3d011682016040523d82523d6000602084013e6117ef565b606091505b5050905080611811576040516312171d8360e31b815260040160405180910390fd5b505b505b9250929050565b600061015361183084846301e13380612c7d565b61184285670de0b6b3a7640000613926565b906119f4565b6118506136e4565b60408051610180810182526001546001600160801b038082168352600354600f0b6020840152600160801b91829004811693830193909352606082018590527f000000000000000000000000000000000000000000000000000000000000000060808301527f000000000000000000000000000000000000000000000000000000000000000060a08301527f000000000000000000000000000000000000000000000000000000000000000060c08301527f000000000000000000000000000000000000000000000000000000000000000060e083015260025404821661010082015260045490916101208301916119489116612ca3565b81526003546001600160801b03600160801b918290048116602084015260045460409093019261197a92900416612ca3565b905292915050565b60006001600160ff1b038211156119ac5760405163396ea70160e11b815260040160405180910390fd5b5090565b6119b981612979565b610db757604051635044b7f560e01b815260040160405180910390fd5b60008260001904841183021582026119ed57600080fd5b5091020490565b600061015383670de0b6b3a7640000846119d6565b6000838152600d602090815260408083206001600160a01b038616845290915281208054839290611a3b908490613913565b90915550506000838152600e602052604081208054839290611a5e908490613913565b909155505060408051848152602081018390526001600160a01b0384169160009133917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f6291015b60405180910390a4505050565b60006116d58260046114e0565b600080611acc8484612d19565b909250905080611ade57611ade612d55565b5092915050565b60006001600160801b038211156119ac57604051630f0af95160e11b815260040160405180910390fd5b600060016001607f1b0319821280611b2d575060016001607f1b0382135b156119ac5760405163a5353be560e01b815260040160405180910390fd5b6000838152600d602090815260408083206001600160a01b0386168452909152902054811115611b8e57604051631e9acf1760e31b815260040160405180910390fd5b6000838152600d602090815260408083206001600160a01b0386168452825280832080548590039055858352600e90915281208054839290611bd1908490613926565b909155505060408051848152602081018390526000916001600160a01b0385169133917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f629101611aa5565b60008060008073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__635a1b419e611c4587611848565b6040518263ffffffff1660e01b8152600401611c6191906139b7565b6040805180830381865af4158015611c7d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ca19190613ba1565b9150915080611cb7575060009485945092505050565b6000808611611cc7576000611cd1565b611cd183876123d7565b600654600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e95460008080527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54939450926001600160801b0390921691611d3c9190613913565b611d469190613926565b905080600003611d5f5750600096879650945050505050565b6000611d6b83836119f4565b98600198509650505050505050565b6040516303d1689d60e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906307a2d13a906024015b602060405180830381865afa158015611de3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906116d591906139c6565b600061013a82611e188588886119d6565b90612d6e565b600083815260076020526040902054600160801b90046001600160801b0316808303611e4a5750505050565b6000848152600760205260408120546001600160801b031690819003611ea457611e7383611ae5565b600086815260076020526040902080546001600160801b0319166001600160801b0392909216919091179055611f22565b611ef5611ef0670de0b6b3a7640000611ebd8886613926565b611ec791906139df565b85670de0b6b3a7640000611edb878a613926565b611ee591906139df565b859291906001612de3565b611ae5565b600086815260076020526040902080546001600160801b0319166001600160801b03929092169190911790555b611f2b84611ae5565b60009586526007602052604090952080546001600160801b03968716600160801b0296169590951790945550505050565b6000818311611f6b5782610153565b50919050565b6005546000908190611f94908490600160801b90046001600160801b03166123d7565b6005546201000090046001600160701b03169250905081811115612110576000611fbe8383613926565b9050611fcd611ef08286612e81565b60058054601090611fef908490600160801b90046001600160801b0316613a84565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550600061202885836119f490919063ffffffff16565b90506000612056827f00000000000000000000000000000000000000000000000000000000000000006123d7565b905080600b600082825461206a9190613913565b9091555061207a90508183613926565b915061208582611ae5565b600180546000906120a09084906001600160801b0316613a44565b92506101000a8154816001600160801b0302191690836001600160801b031602179055506120cd82612e96565b600380546000906120e2908490600f0b613bd1565b92506101000a8154816001600160801b030219169083600f0b6001600160801b031602179055508493505050505b915091565b60006001600160f81b0382111561213f5760405163b7d0949760e01b815260040160405180910390fd5b5060f89190911b1790565b60008061215787856119f4565b91506000612185837f00000000000000000000000000000000000000000000000000000000000000006123d7565b90506121b1817f00000000000000000000000000000000000000000000000000000000000000006123d7565b915083156121d4576121c38282613926565b6121cd9084613926565b92506121eb565b6121de8282613926565b6121e89084613913565b92505b8686101561220e576121fe8387896119d6565b925061220b8287896119d6565b91505b509550959350505050565b600354600160801b90046001600160801b0316612262611ef082612245670de0b6b3a7640000866139df565b600454600160801b90046001600160801b031691908a6000612de3565b600480546001600160801b03928316600160801b02921691909117905561228886611ae5565b6122929082613a84565b600380546001600160801b03928316600160801b0292169190911790556122b884611ae5565b600180546000906122d39084906001600160801b0316613a44565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555061230083611b0f565b60038054600090612315908490600f0b613bd1565b92506101000a8154816001600160801b030219169083600f0b6001600160801b0316021790555061234585611ae5565b60018054601090612367908490600160801b90046001600160801b0316613a84565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550505050505050565b6000806123a5846118428a888a6119d6565b90506123b28884866119d6565b6123bc9082613913565b9050868111156123cc5786810391505b509695505050505050565b60006101538383670de0b6b3a76400006119d6565b60006001600160701b038211156119ac5760405163086b151760e11b815260040160405180910390fd5b6001546001600160801b03168381108061245857507f00000000000000000000000000000000000000000000000000000000000000006124568583613926565b105b1561246557612465612d55565b6003549084900390600f0b61247a8482613a64565b90508361248686611982565b1380156124bb57507f00000000000000000000000000000000000000000000000000000000000000006124b98383611abf565b105b156124c8576124c8612d55565b600254600160801b90046001600160801b031661250a611ef0826124f4670de0b6b3a7640000886139df565b6004546001600160801b031691908c6000612de3565b600480546001600160801b0319166001600160801b03929092169190911790556125348882613926565b905061253f81611ae5565b600280546001600160801b03928316600160801b02921691909117905561256583611ae5565b600180546001600160801b0319166001600160801b039290921691909117905561258e82611b0f565b600380546001600160801b0319166001600160801b03929092169190911790556125b787611ae5565b600180546010906125d9908490600160801b90046001600160801b0316613a44565b92506101000a8154816001600160801b0302191690836001600160801b031602179055505050505050505050565b60006126306126168483612ec0565b612621846000612ec0565b61262b9190613a64565b611b0f565b9050600081600f0b1315612685576002805482919060009061265c9084906001600160801b0316613a44565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550505050565b600081600f0b12156126b55761269a81613bfe565b6002805460009061265c9084906001600160801b0316613a84565b505050565b6000806126c785856123d7565b90506126d281612ed6565b9450846000036126e6576000915050610153565b6126f660408401602085016138b6565b156127255761271e8561270c602086018661387f565b6127196040870187613b5a565b612f26565b915061274c565b61274885612736602086018661387f565b6127436040870187613b5a565b612fc4565b8491505b509392505050565b60006101538383670de0b6b3a7640000612c7d565b6002546000908190612784906001600160801b031684612e81565b90506127b07f000000000000000000000000000000000000000000000000000000000000000082613913565b6001546001600160801b03161115611f6b576001547f0000000000000000000000000000000000000000000000000000000000000000906127fb9083906001600160801b0316613926565b6101539190613926565b61280d613745565b60008061281984611848565b9050600073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__635a1b419e836040518263ffffffff1660e01b815260040161285491906139b7565b6040805180830381865af4158015612870573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906128949190613ba1565b93509050826128a95750600091506101129050565b60006128d06128cb8461016001518561014001516123d790919063ffffffff16565b611982565b6128f06128cb85610120015186610100015161275490919063ffffffff16565b6128fa9190613a64565b604080516101208101825285815260208082019590955260008052600e85527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54818301526060810199909952608089019990995260a088015250815160c087015281015160e086015290940151610100840152509092600192509050565b60015460035460405163685a2be760e11b81526001600160801b0380841660048301819052600f9390930b60248301819052600160801b90940416604482018190527f000000000000000000000000000000000000000000000000000000000000000060648301526084820185905260009391849081908190819073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__9063d0b457ce9060a401608060405180830381865af4158015612a30573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612a549190613c24565b935093509350935080612a705750600098975050505050505050565b868414612aa157612a8084611ae5565b600180546001600160801b0319166001600160801b03929092169190911790555b858314612ad257612ab183611b0f565b600380546001600160801b0319166001600160801b03929092169190911790555b848214612b0057612ae282611ae5565b600180546001600160801b03928316600160801b0292169190911790555b50600198975050505050505050565b600080612b476001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016333088612ffe565b612ba77f0000000000000000000000000000000000000000000000000000000000000000612b76876001613913565b6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169190613065565b604051636e553f6560e01b8152600481018690523060248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690636e553f65906044016020604051808303816000875af1158015612c17573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612c3b91906139c6565b9660009650945050505050565b6126b56001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016333086612ffe565b6000826000190484118302158202612c9457600080fd5b50910281810615159190040190565b600080670de0b6b3a7640000612cb7610dd2565b612cc191906139df565b9050808311612cd1576000612cdb565b612cdb8184613926565b9150610153612d12670de0b6b3a76400007f00000000000000000000000000000000000000000000000000000000000000006139df565b83906119f4565b600080600083612d2886611982565b612d329190613a64565b90506000811215612d4a576000809250925050611815565b946001945092505050565b60405163bb55fd2760e01b815260040160405180910390fd5b600081600003612d875750670de0b6b3a76400006116d5565b82600003612d97575060006116d5565b6000612da283611982565b90506000612db7612db286611982565b6130f5565b9050818102612dce670de0b6b3a764000082613c65565b9050612dd98161331b565b9695505050505050565b600082600003612df457508461013a565b8115612e4757612e25612e078487613913565b612e1185876123d7565b612e1b888a6123d7565b6118429190613913565b90506000612e338588611f5c565b905080821015612e41578091505b5061013a565b828503612e565750600061013a565b610137612e638487613926565b612e6d8587612754565b612e77888a6123d7565b6118429190613926565b600061015383670de0b6b3a764000084612c7d565b600060016001607f1b038211156119ac5760405163a5353be560e01b815260040160405180910390fd5b6000818313612ecf5781610153565b5090919050565b6040516363737ac960e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063c6e6f59290602401611dc6565b604051635d043b2960e11b8152600481018590526001600160a01b0384811660248301523060448301526000917f00000000000000000000000000000000000000000000000000000000000000009091169063ba087652906064016020604051808303816000875af1158015612fa0573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061013a91906139c6565b612ff86001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001684866134b0565b50505050565b6040516001600160a01b038481166024830152838116604483015260648201839052612ff89186918216906323b872dd906084015b604051602081830303815290604052915060e01b6020820180516001600160e01b0383818316178352505050506134e1565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b1790526130b68482613549565b612ff8576040516001600160a01b038481166024830152600060448301526130eb91869182169063095ea7b390606401613033565b612ff884826134e1565b60008082136131175760405163e61b497560e01b815260040160405180910390fd5b506001600160801b03811160071b81811c67ffffffffffffffff1060061b1781811c63ffffffff1060051b1781811c61ffff1060041b1781811c60ff10600390811b90911782811c600f1060021b1782811c909110600190811b90911782811c90911017609f8181036060019290921b91605f1982019061319a9084901c611982565b6c465772b2bbbb5f824b15207a3081018102606090811d6d0388eaa27412d5aca026815d636e018202811d6d0df99ac502031bf953eff472fdcc018202811d6d13cdffb29d51d99322bdff5f2211018202811d6d0a0f742023def783a307a986912e018202811d6d01920d8043ca89b5239253284e42018202811d6c0b7a86d7375468fac667a0a527016c29508e458543d8aa4df2abee7883018302821d6d0139601a2efabe717e604cbb4894018302821d6d02247f7a7b6594320649aa03aba1018302821d6c8c3f38e95a6b1ff2ab1c3b343619018302821d6d02384773bdf1ac5676facced60901901830290911d6cb9a025d814b29c212b8b1a07cd1901909102780a09507084cc699bb0e71ea869ffffffffffffffffffffffff190105711340daa0d5f769dba1915cef59f0815a5506027d0267a36c0c95b3975ab3ee5b203a7614a3f75373f047d803ae7b6687f2b391909102017d57115e47018c7177eebf7cd370a3356a1b7863008a5ae8028c72b88642840160ae1d92915050565b6000680248ce36a70cb26b3e19821361333657506000919050565b680755bf798b4a1bf1e5821261335f576040516373a2d6b160e01b815260040160405180910390fd5b6503782dace9d9604e83901b059150600060606bb17217f7d1cf79abc9e3b39884821b056001605f1b01901d6bb17217f7d1cf79abc9e3b3988102909303926c240c330e9fb2d9cbaf0fd5aafb1984018402606090811d6d0277594991cfc85f6e2461837cd9018502811d6d1a521255e34f6a5061b25ef1c9c319018502811d6db1bbb201f443cf962f1a1d3db4a5018502811d6e02c72388d9f74f51a9331fed693f1419018502811d6e05180bb14799ab47a8a8cb2a527d57016d02d16720577bd19bf614176fe9ea6c10fe68e7fd37d0007b713f765087018702831d9081019087016d01d3967ed30fc4f89c02bab570811901810290921d6e0587f503bb6ea29d25fcb7401964500186026d360d7aeea093263ecc6e0ecb291760621b018181059550929350909190612dd974029d9dc38563c32e5c2f6dc192ee70ef65f9978af3860260c38690031c611982565b6040516001600160a01b038381166024830152604482018390526126b591859182169063a9059cbb90606401613033565b60006134f66001600160a01b038416836135ec565b9050805160001415801561351b5750808060200190518101906135199190613c93565b155b156126b557604051635274afe760e01b81526001600160a01b03841660048201526024015b60405180910390fd5b6000806000846001600160a01b0316846040516135669190613cb0565b6000604051808303816000865af19150503d80600081146135a3576040519150601f19603f3d011682016040523d82523d6000602084013e6135a8565b606091505b50915091508180156135d25750805115806135d25750808060200190518101906135d29190613c93565b801561013a5750505050506001600160a01b03163b151590565b60606101538383600084600080856001600160a01b031684866040516136129190613cb0565b60006040518083038185875af1925050503d806000811461364f576040519150601f19603f3d011682016040523d82523d6000602084013e613654565b606091505b5091509150612dd98683836060826136745761366f826136bb565b610153565b815115801561368b57506001600160a01b0384163b155b156136b457604051639996b31560e01b81526001600160a01b0385166004820152602401613540565b5080610153565b8051156136cb5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b6040518061018001604052806000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b6040518061012001604052806137596136e4565b815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b600060608284031215611f6b57600080fd5b6000806000606084860312156137be57600080fd5b8335925060208401359150604084013567ffffffffffffffff8111156137e357600080fd5b6137ef86828701613797565b9150509250925092565b6000806040838503121561380c57600080fd5b50508035926020909101359150565b600080600080600060a0868803121561383357600080fd5b85359450602086013593506040860135925060608601359150608086013567ffffffffffffffff81111561386657600080fd5b61387288828901613797565b9150509295509295909350565b60006020828403121561389157600080fd5b81356001600160a01b038116811461015357600080fd5b8015158114610db757600080fd5b6000602082840312156138c857600080fd5b8135610153816138a8565b634e487b7160e01b600052601260045260246000fd5b6000826138f8576138f86138d3565b500690565b634e487b7160e01b600052601160045260246000fd5b808201808211156116d5576116d56138fd565b818103818111156116d5576116d56138fd565b805182526020810151602083015260408101516040830152606081015160608301526080810151608083015260a081015160a083015260c081015160c083015260e081015160e08301526101008082015181840152506101208082015181840152506101408082015181840152506101608082015181840152505050565b61018081016116d58284613939565b6000602082840312156139d857600080fd5b5051919050565b80820281158282048414176116d5576116d56138fd565b600080600060608486031215613a0b57600080fd5b8351925060208401519150604084015190509250925092565b6001600160701b03818116838216019080821115611ade57611ade6138fd565b6001600160801b03818116838216019080821115611ade57611ade6138fd565b8181036000831280158383131683831282161715611ade57611ade6138fd565b6001600160801b03828116828216039080821115611ade57611ade6138fd565b60006102a082019050613ab8828551613939565b602084015161018083015260408401516101a083015260608401516101c083015260808401516101e083015260a084015161020083015260c084015161022083015260e084015161024083015261010090930151610260820152610280015290565b60008060408385031215613b2d57600080fd5b505080516020909101519092909150565b6000600160ff1b8201613b5357613b536138fd565b5060000390565b6000808335601e19843603018112613b7157600080fd5b83018035915067ffffffffffffffff821115613b8c57600080fd5b60200191503681900382131561181557600080fd5b60008060408385031215613bb457600080fd5b825191506020830151613bc6816138a8565b809150509250929050565b600f81810b9083900b0160016001607f1b03811360016001607f1b0319821217156116d5576116d56138fd565b600081600f0b60016001607f1b03198103613c1b57613c1b6138fd565b60000392915050565b60008060008060808587031215613c3a57600080fd5b8451935060208501519250604085015191506060850151613c5a816138a8565b939692955090935050565b600082613c7457613c746138d3565b600160ff1b821460001984141615613c8e57613c8e6138fd565b500590565b600060208284031215613ca557600080fd5b8151610153816138a8565b6000825160005b81811015613cd15760208186018101518583015201613cb7565b50600092019182525091905056fea2646970667358221220852e3fe4769b47e0634d8bb974d561f2a6f60a48fdc7af8b2f142b07fe5239d964736f6c63430008140033a26469706673582212207f06c1975741d5aae61b74037b86be521974bffac185ceb800bccd28daeb1c4964736f6c63430008140033"
 )
 
 
-class ERC4626Target0DeployerContract(Contract):
-    """A web3.py Contract class for the ERC4626Target0Deployer contract."""
+class ERC4626Target3DeployerContract(Contract):
+    """A web3.py Contract class for the ERC4626Target3Deployer contract."""
 
-    abi: ABI = erc4626target0deployer_abi
-    bytecode: bytes = HexBytes(erc4626target0deployer_bytecode)
+    abi: ABI = erc4626target3deployer_abi
+    bytecode: bytes | None = try_bytecode_hexbytes(erc4626target3deployer_bytecode, "erc4626target3deployer")
 
     def __init__(self, address: ChecksumAddress | None = None) -> None:
         try:
             # Initialize parent Contract class
             super().__init__(address=address)
-            self.functions = ERC4626Target0DeployerContractFunctions(erc4626target0deployer_abi, self.w3, address)  # type: ignore
+            self.functions = ERC4626Target3DeployerContractFunctions(erc4626target3deployer_abi, self.w3, address)  # type: ignore
 
         except FallbackNotFound:
             print("Fallback function not found. Continuing...")
 
-    functions: ERC4626Target0DeployerContractFunctions
+    functions: ERC4626Target3DeployerContractFunctions
 
     @classmethod
     def constructor(cls) -> ContractConstructor:  # type: ignore
         """Creates a transaction with the contract's constructor function.
 
         Parameters
         ----------
@@ -218,15 +218,15 @@
         current_nonce = w3.eth.get_transaction_count(account.address)
         deployment_tx.update({"nonce": current_nonce})
 
         # Sign the transaction with local account private key
         signed_tx = account.sign_transaction(deployment_tx)
 
         # Send the signed transaction and wait for receipt
-        tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
+        tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
         tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
 
         deployed_contract = deployer(address=tx_receipt.contractAddress)  # type: ignore
         return deployed_contract
 
     @classmethod
     def factory(cls, w3: Web3, class_name: str | None = None, **kwargs: Any) -> Type[Self]:
@@ -241,10 +241,10 @@
 
         Returns
         -------
         Self
             A deployed instance of the contract.
         """
         contract = super().factory(w3, class_name, **kwargs)
-        contract.functions = ERC4626Target0DeployerContractFunctions(erc4626target0deployer_abi, w3, None)
+        contract.functions = ERC4626Target3DeployerContractFunctions(erc4626target3deployer_abi, w3, None)
 
         return contract
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/ERC4626Target1DeployerContract.py` & `agent0-0.20.0/src/agent0/hypertypes/types/ERC4626Target1DeployerContract.py`

 * *Files 20% similar despite different names*

```diff
@@ -26,34 +26,33 @@
 
 from __future__ import annotations
 
 from typing import Any, Type, cast
 
 from eth_account.signers.local import LocalAccount
 from eth_typing import ChecksumAddress, HexStr
-from hexbytes import HexBytes
 from typing_extensions import Self
 from web3 import Web3
 from web3.contract.contract import Contract, ContractConstructor, ContractFunction, ContractFunctions
 from web3.exceptions import FallbackNotFound
 from web3.types import ABI, BlockIdentifier, CallOverride, TxParams
 
 from .IHyperdriveTypes import Fees, PoolConfig
-from .utilities import dataclass_to_tuple, rename_returned_types
+from .utilities import dataclass_to_tuple, rename_returned_types, try_bytecode_hexbytes
 
 structs = {
     "Fees": Fees,
     "PoolConfig": PoolConfig,
 }
 
 
-class ERC4626Target1DeployerDeployContractFunction(ContractFunction):
-    """ContractFunction for the deploy method."""
+class ERC4626Target1DeployerDeployTargetContractFunction(ContractFunction):
+    """ContractFunction for the deployTarget method."""
 
-    def __call__(self, config: PoolConfig, arg2: bytes, salt: bytes) -> ERC4626Target1DeployerDeployContractFunction:  # type: ignore
+    def __call__(self, config: PoolConfig, arg2: bytes, salt: bytes) -> ERC4626Target1DeployerDeployTargetContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(config), dataclass_to_tuple(arg2), dataclass_to_tuple(salt))
         self.kwargs = clone.kwargs
         self.args = clone.args
         return self
 
     def call(
         self,
@@ -72,53 +71,54 @@
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
 class ERC4626Target1DeployerContractFunctions(ContractFunctions):
     """ContractFunctions for the ERC4626Target1Deployer contract."""
 
-    deploy: ERC4626Target1DeployerDeployContractFunction
+    deployTarget: ERC4626Target1DeployerDeployTargetContractFunction
 
     def __init__(
         self,
         abi: ABI,
         w3: "Web3",
         address: ChecksumAddress | None = None,
         decode_tuples: bool | None = False,
     ) -> None:
         super().__init__(abi, w3, address, decode_tuples)
-        self.deploy = ERC4626Target1DeployerDeployContractFunction.factory(
-            "deploy",
+        self.deployTarget = ERC4626Target1DeployerDeployTargetContractFunction.factory(
+            "deployTarget",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
-            function_identifier="deploy",
+            function_identifier="deployTarget",
         )
 
 
 erc4626target1deployer_abi: ABI = cast(
     ABI,
     [
         {
             "type": "function",
-            "name": "deploy",
+            "name": "deployTarget",
             "inputs": [
                 {
                     "name": "_config",
                     "type": "tuple",
                     "internalType": "struct IHyperdrive.PoolConfig",
                     "components": [
                         {"name": "baseToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "vaultSharesToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "initialVaultSharePrice", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumShareReserves", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumTransactionAmount", "type": "uint256", "internalType": "uint256"},
+                        {"name": "circuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "positionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "checkpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "timeStretch", "type": "uint256", "internalType": "uint256"},
                         {"name": "governance", "type": "address", "internalType": "address"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {
@@ -140,23 +140,23 @@
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "nonpayable",
         }
     ],
 )
 # pylint: disable=line-too-long
 erc4626target1deployer_bytecode = HexStr(
-    "0x608060405234801561001057600080fd5b5061503b806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063195d4bfc14610030575b600080fd5b61004361003e366004610227565b61005f565b6040516001600160a01b03909116815260200160405180910390f35b604080513360208201529081018290526000906060016040516020818303038152906040528051906020012084604051610098906100cb565b6100a29190610351565b8190604051809103906000f59050801580156100c2573d6000803e3d6000fd5b50949350505050565b614ba18061046583390190565b634e487b7160e01b600052604160045260246000fd5b6040516101c0810167ffffffffffffffff81118282101715610112576101126100d8565b60405290565b80356001600160a01b038116811461012f57600080fd5b919050565b60006080828403121561014657600080fd5b6040516080810181811067ffffffffffffffff82111715610169576101696100d8565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b600082601f8301126101ab57600080fd5b813567ffffffffffffffff808211156101c6576101c66100d8565b604051601f8301601f19908116603f011681019082821181831017156101ee576101ee6100d8565b8160405283815286602085880101111561020757600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600083850361026081121561023e57600080fd5b6102208082121561024e57600080fd5b6102566100ee565b915061026186610118565b825261026f60208701610118565b602083015261028060408701610118565b6040830152606086013560608301526080860135608083015260a086013560a083015260c086013560c083015260e086013560e08301526101008087013581840152506101208087013581840152506101406102dd818801610118565b908301526101606102ef878201610118565b90830152610180610301878201610118565b908301526101a061031488888301610134565b9083015290935084013567ffffffffffffffff81111561033357600080fd5b61033f8682870161019a565b92505061024084013590509250925092565b81516001600160a01b031681526102208101602083015161037d60208401826001600160a01b03169052565b50604083015161039860408401826001600160a01b03169052565b50606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e0830152610100808401518184015250610120808401518184015250610140808401516103fe828501826001600160a01b03169052565b5050610160838101516001600160a01b038116848301525050610180838101516001600160a01b0381168483015250506101a08381015180518483015260208101516101c085015260408101516101e0850152606081015161020085015250509291505056fe6102406040523480156200001257600080fd5b5060405162004ba138038062004ba18339810160408190526200003591620001e1565b600160005580516001600160a01b039081166080908152602080840151831660a0908152918401516101a0908152918401516101c05260c0808501516101e0526101008086015190915260e0808601519052610120808601519091529184018051519092528151015161014090815281516040908101516101609081529251606090810151610180908152918601518516610200528501516102205290840151600a80546001600160a01b03199081169286169290921790559184015160088054841691851691909117905590920151600980549093169116179055620002d4565b6040516101c081016001600160401b03811182821017156200014957634e487b7160e01b600052604160045260246000fd5b60405290565b80516001600160a01b03811681146200016757600080fd5b919050565b6000608082840312156200017f57600080fd5b604051608081016001600160401b0381118282101715620001b057634e487b7160e01b600052604160045260246000fd5b8060405250809150825181526020830151602082015260408301516040820152606083015160608201525092915050565b60006102208284031215620001f557600080fd5b620001ff62000117565b6200020a836200014f565b81526200021a602084016200014f565b60208201526200022d604084016200014f565b6040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101008084015181830152506101208084015181830152506101406200028c8185016200014f565b90820152610160620002a08482016200014f565b90820152610180620002b48482016200014f565b908201526101a0620002c9858583016200016c565b908201529392505050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516101e0516102005161022051614771620004306000396000505060005050600081816101a701526125ec0152600081816111890152818161174d015281816117b0015281816121d20152818161220e0152818161247701526125c6015260008181610c4801528181610c9501528181610e5e01526125a00152600061151001526000818161163601528181611db40152611e2d0152600081816106a101528181610ded0152818161160a0152611e01015260008181610ce70152611d7a015260008181610c2601528181610cb601528181610e7f01526126120152600081816105dc01528181610d7301528181611c1701526130e00152600081816104820152818161050f01526105740152600081816113b10152818161203c015281816120a2015261211e0152600050506147716000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c8063074a6de91461003b57806329b23fc114610068575b600080fd5b61004e6100493660046143cf565b610089565b604080519283526020830191909152015b60405180910390f35b61007b61007636600461441f565b6100a4565b60405190815260200161005f565b6000806100978585856100bd565b915091505b935093915050565b60006100b285858585610192565b90505b949350505050565b6000806100c8610400565b6100d18361042a565b60006100db610463565b90506100f06100e861047b565b8260046104b1565b506100fe3387838888610946565b90935091506101106020850185614479565b6001600160a01b0316337f4ce1e73a001c994d4d884cd1e382579f9c1e81eccf26e70ece8caa1b60a8c2cf8461014787868a610a89565b61015288878b610ab8565b61016260408b0160208c016144b0565b604080519485526020850193909352918301521515606082015260800160405180910390a35061009c6001600055565b600061019c610400565b6101a58261042a565b7f00000000000000000000000000000000000000000000000000000000000000008410156101e65760405163211ddda360e11b815260040160405180910390fd5b60006101f0610463565b90508542101561020b576102056100e861047b565b50610219565b610217868260046104b1565b505b61022e610227600288610ae0565b3387610b15565b60008060008060006102418a878d610bee565b945094509450945094508a4210156102e85780600b600082825461026591906144e3565b9091555061027890508a8685858f610ed8565b60006102838c611057565b90506102a16102918c6110a1565b61029b90836144f6565b826110cf565b6102aa87611182565b6102b6576102b66111e2565b60006102c1886111fb565b9050806102e157604051638bdf918d60e01b815260040160405180910390fd5b50506102ff565b6102f28487611208565b93506102fd866111fb565b505b600061030c85888b6112e9565b90508981101561032f5760405163c972651760e01b815260040160405180910390fd5b8a8c85848a8d610340600286610ae0565b61034d6020830183614479565b6001600160a01b0316337fcb02fec44af7356703a283b87ccec63f4ea688efc67fee9cdc1834a93260c730886103848c8888610a89565b61038f8d8989610ab8565b61039f6040890160208a016144b0565b6103b38a6103ad8d8f6144e3565b90611383565b6040805195865260208601949094529284019190915215156060830152608082015260a081018b905260c00160405180910390a450949b5050505050505050505050506100b56001600055565b60026000540361042357604051633ee5aeb560e01b815260040160405180910390fd5b6002600055565b60006104396020830183614479565b6001600160a01b0316036104605760405163f0dd15fd60e01b815260040160405180910390fd5b50565b6000610476670de0b6b3a7640000611398565b905090565b60006104a77f00000000000000000000000000000000000000000000000000000000000000004261452c565b6104769042614540565b600083815260076020526040812080546001600160801b03161515806104d657504285115b156104ec57546001600160801b0316905061093f565b6000806104f761047b565b9050808703610508578591506105a2565b60006105347f0000000000000000000000000000000000000000000000000000000000000000896144e3565b90505b6000818152600760205260409020546001600160801b03169250818114801561055e575082155b15610567578692505b826000036105a0576105997f0000000000000000000000000000000000000000000000000000000000000000826144e3565b9050610537565b505b6105ab82611425565b83546001600160801b0319166001600160801b03919091161783556105cf8661144f565b50600090506007816106017f00000000000000000000000000000000000000000000000000000000000000008b614540565b815260208101919091526040016000908120546001600160801b0316915061062a60028a610ae0565b6000818152600e60205260408120549192508a8a8315610770576001925060008061065986898c8660006115f3565b9150915080600b600082825461066f91906144e3565b9091555061068b905086600084610685816110a1565b88610ed8565b61069581836144e3565b91506106c586838a8d877f00000000000000000000000000000000000000000000000000000000000000006116c2565b91506106d96106d48385611383565b61170c565b600580546002906106fa9084906201000090046001600160701b0316614553565b92506101000a8154816001600160701b0302191690836001600160701b0316021790555061072782611425565b60058054601090610749908490600160801b90046001600160801b0316614573565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050505b600061077d600184610ae0565b6000818152600e6020526040902054909150801561088c57600194506000806107aa838b8e8860016115f3565b9150915080600b60008282546107c091906144e3565b909155506107dc9050836000846107d6816110a1565b8a611736565b6107e68183614540565b91506107f56106d48387611383565b600580546002906108169084906201000090046001600160701b0316614553565b92506101000a8154816001600160701b0302191690836001600160701b0316021790555061084382611425565b60058054601090610865908490600160801b90046001600160801b0316614573565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050505b84156108c4576108b861089e876110a1565b6108a7836110a1565b6108b191906144f6565b60006110cf565b6108c28e8e611927565b505b60006108cf8f611ab2565b5090508f7fff888cf98d2696e95c8c39aa98c9ad55a5378008f7a56614c9353b7137a57ab78c868a8686604051610928959493929190948552602085019390935260408401919091526060830152608082015260a00190565b60405180910390a250989a50505050505050505050505b9392505050565b600080610952856111fb565b505060065485906001600160801b03168082111561097757806001600160801b031691505b8160000361098c576000809250925050610a7f565b61099b600360f81b8984610b15565b6006546000906109c19084906001600160801b03600160801b9091048116908516611ba2565b90506109cc83611425565b6109d69083614593565b600680546001600160801b0319166001600160801b03929092169190911790556109ff81611425565b60068054601090610a21908490600160801b90046001600160801b0316614593565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550610a508188876112e9565b9350610a5c8684611bc0565b841015610a7c5760405163c972651760e01b815260040160405180910390fd5b50505b9550959350505050565b6000610a9b60408301602084016144b0565b15610aa757508261093f565b610ab18484611383565b905061093f565b6000610aca60408301602084016144b0565b15610ad957610ab18484611bd5565b508261093f565b60006001600160f81b03821115610b0a5760405163b7d0949760e01b815260040160405180910390fd5b5060f89190911b1790565b6000838152600d602090815260408083206001600160a01b0386168452909152902054811115610b5857604051631e9acf1760e31b815260040160405180910390fd5b6000838152600d602090815260408083206001600160a01b0386168452825280832080548590039055858352600e90915281208054839290610b9b908490614540565b909155505060408051848152602081018390526000916001600160a01b0385169133917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a4505050565b6000806000806000806000610c0288611bea565b9050610c6c610c0f611c3b565b600154600160801b90046001600160801b03168c847f00000000000000000000000000000000000000000000000000000000000000008e7f0000000000000000000000000000000000000000000000000000000000000000611c5c565b909850955091506000610cda610c80611c3b565b600154600160801b90046001600160801b03167f00000000000000000000000000000000000000000000000000000000000000007f0000000000000000000000000000000000000000000000000000000000000000611ccc565b9050610d108389610d0b847f0000000000000000000000000000000000000000000000000000000000000000611ce3565b611d13565b15610d1d57610d1d6111e2565b8a8a60008080610d2f85888887611d55565b9b5091945092509050610d428184614540565b610d4c90896144e3565b9750610d5882846144e3565b610d62908c6144e3565b9a50505050505050506000600760007f00000000000000000000000000000000000000000000000000000000000000008a610d9d9190614540565b815260208101919091526040016000908120546001600160801b03169150428911610ddf576000898152600760205260409020546001600160801b0316610de1565b895b9050610e118b8784848e7f00000000000000000000000000000000000000000000000000000000000000006116c2565b9650610e1d8487614540565b9550670de0b6b3a7640000610ea384610e34611c3b565b610e3e91906144e3565b600154610e5c908c90600160801b90046001600160801b0316614540565b7f00000000000000000000000000000000000000000000000000000000000000007f0000000000000000000000000000000000000000000000000000000000000000611ccc565b1115610eb157610eb16111e2565b610ec18787858786866000611e69565b9b9f939e50919c50909a5090975050505050505050565b600354600160801b90046001600160801b0316610f26610f2182610f04670de0b6b3a7640000866145b3565b600454600160801b90046001600160801b031691908a6000611f08565b611425565b600480546001600160801b03928316600160801b029216919091179055610f4c86611425565b610f569082614593565b600380546001600160801b03928316600160801b029216919091179055610f7c84611425565b60018054600090610f979084906001600160801b0316614573565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550610fc483611fd1565b60038054600090610fd9908490600f0b6145ca565b92506101000a8154816001600160801b030219169083600f0b6001600160801b0316021790555061100985611425565b6001805460109061102b908490600160801b90046001600160801b0316614593565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550505050505050565b600061107f600e600061106b600286610ae0565b8152602001908152602001600020546110a1565b611091600e600061106b600187610ae0565b61109b91906144f6565b92915050565b60006001600160ff1b038211156110cb5760405163396ea70160e11b815260040160405180910390fd5b5090565b60006110f86110de848361200d565b6110e984600061200d565b6110f391906144f6565b611fd1565b9050600081600f0b131561114d57600280548291906000906111249084906001600160801b0316614573565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550505050565b600081600f0b121561117d57611162816145f7565b600280546000906111249084906001600160801b0316614593565b505050565b60006111ae7f000000000000000000000000000000000000000000000000000000000000000083611bc0565b6002546111c491906001600160801b03166144e3565b6001546111da906001600160801b031684611383565b101592915050565b60405163bb55fd2760e01b815260040160405180910390fd5b600061109b826004611927565b60008060006112168461144f565b909250905060006112278686611383565b90508183111561123f5761123c868385611ba2565b95505b82811015611251578083039250611256565b600092505b61125f8361170c565b600580546001600160701b039290921662010000026fffffffffffffffffffffffffffff00001990921691909117908190556001600160801b03600160801b90910416808710156112b2578690036112b6565b5060005b6112bf81611425565b600580546001600160801b03928316600160801b0292169190911790555085935050505092915050565b6000806112f68585611383565b905061130181612023565b94508460000361131557600091505061093f565b61132560408401602085016144b0565b156113545761134d8561133b6020860186614479565b611348604087018761461d565b612073565b915061137b565b611377856113656020860186614479565b611372604087018761461d565b612111565b8491505b509392505050565b600061093f8383670de0b6b3a7640000611ba2565b6040516303d1689d60e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906307a2d13a906024015b602060405180830381865afa158015611401573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061109b9190614664565b60006001600160801b038211156110cb57604051630f0af95160e11b815260040160405180910390fd5b6005546000908190611472908490600160801b90046001600160801b0316611383565b6005546201000090046001600160701b031692509050818111156115ee57600061149c8383614540565b90506114ab610f21828661214b565b600580546010906114cd908490600160801b90046001600160801b0316614593565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555060006115068583611bd590919063ffffffff16565b90506000611534827f0000000000000000000000000000000000000000000000000000000000000000611383565b905080600b600082825461154891906144e3565b9091555061155890508183614540565b915061156382611425565b6001805460009061157e9084906001600160801b0316614573565b92506101000a8154816001600160801b0302191690836001600160801b031602179055506115ab82612160565b600380546000906115c0908490600f0b6145ca565b92506101000a8154816001600160801b030219169083600f0b6001600160801b031602179055508493505050505b915091565b6000806116008785611bd5565b9150600061162e837f0000000000000000000000000000000000000000000000000000000000000000611383565b905061165a817f0000000000000000000000000000000000000000000000000000000000000000611383565b9150831561167d5761166c8282614540565b6116769084614540565b9250611694565b6116878282614540565b61169190846144e3565b92505b868610156116b7576116a7838789611ba2565b92506116b4828789611ba2565b91505b509550959350505050565b6000806116da846116d48a888a611ba2565b90611bd5565b90506116e7888486611ba2565b6116f190826144e3565b9050868111156117015786810391505b509695505050505050565b60006001600160701b038211156110cb5760405163086b151760e11b815260040160405180910390fd5b6001546001600160801b03168381108061177857507f00000000000000000000000000000000000000000000000000000000000000006117768583614540565b105b15611785576117856111e2565b6003549084900390600f0b61179a84826144f6565b9050836117a6866110a1565b1380156117db57507f00000000000000000000000000000000000000000000000000000000000000006117d9838361218a565b105b156117e8576117e86111e2565b600254600160801b90046001600160801b031661182a610f2182611814670de0b6b3a7640000886145b3565b6004546001600160801b031691908c6000611f08565b600480546001600160801b0319166001600160801b03929092169190911790556118548882614540565b905061185f81611425565b600280546001600160801b03928316600160801b02921691909117905561188583611425565b600180546001600160801b0319166001600160801b03929092169190911790556118ae82611fd1565b600380546001600160801b0319166001600160801b03929092169190911790556118d787611425565b600180546010906118f9908490600160801b90046001600160801b0316614573565b92506101000a8154816001600160801b0302191690836001600160801b031602179055505050505050505050565b600654600360f81b6000908152600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e95490918291611972916001600160801b031690614540565b90508060000361198657600191505061109b565b6000611991856121b0565b9050806000036119a65760019250505061109b565b6000806119b4838589612252565b91509150806119ca57600094505050505061109b565b6000806119d78489612358565b915091506119f56119e7826110a1565b6119f09061467d565b61244a565b925082611a0b576000965050505050505061109b565b611a1482611425565b60068054600090611a2f9084906001600160801b0316614573565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550611a5c81611425565b60068054601090611a7e908490600160801b90046001600160801b0316614573565b92506101000a8154816001600160801b0302191690836001600160801b031602179055506001965050505050505092915050565b600080600080611ac9611ac486612557565b612691565b9150915080611adf575060009485945092505050565b6000808611611aef576000611af9565b611af98387611383565b600654600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e95460008080527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54939450926001600160801b0390921691611b6491906144e3565b611b6e9190614540565b905080600003611b875750600096879650945050505050565b6000611b938383611bd5565b98600198509650505050505050565b6000826000190484118302158202611bb957600080fd5b5091020490565b600061093f8383670de0b6b3a764000061271e565b600061093f83670de0b6b3a764000084611ba2565b600080611bf561047b565b9050808311611c05576000611c0f565b611c0f8184614540565b915061093f827f0000000000000000000000000000000000000000000000000000000000000000611bd5565b600154600354600091610476916001600160801b0390911690600f0b61218a565b60008080611c7d611c7588670de0b6b3a7640000614540565b89908761271e565b90508615611cbf57611c8f8888611bc0565b9150611cb08a8a84611ca98a670de0b6b3a7640000614540565b8989612744565b9250611cbc83826144e3565b90505b9750975097945050505050565b60006100b282611cdd858888611ba2565b90612767565b6000611d01611cfa84670de0b6b3a7640000614540565b8390611bc0565b61093f90670de0b6b3a7640000614540565b600080611d4a85611d22611c3b565b611d2c91906144e3565b600154610e5c908790600160801b90046001600160801b0316614540565b909210949350505050565b6000808080611dac8786611da58b611d9f611d788c670de0b6b3a7640000614540565b7f000000000000000000000000000000000000000000000000000000000000000090611bc0565b90611bc0565b919061271e565b9350611dd8847f0000000000000000000000000000000000000000000000000000000000000000611383565b91506000611df9611df189670de0b6b3a7640000614540565b8a908861271e565b9050611e25817f0000000000000000000000000000000000000000000000000000000000000000611bc0565b9350611e51847f0000000000000000000000000000000000000000000000000000000000000000611383565b611e5b90846144e3565b915050945094509450949050565b60008060008060008088881015611ed8578615611e8e57611e8b8d898b611ba2565b9c505b611e998c898b611ba2565b9b50611ea48b6110a1565b611ead8d6110a1565b611eb791906144f6565b9050611ec48b898b611ba2565b9a50611ed18a898b611ba2565b9950611ef7565b611ee18b6110a1565b611eea8d6110a1565b611ef491906144f6565b90505b9b9c9a9b999a975050505050505050565b600082600003611f19575084611fc8565b8115611f8b57611f4a611f2c84876144e3565b611f368587611383565b611f40888a611383565b6116d491906144e3565b90506000611f5885886127dc565b90506000611f6686896127eb565b905081831015611f7857819250611f84565b80831115611f84578092505b5050611fc8565b828503611f9a57506000611fc8565b611fc5611fa78487614540565b611fb18587611bc0565b611fbb888a611383565b6116d49190614540565b90505b95945050505050565b600060016001607f1b0319821280611fef575060016001607f1b0382135b156110cb5760405163a5353be560e01b815260040160405180910390fd5b600081831361201c578161093f565b5090919050565b6040516363737ac960e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063c6e6f592906024016113e4565b604051635d043b2960e11b8152600481018590526001600160a01b0384811660248301523060448301526000917f00000000000000000000000000000000000000000000000000000000000000009091169063ba087652906064016020604051808303816000875af11580156120ed573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906100b29190614664565b6121456001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001684866127fa565b50505050565b600061093f83670de0b6b3a76400008461271e565b600060016001607f1b038211156110cb5760405163a5353be560e01b815260040160405180910390fd5b600080612197848461284c565b9092509050806121a9576121a96111e2565b5092915050565b60025460009081906121cb906001600160801b03168461214b565b90506121f77f0000000000000000000000000000000000000000000000000000000000000000826144e3565b6001546001600160801b0316111561224c576001547f0000000000000000000000000000000000000000000000000000000000000000906122429083906001600160801b0316614540565b61093f9190614540565b50919050565b61225a61430a565b60008061226684612557565b9050600061227382612691565b935090508261228857506000915061009c9050565b60006122af6122aa84610160015185610140015161138390919063ffffffff16565b6110a1565b6122cf6122aa856101200151866101000151611bc090919063ffffffff16565b6122d991906144f6565b604080516101208101825285815260208082019590955260008052600e85527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54818301526060810199909952608089019990995260a088015250815160c087015281015160e086015290940151610100840152509092600192509050565b6000806000806123708660c001518760e0015161284c565b915091508061238757600080935093505050612443565b60006123938784612888565b925090508115806123a2575080155b156123b65760008094509450505050612443565b60006123c28883612997565b9050806000036123dc576000809550955050505050612443565b876060015181116123f35794509250612443915050565b50606087015160006124078986858b612a68565b90508060000361242257600080965096505050505050612443565b82811061243a57600080965096505050505050612443565b90955093505050505b9250929050565b6001546003546000916001600160801b0380821692600f0b91600160801b9004168380808061249c8787877f00000000000000000000000000000000000000000000000000000000000000008d612f7d565b9350935093509350806124b85750600098975050505050505050565b8684146124e9576124c884611425565b600180546001600160801b0319166001600160801b03929092169190911790555b85831461251a576124f983611fd1565b600380546001600160801b0319166001600160801b03929092169190911790555b8482146125485761252a82611425565b600180546001600160801b03928316600160801b0292169190911790555b50600198975050505050505050565b61255f61435c565b60408051610180810182526001546001600160801b038082168352600354600f0b6020840152600160801b91829004811693830193909352606082018590527f000000000000000000000000000000000000000000000000000000000000000060808301527f000000000000000000000000000000000000000000000000000000000000000060a08301527f000000000000000000000000000000000000000000000000000000000000000060c08301527f000000000000000000000000000000000000000000000000000000000000000060e083015260025404821661010082015260045490916101208301916126579116613095565b81526003546001600160801b03600160801b918290048116602084015260045460409093019261268992900416613095565b905292915050565b60008060008060006126a28661310b565b91509150806126b957506000958695509350505050565b6126c68660a001516110a1565b6126cf8761342b565b836126dd89600001516110a1565b6126e79190614699565b6126f19190614699565b6126fb91906144f6565b9250505060008112156127145750600093849350915050565b9360019350915050565b600082600019048411830215820261273557600080fd5b50910281810615159190040190565b60008061275588888888888861348f565b909250905080611701576117016111e2565b6000816000036127805750670de0b6b3a764000061109b565b826000036127905750600061109b565b600061279b836110a1565b905060006127b06127ab866110a1565b613570565b90508181026127c7670de0b6b3a7640000826146c1565b90506127d281613796565b9695505050505050565b600081831161224c578261093f565b600081831161201c578161093f565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663a9059cbb60e01b17905261117d90849061392b565b60008060008361285b866110a1565b61286591906144f6565b9050600081121561287d576000809250925050612443565b946001945092505050565b60008060008460a00151126128a557505060808201516001612443565b60008460a001516128b59061467d565b905060006128f185876101000151886000015160e00151670de0b6b3a76400006128df9190614540565b89516060810151608090910151613993565b93509050821580612900575080155b1561291357600080935093505050612443565b600061291f838361214b565b9050670de0b6b3a7640000811161295b5780670de0b6b3a76400000394506129548760c001518661138390919063ffffffff16565b945061296a565b60008094509450505050612443565b8660800151851115612989578660800151600194509450505050612443565b506001925050509250929050565b6000806129cd8460c001518560e00151866101000151876000015160a001516129bf886110a1565b6129c89061467d565b612f7d565b875160408101929092526020820192909252919091529050806129f457600091505061109b565b6000612a038560000151612691565b9250905081612a175760009250505061109b565b84602001518110612a2d5760009250505061109b565b600085606001518660400151612a4391906144e3565b9050612a5e82876020015183611ba29092919063ffffffff16565b6127d29082614540565b60008085606001518660400151612a7f91906144e3565b60208701516060880151919250600091612a999184611ba2565b90508660a00151600003612ab05791506100b59050565b60008080896004881015612ac357600497505b60005b88811015612e1f57612ad8868b6127dc565b95506000612b018360c001518460e00151856101000151866000015160a001516129bf8c6110a1565b86516040810192909252602082019290925291909152905080612b2f576000985050505050505050506100b5565b6000612b3e8e60000151612691565b9250905081612b5957600099505050505050505050506100b5565b612b6484828b613a3c565b15612b7a578799505050505050505050506100b5565b60008460a001511315612ce357835180516020820151604083015160a084015160e090940151600094612bce94939291612bbc90670de0b6b3a7640000614540565b8a516060810151608090910151613aa8565b9350905082612bea5760009a50505050505050505050506100b5565b808560a0015110612ce157612bfe85613bad565b909950925082612c1b5760009a50505050505050505050506100b5565b612c408560c001518660e00151876101000151886000015160a001516129bf8e6110a1565b88516040810192909252602082019290925291909152925082612c705760009a50505050505050505050506100b5565b845180516020820151604083015160a084015160e090940151612ca09490612bbc90670de0b6b3a7640000614540565b9350905082612cbc5760009a50505050505050505050506100b5565b8e60a001518111612cd957889a50505050505050505050506100b5565b505050612ac6565b505b6000612cf4858f8760a00151613c83565b93509050821580612d0d5750670de0b6b3a76400008110155b15612d255760009a50505050505050505050506100b5565b80670de0b6b3a76400000390506000612d526122aa87604001518860200151611bc090919063ffffffff16565b612d5f6122aa858e611383565b612d6991906144f6565b9050881580612d875750612d7c89613fde565b612d8582613fde565b125b15612d96578098508997508296505b6000811315612dbe57612dad8b6116d48385611bd5565b612db7908b6144e3565b9950612e10565b6000811215612e07576000612dd88c6116d485818661467d565b90508a811015612dec57808b039a50612e01565b60009c505050505050505050505050506100b5565b50612e10565b50505050612e1f565b84600101945050505050612ac6565b506000612e478260c001518360e00151846101000151856000015160a001516129bf8b6110a1565b85516040810192909252602082019290925291909152905080612e745760009750505050505050506100b5565b6000612e838360000151613ff6565b90506000612ea56122aa85604001518660200151611bc090919063ffffffff16565b612eb26122aa848c611383565b612ebc91906144f6565b9050612ec787613fde565b612ed082613fde565b1215612edd578795508194505b612f04612ef8655af3107a4000670de0b6b3a7640000614540565b6020860151908b61271e565b6040850151612f14908790611bd5565b1080612f545750612f42612f36655af3107a4000670de0b6b3a76400006144e3565b6020860151908b611ba2565b6040850151612f5290879061214b565b115b15612f6b57600099505050505050505050506100b5565b50939c9b505050505050505050505050565b60008060008084600003612f9c57508792508691508590506001613089565b600085612fa88b6110a1565b612fb29190614699565b9050612fbd876110a1565b811215612fd857600080600080945094509450945050613089565b80945060008912612ff857612ff16122aa868b8d611ba2565b935061301b565b61300f6122aa6130078b61467d565b87908d61271e565b6130189061467d565b93505b6000806130288c8c61284c565b9150915080613047576000806000809650965096509650505050613089565b6000613053888861284c565b925090508161307357600080600080975097509750975050505050613089565b61307e8b8285611ba2565b955060019450505050505b95509550955095915050565b600080670de0b6b3a76400006130a961047b565b6130b391906145b3565b90508083116130c35760006130cd565b6130cd8184614540565b915061093f613104670de0b6b3a76400007f00000000000000000000000000000000000000000000000000000000000000006145b3565b8390611bd5565b60008060006131306122aa85610160015186610140015161138390919063ffffffff16565b6131506122aa866101200151876101000151611bc090919063ffffffff16565b61315a91906144f6565b90506000806131718660000151876020015161284c565b915091508061318857506000958695509350505050565b60008313156132c957600083905060006131d6886000015189602001518a604001518b60a001518c60e00151670de0b6b3a76400006131c79190614540565b8d606001518e60800151613aa8565b93509050826131ef575060009788975095505050505050565b81811061328d576000613229858a60400151858c60e00151670de0b6b3a764000061321a9190614540565b8d606001518e60800151614026565b945090508315801561323e57508860c0015183105b156132555750600098600198509650505050505050565b8361326b57506000988998509650505050505050565b613274816110a1565b61327d9061467d565b9960019950975050505050505050565b60008860200151126132b5576132ac8860a00151856122aa9190614540565b611b939061467d565b60a088015188516132ac916122aa91614540565b600083121561341c5760006132dd8461467d565b905060006133118489604001518a60e00151670de0b6b3a76400006133029190614540565b8b606001518c60800151613993565b935090508261332a575060009788975095505050505050565b8181106133af576000613364858a60400151858c60e00151670de0b6b3a76400006133559190614540565b8d606001518e6080015161348f565b945090508315801561337957508860c0015183105b156133905750600098600198509650505050505050565b836133a657506000988998509650505050505050565b61327d816110a1565b60006133e1858a604001518b60e00151670de0b6b3a76400006133d29190614540565b8c606001518d608001516140e6565b94509050836133fb57506000988998509650505050505050565b61327d6134128a6060015184866116d49190614540565b6122aa90836144e3565b50600095600195509350505050565b600061345e6122aa836101200151670de0b6b3a764000061344c9190614540565b6060850151610100860151919061271e565b6110916122aa846101600151670de0b6b3a764000061347d9190614540565b60608601516101408701519190611ba2565b60008060006134a18989888888614195565b9050868810156134b8576000809250925050613565565b96869003966134c78887612767565b9750878110156134de576000809250925050613565565b8781036134ec81868861271e565b9050670de0b6b3a7640000811061352057613519613512670de0b6b3a76400008961214b565b8290612767565b9050613538565b613535613512670de0b6b3a764000089611bd5565b90505b613542818661214b565b90508981101561355a57600080935093505050613565565b899003925060019150505b965096945050505050565b60008082136135925760405163e61b497560e01b815260040160405180910390fd5b506001600160801b03811160071b81811c67ffffffffffffffff1060061b1781811c63ffffffff1060051b1781811c61ffff1060041b1781811c60ff10600390811b90911782811c600f1060021b1782811c909110600190811b90911782811c90911017609f8181036060019290921b91605f198201906136159084901c6110a1565b6c465772b2bbbb5f824b15207a3081018102606090811d6d0388eaa27412d5aca026815d636e018202811d6d0df99ac502031bf953eff472fdcc018202811d6d13cdffb29d51d99322bdff5f2211018202811d6d0a0f742023def783a307a986912e018202811d6d01920d8043ca89b5239253284e42018202811d6c0b7a86d7375468fac667a0a527016c29508e458543d8aa4df2abee7883018302821d6d0139601a2efabe717e604cbb4894018302821d6d02247f7a7b6594320649aa03aba1018302821d6c8c3f38e95a6b1ff2ab1c3b343619018302821d6d02384773bdf1ac5676facced60901901830290911d6cb9a025d814b29c212b8b1a07cd1901909102780a09507084cc699bb0e71ea869ffffffffffffffffffffffff190105711340daa0d5f769dba1915cef59f0815a5506027d0267a36c0c95b3975ab3ee5b203a7614a3f75373f047d803ae7b6687f2b391909102017d57115e47018c7177eebf7cd370a3356a1b7863008a5ae8028c72b88642840160ae1d92915050565b6000680248ce36a70cb26b3e1982136137b157506000919050565b680755bf798b4a1bf1e582126137da576040516373a2d6b160e01b815260040160405180910390fd5b6503782dace9d9604e83901b059150600060606bb17217f7d1cf79abc9e3b39884821b056001605f1b01901d6bb17217f7d1cf79abc9e3b3988102909303926c240c330e9fb2d9cbaf0fd5aafb1984018402606090811d6d0277594991cfc85f6e2461837cd9018502811d6d1a521255e34f6a5061b25ef1c9c319018502811d6db1bbb201f443cf962f1a1d3db4a5018502811d6e02c72388d9f74f51a9331fed693f1419018502811d6e05180bb14799ab47a8a8cb2a527d57016d02d16720577bd19bf614176fe9ea6c10fe68e7fd37d0007b713f765087018702831d9081019087016d01d3967ed30fc4f89c02bab570811901810290921d6e0587f503bb6ea29d25fcb7401964500186026d360d7aeea093263ecc6e0ecb291760621b0181810595509293509091906127d274029d9dc38563c32e5c2f6dc192ee70ef65f9978af3860260c38690031c6110a1565b60006139406001600160a01b038416836141c4565b9050805160001415801561396557508080602001905181019061396391906146ef565b155b1561117d57604051635274afe760e01b81526001600160a01b03841660048201526024015b60405180910390fd5b60008060006139a58888888888614195565b905060006139d0670de0b6b3a76400006139bf8888611bd5565b6139c991906144e3565b839061214b565b9050670de0b6b3a764000081106139fd576139f6613512670de0b6b3a76400008961214b565b9050613a15565b613a12613512670de0b6b3a764000089611bd5565b90505b80881015613a2b57600080935093505050610a7f565b909603976001975095505050505050565b6020830151600090613a4e908461214b565b6040850151613a5e908490611bd5565b101580156100b557506020840151613a8e9084613a87633b9aca00670de0b6b3a76400006144e3565b9190611ba2565b6040850151613a9e90849061214b565b1115949350505050565b6000806000881215613aca57613abd8861467d565b613ac790876144e3565b95505b600080613ad78b8b61284c565b9150915080613aee57600080935093505050613ba1565b6000613afd838b8a8a8a6141d2565b90506000613b1a613b128a611cdd8a8e611bc0565b89908961271e565b905080821015613b34576000809550955050505050613ba1565b808203670de0b6b3a76400008110613b6257613b5b613512670de0b6b3a76400008c611bd5565b9050613b7a565b613b77613512670de0b6b3a76400008c61214b565b90505b8b811015613b9357600080965096505050505050613ba1565b8b9003955060019450505050505b97509795505050505050565b60008060008360e0015113613bc757506000928392509050565b6000613bd6846000015161342b565b90506000613c02856040015186606001518760400151613bf691906144e3565b6020880151919061271e565b905060008212613c295780821015613c1c57819003613c3f565b5060009485945092505050565b613c328261467d565b613c3c90826144e3565b90505b60e085015160c0860151613c5491839061271e565b9050808560c001511015613c6f575060009485945092505050565b808560c00151036001935093505050915091565b6000806000808412613ca757855160400151613ca09085906144e3565b9050613ce2565b6000613cb28561467d565b875160400151909150811015613cd2578651604001518190039150613ce0565b60008093509350505061009c565b505b855180516020909101516000918291613cfb919061284c565b9150915080613d13576000809450945050505061009c565b875160e0810151604090910151600091613d4891613d3c91613d359190612767565b8a90611383565b6101008b01519061214b565b895160e0810151608090910151613d7391613d6791611cdd9088611383565b8b51606001519061214b565b613d7d91906144e3565b90506000613db5613da9613da28c6000015160e001518861276790919063ffffffff16565b8b90611bc0565b6101008c015190611bd5565b905080821015613dd05760008096509650505050505061009c565b80820391506000613e12858c60000151604001518d6000015160e00151670de0b6b3a7640000613e009190614540565b8e516060810151608090910151614195565b90506000613e3c8c6000015160e00151670de0b6b3a7640000613e359190614540565b8890612767565b905080821015613e5957600080985098505050505050505061009c565b8b51608081015160609091015191830391613e7591839161271e565b9050670de0b6b3a76400008110613eb9578b5160e00151613eb29061351290613ea690670de0b6b3a7640000614540565b8e5160e001519061214b565b9050613ee8565b8b5160e00151613ee59061351290613ed990670de0b6b3a7640000614540565b8e5160e0015190611bd5565b90505b8b5160600151613efb908590839061271e565b935083670de0b6b3a76400001115613f1f5783670de0b6b3a7640000039350613f33565b60006001985098505050505050505061009c565b60008c60e0015112613f965760c08c015160e08d0151613f529161214b565b9250670de0b6b3a7640000831115613f7757600080985098505050505050505061009c565b670de0b6b3a76400009290920391613f8f8484611383565b9350613fcb565b613fc8613faf8d60c001518e60e001516116d49061467d565b613fc190670de0b6b3a76400006144e3565b8590611383565b93505b50919a60019a5098505050505050505050565b6000808212613fed578161109b565b61109b8261467d565b600080600061400484612691565b91509150806121a957604051635516328b60e11b815260040160405180910390fd5b60008060006140388989888888614195565b905061404886611cdd898b6144e3565b97508781101561405f576000809250925050613565565b87810361406d81868861271e565b9050670de0b6b3a7640000811061409a57614093613512670de0b6b3a76400008961214b565b90506140b2565b6140af613512670de0b6b3a764000089611bd5565b90505b6140bc818661214b565b9050808a10156140d457600080935093505050613565565b90980398600198509650505050505050565b60008060006140f888888888886141d2565b9050600061411c670de0b6b3a7640000614112888861214b565b61310491906144e3565b9050670de0b6b3a7640000811061414957614142613512670de0b6b3a764000089611bd5565b9050614161565b61415e613512670de0b6b3a76400008961214b565b90505b61416b8186611bd5565b90508881101561418357600080935093505050610a7f565b97909703976001975095505050505050565b60006141a18585612767565b6141ba6141b286611cdd868b611bc0565b85908561271e565b611fc591906144e3565b606061093f838360006141f7565b60006141de8585612767565b6141ba6141ef86611cdd868b611383565b859085611ba2565b60608147101561421c5760405163cd78605960e01b815230600482015260240161398a565b600080856001600160a01b03168486604051614238919061470c565b60006040518083038185875af1925050503d8060008114614275576040519150601f19603f3d011682016040523d82523d6000602084013e61427a565b606091505b50915091506127d286838360608261429a57614295826142e1565b61093f565b81511580156142b157506001600160a01b0384163b155b156142da57604051639996b31560e01b81526001600160a01b038516600482015260240161398a565b508061093f565b8051156142f15780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b60405180610120016040528061431e61435c565b815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b6040518061018001604052806000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b60006060828403121561224c57600080fd5b6000806000606084860312156143e457600080fd5b8335925060208401359150604084013567ffffffffffffffff81111561440957600080fd5b614415868287016143bd565b9150509250925092565b6000806000806080858703121561443557600080fd5b843593506020850135925060408501359150606085013567ffffffffffffffff81111561446157600080fd5b61446d878288016143bd565b91505092959194509250565b60006020828403121561448b57600080fd5b81356001600160a01b038116811461093f57600080fd5b801515811461046057600080fd5b6000602082840312156144c257600080fd5b813561093f816144a2565b634e487b7160e01b600052601160045260246000fd5b8082018082111561109b5761109b6144cd565b81810360008312801583831316838312821617156121a9576121a96144cd565b634e487b7160e01b600052601260045260246000fd5b60008261453b5761453b614516565b500690565b8181038181111561109b5761109b6144cd565b6001600160701b038181168382160190808211156121a9576121a96144cd565b6001600160801b038181168382160190808211156121a9576121a96144cd565b6001600160801b038281168282160390808211156121a9576121a96144cd565b808202811582820484141761109b5761109b6144cd565b600f81810b9083900b0160016001607f1b03811360016001607f1b03198212171561109b5761109b6144cd565b600081600f0b60016001607f1b03198103614614576146146144cd565b60000392915050565b6000808335601e1984360301811261463457600080fd5b83018035915067ffffffffffffffff82111561464f57600080fd5b60200191503681900382131561244357600080fd5b60006020828403121561467657600080fd5b5051919050565b6000600160ff1b8201614692576146926144cd565b5060000390565b80820182811260008312801582168215821617156146b9576146b96144cd565b505092915050565b6000826146d0576146d0614516565b600160ff1b8214600019841416156146ea576146ea6144cd565b500590565b60006020828403121561470157600080fd5b815161093f816144a2565b6000825160005b8181101561472d5760208186018101518583015201614713565b50600092019182525091905056fea2646970667358221220892cdca8781a664c6eb787d19597fab4e89e08b9c0c42a48430f88bc0b8797d764736f6c63430008140033a26469706673582212201dc724c38d40ad5c9f3d757205a13e83cafad83ed1215ede7c3f9248c681734264736f6c63430008140033"
+    "0x608060405234801561001057600080fd5b5061426b806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063847c08a514610030575b600080fd5b61004361003e366004610227565b61005f565b6040516001600160a01b03909116815260200160405180910390f35b604080513360208201529081018290526000906060016040516020818303038152906040528051906020012084604051610098906100cb565b6100a2919061035d565b8190604051809103906000f59050801580156100c2573d6000803e3d6000fd5b50949350505050565b613db98061047d83390190565b634e487b7160e01b600052604160045260246000fd5b6040516101e0810167ffffffffffffffff81118282101715610112576101126100d8565b60405290565b80356001600160a01b038116811461012f57600080fd5b919050565b60006080828403121561014657600080fd5b6040516080810181811067ffffffffffffffff82111715610169576101696100d8565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b600082601f8301126101ab57600080fd5b813567ffffffffffffffff808211156101c6576101c66100d8565b604051601f8301601f19908116603f011681019082821181831017156101ee576101ee6100d8565b8160405283815286602085880101111561020757600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600083850361028081121561023e57600080fd5b6102408082121561024e57600080fd5b6102566100ee565b915061026186610118565b825261026f60208701610118565b602083015261028060408701610118565b6040830152606086013560608301526080860135608083015260a086013560a083015260c086013560c083015260e086013560e08301526101008087013581840152506101208087013581840152506101408087013581840152506101606102e9818801610118565b908301526101806102fb878201610118565b908301526101a061030d878201610118565b908301526101c061032088888301610134565b9083015290935084013567ffffffffffffffff81111561033f57600080fd5b61034b8682870161019a565b92505061026084013590509250925092565b81516001600160a01b031681526102408101602083015161038960208401826001600160a01b03169052565b5060408301516103a460408401826001600160a01b03169052565b50606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151818401525061014080840151818401525061016080840151610416828501826001600160a01b03169052565b5050610180838101516001600160a01b0381168483015250506101a0838101516001600160a01b0381168483015250506101c08381015180518483015260208101516101e08501526040810151610200850152606081015161022085015250509291505056fe6102606040523480156200001257600080fd5b5060405162003db938038062003db98339810160408190526200003591620001ec565b600160005580516001600160a01b039081166080908152602080840151831660a0908152918401516101a0908152918401516101c090815260c0808601516101e05260e08087015161020052610120808801519092526101008088015190915261014080880151909152918601805151909152805190920151905280516040908101516101609081529151606090810151610180908152918601518516610220528501516102405290840151600a80546001600160a01b031990811692861692909217905590840151600880548316918516919091179055920151600980549093169116179055620002eb565b6040516101e081016001600160401b03811182821017156200015457634e487b7160e01b600052604160045260246000fd5b60405290565b80516001600160a01b03811681146200017257600080fd5b919050565b6000608082840312156200018a57600080fd5b604051608081016001600160401b0381118282101715620001bb57634e487b7160e01b600052604160045260246000fd5b8060405250809150825181526020830151602082015260408301516040820152606083015160608201525092915050565b600061024082840312156200020057600080fd5b6200020a62000122565b62000215836200015a565b815262000225602084016200015a565b602082015262000238604084016200015a565b6040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e0820152610100808401518183015250610120808401518183015250610140808401518183015250610160620002a38185016200015a565b90820152610180620002b78482016200015a565b908201526101a0620002cb8482016200015a565b908201526101c0620002e08585830162000177565b908201529392505050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516101e051610200516102205161024051613941620004786000396000505060005050600050506000818160af0152818161032b0152612ab901526000818161132f015281816116da0152818161173d01528181612699015281816126d5015281816128d20152612a9301526000818161068101528181610d0701528181610ec6015281816115990152612a6d01526000611a79015260008181611b9f01528181612189015261220201526000818161090401528181610e5501528181611b7301526121d6015260008181610d4a015261214f0152600081816106a201528181610ce501528181610ee7015281816115770152612adf01526000818161083c01528181610dd50152818161163601528181612024015261304f0152600081816105d8015281816106d40152818161075b015281816107bc01526107f40152600081816118cd015281816124250152818161248b01526125070152600050506139416000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c806329b23fc11461003b578063ded0623114610060575b600080fd5b61004e61004936600461345d565b610073565b60405190815260200160405180910390f35b61004e61006e36600461345d565b61008c565b60006100818585858561009a565b90505b949350505050565b600061008185858585610316565b60006100a4610556565b6100ad82610580565b7f00000000000000000000000000000000000000000000000000000000000000008410156100ee5760405163211ddda360e11b815260040160405180910390fd5b60006100f86105b9565b90508542101561011b5761011561010d6105d1565b826004610607565b50610129565b61012786826004610607565b505b61013e610137600288610b9e565b3387610bd3565b6000806000806000806101528b888e610cac565b95509550955095509550955060008c90508c4210156102125782600b600082825461017d91906134d2565b90915550610195905061018e6105d1565b4284610f45565b6101a28c88878785611083565b60006101ad8e6111fd565b90506101cb6101bb8e611247565b6101c590836134e5565b82611275565b6101d489611328565b6101e0576101e0611388565b60006101eb8a6113a1565b90508061020b57604051638bdf918d60e01b815260040160405180910390fd5b5050610229565b61021c86896113ae565b9550610227886113a1565b505b6000610236878a8d61148f565b90508b8110156102595760405163c972651760e01b815260040160405180910390fd5b8c86858b8e610269600288610b9e565b6102766020830183613505565b6001600160a01b0316337fcb02fec44af7356703a283b87ccec63f4ea688efc67fee9cdc1834a93260c7308a8a876102b46040890160208a0161353c565b6102c88a6102c28d8f6134d2565b90611529565b6040805195865260208601949094529284019190915215156060830152608082015260a081018a905260c00160405180910390a450939c505050505050505050505050506100846001600055565b6000610320610556565b61032982610580565b7f000000000000000000000000000000000000000000000000000000000000000084101561036a5760405163211ddda360e11b815260040160405180910390fd5b60006103746105b9565b90508542101561038f5761038961010d6105d1565b5061039d565b61039b86826004610607565b505b6103ab610137600188610b9e565b6000806000806000806103bf8b888e61153e565b95509550955095509550955060008c90508c4210156104725782600b60008282546103ea91906134d2565b909155506103fb905061018e6105d1565b6104088c888787856116c3565b6000610413826111fd565b905061042b6104218e611247565b6101c59083613559565b61043489611328565b61044057610440611388565b600061044b8a6113a1565b90508061046b57604051638bdf918d60e01b815260040160405180910390fd5b5050610489565b61047c86896113ae565b9550610487886113a1565b505b6000610496878a8d61148f565b90508b8110156104b95760405163c972651760e01b815260040160405180910390fd5b8c898c6104c7600186610b9e565b6104d46020830183613505565b6001600160a01b0316337fc0e1704f2ff88686bdc2a73d31e0dc4e054eddbdc3564af7a148229cf857b8028888876105126040890160208a0161353c565b60408051948552602085019390935291830152151560608201526080810188905260a00160405180910390a450919a50505050505050505050506100846001600055565b60026000540361057957604051633ee5aeb560e01b815260040160405180910390fd5b6002600055565b600061058f6020830183613505565b6001600160a01b0316036105b65760405163f0dd15fd60e01b815260040160405180910390fd5b50565b60006105cc670de0b6b3a76400006118b4565b905090565b60006105fd7f000000000000000000000000000000000000000000000000000000000000000042613597565b6105cc90426135ab565b600083815260076020526040812060018101546001600160801b031615158061062f57504285115b1561064857600101546001600160801b03169050610b97565b60008060006106556105d1565b90508088036106cd578692506106c661066c611941565b600154600160801b90046001600160801b03167f00000000000000000000000000000000000000000000000000000000000000007f0000000000000000000000000000000000000000000000000000000000000000611962565b9150610789565b60006106f97f00000000000000000000000000000000000000000000000000000000000000008a6134d2565b90505b8181036107145787935061071161066c611941565b92505b6000818152600760205260409020600101546001600160801b031693508315610756576000818152600760205260409020546001600160801b03169250610787565b6107807f0000000000000000000000000000000000000000000000000000000000000000826134d2565b90506106fc565b505b61079283611979565b6001850180546001600160801b0319166001600160801b03929092169190911790556107e86107e17f00000000000000000000000000000000000000000000000000000000000000008a6135ab565b8984610f45565b610826886108206108197f0000000000000000000000000000000000000000000000000000000000000000836134d2565b42906119a3565b84610f45565b61082f876119b8565b50600090506007816108617f00000000000000000000000000000000000000000000000000000000000000008c6135ab565b815260208101919091526040016000908120600101546001600160801b0316915061088d60028b610b9e565b6000818152600e60205260408120549192508b8b83156109d357600192506000806108bc86898d866000611b5c565b9150915080600b60008282546108d291906134d2565b909155506108ee9050866000846108e881611247565b88611083565b6108f881836134d2565b915061092886838a8e877f0000000000000000000000000000000000000000000000000000000000000000611c2b565b915061093c6109378385611529565b611c75565b6005805460029061095d9084906201000090046001600160701b03166135be565b92506101000a8154816001600160701b0302191690836001600160701b0316021790555061098a82611979565b600580546010906109ac908490600160801b90046001600160801b03166135de565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050505b60006109e0600184610b9e565b6000818152600e60205260409020549091508015610aef5760019450600080610a0d838b8f886001611b5c565b9150915080600b6000828254610a2391906134d2565b90915550610a3f905083600084610a3981611247565b8a6116c3565b610a4981836135ab565b9150610a586109378387611529565b60058054600290610a799084906201000090046001600160701b03166135be565b92506101000a8154816001600160701b0302191690836001600160701b03160217905550610aa682611979565b60058054601090610ac8908490600160801b90046001600160801b03166135de565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050505b8415610b2757610b1b610b0187611247565b610b0a83611247565b610b1491906134e5565b6000611275565b610b25838f611c9f565b505b6000610b3284611e99565b50604080518e815260208101879052908101899052606081018490526080810182905290915085907fff888cf98d2696e95c8c39aa98c9ad55a5378008f7a56614c9353b7137a57ab79060a00160405180910390a250999b5050505050505050505050505b9392505050565b60006001600160f81b03821115610bc85760405163b7d0949760e01b815260040160405180910390fd5b5060f89190911b1790565b6000838152600d602090815260408083206001600160a01b0386168452909152902054811115610c1657604051631e9acf1760e31b815260040160405180910390fd5b6000838152600d602090815260408083206001600160a01b0386168452825280832080548590039055858352600e90915281208054839290610c599084906135ab565b909155505060408051848152602081018390526000916001600160a01b0385169133917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a4505050565b600080600080600080600080610cc189611ff7565b9050610d2b610cce611941565b600154600160801b90046001600160801b03168d847f00000000000000000000000000000000000000000000000000000000000000008f7f0000000000000000000000000000000000000000000000000000000000000000612048565b90995096509150610d3d61066c611941565b9250610d738289610d6e867f00000000000000000000000000000000000000000000000000000000000000006120b8565b6120e8565b15610d8057610d80611388565b8a8a60008080610d9285878a8761212a565b9b5091945092509050610da581846135ab565b610daf90886134d2565b9650610dbb82846134d2565b610dc5908c6134d2565b9a505050505050506000600760007f00000000000000000000000000000000000000000000000000000000000000008b610dff91906135ab565b815260208101919091526040016000908120600101546001600160801b03169150428a11610e475760008a8152600760205260409020600101546001600160801b0316610e49565b8a5b9050610e798c8884848f7f0000000000000000000000000000000000000000000000000000000000000000611c2b565b9750610e8585886135ab565b9650670de0b6b3a7640000610f0b84610e9c611941565b610ea691906134d2565b600154610ec4908d90600160801b90046001600160801b03166135ab565b7f00000000000000000000000000000000000000000000000000000000000000007f0000000000000000000000000000000000000000000000000000000000000000611962565b1115610f1957610f19611388565b610f29888885888686600061223e565b939b509199509097509095505050505093975093979195509350565b600083815260076020526040902054600160801b90046001600160801b0316808303610f715750505050565b6000848152600760205260408120546001600160801b031690819003610fcb57610f9a83611979565b600086815260076020526040902080546001600160801b0319166001600160801b0392909216919091179055611049565b61101c611017670de0b6b3a7640000610fe488866135ab565b610fee91906135fe565b85670de0b6b3a7640000611002878a6135ab565b61100c91906135fe565b8592919060016122dd565b611979565b600086815260076020526040902080546001600160801b0319166001600160801b03929092169190911790555b61105284611979565b60009586526007602052604090952080546001600160801b03968716600160801b0296169590951790945550505050565b600354600160801b90046001600160801b03166110cc611017826110af670de0b6b3a7640000866135fe565b600454600160801b90046001600160801b031691908a60006122dd565b600480546001600160801b03928316600160801b0292169190911790556110f286611979565b6110fc9082613615565b600380546001600160801b03928316600160801b02921691909117905561112284611979565b6001805460009061113d9084906001600160801b03166135de565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555061116a83612387565b6003805460009061117f908490600f0b613635565b92506101000a8154816001600160801b030219169083600f0b6001600160801b031602179055506111af85611979565b600180546010906111d1908490600160801b90046001600160801b0316613615565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550505050505050565b6000611225600e6000611211600286610b9e565b815260200190815260200160002054611247565b611237600e6000611211600187610b9e565b61124191906134e5565b92915050565b60006001600160ff1b038211156112715760405163396ea70160e11b815260040160405180910390fd5b5090565b600061129e61128484836123c3565b61128f8460006123c3565b61129991906134e5565b612387565b9050600081600f0b13156112f357600280548291906000906112ca9084906001600160801b03166135de565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550505050565b600081600f0b12156113235761130881613662565b600280546000906112ca9084906001600160801b0316613615565b505050565b60006113547f0000000000000000000000000000000000000000000000000000000000000000836123d9565b60025461136a91906001600160801b03166134d2565b600154611380906001600160801b031684611529565b101592915050565b60405163bb55fd2760e01b815260040160405180910390fd5b6000611241826004611c9f565b60008060006113bc846119b8565b909250905060006113cd8686611529565b9050818311156113e5576113e28683856123ee565b95505b828110156113f75780830392506113fc565b600092505b61140583611c75565b600580546001600160701b039290921662010000026fffffffffffffffffffffffffffff00001990921691909117908190556001600160801b03600160801b90910416808710156114585786900361145c565b5060005b61146581611979565b600580546001600160801b03928316600160801b0292169190911790555085935050505092915050565b60008061149c8585611529565b90506114a78161240c565b9450846000036114bb576000915050610b97565b6114cb604084016020850161353c565b156114fa576114f3856114e16020860186613505565b6114ee6040870187613688565b61245c565b9150611521565b61151d8561150b6020860186613505565b6115186040870187613688565b6124fa565b8491505b509392505050565b6000610b978383670de0b6b3a76400006123ee565b60008060008060008060008061155389611ff7565b90506115bd611560611941565b600154600160801b90046001600160801b03168d847f00000000000000000000000000000000000000000000000000000000000000008f7f0000000000000000000000000000000000000000000000000000000000000000612534565b90995097509150600080806115d361066c611941565b95508c6115e28f86898461212a565b9a5091955090935091506115f683856135ab565b61160090876135ab565b955061160c82856134d2565b611616908c6135ab565b9a50611622888c6134d2565b995050505050506116ad86868386600760007f00000000000000000000000000000000000000000000000000000000000000008f61166091906135ab565b81526020810191909152604001600020600101546001600160801b0316428e116116a45760008e8152600760205260409020600101546001600160801b03166116a6565b8e5b600161223e565b9a9e939d50919b50909950929650945050505050565b6001546001600160801b03168381108061170557507f000000000000000000000000000000000000000000000000000000000000000061170385836135ab565b105b1561171257611712611388565b6003549084900390600f0b61172784826134e5565b90508361173386611247565b13801561176857507f00000000000000000000000000000000000000000000000000000000000000006117668383612588565b105b1561177557611775611388565b600254600160801b90046001600160801b03166117b7611017826117a1670de0b6b3a7640000886135fe565b6004546001600160801b031691908c60006122dd565b600480546001600160801b0319166001600160801b03929092169190911790556117e188826135ab565b90506117ec81611979565b600280546001600160801b03928316600160801b02921691909117905561181283611979565b600180546001600160801b0319166001600160801b039290921691909117905561183b82612387565b600380546001600160801b0319166001600160801b039290921691909117905561186487611979565b60018054601090611886908490600160801b90046001600160801b03166135de565b92506101000a8154816001600160801b0302191690836001600160801b031602179055505050505050505050565b6040516303d1689d60e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906307a2d13a906024015b602060405180830381865afa15801561191d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061124191906136cf565b6001546003546000916105cc916001600160801b0390911690600f0b612588565b6000610081826119738588886123ee565b906125ae565b60006001600160801b0382111561127157604051630f0af95160e11b815260040160405180910390fd5b60008183116119b25782610b97565b50919050565b60055460009081906119db908490600160801b90046001600160801b0316611529565b6005546201000090046001600160701b03169250905081811115611b57576000611a0583836135ab565b9050611a146110178286612623565b60058054601090611a36908490600160801b90046001600160801b0316613615565b92506101000a8154816001600160801b0302191690836001600160801b031602179055506000611a6f858361263890919063ffffffff16565b90506000611a9d827f0000000000000000000000000000000000000000000000000000000000000000611529565b905080600b6000828254611ab191906134d2565b90915550611ac1905081836135ab565b9150611acc82611979565b60018054600090611ae79084906001600160801b03166135de565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550611b148261264d565b60038054600090611b29908490600f0b613635565b92506101000a8154816001600160801b030219169083600f0b6001600160801b031602179055508493505050505b915091565b600080611b698785612638565b91506000611b97837f0000000000000000000000000000000000000000000000000000000000000000611529565b9050611bc3817f0000000000000000000000000000000000000000000000000000000000000000611529565b91508315611be657611bd582826135ab565b611bdf90846135ab565b9250611bfd565b611bf082826135ab565b611bfa90846134d2565b92505b86861015611c2057611c108387896123ee565b9250611c1d8287896123ee565b91505b509550959350505050565b600080611c4384611c3d8a888a6123ee565b90612638565b9050611c508884866123ee565b611c5a90826134d2565b905086811115611c6a5786810391505b509695505050505050565b60006001600160701b038211156112715760405163086b151760e11b815260040160405180910390fd5b600654600360f81b6000908152600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e95490918291611cea916001600160801b0316906135ab565b905080600003611cfe576001915050611241565b6000611d0985612677565b905080600003611d1e57600192505050611241565b600080611d2c838589612713565b9150915080611d42576000945050505050611241565b60008073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__632c03ef68858a6040518363ffffffff1660e01b8152600401611d7e929190613766565b6040805180830381865af4158015611d9a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611dbe91906137dc565b91509150611ddc611dce82611247565b611dd790613800565b61288e565b925082611df25760009650505050505050611241565b611dfb82611979565b60068054600090611e169084906001600160801b03166135de565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550611e4381611979565b60068054601090611e65908490600160801b90046001600160801b03166135de565b92506101000a8154816001600160801b0302191690836001600160801b031602179055506001965050505050505092915050565b60008060008073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__635a1b419e611ec287612a24565b6040518263ffffffff1660e01b8152600401611ede919061381c565b6040805180830381865af4158015611efa573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f1e919061382b565b9150915080611f34575060009485945092505050565b6000808611611f44576000611f4e565b611f4e8387611529565b600654600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e95460008080527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54939450926001600160801b0390921691611fb991906134d2565b611fc391906135ab565b905080600003611fdc5750600096879650945050505050565b6000611fe88383612638565b98600198509650505050505050565b6000806120026105d1565b905080831161201257600061201c565b61201c81846135ab565b9150610b97827f0000000000000000000000000000000000000000000000000000000000000000612638565b6000808061206961206188670de0b6b3a76400006135ab565b899087612b5e565b905086156120ab5761207b88886123d9565b915061209c8a8a846120958a670de0b6b3a76400006135ab565b8989612b84565b92506120a883826134d2565b90505b9750975097945050505050565b60006120d66120cf84670de0b6b3a76400006135ab565b83906123d9565b610b9790670de0b6b3a76400006135ab565b60008061211f856120f7611941565b61210191906134d2565b600154610ec4908790600160801b90046001600160801b03166135ab565b909210949350505050565b6000808080612181878661217a8b61217461214d8c670de0b6b3a76400006135ab565b7f0000000000000000000000000000000000000000000000000000000000000000906123d9565b906123d9565b9190612b5e565b93506121ad847f0000000000000000000000000000000000000000000000000000000000000000611529565b915060006121ce6121c689670de0b6b3a76400006135ab565b8a9088612b5e565b90506121fa817f00000000000000000000000000000000000000000000000000000000000000006123d9565b9350612226847f0000000000000000000000000000000000000000000000000000000000000000611529565b61223090846134d2565b915050945094509450949050565b600080600080600080888810156122ad578615612263576122608d898b6123ee565b9c505b61226e8c898b6123ee565b9b506122798b611247565b6122828d611247565b61228c91906134e5565b90506122998b898b6123ee565b9a506122a68a898b6123ee565b99506122cc565b6122b68b611247565b6122bf8d611247565b6122c991906134e5565b90505b9b9c9a9b999a975050505050505050565b6000826000036122ee57508461237e565b81156123415761231f61230184876134d2565b61230b8587611529565b612315888a611529565b611c3d91906134d2565b9050600061232d85886119a3565b90508082101561233b578091505b5061237e565b8285036123505750600061237e565b61237b61235d84876135ab565b61236785876123d9565b612371888a611529565b611c3d91906135ab565b90505b95945050505050565b600060016001607f1b03198212806123a5575060016001607f1b0382135b156112715760405163a5353be560e01b815260040160405180910390fd5b60008183136123d25781610b97565b5090919050565b6000610b978383670de0b6b3a7640000612b5e565b600082600019048411830215820261240557600080fd5b5091020490565b6040516363737ac960e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063c6e6f59290602401611900565b604051635d043b2960e11b8152600481018590526001600160a01b0384811660248301523060448301526000917f00000000000000000000000000000000000000000000000000000000000000009091169063ba087652906064016020604051808303816000875af11580156124d6573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061008191906136cf565b61252e6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000168486612ba7565b50505050565b6000808061255561254d88670de0b6b3a76400006135ab565b8990876123ee565b905086156120ab576125678888611529565b915061209c8a8a846125818a670de0b6b3a76400006135ab565b8989612bf9565b6000806125958484612c0a565b9092509050806125a7576125a7611388565b5092915050565b6000816000036125c75750670de0b6b3a7640000611241565b826000036125d757506000611241565b60006125e283611247565b905060006125f76125f286611247565b612c49565b905081810261260e670de0b6b3a76400008261385b565b905061261981612e6f565b9695505050505050565b6000610b9783670de0b6b3a764000084612b5e565b6000610b9783670de0b6b3a7640000846123ee565b600060016001607f1b038211156112715760405163a5353be560e01b815260040160405180910390fd5b6002546000908190612692906001600160801b031684612623565b90506126be7f0000000000000000000000000000000000000000000000000000000000000000826134d2565b6001546001600160801b031611156119b2576001547f0000000000000000000000000000000000000000000000000000000000000000906127099083906001600160801b03166135ab565b610b9791906135ab565b61271b6133aa565b60008061272784612a24565b9050600073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__635a1b419e836040518263ffffffff1660e01b8152600401612762919061381c565b6040805180830381865af415801561277e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906127a2919061382b565b93509050826127b75750600091506128869050565b60006127de6127d984610160015185610140015161152990919063ffffffff16565b611247565b6127fe6127d98561012001518661010001516123d990919063ffffffff16565b61280891906134e5565b604080516101208101825285815260208082019590955260008052600e85527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c5481830152606081018a9052608081018b905260a0810192909252845160c08301529284015160e08201529290910151610100830152509150600190505b935093915050565b60015460035460405163685a2be760e11b81526001600160801b0380841660048301819052600f9390930b60248301819052600160801b90940416604482018190527f000000000000000000000000000000000000000000000000000000000000000060648301526084820185905260009391849081908190819073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__9063d0b457ce9060a401608060405180830381865af4158015612945573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129699190613889565b9350935093509350806129855750600098975050505050505050565b8684146129b65761299584611979565b600180546001600160801b0319166001600160801b03929092169190911790555b8583146129e7576129c683612387565b600380546001600160801b0319166001600160801b03929092169190911790555b848214612a15576129f782611979565b600180546001600160801b03928316600160801b0292169190911790555b50600198975050505050505050565b612a2c6133fc565b60408051610180810182526001546001600160801b038082168352600354600f0b6020840152600160801b91829004811693830193909352606082018590527f000000000000000000000000000000000000000000000000000000000000000060808301527f000000000000000000000000000000000000000000000000000000000000000060a08301527f000000000000000000000000000000000000000000000000000000000000000060c08301527f000000000000000000000000000000000000000000000000000000000000000060e08301526002540482166101008201526004549091610120830191612b249116613004565b81526003546001600160801b03600160801b9182900481166020840152600454604090930192612b5692900416613004565b905292915050565b6000826000190484118302158202612b7557600080fd5b50910281810615159190040190565b600080612b9588888888888861307a565b909250905080611c6a57611c6a611388565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663a9059cbb60e01b17905261132390849061315b565b600080612b958888888888886131c3565b600080600083612c1986611247565b612c2391906134e5565b90506000811215612c3b576000809250925050612c42565b9150600190505b9250929050565b6000808213612c6b5760405163e61b497560e01b815260040160405180910390fd5b506001600160801b03811160071b81811c67ffffffffffffffff1060061b1781811c63ffffffff1060051b1781811c61ffff1060041b1781811c60ff10600390811b90911782811c600f1060021b1782811c909110600190811b90911782811c90911017609f8181036060019290921b91605f19820190612cee9084901c611247565b6c465772b2bbbb5f824b15207a3081018102606090811d6d0388eaa27412d5aca026815d636e018202811d6d0df99ac502031bf953eff472fdcc018202811d6d13cdffb29d51d99322bdff5f2211018202811d6d0a0f742023def783a307a986912e018202811d6d01920d8043ca89b5239253284e42018202811d6c0b7a86d7375468fac667a0a527016c29508e458543d8aa4df2abee7883018302821d6d0139601a2efabe717e604cbb4894018302821d6d02247f7a7b6594320649aa03aba1018302821d6c8c3f38e95a6b1ff2ab1c3b343619018302821d6d02384773bdf1ac5676facced60901901830290911d6cb9a025d814b29c212b8b1a07cd1901909102780a09507084cc699bb0e71ea869ffffffffffffffffffffffff190105711340daa0d5f769dba1915cef59f0815a5506027d0267a36c0c95b3975ab3ee5b203a7614a3f75373f047d803ae7b6687f2b391909102017d57115e47018c7177eebf7cd370a3356a1b7863008a5ae8028c72b88642840160ae1d92915050565b6000680248ce36a70cb26b3e198213612e8a57506000919050565b680755bf798b4a1bf1e58212612eb3576040516373a2d6b160e01b815260040160405180910390fd5b6503782dace9d9604e83901b059150600060606bb17217f7d1cf79abc9e3b39884821b056001605f1b01901d6bb17217f7d1cf79abc9e3b3988102909303926c240c330e9fb2d9cbaf0fd5aafb1984018402606090811d6d0277594991cfc85f6e2461837cd9018502811d6d1a521255e34f6a5061b25ef1c9c319018502811d6db1bbb201f443cf962f1a1d3db4a5018502811d6e02c72388d9f74f51a9331fed693f1419018502811d6e05180bb14799ab47a8a8cb2a527d57016d02d16720577bd19bf614176fe9ea6c10fe68e7fd37d0007b713f765087018702831d9081019087016d01d3967ed30fc4f89c02bab570811901810290921d6e0587f503bb6ea29d25fcb7401964500186026d360d7aeea093263ecc6e0ecb291760621b01818105955092935090919061261974029d9dc38563c32e5c2f6dc192ee70ef65f9978af3860260c38690031c611247565b600080670de0b6b3a76400006130186105d1565b61302291906135fe565b905080831161303257600061303c565b61303c81846135ab565b9150610b97613073670de0b6b3a76400007f00000000000000000000000000000000000000000000000000000000000000006135fe565b8390612638565b600080600061308c8989888888613283565b9050868810156130a3576000809250925050613150565b96869003966130b288876125ae565b9750878110156130c9576000809250925050613150565b8781036130d7818688612b5e565b9050670de0b6b3a7640000811061310b576131046130fd670de0b6b3a764000089612623565b82906125ae565b9050613123565b6131206130fd670de0b6b3a764000089612638565b90505b61312d8186612623565b90508981101561314557600080935093505050613150565b899003925060019150505b965096945050505050565b60006131706001600160a01b038416836132b2565b9050805160001415801561319557508080602001905181019061319391906138bf565b155b1561132357604051635274afe760e01b81526001600160a01b03841660048201526024015b60405180910390fd5b60008060006131d58989888888613283565b90506131e586611973898b6134d2565b9750878110156131fc576000809250925050613150565b87810361320a818688612b5e565b9050670de0b6b3a76400008110613237576132306130fd670de0b6b3a764000089612623565b905061324f565b61324c6130fd670de0b6b3a764000089612638565b90505b6132598186612623565b9050808a101561327157600080935093505050613150565b90980398600198509650505050505050565b600061328f85856125ae565b6132a86132a086611973868b6123d9565b859085612b5e565b61237b91906134d2565b6060610b978383600084600080856001600160a01b031684866040516132d891906138dc565b60006040518083038185875af1925050503d8060008114613315576040519150601f19603f3d011682016040523d82523d6000602084013e61331a565b606091505b509150915061261986838360608261333a5761333582613381565b610b97565b815115801561335157506001600160a01b0384163b155b1561337a57604051639996b31560e01b81526001600160a01b03851660048201526024016131ba565b5080610b97565b8051156133915780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b6040518061012001604052806133be6133fc565b815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b6040518061018001604052806000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b6000806000806080858703121561347357600080fd5b843593506020850135925060408501359150606085013567ffffffffffffffff81111561349f57600080fd5b8501606081880312156134b157600080fd5b939692955090935050565b634e487b7160e01b600052601160045260246000fd5b80820180821115611241576112416134bc565b81810360008312801583831316838312821617156125a7576125a76134bc565b60006020828403121561351757600080fd5b81356001600160a01b0381168114610b9757600080fd5b80151581146105b657600080fd5b60006020828403121561354e57600080fd5b8135610b978161352e565b8082018281126000831280158216821582161715613579576135796134bc565b505092915050565b634e487b7160e01b600052601260045260246000fd5b6000826135a6576135a6613581565b500690565b81810381811115611241576112416134bc565b6001600160701b038181168382160190808211156125a7576125a76134bc565b6001600160801b038181168382160190808211156125a7576125a76134bc565b8082028115828204841417611241576112416134bc565b6001600160801b038281168282160390808211156125a7576125a76134bc565b600f81810b9083900b0160016001607f1b03811360016001607f1b031982121715611241576112416134bc565b600081600f0b60016001607f1b0319810361367f5761367f6134bc565b60000392915050565b6000808335601e1984360301811261369f57600080fd5b83018035915067ffffffffffffffff8211156136ba57600080fd5b602001915036819003821315612c4257600080fd5b6000602082840312156136e157600080fd5b5051919050565b805182526020810151602083015260408101516040830152606081015160608301526080810151608083015260a081015160a083015260c081015160c083015260e081015160e08301526101008082015181840152506101208082015181840152506101408082015181840152506101608082015181840152505050565b60006102a08201905061377a8285516136e8565b602084015161018083015260408401516101a083015260608401516101c083015260808401516101e083015260a084015161020083015260c084015161022083015260e084015161024083015261010090930151610260820152610280015290565b600080604083850312156137ef57600080fd5b505080516020909101519092909150565b6000600160ff1b8201613815576138156134bc565b5060000390565b610180810161124182846136e8565b6000806040838503121561383e57600080fd5b8251915060208301516138508161352e565b809150509250929050565b60008261386a5761386a613581565b600160ff1b821460001984141615613884576138846134bc565b500590565b6000806000806080858703121561389f57600080fd5b84519350602085015192506040850151915060608501516134b18161352e565b6000602082840312156138d157600080fd5b8151610b978161352e565b6000825160005b818110156138fd57602081860181015185830152016138e3565b50600092019182525091905056fea2646970667358221220846acf4aadbe1d8b815b407838d47520bcb700cc9a7eb7908de4afd34c30c9ce64736f6c63430008140033a26469706673582212201194d30f9082e3e2b712331d869f9c4f6326008d178c520f68592c2fffb5880f64736f6c63430008140033"
 )
 
 
 class ERC4626Target1DeployerContract(Contract):
     """A web3.py Contract class for the ERC4626Target1Deployer contract."""
 
     abi: ABI = erc4626target1deployer_abi
-    bytecode: bytes = HexBytes(erc4626target1deployer_bytecode)
+    bytecode: bytes | None = try_bytecode_hexbytes(erc4626target1deployer_bytecode, "erc4626target1deployer")
 
     def __init__(self, address: ChecksumAddress | None = None) -> None:
         try:
             # Initialize parent Contract class
             super().__init__(address=address)
             self.functions = ERC4626Target1DeployerContractFunctions(erc4626target1deployer_abi, self.w3, address)  # type: ignore
 
@@ -218,15 +218,15 @@
         current_nonce = w3.eth.get_transaction_count(account.address)
         deployment_tx.update({"nonce": current_nonce})
 
         # Sign the transaction with local account private key
         signed_tx = account.sign_transaction(deployment_tx)
 
         # Send the signed transaction and wait for receipt
-        tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
+        tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
         tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
 
         deployed_contract = deployer(address=tx_receipt.contractAddress)  # type: ignore
         return deployed_contract
 
     @classmethod
     def factory(cls, w3: Web3, class_name: str | None = None, **kwargs: Any) -> Type[Self]:
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/ERC4626Target4DeployerContract.py` & `agent0-0.20.0/src/agent0/hypertypes/types/ERC4626Target2DeployerContract.py`

 * *Files 25% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-"""A web3.py Contract class for the ERC4626Target4Deployer contract.
+"""A web3.py Contract class for the ERC4626Target2Deployer contract.
 
 DO NOT EDIT.  This file was generated by pypechain.  See documentation at
 https://github.com/delvtech/pypechain"""
 
 # contracts have PascalCase names
 # pylint: disable=invalid-name
 
@@ -26,34 +26,33 @@
 
 from __future__ import annotations
 
 from typing import Any, Type, cast
 
 from eth_account.signers.local import LocalAccount
 from eth_typing import ChecksumAddress, HexStr
-from hexbytes import HexBytes
 from typing_extensions import Self
 from web3 import Web3
 from web3.contract.contract import Contract, ContractConstructor, ContractFunction, ContractFunctions
 from web3.exceptions import FallbackNotFound
 from web3.types import ABI, BlockIdentifier, CallOverride, TxParams
 
 from .IHyperdriveTypes import Fees, PoolConfig
-from .utilities import dataclass_to_tuple, rename_returned_types
+from .utilities import dataclass_to_tuple, rename_returned_types, try_bytecode_hexbytes
 
 structs = {
     "Fees": Fees,
     "PoolConfig": PoolConfig,
 }
 
 
-class ERC4626Target4DeployerDeployContractFunction(ContractFunction):
-    """ContractFunction for the deploy method."""
+class ERC4626Target2DeployerDeployTargetContractFunction(ContractFunction):
+    """ContractFunction for the deployTarget method."""
 
-    def __call__(self, config: PoolConfig, arg2: bytes, salt: bytes) -> ERC4626Target4DeployerDeployContractFunction:  # type: ignore
+    def __call__(self, config: PoolConfig, arg2: bytes, salt: bytes) -> ERC4626Target2DeployerDeployTargetContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(config), dataclass_to_tuple(arg2), dataclass_to_tuple(salt))
         self.kwargs = clone.kwargs
         self.args = clone.args
         return self
 
     def call(
         self,
@@ -69,56 +68,57 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
-class ERC4626Target4DeployerContractFunctions(ContractFunctions):
-    """ContractFunctions for the ERC4626Target4Deployer contract."""
+class ERC4626Target2DeployerContractFunctions(ContractFunctions):
+    """ContractFunctions for the ERC4626Target2Deployer contract."""
 
-    deploy: ERC4626Target4DeployerDeployContractFunction
+    deployTarget: ERC4626Target2DeployerDeployTargetContractFunction
 
     def __init__(
         self,
         abi: ABI,
         w3: "Web3",
         address: ChecksumAddress | None = None,
         decode_tuples: bool | None = False,
     ) -> None:
         super().__init__(abi, w3, address, decode_tuples)
-        self.deploy = ERC4626Target4DeployerDeployContractFunction.factory(
-            "deploy",
+        self.deployTarget = ERC4626Target2DeployerDeployTargetContractFunction.factory(
+            "deployTarget",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
-            function_identifier="deploy",
+            function_identifier="deployTarget",
         )
 
 
-erc4626target4deployer_abi: ABI = cast(
+erc4626target2deployer_abi: ABI = cast(
     ABI,
     [
         {
             "type": "function",
-            "name": "deploy",
+            "name": "deployTarget",
             "inputs": [
                 {
                     "name": "_config",
                     "type": "tuple",
                     "internalType": "struct IHyperdrive.PoolConfig",
                     "components": [
                         {"name": "baseToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "vaultSharesToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "initialVaultSharePrice", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumShareReserves", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumTransactionAmount", "type": "uint256", "internalType": "uint256"},
+                        {"name": "circuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "positionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "checkpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "timeStretch", "type": "uint256", "internalType": "uint256"},
                         {"name": "governance", "type": "address", "internalType": "address"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {
@@ -139,35 +139,35 @@
             ],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "nonpayable",
         }
     ],
 )
 # pylint: disable=line-too-long
-erc4626target4deployer_bytecode = HexStr(
-    "0x608060405234801561001057600080fd5b50615292806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063195d4bfc14610030575b600080fd5b61004361003e366004610227565b61005f565b6040516001600160a01b03909116815260200160405180910390f35b604080513360208201529081018290526000906060016040516020818303038152906040528051906020012084604051610098906100cb565b6100a29190610351565b8190604051809103906000f59050801580156100c2573d6000803e3d6000fd5b50949350505050565b614df88061046583390190565b634e487b7160e01b600052604160045260246000fd5b6040516101c0810167ffffffffffffffff81118282101715610112576101126100d8565b60405290565b80356001600160a01b038116811461012f57600080fd5b919050565b60006080828403121561014657600080fd5b6040516080810181811067ffffffffffffffff82111715610169576101696100d8565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b600082601f8301126101ab57600080fd5b813567ffffffffffffffff808211156101c6576101c66100d8565b604051601f8301601f19908116603f011681019082821181831017156101ee576101ee6100d8565b8160405283815286602085880101111561020757600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600083850361026081121561023e57600080fd5b6102208082121561024e57600080fd5b6102566100ee565b915061026186610118565b825261026f60208701610118565b602083015261028060408701610118565b6040830152606086013560608301526080860135608083015260a086013560a083015260c086013560c083015260e086013560e08301526101008087013581840152506101208087013581840152506101406102dd818801610118565b908301526101606102ef878201610118565b90830152610180610301878201610118565b908301526101a061031488888301610134565b9083015290935084013567ffffffffffffffff81111561033357600080fd5b61033f8682870161019a565b92505061024084013590509250925092565b81516001600160a01b031681526102208101602083015161037d60208401826001600160a01b03169052565b50604083015161039860408401826001600160a01b03169052565b50606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e0830152610100808401518184015250610120808401518184015250610140808401516103fe828501826001600160a01b03169052565b5050610160838101516001600160a01b038116848301525050610180838101516001600160a01b0381168483015250506101a08381015180518483015260208101516101c085015260408101516101e0850152606081015161020085015250509291505056fe6102406040523480156200001257600080fd5b5060405162004df838038062004df88339810160408190526200003591620001e1565b600160005580516001600160a01b039081166080908152602080840151831660a0908152918401516101a0908152918401516101c05260c0808501516101e0526101008086015190915260e0808601519052610120808601519091529184018051519092528151015161014090815281516040908101516101609081529251606090810151610180908152918601518516610200528501516102205290840151600a80546001600160a01b03199081169286169290921790559184015160088054841691851691909117905590920151600980549093169116179055620002d4565b6040516101c081016001600160401b03811182821017156200014957634e487b7160e01b600052604160045260246000fd5b60405290565b80516001600160a01b03811681146200016757600080fd5b919050565b6000608082840312156200017f57600080fd5b604051608081016001600160401b0381118282101715620001b057634e487b7160e01b600052604160045260246000fd5b8060405250809150825181526020830151602082015260408301516040820152606083015160608201525092915050565b60006102208284031215620001f557600080fd5b620001ff62000117565b6200020a836200014f565b81526200021a602084016200014f565b60208201526200022d604084016200014f565b6040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101008084015181830152506101208084015181830152506101406200028c8185016200014f565b90820152610160620002a08482016200014f565b90820152610180620002b48482016200014f565b908201526101a0620002c9858583016200016c565b908201529392505050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516101e05161020051610220516149b16200044760003960005050600050506000818160fa01528181610336015281816104e30152610e2d015260008181610e070152818161125e01528181611b1f01528181611b82015281816121520152818161255e01528181612811015261284d01526000818161015b01528181610de1015281816110d8015261113c0152600061176e0152600081816118940152818161236601526123df015260008181610af3015281816111d60152818161186801526123b30152600061233201526000818161019d01528181610e53015281816110b6015261115d01526000818161017c0152818161057901528181610a2e015261206d0152600081816108d40152818161096101526109c601526000818161154a015281816115c401528181611656015261224b01526000818161151d015261157e01526149b16000f3fe6080604052600436106100295760003560e01c80634c2ac1d91461002e578063dbbe807014610054575b600080fd5b61004161003c3660046145fb565b61007c565b6040519081526020015b60405180910390f35b61006761006236600461465f565b610097565b6040805192835260208301919091520161004b565b600061008b86868686866100b4565b90505b95945050505050565b6000806100a68686868661049c565b915091505b94509492505050565b60006100be610704565b600554610100900460ff16156100e7576040516321081abf60e01b815260040160405180910390fd5b6100ef61072e565b6100f88261074f565b7f00000000000000000000000000000000000000000000000000000000000000008610156101395760405163211ddda360e11b815260040160405180910390fd5b60006101c1610146610788565b600154600160801b90046001600160801b03167f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000006107ae565b9050848110806101d057508381115b156101ee57604051633b61151160e11b815260040160405180910390fd5b6000806101fb89866107f4565b9150915061021261020a6108cd565b826004610903565b50600654600360f81b6000908152600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e954909161025e916001600160801b03909116906146cf565b6000808052600e6020527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54919250906102999083906146e2565b905060008060006102a986610d98565b90506102b481610ed2565b91506102c76102c288610f09565b610f37565b6001546001600160801b038082168352600354600f0b6020840152600160801b9091041660408201526102f981610ed2565b92508183101561031c5760405163184d952160e11b815260040160405180910390fd5b610332848361032b81876146cf565b9190610f5d565b98507f00000000000000000000000000000000000000000000000000000000000000008910156103755760405163211ddda360e11b815260040160405180910390fd5b508b6103818e8a610f7b565b10156103a05760405163c972651760e01b815260040160405180910390fd5b6103b860006103b260208c018c6146f5565b8a610f99565b60006103c386611041565b9050806103e357604051638bdf918d60e01b815260040160405180910390fd5b600084156103fa576103f58386610f7b565b6103fd565b60005b90508e600061040d828a8f61104e565b90508c61041d60208201826146f5565b6001600160a01b03167fa59daf574c5c8db34377de83bceea2aa1433cc506d656f5e8f46e5f4b5c58a868e848e61045a604087016020880161472c565b60408051948552602085019390935291830152151560608201526080810187905260a00160405180910390a250505050505050505050505061008e6001600055565b6000806104a7610704565b600554610100900460ff16156104d0576040516321081abf60e01b815260040160405180910390fd5b6104d861072e565b6104e18361074f565b7f00000000000000000000000000000000000000000000000000000000000000008610156105225760405163211ddda360e11b815260040160405180910390fd5b600061052c61107d565b90508481101561054f576040516342af972b60e01b815260040160405180910390fd5b60006105596108cd565b905060006105706105686108cd565b846004610903565b9050600061059e7f0000000000000000000000000000000000000000000000000000000000000000846146e2565b905060008060006105b08d8887611090565b92509250925080600b60008282546105c891906146e2565b90915550600090506105db84898d611210565b9050808d10156105fe5760405163c972651760e01b815260040160405180910390fd5b610608818c6107f4565b50506106168e848a88611238565b600061062360028761143f565b905060008f9050610647828e600001602081019061064191906146f5565b83610f99565b848a8e8461065860208301836146f5565b6001600160a01b03167fb354b32bd86ebd9f0968a338e5c2873d7f0d473aa7a668c2488e66038380258b8c8c61068f8b8888611474565b61069f604088016020890161472c565b6106b5898f8c6106af91906146cf565b9061149c565b6040805195865260208601949094529284019190915215156060830152608082015260a0810188905260c00160405180910390a350979c50929a50505050505050505050506100ab6001600055565b60026000540361072757604051633ee5aeb560e01b815260040160405180910390fd5b6002600055565b341561074d57604051631574f9f360e01b815260040160405180910390fd5b565b600061075e60208301836146f5565b6001600160a01b0316036107855760405163f0dd15fd60e01b815260040160405180910390fd5b50565b6001546003546000916107a9916001600160801b0390911690600f0b6114b1565b905090565b6000806107bd878787866114d0565b90506107e96107d182866301e133806114e7565b6107e383670de0b6b3a76400006146cf565b90610f7b565b979650505050505050565b60008080610808604085016020860161472c565b1561082d576108238561081e6040870187614749565b61150d565b9093509050610849565b5034610845856108406040870187614749565b611649565b8492505b61085161107d565b915080156108c457604051600090339083908381818185875af1925050503d806000811461089b576040519150601f19603f3d011682016040523d82523d6000602084013e6108a0565b606091505b50509050806108c2576040516312171d8360e31b815260040160405180910390fd5b505b505b9250929050565b60006108f97f0000000000000000000000000000000000000000000000000000000000000000426147a6565b6107a990426146cf565b600083815260076020526040812080546001600160801b031615158061092857504285115b1561093e57546001600160801b03169050610d91565b6000806109496108cd565b905080870361095a578591506109f4565b60006109867f0000000000000000000000000000000000000000000000000000000000000000896146e2565b90505b6000818152600760205260409020546001600160801b0316925081811480156109b0575082155b156109b9578692505b826000036109f2576109eb7f0000000000000000000000000000000000000000000000000000000000000000826146e2565b9050610989565b505b6109fd82611683565b83546001600160801b0319166001600160801b0391909116178355610a21866116ad565b5060009050600781610a537f00000000000000000000000000000000000000000000000000000000000000008b6146cf565b815260208101919091526040016000908120546001600160801b03169150610a7c60028a61143f565b6000818152600e60205260408120549192508a8a8315610bc25760019250600080610aab86898c866000611851565b9150915080600b6000828254610ac191906146e2565b90915550610add905086600084610ad781610f09565b88611920565b610ae781836146e2565b9150610b1786838a8d877f0000000000000000000000000000000000000000000000000000000000000000611a9a565b9150610b2b610b26838561149c565b611ade565b60058054600290610b4c9084906201000090046001600160701b03166147ba565b92506101000a8154816001600160701b0302191690836001600160701b03160217905550610b7982611683565b60058054601090610b9b908490600160801b90046001600160801b03166147da565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050505b6000610bcf60018461143f565b6000818152600e60205260409020549091508015610cde5760019450600080610bfc838b8e886001611851565b9150915080600b6000828254610c1291906146e2565b90915550610c2e905083600084610c2881610f09565b8a611b08565b610c3881836146cf565b9150610c47610b26838761149c565b60058054600290610c689084906201000090046001600160701b03166147ba565b92506101000a8154816001600160701b0302191690836001600160701b03160217905550610c9582611683565b60058054601090610cb7908490600160801b90046001600160801b03166147da565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050505b8415610d1657610d0a610cf087610f09565b610cf983610f09565b610d0391906147fa565b6000611cf9565b610d148e8e611da7565b505b6000610d218f611f32565b5090508f7fff888cf98d2696e95c8c39aa98c9ad55a5378008f7a56614c9353b7137a57ab78c868a8686604051610d7a959493929190948552602085019390935260408401919091526060830152608082015260a00190565b60405180910390a250989a50505050505050505050505b9392505050565b610da0614536565b60408051610180810182526001546001600160801b038082168352600354600f0b6020840152600160801b91829004811693830193909352606082018590527f000000000000000000000000000000000000000000000000000000000000000060808301527f000000000000000000000000000000000000000000000000000000000000000060a08301527f000000000000000000000000000000000000000000000000000000000000000060c08301527f000000000000000000000000000000000000000000000000000000000000000060e08301526002540482166101008201526004549091610120830191610e989116612022565b81526003546001600160801b03600160801b9182900481166020840152600454604090930192610eca92900416612022565b905292915050565b6000806000610ee084612098565b9150915080610f0257604051635516328b60e11b815260040160405180910390fd5b5092915050565b60006001600160ff1b03821115610f335760405163396ea70160e11b815260040160405180910390fd5b5090565b610f4081612125565b61078557604051635044b7f560e01b815260040160405180910390fd5b6000826000190484118302158202610f7457600080fd5b5091020490565b6000610f9083670de0b6b3a764000084610f5d565b90505b92915050565b6000838152600d602090815260408083206001600160a01b038616845290915281208054839290610fcb9084906146e2565b90915550506000838152600e602052604081208054839290610fee9084906146e2565b909155505060408051848152602081018390526001600160a01b0384169160009133917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a4505050565b6000610f93826004611da7565b6000611060604083016020840161472c565b1561106c575082610d91565b611076848461149c565b9050610d91565b60006107a9670de0b6b3a7640000612232565b60008060006110fc6110a0610788565b600154600160801b90046001600160801b0316887f0000000000000000000000000000000000000000000000000000000000000000897f00000000000000000000000000000000000000000000000000000000000000006122be565b91508561110983876122df565b1115611117576111176122f4565b6000806000611181611127610788565b600154600160801b90046001600160801b03167f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000006114d0565b905061119789670de0b6b3a7640000838b61230d565b509194509092506111aa905082846146cf565b6111b490866146cf565b9450611200886111fa8b6111c8868a6146cf565b8b6111d38e8261241b565b8e7f0000000000000000000000000000000000000000000000000000000000000000612431565b906122df565b9550909250505093509350939050565b6000611222604083016020840161472c565b1561122e575082610d91565b6110768484610f7b565b6001546001600160801b031683811015611254576112546122f4565b60035490849003907f00000000000000000000000000000000000000000000000000000000000000009061128c908390600f0b6114b1565b101561129a5761129a6122f4565b6003546112e9906112e490600160801b90046001600160801b03166112c7670de0b6b3a76400008661481a565b600454600160801b90046001600160801b03169190896001612456565b611683565b600480546001600160801b03928316600160801b02921691909117905561130f81611683565b600180546001600160801b0319166001600160801b039290921691909117905561133885611683565b6001805460109061135a908490600160801b90046001600160801b03166147da565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555061138785611683565b600380546010906113a9908490600160801b90046001600160801b03166147da565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555060006113d883612513565b90506113f6816113e788610f09565b6113f190846147fa565b611cf9565b6113ff84612557565b61140b5761140b6122f4565b600061141685611041565b90508061143657604051638bdf918d60e01b815260040160405180910390fd5b50505050505050565b60006001600160f81b038211156114695760405163b7d0949760e01b815260040160405180910390fd5b5060f89190911b1790565b6000611486604083016020840161472c565b15611495576110768484610f7b565b5082610d91565b6000610f908383670de0b6b3a7640000610f5d565b6000806114be84846125b7565b909250905080610f0257610f026122f4565b600061008e826114e1858888610f5d565b906125f3565b60008260001904841183021582026114fe57600080fd5b50910281810615159190040190565b6000806115456001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016333088612668565b6115a57f00000000000000000000000000000000000000000000000000000000000000006115748760016146e2565b6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001691906126d5565b604051636e553f6560e01b8152600481018690523060248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690636e553f65906044016020604051808303816000875af1158015611615573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906116399190614831565b925060009150505b935093915050565b61167e6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016333086612668565b505050565b60006001600160801b03821115610f3357604051630f0af95160e11b815260040160405180910390fd5b60055460009081906116d0908490600160801b90046001600160801b031661149c565b6005546201000090046001600160701b0316925090508181111561184c5760006116fa83836146cf565b90506117096112e48286612765565b6005805460109061172b908490600160801b90046001600160801b031661484a565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555060006117648583610f7b90919063ffffffff16565b90506000611792827f000000000000000000000000000000000000000000000000000000000000000061149c565b905080600b60008282546117a691906146e2565b909155506117b6905081836146cf565b91506117c182611683565b600180546000906117dc9084906001600160801b03166147da565b92506101000a8154816001600160801b0302191690836001600160801b031602179055506118098261277a565b6003805460009061181e908490600f0b61486a565b92506101000a8154816001600160801b030219169083600f0b6001600160801b031602179055508493505050505b915091565b60008061185e8785610f7b565b9150600061188c837f000000000000000000000000000000000000000000000000000000000000000061149c565b90506118b8817f000000000000000000000000000000000000000000000000000000000000000061149c565b915083156118db576118ca82826146cf565b6118d490846146cf565b92506118f2565b6118e582826146cf565b6118ef90846146e2565b92505b8686101561191557611905838789610f5d565b9250611912828789610f5d565b91505b509550959350505050565b600354600160801b90046001600160801b03166119696112e48261194c670de0b6b3a76400008661481a565b600454600160801b90046001600160801b031691908a6000612456565b600480546001600160801b03928316600160801b02921691909117905561198f86611683565b611999908261484a565b600380546001600160801b03928316600160801b0292169190911790556119bf84611683565b600180546000906119da9084906001600160801b03166147da565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550611a07836127a4565b60038054600090611a1c908490600f0b61486a565b92506101000a8154816001600160801b030219169083600f0b6001600160801b03160217905550611a4c85611683565b60018054601090611a6e908490600160801b90046001600160801b031661484a565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550505050505050565b600080611aac846107e38a888a610f5d565b9050611ab9888486610f5d565b611ac390826146e2565b905086811115611ad35786810391505b509695505050505050565b60006001600160701b03821115610f335760405163086b151760e11b815260040160405180910390fd5b6001546001600160801b031683811080611b4a57507f0000000000000000000000000000000000000000000000000000000000000000611b4885836146cf565b105b15611b5757611b576122f4565b6003549084900390600f0b611b6c84826147fa565b905083611b7886610f09565b138015611bad57507f0000000000000000000000000000000000000000000000000000000000000000611bab83836114b1565b105b15611bba57611bba6122f4565b600254600160801b90046001600160801b0316611bfc6112e482611be6670de0b6b3a76400008861481a565b6004546001600160801b031691908c6000612456565b600480546001600160801b0319166001600160801b0392909216919091179055611c2688826146cf565b9050611c3181611683565b600280546001600160801b03928316600160801b029216919091179055611c5783611683565b600180546001600160801b0319166001600160801b0392909216919091179055611c80826127a4565b600380546001600160801b0319166001600160801b0392909216919091179055611ca987611683565b60018054601090611ccb908490600160801b90046001600160801b03166147da565b92506101000a8154816001600160801b0302191690836001600160801b031602179055505050505050505050565b6000611d22611d0884836127e0565b611d138460006127e0565b611d1d91906147fa565b6127a4565b9050600081600f0b1315611d775760028054829190600090611d4e9084906001600160801b03166147da565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550505050565b600081600f0b121561167e57611d8c81614897565b60028054600090611d4e9084906001600160801b031661484a565b600654600360f81b6000908152600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e95490918291611df2916001600160801b0316906146cf565b905080600003611e06576001915050610f93565b6000611e11856127ef565b905080600003611e2657600192505050610f93565b600080611e34838589612891565b9150915080611e4a576000945050505050610f93565b600080611e578489612997565b91509150611e75611e6782610f09565b611e70906148bd565b612125565b925082611e8b5760009650505050505050610f93565b611e9482611683565b60068054600090611eaf9084906001600160801b03166147da565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550611edc81611683565b60068054601090611efe908490600160801b90046001600160801b03166147da565b92506101000a8154816001600160801b0302191690836001600160801b031602179055506001965050505050505092915050565b600080600080611f49611f4486610d98565b612098565b9150915080611f5f575060009485945092505050565b6000808611611f6f576000611f79565b611f79838761149c565b600654600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e95460008080527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54939450926001600160801b0390921691611fe491906146e2565b611fee91906146cf565b9050806000036120075750600096879650945050505050565b60006120138383610f7b565b98600198509650505050505050565b600080670de0b6b3a76400006120366108cd565b612040919061481a565b905080831161205057600061205a565b61205a81846146cf565b9150610d91612091670de0b6b3a76400007f000000000000000000000000000000000000000000000000000000000000000061481a565b8390610f7b565b60008060008060006120a986612a87565b91509150806120c057506000958695509350505050565b6120cd8660a00151610f09565b6120d687612da7565b836120e48960000151610f09565b6120ee91906148d9565b6120f891906148d9565b61210291906147fa565b92505050600081121561211b5750600093849350915050565b9360019350915050565b6001546003546000916001600160801b0380821692600f0b91600160801b900416838080806121778787877f00000000000000000000000000000000000000000000000000000000000000008d612e0b565b9350935093509350806121935750600098975050505050505050565b8684146121c4576121a384611683565b600180546001600160801b0319166001600160801b03929092169190911790555b8583146121f5576121d4836127a4565b600380546001600160801b0319166001600160801b03929092169190911790555b8482146122235761220582611683565b600180546001600160801b03928316600160801b0292169190911790555b50600198975050505050505050565b6040516303d1689d60e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906307a2d13a90602401602060405180830381865afa15801561229a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f939190614831565b60006107e98787876122d888670de0b6b3a76400006146cf565b8787612f23565b6000610f908383670de0b6b3a76400006114e7565b60405163bb55fd2760e01b815260040160405180910390fd5b600080808061235e87866123578b6111fa6123308c670de0b6b3a76400006146cf565b7f0000000000000000000000000000000000000000000000000000000000000000906122df565b91906114e7565b935061238a847f000000000000000000000000000000000000000000000000000000000000000061149c565b915060006123ab6123a389670de0b6b3a76400006146cf565b8a90886114e7565b90506123d7817f00000000000000000000000000000000000000000000000000000000000000006122df565b9350612403847f000000000000000000000000000000000000000000000000000000000000000061149c565b61240d90846146e2565b915050945094509450949050565b600081831161242a5781610f90565b5090919050565b600080612449846124438a888a6114e7565b90612765565b9050611ab98884866114e7565b60008260000361246757508461008e565b81156124d95761249861247a84876146e2565b612484858761149c565b61248e888a61149c565b6107e391906146e2565b905060006124a68588612f46565b905060006124b4868961241b565b9050818310156124c6578192506124d2565b808311156124d2578092505b505061008e565b8285036124e85750600061008e565b61008b6124f584876146cf565b6124ff85876122df565b612509888a61149c565b6107e391906146cf565b600061253b600e600061252760028661143f565b815260200190815260200160002054610f09565b61254d600e600061252760018761143f565b610f9391906147fa565b60006125837f0000000000000000000000000000000000000000000000000000000000000000836122df565b60025461259991906001600160801b03166146e2565b6001546125af906001600160801b03168461149c565b101592915050565b6000806000836125c686610f09565b6125d091906147fa565b905060008112156125e85760008092509250506108c6565b946001945092505050565b60008160000361260c5750670de0b6b3a7640000610f93565b8260000361261c57506000610f93565b600061262783610f09565b9050600061263c61263786610f09565b612f55565b9050818102612653670de0b6b3a764000082614901565b905061265e8161317b565b9695505050505050565b6040516001600160a01b0384811660248301528381166044830152606482018390526126cf9186918216906323b872dd906084015b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050613310565b50505050565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b1790526127268482613378565b6126cf576040516001600160a01b0384811660248301526000604483015261275b91869182169063095ea7b39060640161269d565b6126cf8482613310565b6000610f9083670de0b6b3a7640000846114e7565b600060016001607f1b03821115610f335760405163a5353be560e01b815260040160405180910390fd5b600060016001607f1b03198212806127c2575060016001607f1b0382135b15610f335760405163a5353be560e01b815260040160405180910390fd5b600081831361242a5781610f90565b600254600090819061280a906001600160801b031684612765565b90506128367f0000000000000000000000000000000000000000000000000000000000000000826146e2565b6001546001600160801b0316111561288b576001547f0000000000000000000000000000000000000000000000000000000000000000906128819083906001600160801b03166146cf565b610d9191906146cf565b50919050565b612899614597565b6000806128a584610d98565b905060006128b282612098565b93509050826128c75750600091506116419050565b60006128ee6128e984610160015185610140015161149c90919063ffffffff16565b610f09565b61290e6128e98561012001518661010001516122df90919063ffffffff16565b61291891906147fa565b604080516101208101825285815260208082019590955260008052600e85527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54818301526060810199909952608089019990995260a088015250815160c087015281015160e086015290940151610100840152509092600192509050565b6000806000806129af8660c001518760e001516125b7565b91509150806129c6576000809350935050506108c6565b60006129d2878461341b565b925090508115806129e1575080155b156129f557600080945094505050506108c6565b6000612a01888361352a565b905080600003612a1b5760008095509550505050506108c6565b87606001518111612a3257945092506108c6915050565b5060608701516000612a468986858b6135fb565b905080600003612a61576000809650965050505050506108c6565b828110612a79576000809650965050505050506108c6565b909890975095505050505050565b6000806000612aac6128e985610160015186610140015161149c90919063ffffffff16565b612acc6128e98661012001518761010001516122df90919063ffffffff16565b612ad691906147fa565b9050600080612aed866000015187602001516125b7565b9150915080612b0457506000958695509350505050565b6000831315612c455760008390506000612b52886000015189602001518a604001518b60a001518c60e00151670de0b6b3a7640000612b4391906146cf565b8d606001518e60800151613b12565b9350905082612b6b575060009788975095505050505050565b818110612c09576000612ba5858a60400151858c60e00151670de0b6b3a7640000612b9691906146cf565b8d606001518e60800151613c1e565b9450905083158015612bba57508860c0015183105b15612bd15750600098600198509650505050505050565b83612be757506000988998509650505050505050565b612bf081610f09565b612bf9906148bd565b9960019950975050505050505050565b6000886020015112612c3157612c288860a00151856128e991906146cf565b612013906148bd565b60a08801518851612c28916128e9916146cf565b6000831215612d98576000612c59846148bd565b90506000612c8d8489604001518a60e00151670de0b6b3a7640000612c7e91906146cf565b8b606001518c60800151613ce1565b9350905082612ca6575060009788975095505050505050565b818110612d2b576000612ce0858a60400151858c60e00151670de0b6b3a7640000612cd191906146cf565b8d606001518e60800151613d8d565b9450905083158015612cf557508860c0015183105b15612d0c5750600098600198509650505050505050565b83612d2257506000988998509650505050505050565b612bf981610f09565b6000612d5d858a604001518b60e00151670de0b6b3a7640000612d4e91906146cf565b8c606001518d60800151613e64565b9450905083612d7757506000988998509650505050505050565b612bf9612d8e8a6060015184866107e391906146cf565b6128e990836146e2565b50600095600195509350505050565b6000612dda6128e9836101200151670de0b6b3a7640000612dc891906146cf565b606085015161010086015191906114e7565b61254d6128e9846101600151670de0b6b3a7640000612df991906146cf565b60608601516101408701519190610f5d565b60008060008084600003612e2a57508792508691508590506001612f17565b600085612e368b610f09565b612e4091906148d9565b9050612e4b87610f09565b811215612e6657600080600080945094509450945050612f17565b80945060008912612e8657612e7f6128e9868b8d610f5d565b9350612ea9565b612e9d6128e9612e958b6148bd565b87908d6114e7565b612ea6906148bd565b93505b600080612eb68c8c6125b7565b9150915080612ed5576000806000809650965096509650505050612f17565b6000612ee188886125b7565b9250905081612f0157600080600080975097509750975050505050612f17565b612f0c8b8285610f5d565b955060019450505050505b95509550955095915050565b600080612f34888888888888613c1e565b909250905080611ad357611ad36122f4565b600081831161288b5782610f90565b6000808213612f775760405163e61b497560e01b815260040160405180910390fd5b506001600160801b03811160071b81811c67ffffffffffffffff1060061b1781811c63ffffffff1060051b1781811c61ffff1060041b1781811c60ff10600390811b90911782811c600f1060021b1782811c909110600190811b90911782811c90911017609f8181036060019290921b91605f19820190612ffa9084901c610f09565b6c465772b2bbbb5f824b15207a3081018102606090811d6d0388eaa27412d5aca026815d636e018202811d6d0df99ac502031bf953eff472fdcc018202811d6d13cdffb29d51d99322bdff5f2211018202811d6d0a0f742023def783a307a986912e018202811d6d01920d8043ca89b5239253284e42018202811d6c0b7a86d7375468fac667a0a527016c29508e458543d8aa4df2abee7883018302821d6d0139601a2efabe717e604cbb4894018302821d6d02247f7a7b6594320649aa03aba1018302821d6c8c3f38e95a6b1ff2ab1c3b343619018302821d6d02384773bdf1ac5676facced60901901830290911d6cb9a025d814b29c212b8b1a07cd1901909102780a09507084cc699bb0e71ea869ffffffffffffffffffffffff190105711340daa0d5f769dba1915cef59f0815a5506027d0267a36c0c95b3975ab3ee5b203a7614a3f75373f047d803ae7b6687f2b391909102017d57115e47018c7177eebf7cd370a3356a1b7863008a5ae8028c72b88642840160ae1d92915050565b6000680248ce36a70cb26b3e19821361319657506000919050565b680755bf798b4a1bf1e582126131bf576040516373a2d6b160e01b815260040160405180910390fd5b6503782dace9d9604e83901b059150600060606bb17217f7d1cf79abc9e3b39884821b056001605f1b01901d6bb17217f7d1cf79abc9e3b3988102909303926c240c330e9fb2d9cbaf0fd5aafb1984018402606090811d6d0277594991cfc85f6e2461837cd9018502811d6d1a521255e34f6a5061b25ef1c9c319018502811d6db1bbb201f443cf962f1a1d3db4a5018502811d6e02c72388d9f74f51a9331fed693f1419018502811d6e05180bb14799ab47a8a8cb2a527d57016d02d16720577bd19bf614176fe9ea6c10fe68e7fd37d0007b713f765087018702831d9081019087016d01d3967ed30fc4f89c02bab570811901810290921d6e0587f503bb6ea29d25fcb7401964500186026d360d7aeea093263ecc6e0ecb291760621b01818105955092935090919061265e74029d9dc38563c32e5c2f6dc192ee70ef65f9978af3860260c38690031c610f09565b60006133256001600160a01b03841683613f13565b9050805160001415801561334a575080806020019051810190613348919061492f565b155b1561167e57604051635274afe760e01b81526001600160a01b03841660048201526024015b60405180910390fd5b6000806000846001600160a01b031684604051613395919061494c565b6000604051808303816000865af19150503d80600081146133d2576040519150601f19603f3d011682016040523d82523d6000602084013e6133d7565b606091505b5091509150818015613401575080511580613401575080806020019051810190613401919061492f565b801561008e5750505050506001600160a01b03163b151590565b60008060008460a0015112613438575050608082015160016108c6565b60008460a00151613448906148bd565b9050600061348485876101000151886000015160e00151670de0b6b3a764000061347291906146cf565b89516060810151608090910151613ce1565b93509050821580613493575080155b156134a6576000809350935050506108c6565b60006134b28383612765565b9050670de0b6b3a764000081116134ee5780670de0b6b3a76400000394506134e78760c001518661149c90919063ffffffff16565b94506134fd565b600080945094505050506108c6565b866080015185111561351c5786608001516001945094505050506108c6565b506001925050509250929050565b6000806135608460c001518560e00151866101000151876000015160a0015161355288610f09565b61355b906148bd565b612e0b565b87516040810192909252602082019290925291909152905080613587576000915050610f93565b60006135968560000151612098565b92509050816135aa57600092505050610f93565b846020015181106135c057600092505050610f93565b6000856060015186604001516135d691906146e2565b90506135f182876020015183610f5d9092919063ffffffff16565b61265e90826146cf565b6000808560600151866040015161361291906146e2565b6020870151606088015191925060009161362c9184610f5d565b90508660a00151600003613643579150613b0a9050565b6000808089600488101561365657600497505b60005b888110156139b25761366b868b612f46565b955060006136948360c001518460e00151856101000151866000015160a001516135528c610f09565b865160408101929092526020820192909252919091529050806136c257600098505050505050505050613b0a565b60006136d18e60000151612098565b92509050816136ec5760009950505050505050505050613b0a565b6136f784828b613f21565b1561370d57879950505050505050505050613b0a565b60008460a00151131561387657835180516020820151604083015160a084015160e0909401516000946137619493929161374f90670de0b6b3a76400006146cf565b8a516060810151608090910151613b12565b935090508261377d5760009a5050505050505050505050613b0a565b808560a00151106138745761379185613f86565b9099509250826137ae5760009a5050505050505050505050613b0a565b6137d38560c001518660e00151876101000151886000015160a001516135528e610f09565b885160408101929092526020820192909252919091529250826138035760009a5050505050505050505050613b0a565b845180516020820151604083015160a084015160e090940151613833949061374f90670de0b6b3a76400006146cf565b935090508261384f5760009a5050505050505050505050613b0a565b8e60a00151811161386c57889a5050505050505050505050613b0a565b505050613659565b505b6000613887858f8760a0015161405c565b935090508215806138a05750670de0b6b3a76400008110155b156138b85760009a5050505050505050505050613b0a565b80670de0b6b3a764000003905060006138e56128e9876040015188602001516122df90919063ffffffff16565b6138f26128e9858e61149c565b6138fc91906147fa565b905088158061391a575061390f896143b7565b613918826143b7565b125b15613929578098508997508296505b6000811315613951576139408b6107e38385610f7b565b61394a908b6146e2565b99506139a3565b600081121561399a57600061396b8c6107e38581866148bd565b90508a81101561397f57808b039a50613994565b60009c50505050505050505050505050613b0a565b506139a3565b505050506139b2565b84600101945050505050613659565b5060006139da8260c001518360e00151846101000151856000015160a001516135528b610f09565b85516040810192909252602082019290925291909152905080613a07576000975050505050505050613b0a565b6000613a168360000151610ed2565b90506000613a386128e9856040015186602001516122df90919063ffffffff16565b613a456128e9848c61149c565b613a4f91906147fa565b9050613a5a876143b7565b613a63826143b7565b1215613a70578795508194505b613a97613a8b655af3107a4000670de0b6b3a76400006146cf565b6020860151908b6114e7565b6040850151613aa7908790610f7b565b1080613ae75750613ad5613ac9655af3107a4000670de0b6b3a76400006146e2565b6020860151908b610f5d565b6040850151613ae5908790612765565b115b15613afe5760009950505050505050505050613b0a565b50939750505050505050505b949350505050565b6000806000881215613b3457613b27886148bd565b613b3190876146e2565b95505b600080613b418b8b6125b7565b9150915080613b5857600080935093505050613c12565b6000613b67838b8a8a8a6143cf565b90506000613b84613b7c8a6114e18a8e6122df565b8990896114e7565b905080821015613b9e576000809550955050505050613c12565b808203670de0b6b3a76400008110613bd357613bcc613bc5670de0b6b3a76400008c610f7b565b82906125f3565b9050613beb565b613be8613bc5670de0b6b3a76400008c612765565b90505b8b811015613c0457600080965096505050505050613c12565b8b9003955060019450505050505b97509795505050505050565b6000806000613c3089898888886143fe565b9050613c40866114e1898b6146e2565b975087811015613c57576000809250925050613cd6565b878103613c658186886114e7565b9050670de0b6b3a76400008110613c9257613c8b613bc5670de0b6b3a764000089612765565b9050613caa565b613ca7613bc5670de0b6b3a764000089610f7b565b90505b613cb48186612765565b9050808a1015613ccc57600080935093505050613cd6565b8903925060019150505b965096945050505050565b6000806000613cf388888888886143fe565b90506000613d1e670de0b6b3a7640000613d0d8888610f7b565b613d1791906146e2565b8390612765565b9050670de0b6b3a76400008110613d4b57613d44613bc5670de0b6b3a764000089612765565b9050613d63565b613d60613bc5670de0b6b3a764000089610f7b565b90505b80881015613d7957600080935093505050613d83565b8703925060019150505b9550959350505050565b6000806000613d9f89898888886143fe565b905086881015613db6576000809250925050613cd6565b9686900396613dc588876125f3565b975087811015613ddc576000809250925050613cd6565b878103613dea8186886114e7565b9050670de0b6b3a76400008110613e1757613e10613bc5670de0b6b3a764000089612765565b9050613e2f565b613e2c613bc5670de0b6b3a764000089610f7b565b90505b613e398186612765565b905089811015613e5157600080935093505050613cd6565b9890980398600198509650505050505050565b6000806000613e7688888888886143cf565b90506000613e9a670de0b6b3a7640000613e908888612765565b61209191906146e2565b9050670de0b6b3a76400008110613ec757613ec0613bc5670de0b6b3a764000089610f7b565b9050613edf565b613edc613bc5670de0b6b3a764000089612765565b90505b613ee98186610f7b565b905088811015613f0157600080935093505050613d83565b97909703976001975095505050505050565b6060610f9083836000614423565b6020830151600090613f339084612765565b6040850151613f43908490610f7b565b10158015613b0a57506020840151613f6c908461032b633b9aca00670de0b6b3a76400006146e2565b6040850151613f7c908490612765565b1115949350505050565b60008060008360e0015113613fa057506000928392509050565b6000613faf8460000151612da7565b90506000613fdb856040015186606001518760400151613fcf91906146e2565b602088015191906114e7565b9050600082126140025780821015613ff557819003614018565b5060009485945092505050565b61400b826148bd565b61401590826146e2565b90505b60e085015160c086015161402d9183906114e7565b9050808560c001511015614048575060009485945092505050565b808560c00151036001935093505050915091565b6000806000808412614080578551604001516140799085906146e2565b90506140bb565b600061408b856148bd565b8751604001519091508110156140ab5786516040015181900391506140b9565b600080935093505050611641565b505b8551805160209091015160009182916140d491906125b7565b91509150806140ec5760008094509450505050611641565b875160e0810151604090910151600091614121916141159161410e91906125f3565b8a9061149c565b6101008b015190612765565b895160e081015160809091015161414c91614140916114e1908861149c565b8b516060015190612765565b61415691906146e2565b9050600061418e61418261417b8c6000015160e00151886125f390919063ffffffff16565b8b906122df565b6101008c015190610f7b565b9050808210156141a957600080965096505050505050611641565b808203915060006141eb858c60000151604001518d6000015160e00151670de0b6b3a76400006141d991906146cf565b8e5160608101516080909101516143fe565b905060006142158c6000015160e00151670de0b6b3a764000061420e91906146cf565b88906125f3565b905080821015614232576000809850985050505050505050611641565b8b5160808101516060909101519183039161424e9183916114e7565b9050670de0b6b3a76400008110614292578b5160e0015161428b90613bc59061427f90670de0b6b3a76400006146cf565b8e5160e0015190612765565b90506142c1565b8b5160e001516142be90613bc5906142b290670de0b6b3a76400006146cf565b8e5160e0015190610f7b565b90505b8b51606001516142d490859083906114e7565b935083670de0b6b3a764000011156142f85783670de0b6b3a764000003935061430c565b600060019850985050505050505050611641565b60008c60e001511261436f5760c08c015160e08d015161432b91612765565b9250670de0b6b3a7640000831115614350576000809850985050505050505050611641565b670de0b6b3a76400009290920391614368848461149c565b93506143a4565b6143a16143888d60c001518e60e001516107e3906148bd565b61439a90670de0b6b3a76400006146e2565b859061149c565b93505b50919a60019a5098505050505050505050565b60008082126143c65781610f93565b610f93826148bd565b60006143db85856125f3565b6143f46143ec866114e1868b61149c565b859085610f5d565b61008b91906146e2565b600061440a85856125f3565b6143f461441b866114e1868b6122df565b8590856114e7565b6060814710156144485760405163cd78605960e01b815230600482015260240161336f565b600080856001600160a01b03168486604051614464919061494c565b60006040518083038185875af1925050503d80600081146144a1576040519150601f19603f3d011682016040523d82523d6000602084013e6144a6565b606091505b509150915061265e8683836060826144c6576144c18261450d565b610d91565b81511580156144dd57506001600160a01b0384163b155b1561450657604051639996b31560e01b81526001600160a01b038516600482015260240161336f565b5080610d91565b80511561451d5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b6040518061018001604052806000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b6040518061012001604052806145ab614536565b815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b60006060828403121561288b57600080fd5b600080600080600060a0868803121561461357600080fd5b85359450602086013593506040860135925060608601359150608086013567ffffffffffffffff81111561464657600080fd5b614652888289016145e9565b9150509295509295909350565b6000806000806080858703121561467557600080fd5b843593506020850135925060408501359150606085013567ffffffffffffffff8111156146a157600080fd5b6146ad878288016145e9565b91505092959194509250565b634e487b7160e01b600052601160045260246000fd5b81810381811115610f9357610f936146b9565b80820180821115610f9357610f936146b9565b60006020828403121561470757600080fd5b81356001600160a01b0381168114610d9157600080fd5b801515811461078557600080fd5b60006020828403121561473e57600080fd5b8135610d918161471e565b6000808335601e1984360301811261476057600080fd5b83018035915067ffffffffffffffff82111561477b57600080fd5b6020019150368190038213156108c657600080fd5b634e487b7160e01b600052601260045260246000fd5b6000826147b5576147b5614790565b500690565b6001600160701b03818116838216019080821115610f0257610f026146b9565b6001600160801b03818116838216019080821115610f0257610f026146b9565b8181036000831280158383131683831282161715610f0257610f026146b9565b8082028115828204841417610f9357610f936146b9565b60006020828403121561484357600080fd5b5051919050565b6001600160801b03828116828216039080821115610f0257610f026146b9565b600f81810b9083900b0160016001607f1b03811360016001607f1b031982121715610f9357610f936146b9565b600081600f0b60016001607f1b031981036148b4576148b46146b9565b60000392915050565b6000600160ff1b82016148d2576148d26146b9565b5060000390565b80820182811260008312801582168215821617156148f9576148f96146b9565b505092915050565b60008261491057614910614790565b600160ff1b82146000198414161561492a5761492a6146b9565b500590565b60006020828403121561494157600080fd5b8151610d918161471e565b6000825160005b8181101561496d5760208186018101518583015201614953565b50600092019182525091905056fea2646970667358221220e918abdff7b33b986a87e7fd1fe4e314af160c4bde068dcceef282f4bea50cbe64736f6c63430008140033a2646970667358221220bccba64dcf9c64cb5c64a76b5af6370ae0683d622e290cb65c951503f59e4e0964736f6c63430008140033"
+erc4626target2deployer_bytecode = HexStr(
+    "0x608060405234801561001057600080fd5b506144c0806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063847c08a514610030575b600080fd5b61004361003e366004610227565b61005f565b6040516001600160a01b03909116815260200160405180910390f35b604080513360208201529081018290526000906060016040516020818303038152906040528051906020012084604051610098906100cb565b6100a2919061035d565b8190604051809103906000f59050801580156100c2573d6000803e3d6000fd5b50949350505050565b61400e8061047d83390190565b634e487b7160e01b600052604160045260246000fd5b6040516101e0810167ffffffffffffffff81118282101715610112576101126100d8565b60405290565b80356001600160a01b038116811461012f57600080fd5b919050565b60006080828403121561014657600080fd5b6040516080810181811067ffffffffffffffff82111715610169576101696100d8565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b600082601f8301126101ab57600080fd5b813567ffffffffffffffff808211156101c6576101c66100d8565b604051601f8301601f19908116603f011681019082821181831017156101ee576101ee6100d8565b8160405283815286602085880101111561020757600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600083850361028081121561023e57600080fd5b6102408082121561024e57600080fd5b6102566100ee565b915061026186610118565b825261026f60208701610118565b602083015261028060408701610118565b6040830152606086013560608301526080860135608083015260a086013560a083015260c086013560c083015260e086013560e08301526101008087013581840152506101208087013581840152506101408087013581840152506101606102e9818801610118565b908301526101806102fb878201610118565b908301526101a061030d878201610118565b908301526101c061032088888301610134565b9083015290935084013567ffffffffffffffff81111561033f57600080fd5b61034b8682870161019a565b92505061026084013590509250925092565b81516001600160a01b031681526102408101602083015161038960208401826001600160a01b03169052565b5060408301516103a460408401826001600160a01b03169052565b50606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151818401525061014080840151818401525061016080840151610416828501826001600160a01b03169052565b5050610180838101516001600160a01b0381168483015250506101a0838101516001600160a01b0381168483015250506101c08381015180518483015260208101516101e08501526040810151610200850152606081015161022085015250509291505056fe6102606040523480156200001257600080fd5b506040516200400e3803806200400e8339810160408190526200003591620001ec565b600160005580516001600160a01b039081166080908152602080840151831660a0908152918401516101a0908152918401516101c090815260c0808601516101e05260e08087015161020052610120808801519092526101008088015190915261014080880151909152918601805151909152805190920151905280516040908101516101609081529151606090810151610180908152918601518516610220528501516102405290840151600a80546001600160a01b031990811692861692909217905590840151600880548316918516919091179055920151600980549093169116179055620002eb565b6040516101e081016001600160401b03811182821017156200015457634e487b7160e01b600052604160045260246000fd5b60405290565b80516001600160a01b03811681146200017257600080fd5b919050565b6000608082840312156200018a57600080fd5b604051608081016001600160401b0381118282101715620001bb57634e487b7160e01b600052604160045260246000fd5b8060405250809150825181526020830151602082015260408301516040820152606083015160608201525092915050565b600061024082840312156200020057600080fd5b6200020a62000122565b62000215836200015a565b815262000225602084016200015a565b602082015262000238604084016200015a565b6040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e0820152610100808401518183015250610120808401518183015250610140808401518183015250610160620002a38185016200015a565b90820152610180620002b78482016200015a565b908201526101a0620002cb8482016200015a565b908201526101c0620002e08585830162000177565b908201529392505050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516101e051610200516102205161024051613b766200049860003960005050600050506000505060008181610100015281816103110152612cdb01526000818161137301528181611bbb01528181611c1e01528181612402015281816128c2015281816128fe01528181612af40152612cb501526000818161076301528181610cc901528181610dd5015281816112440152612c8f015260006117da015260008181611900015281816122e10152818161258301526125fc0152600081816109e601528181610d28015281816112e6015281816118d401526125d0015260008181610d070152818161229d015261254f01526000818161078401528181610ca701528181610df6015281816112220152612d010152600081816101dc015281816103a70152818161091e01526133ca0152600081816106b5015281816107b60152818161083d0152818161089e01526108d601526000818161153e015281816115b80152818161164a015261248101526000818161151101526115720152613b766000f3fe6080604052600436106100295760003560e01c8063cba2e58d1461002e578063dbbe80701461005a575b600080fd5b61004161003c366004613692565b61006d565b6040805192835260208301919091520160405180910390f35b610041610068366004613692565b61008a565b60008061007c86868686610099565b915091505b94509492505050565b60008061007c868686866102ca565b6000806100a4610533565b600554610100900460ff16156100cd576040516321081abf60e01b815260040160405180910390fd5b6100d561055d565b6100de8361057e565b6000806100eb88866105b7565b909250905060006100fc8383610690565b90507f000000000000000000000000000000000000000000000000000000000000000081101561013f5760405163211ddda360e11b815260040160405180910390fd5b86821015610160576040516342af972b60e01b815260040160405180910390fd5b600061016a6106ae565b9050610178818460046106e9565b5060008060006101888787610c80565b919a5091945090925090508b8810156101b45760405163c972651760e01b815260040160405180910390fd5b81600b60008282546101c69190613707565b909155506101d79050844283610e33565b6102017f000000000000000000000000000000000000000000000000000000000000000085613707565b985061020f8389888c610f71565b600061021c60018b61110b565b90506102358161022f60208e018e61371a565b8b611140565b8d8a8a898e85610248602083018361371a565b6001600160a01b03167f88087800d03445c97e2009f3f90906bf6ede79bbd194e275c66224e977a5b84c8688866102856040880160208901613751565b60408051948552602085019390935291830152151560608201526080810187905260a00160405180910390a350909b5050505050505050505050506100816001600055565b6000806102d5610533565b600554610100900460ff16156102fe576040516321081abf60e01b815260040160405180910390fd5b61030661055d565b61030f8361057e565b7f00000000000000000000000000000000000000000000000000000000000000008610156103505760405163211ddda360e11b815260040160405180910390fd5b600061035a6111e8565b90508481101561037d576040516342af972b60e01b815260040160405180910390fd5b60006103876106ae565b9050600061039e6103966106ae565b8460046106e9565b905060006103cc7f000000000000000000000000000000000000000000000000000000000000000084613707565b90506000806000806103df8e89886111fb565b600b8054949850929650909450925083916000906103fe908490613707565b9091555061040f9050874283610e33565b50600061041d84898d61131e565b9050808d10156104405760405163c972651760e01b815260040160405180910390fd5b61044a818c6105b7565b508e905061045a81858b8961134d565b600061046760028861110b565b90508c6104818261047b602084018461371a565b85611140565b858b8684610492602086018661371a565b6001600160a01b03167fb354b32bd86ebd9f0968a338e5c2873d7f0d473aa7a668c2488e66038380258b8d8a866104cf60408b0160208c01613751565b6104e3896104dd8a8d61376e565b90610690565b6040805195865260208601949094529284019190915215156060830152608082015260a081018a905260c00160405180910390a350989d50939b5050505050505050505050506100816001600055565b60026000540361055657604051633ee5aeb560e01b815260040160405180910390fd5b6002600055565b341561057c57604051631574f9f360e01b815260040160405180910390fd5b565b600061058d602083018361371a565b6001600160a01b0316036105b45760405163f0dd15fd60e01b815260040160405180910390fd5b50565b600080806105cb6040850160208601613751565b156105f0576105e6856105e16040870187613781565b611501565b909350905061060c565b5034610608856106036040870187613781565b61163d565b8492505b6106146111e8565b9150801561068757604051600090339083908381818185875af1925050503d806000811461065e576040519150601f19603f3d011682016040523d82523d6000602084013e610663565b606091505b5050905080610685576040516312171d8360e31b815260040160405180910390fd5b505b505b9250929050565b60006106a58383670de0b6b3a7640000611677565b90505b92915050565b60006106da7f0000000000000000000000000000000000000000000000000000000000000000426137de565b6106e4904261376e565b905090565b600083815260076020526040812060018101546001600160801b031615158061071157504285115b1561072a57600101546001600160801b03169050610c79565b60008060006107376106ae565b90508088036107af578692506107a861074e611695565b600154600160801b90046001600160801b03167f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000006116b6565b915061086b565b60006107db7f00000000000000000000000000000000000000000000000000000000000000008a613707565b90505b8181036107f6578793506107f361074e611695565b92505b6000818152600760205260409020600101546001600160801b031693508315610838576000818152600760205260409020546001600160801b03169250610869565b6108627f000000000000000000000000000000000000000000000000000000000000000082613707565b90506107de565b505b610874836116d6565b6001850180546001600160801b0319166001600160801b03929092169190911790556108ca6108c37f00000000000000000000000000000000000000000000000000000000000000008a61376e565b8984610e33565b610908886109026108fb7f000000000000000000000000000000000000000000000000000000000000000083613707565b4290611704565b84610e33565b61091187611719565b50600090506007816109437f00000000000000000000000000000000000000000000000000000000000000008c61376e565b815260208101919091526040016000908120600101546001600160801b0316915061096f60028b61110b565b6000818152600e60205260408120549192508b8b8315610ab5576001925060008061099e86898d8660006118bd565b9150915080600b60008282546109b49190613707565b909155506109d09050866000846109ca8161198c565b886119b6565b6109da8183613707565b9150610a0a86838a8e877f0000000000000000000000000000000000000000000000000000000000000000611b30565b9150610a1e610a198385610690565b611b7a565b60058054600290610a3f9084906201000090046001600160701b03166137f2565b92506101000a8154816001600160701b0302191690836001600160701b03160217905550610a6c826116d6565b60058054601090610a8e908490600160801b90046001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050505b6000610ac260018461110b565b6000818152600e60205260409020549091508015610bd15760019450600080610aef838b8f8860016118bd565b9150915080600b6000828254610b059190613707565b90915550610b21905083600084610b1b8161198c565b8a611ba4565b610b2b818361376e565b9150610b3a610a198387610690565b60058054600290610b5b9084906201000090046001600160701b03166137f2565b92506101000a8154816001600160701b0302191690836001600160701b03160217905550610b88826116d6565b60058054601090610baa908490600160801b90046001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050505b8415610c0957610bfd610be38761198c565b610bec8361198c565b610bf69190613832565b6000611d95565b610c07838f611e43565b505b6000610c148461203d565b50604080518e815260208101879052908101899052606081018490526080810182905290915085907fff888cf98d2696e95c8c39aa98c9ad55a5378008f7a56614c9353b7137a57ab79060a00160405180910390a250999b5050505050505050505050505b9392505050565b600080600080610ced610c91611695565b600154600160801b90046001600160801b0316887f0000000000000000000000000000000000000000000000000000000000000000897f000000000000000000000000000000000000000000000000000000000000000061219b565b9250610cfa61074e611695565b9050610d518684610d4c847f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000006121c7565b612234565b15610d5e57610d5e612276565b600080610d6c88848961228f565b9092509050610d7b828661376e565b9450610d88818489611677565b9350610d94848961376e565b9550670de0b6b3a7640000610e1a87610dab611695565b610db59190613707565b600154610dd3908990600160801b90046001600160801b031661376e565b7f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000006116b6565b1115610e2857610e28612276565b505092959194509250565b600083815260076020526040902054600160801b90046001600160801b0316808303610e5f5750505050565b6000848152600760205260408120546001600160801b031690819003610eb957610e88836116d6565b600086815260076020526040902080546001600160801b0319166001600160801b0392909216919091179055610f37565b610f0a610f05670de0b6b3a7640000610ed2888661376e565b610edc9190613852565b85670de0b6b3a7640000610ef0878a61376e565b610efa9190613852565b85929190600161230f565b6116d6565b600086815260076020526040902080546001600160801b0319166001600160801b03929092169190911790555b610f40846116d6565b60009586526007602052604090952080546001600160801b03968716600160801b0296169590951790945550505050565b600254600160801b90046001600160801b0316610fb3610f0582610f9d670de0b6b3a764000086613852565b6004546001600160801b0316919088600161230f565b600480546001600160801b0319166001600160801b0392909216919091179055610fdc856116d6565b60018054600090610ff79084906001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550611024846116d6565b60018054601090611046908490600160801b90046001600160801b0316613869565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550611073846116d6565b61107d9082613812565b600280546001600160801b03808416600160801b029116179055905060006110a4836123b7565b90506110c2816110b38761198c565b6110bd9084613889565b611d95565b6110cb846123fb565b6110d7576110d7612276565b60006110e28561245b565b90508061110257604051638bdf918d60e01b815260040160405180910390fd5b50505050505050565b60006001600160f81b038211156111355760405163b7d0949760e01b815260040160405180910390fd5b5060f89190911b1790565b6000838152600d602090815260408083206001600160a01b038616845290915281208054839290611172908490613707565b90915550506000838152600e602052604081208054839290611195908490613707565b909155505060408051848152602081018390526001600160a01b0384169160009133917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a4505050565b60006106e4670de0b6b3a7640000612468565b60008060008061126861120c611695565b600154600160801b90046001600160801b0316897f00000000000000000000000000000000000000000000000000000000000000008a7f00000000000000000000000000000000000000000000000000000000000000006124f4565b9250866112758488612515565b111561128357611283612276565b60008061129161074e611695565b92506112a789670de0b6b3a7640000858b61252a565b509193509091506112ba9050818361376e565b6112c4908661376e565b94506113108861130a8b6112d8858a61376e565b8b6112e38e82612638565b8e7f000000000000000000000000000000000000000000000000000000000000000061264e565b90612515565b955092505093509350935093565b60006113306040830160208401613751565b1561133c575082610c79565b6113468484612673565b9050610c79565b6001546001600160801b03168381101561136957611369612276565b60035490849003907f0000000000000000000000000000000000000000000000000000000000000000906113a1908390600f0b612688565b10156113af576113af612276565b6003546113f990610f0590600160801b90046001600160801b03166113dc670de0b6b3a764000086613852565b600454600160801b90046001600160801b0316919089600161230f565b600480546001600160801b03928316600160801b02921691909117905561141f816116d6565b600180546001600160801b0319166001600160801b0392909216919091179055611448856116d6565b6001805460109061146a908490600160801b90046001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550611497856116d6565b600380546010906114b9908490600160801b90046001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555060006114e8836123b7565b90506110c2816114f78861198c565b6110bd9084613832565b6000806115396001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163330886126ae565b6115997f0000000000000000000000000000000000000000000000000000000000000000611568876001613707565b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016919061271b565b604051636e553f6560e01b8152600481018690523060248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690636e553f65906044016020604051808303816000875af1158015611609573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061162d91906138b1565b925060009150505b935093915050565b6116726001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163330866126ae565b505050565b600082600019048411830215820261168e57600080fd5b5091020490565b6001546003546000916106e4916001600160801b0390911690600f0b612688565b60006116cd826116c7858888611677565b906127ab565b95945050505050565b60006001600160801b0382111561170057604051630f0af95160e11b815260040160405180910390fd5b5090565b600081831161171357826106a5565b50919050565b600554600090819061173c908490600160801b90046001600160801b0316610690565b6005546201000090046001600160701b031692509050818111156118b8576000611766838361376e565b9050611775610f058286612816565b60058054601090611797908490600160801b90046001600160801b0316613869565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555060006117d0858361267390919063ffffffff16565b905060006117fe827f0000000000000000000000000000000000000000000000000000000000000000610690565b905080600b60008282546118129190613707565b909155506118229050818361376e565b915061182d826116d6565b600180546000906118489084906001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b031602179055506118758261282b565b6003805460009061188a908490600f0b6138ca565b92506101000a8154816001600160801b030219169083600f0b6001600160801b031602179055508493505050505b915091565b6000806118ca8785612673565b915060006118f8837f0000000000000000000000000000000000000000000000000000000000000000610690565b9050611924817f0000000000000000000000000000000000000000000000000000000000000000610690565b9150831561194757611936828261376e565b611940908461376e565b925061195e565b611951828261376e565b61195b9084613707565b92505b8686101561198157611971838789611677565b925061197e828789611677565b91505b509550959350505050565b60006001600160ff1b038211156117005760405163396ea70160e11b815260040160405180910390fd5b600354600160801b90046001600160801b03166119ff610f05826119e2670de0b6b3a764000086613852565b600454600160801b90046001600160801b031691908a600061230f565b600480546001600160801b03928316600160801b029216919091179055611a25866116d6565b611a2f9082613869565b600380546001600160801b03928316600160801b029216919091179055611a55846116d6565b60018054600090611a709084906001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550611a9d83612855565b60038054600090611ab2908490600f0b6138ca565b92506101000a8154816001600160801b030219169083600f0b6001600160801b03160217905550611ae2856116d6565b60018054601090611b04908490600160801b90046001600160801b0316613869565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550505050505050565b600080611b4884611b428a888a611677565b90612673565b9050611b55888486611677565b611b5f9082613707565b905086811115611b6f5786810391505b509695505050505050565b60006001600160701b038211156117005760405163086b151760e11b815260040160405180910390fd5b6001546001600160801b031683811080611be657507f0000000000000000000000000000000000000000000000000000000000000000611be4858361376e565b105b15611bf357611bf3612276565b6003549084900390600f0b611c088482613832565b905083611c148661198c565b138015611c4957507f0000000000000000000000000000000000000000000000000000000000000000611c478383612688565b105b15611c5657611c56612276565b600254600160801b90046001600160801b0316611c98610f0582611c82670de0b6b3a764000088613852565b6004546001600160801b031691908c600061230f565b600480546001600160801b0319166001600160801b0392909216919091179055611cc2888261376e565b9050611ccd816116d6565b600280546001600160801b03928316600160801b029216919091179055611cf3836116d6565b600180546001600160801b0319166001600160801b0392909216919091179055611d1c82612855565b600380546001600160801b0319166001600160801b0392909216919091179055611d45876116d6565b60018054601090611d67908490600160801b90046001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b031602179055505050505050505050565b6000611dbe611da48483612891565b611daf846000612891565b611db99190613832565b612855565b9050600081600f0b1315611e135760028054829190600090611dea9084906001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550505050565b600081600f0b121561167257611e28816138f7565b60028054600090611dea9084906001600160801b0316613869565b600654600360f81b6000908152600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e95490918291611e8e916001600160801b03169061376e565b905080600003611ea25760019150506106a8565b6000611ead856128a0565b905080600003611ec2576001925050506106a8565b600080611ed083858961293c565b9150915080611ee65760009450505050506106a8565b60008073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__632c03ef68858a6040518363ffffffff1660e01b8152600401611f2292919061399b565b6040805180830381865af4158015611f3e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f629190613a11565b91509150611f80611f728261198c565b611f7b90613a35565b612ab0565b925082611f9657600096505050505050506106a8565b611f9f826116d6565b60068054600090611fba9084906001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b03160217905550611fe7816116d6565b60068054601090612009908490600160801b90046001600160801b0316613812565b92506101000a8154816001600160801b0302191690836001600160801b031602179055506001965050505050505092915050565b60008060008073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__635a1b419e61206687612c46565b6040518263ffffffff1660e01b81526004016120829190613a51565b6040805180830381865af415801561209e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120c29190613a60565b91509150806120d8575060009485945092505050565b60008086116120e85760006120f2565b6120f28387610690565b600654600e6020527fd2d06a3478833ecfcc0864e3afb188a7ff21caef68ea336a6e4f79f78f6fb3e95460008080527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54939450926001600160801b039092169161215d9190613707565b612167919061376e565b9050806000036121805750600096879650945050505050565b600061218c8383612673565b98600198509650505050505050565b60006121bc8787876121b588670de0b6b3a764000061376e565b8787612d80565b979650505050505050565b600061222c6122086121e184670de0b6b3a764000061376e565b61130a670de0b6b3a76400006121f7818a612816565b612201919061376e565b8790612515565b61221a90670de0b6b3a7640000613707565b611b4284670de0b6b3a764000061376e565b949350505050565b60008061226b85612243611695565b61224d9190613707565b600154610dd3908790600160801b90046001600160801b031661376e565b909210949350505050565b60405163bb55fd2760e01b815260040160405180910390fd5b6000806122d98561130a85817f0000000000000000000000000000000000000000000000000000000000000000670de0b6b3a76400006122cf818c612816565b61130a919061376e565b9150612305827f0000000000000000000000000000000000000000000000000000000000000000610690565b9050935093915050565b6000826000036123205750846116cd565b8115612373576123516123338487613707565b61233d8587610690565b612347888a610690565b611b429190613707565b9050600061235f8588611704565b90508082101561236d578091505b506116cd565b828503612382575060006116cd565b6123ad61238f848761376e565b6123998587612515565b6123a3888a610690565b611b42919061376e565b9695505050505050565b60006123df600e60006123cb60028661110b565b81526020019081526020016000205461198c565b6123f1600e60006123cb60018761110b565b6106a89190613832565b60006124277f000000000000000000000000000000000000000000000000000000000000000083612515565b60025461243d91906001600160801b0316613707565b600154612453906001600160801b031684610690565b101592915050565b60006106a8826004611e43565b6040516303d1689d60e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906307a2d13a90602401602060405180830381865afa1580156124d0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106a891906138b1565b60006121bc87878761250e88670de0b6b3a764000061376e565b8787612e34565b60006106a58383670de0b6b3a7640000612e57565b600080808061257b87866125748b61130a61254d8c670de0b6b3a764000061376e565b7f000000000000000000000000000000000000000000000000000000000000000090612515565b9190612e57565b93506125a7847f0000000000000000000000000000000000000000000000000000000000000000610690565b915060006125c86125c089670de0b6b3a764000061376e565b8a9088612e57565b90506125f4817f0000000000000000000000000000000000000000000000000000000000000000612515565b9350612620847f0000000000000000000000000000000000000000000000000000000000000000610690565b61262a9084613707565b915050945094509450949050565b600081831161264757816106a5565b5090919050565b600080612666846126608a888a612e57565b90612816565b9050611b55888486612e57565b60006106a583670de0b6b3a764000084611677565b6000806126958484612e7d565b9092509050806126a7576126a7612276565b5092915050565b6040516001600160a01b0384811660248301528381166044830152606482018390526127159186918216906323b872dd906084015b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050612eb9565b50505050565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b17905261276c8482612f21565b612715576040516001600160a01b038481166024830152600060448301526127a191869182169063095ea7b3906064016126e3565b6127158482612eb9565b6000816000036127c45750670de0b6b3a76400006106a8565b826000036127d4575060006106a8565b60006127df8361198c565b905060006127f46127ef8661198c565b612fc4565b905081810261280b670de0b6b3a764000082613a90565b90506123ad816131ea565b60006106a583670de0b6b3a764000084612e57565b600060016001607f1b038211156117005760405163a5353be560e01b815260040160405180910390fd5b600060016001607f1b0319821280612873575060016001607f1b0382135b156117005760405163a5353be560e01b815260040160405180910390fd5b600081831361264757816106a5565b60025460009081906128bb906001600160801b031684612816565b90506128e77f000000000000000000000000000000000000000000000000000000000000000082613707565b6001546001600160801b03161115611713576001547f0000000000000000000000000000000000000000000000000000000000000000906129329083906001600160801b031661376e565b610c79919061376e565b6129446135df565b60008061295084612c46565b9050600073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__635a1b419e836040518263ffffffff1660e01b815260040161298b9190613a51565b6040805180830381865af41580156129a7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129cb9190613a60565b93509050826129e05750600091506116359050565b6000612a07612a0284610160015185610140015161069090919063ffffffff16565b61198c565b612a27612a0285610120015186610100015161251590919063ffffffff16565b612a319190613832565b604080516101208101825285815260208082019590955260008052600e85527fe710864318d4a32f37d6ce54cb3fadbef648dd12d8dbdf53973564d56b7f881c54818301526060810199909952608089019990995260a088015250815160c087015281015160e086015290940151610100840152509092600192509050565b60015460035460405163685a2be760e11b81526001600160801b0380841660048301819052600f9390930b60248301819052600160801b90940416604482018190527f000000000000000000000000000000000000000000000000000000000000000060648301526084820185905260009391849081908190819073__$2b4fa6f02a36eedfe41c65e8dd342257d3$__9063d0b457ce9060a401608060405180830381865af4158015612b67573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612b8b9190613abe565b935093509350935080612ba75750600098975050505050505050565b868414612bd857612bb7846116d6565b600180546001600160801b0319166001600160801b03929092169190911790555b858314612c0957612be883612855565b600380546001600160801b0319166001600160801b03929092169190911790555b848214612c3757612c19826116d6565b600180546001600160801b03928316600160801b0292169190911790555b50600198975050505050505050565b612c4e613631565b60408051610180810182526001546001600160801b038082168352600354600f0b6020840152600160801b91829004811693830193909352606082018590527f000000000000000000000000000000000000000000000000000000000000000060808301527f000000000000000000000000000000000000000000000000000000000000000060a08301527f000000000000000000000000000000000000000000000000000000000000000060c08301527f000000000000000000000000000000000000000000000000000000000000000060e08301526002540482166101008201526004549091610120830191612d46911661337f565b81526003546001600160801b03600160801b9182900481166020840152600454604090930192612d789290041661337f565b905292915050565b600080612d9088888787876133f5565b9050612daa856116c7612da3898c613707565b8690610690565b9750612db7848985611677565b975087811015612dc957612dc9612276565b878103670de0b6b3a76400008110612dfe57612df7612df0670de0b6b3a764000088612816565b82906127ab565b9050612e16565b612e13612df0670de0b6b3a764000088612673565b90505b80881015612e2657612e26612276565b909603979650505050505050565b600080612e45888888888888613424565b909250905080611b6f57611b6f612276565b6000826000190484118302158202612e6e57600080fd5b50910281810615159190040190565b600080600083612e8c8661198c565b612e969190613832565b90506000811215612eae576000809250925050610689565b946001945092505050565b6000612ece6001600160a01b038416836134e7565b90508051600014158015612ef3575080806020019051810190612ef19190613af4565b155b1561167257604051635274afe760e01b81526001600160a01b03841660048201526024015b60405180910390fd5b6000806000846001600160a01b031684604051612f3e9190613b11565b6000604051808303816000865af19150503d8060008114612f7b576040519150601f19603f3d011682016040523d82523d6000602084013e612f80565b606091505b5091509150818015612faa575080511580612faa575080806020019051810190612faa9190613af4565b80156116cd5750505050506001600160a01b03163b151590565b6000808213612fe65760405163e61b497560e01b815260040160405180910390fd5b506001600160801b03811160071b81811c67ffffffffffffffff1060061b1781811c63ffffffff1060051b1781811c61ffff1060041b1781811c60ff10600390811b90911782811c600f1060021b1782811c909110600190811b90911782811c90911017609f8181036060019290921b91605f198201906130699084901c61198c565b6c465772b2bbbb5f824b15207a3081018102606090811d6d0388eaa27412d5aca026815d636e018202811d6d0df99ac502031bf953eff472fdcc018202811d6d13cdffb29d51d99322bdff5f2211018202811d6d0a0f742023def783a307a986912e018202811d6d01920d8043ca89b5239253284e42018202811d6c0b7a86d7375468fac667a0a527016c29508e458543d8aa4df2abee7883018302821d6d0139601a2efabe717e604cbb4894018302821d6d02247f7a7b6594320649aa03aba1018302821d6c8c3f38e95a6b1ff2ab1c3b343619018302821d6d02384773bdf1ac5676facced60901901830290911d6cb9a025d814b29c212b8b1a07cd1901909102780a09507084cc699bb0e71ea869ffffffffffffffffffffffff190105711340daa0d5f769dba1915cef59f0815a5506027d0267a36c0c95b3975ab3ee5b203a7614a3f75373f047d803ae7b6687f2b391909102017d57115e47018c7177eebf7cd370a3356a1b7863008a5ae8028c72b88642840160ae1d92915050565b6000680248ce36a70cb26b3e19821361320557506000919050565b680755bf798b4a1bf1e5821261322e576040516373a2d6b160e01b815260040160405180910390fd5b6503782dace9d9604e83901b059150600060606bb17217f7d1cf79abc9e3b39884821b056001605f1b01901d6bb17217f7d1cf79abc9e3b3988102909303926c240c330e9fb2d9cbaf0fd5aafb1984018402606090811d6d0277594991cfc85f6e2461837cd9018502811d6d1a521255e34f6a5061b25ef1c9c319018502811d6db1bbb201f443cf962f1a1d3db4a5018502811d6e02c72388d9f74f51a9331fed693f1419018502811d6e05180bb14799ab47a8a8cb2a527d57016d02d16720577bd19bf614176fe9ea6c10fe68e7fd37d0007b713f765087018702831d9081019087016d01d3967ed30fc4f89c02bab570811901810290921d6e0587f503bb6ea29d25fcb7401964500186026d360d7aeea093263ecc6e0ecb291760621b0181810595509293509091906123ad74029d9dc38563c32e5c2f6dc192ee70ef65f9978af3860260c38690031c61198c565b600080670de0b6b3a76400006133936106ae565b61339d9190613852565b90508083116133ad5760006133b7565b6133b7818461376e565b9150610c796133ee670de0b6b3a76400007f0000000000000000000000000000000000000000000000000000000000000000613852565b8390612673565b600061340185856127ab565b61341a613412866116c7868b612515565b859085612e57565b6123ad9190613707565b600080600061343689898888886133f5565b9050613446866116c7898b613707565b97508781101561345d5760008092509250506134dc565b87810361346b818688612e57565b9050670de0b6b3a7640000811061349857613491612df0670de0b6b3a764000089612816565b90506134b0565b6134ad612df0670de0b6b3a764000089612673565b90505b6134ba8186612816565b9050808a10156134d2576000809350935050506134dc565b8903925060019150505b965096945050505050565b60606106a58383600084600080856001600160a01b0316848660405161350d9190613b11565b60006040518083038185875af1925050503d806000811461354a576040519150601f19603f3d011682016040523d82523d6000602084013e61354f565b606091505b50915091506123ad86838360608261356f5761356a826135b6565b610c79565b815115801561358657506001600160a01b0384163b155b156135af57604051639996b31560e01b81526001600160a01b0385166004820152602401612f18565b5080610c79565b8051156135c65780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b6040518061012001604052806135f3613631565b815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b6040518061018001604052806000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b600080600080608085870312156136a857600080fd5b843593506020850135925060408501359150606085013567ffffffffffffffff8111156136d457600080fd5b8501606081880312156136e657600080fd5b939692955090935050565b634e487b7160e01b600052601160045260246000fd5b808201808211156106a8576106a86136f1565b60006020828403121561372c57600080fd5b81356001600160a01b0381168114610c7957600080fd5b80151581146105b457600080fd5b60006020828403121561376357600080fd5b8135610c7981613743565b818103818111156106a8576106a86136f1565b6000808335601e1984360301811261379857600080fd5b83018035915067ffffffffffffffff8211156137b357600080fd5b60200191503681900382131561068957600080fd5b634e487b7160e01b600052601260045260246000fd5b6000826137ed576137ed6137c8565b500690565b6001600160701b038181168382160190808211156126a7576126a76136f1565b6001600160801b038181168382160190808211156126a7576126a76136f1565b81810360008312801583831316838312821617156126a7576126a76136f1565b80820281158282048414176106a8576106a86136f1565b6001600160801b038281168282160390808211156126a7576126a76136f1565b80820182811260008312801582168215821617156138a9576138a96136f1565b505092915050565b6000602082840312156138c357600080fd5b5051919050565b600f81810b9083900b0160016001607f1b03811360016001607f1b0319821217156106a8576106a86136f1565b600081600f0b60016001607f1b03198103613914576139146136f1565b60000392915050565b805182526020810151602083015260408101516040830152606081015160608301526080810151608083015260a081015160a083015260c081015160c083015260e081015160e08301526101008082015181840152506101208082015181840152506101408082015181840152506101608082015181840152505050565b60006102a0820190506139af82855161391d565b602084015161018083015260408401516101a083015260608401516101c083015260808401516101e083015260a084015161020083015260c084015161022083015260e084015161024083015261010090930151610260820152610280015290565b60008060408385031215613a2457600080fd5b505080516020909101519092909150565b6000600160ff1b8201613a4a57613a4a6136f1565b5060000390565b61018081016106a8828461391d565b60008060408385031215613a7357600080fd5b825191506020830151613a8581613743565b809150509250929050565b600082613a9f57613a9f6137c8565b600160ff1b821460001984141615613ab957613ab96136f1565b500590565b60008060008060808587031215613ad457600080fd5b84519350602085015192506040850151915060608501516136e681613743565b600060208284031215613b0657600080fd5b8151610c7981613743565b6000825160005b81811015613b325760208186018101518583015201613b18565b50600092019182525091905056fea2646970667358221220a91fe597282ba88e8b3fbef9a4c62c0bcb142ed71baac9fc0ec8cabb1be6b43864736f6c63430008140033a2646970667358221220670b93ad0bcd7b5bf793e70604711e88d2a473853b8baf14414583364083c9ff64736f6c63430008140033"
 )
 
 
-class ERC4626Target4DeployerContract(Contract):
-    """A web3.py Contract class for the ERC4626Target4Deployer contract."""
+class ERC4626Target2DeployerContract(Contract):
+    """A web3.py Contract class for the ERC4626Target2Deployer contract."""
 
-    abi: ABI = erc4626target4deployer_abi
-    bytecode: bytes = HexBytes(erc4626target4deployer_bytecode)
+    abi: ABI = erc4626target2deployer_abi
+    bytecode: bytes | None = try_bytecode_hexbytes(erc4626target2deployer_bytecode, "erc4626target2deployer")
 
     def __init__(self, address: ChecksumAddress | None = None) -> None:
         try:
             # Initialize parent Contract class
             super().__init__(address=address)
-            self.functions = ERC4626Target4DeployerContractFunctions(erc4626target4deployer_abi, self.w3, address)  # type: ignore
+            self.functions = ERC4626Target2DeployerContractFunctions(erc4626target2deployer_abi, self.w3, address)  # type: ignore
 
         except FallbackNotFound:
             print("Fallback function not found. Continuing...")
 
-    functions: ERC4626Target4DeployerContractFunctions
+    functions: ERC4626Target2DeployerContractFunctions
 
     @classmethod
     def constructor(cls) -> ContractConstructor:  # type: ignore
         """Creates a transaction with the contract's constructor function.
 
         Parameters
         ----------
@@ -218,15 +218,15 @@
         current_nonce = w3.eth.get_transaction_count(account.address)
         deployment_tx.update({"nonce": current_nonce})
 
         # Sign the transaction with local account private key
         signed_tx = account.sign_transaction(deployment_tx)
 
         # Send the signed transaction and wait for receipt
-        tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
+        tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
         tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
 
         deployed_contract = deployer(address=tx_receipt.contractAddress)  # type: ignore
         return deployed_contract
 
     @classmethod
     def factory(cls, w3: Web3, class_name: str | None = None, **kwargs: Any) -> Type[Self]:
@@ -241,10 +241,10 @@
 
         Returns
         -------
         Self
             A deployed instance of the contract.
         """
         contract = super().factory(w3, class_name, **kwargs)
-        contract.functions = ERC4626Target4DeployerContractFunctions(erc4626target4deployer_abi, w3, None)
+        contract.functions = ERC4626Target2DeployerContractFunctions(erc4626target2deployer_abi, w3, None)
 
         return contract
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/HyperdriveDeployerCoordinatorTypes.py` & `agent0-0.20.0/src/agent0/hypertypes/types/HyperdriveDeployerCoordinatorTypes.py`

 * *Files 5% similar despite different names*

```diff
@@ -29,15 +29,14 @@
     extraDataHash: bytes
     initialSharePrice: int
     hyperdrive: str
     target0: str
     target1: str
     target2: str
     target3: str
-    target4: str
 
 
 @dataclass
 class ErrorInfo:
     """Custom contract error information."""
 
     name: str
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/HyperdriveFactoryContract.py` & `agent0-0.20.0/src/agent0/hypertypes/types/HyperdriveFactoryContract.py`

 * *Files 9% similar despite different names*

```diff
@@ -45,15 +45,15 @@
     ContractFunctions,
 )
 from web3.exceptions import FallbackNotFound
 from web3.types import ABI, ABIFunction, BlockIdentifier, CallOverride, EventData, TxParams
 
 from .HyperdriveFactoryTypes import FactoryConfig
 from .IHyperdriveTypes import Fees, Options, PoolDeployConfig
-from .utilities import dataclass_to_tuple, get_abi_input_types, rename_returned_types
+from .utilities import dataclass_to_tuple, get_abi_input_types, rename_returned_types, try_bytecode_hexbytes
 
 structs = {
     "Fees": Fees,
     "FactoryConfig": FactoryConfig,
     "PoolDeployConfig": PoolDeployConfig,
     "Options": Options,
 }
@@ -204,14 +204,41 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
+class HyperdriveFactoryDeployerCoordinatorManagerContractFunction(ContractFunction):
+    """ContractFunction for the deployerCoordinatorManager method."""
+
+    def __call__(self) -> HyperdriveFactoryDeployerCoordinatorManagerContractFunction:  # type: ignore
+        clone = super().__call__()
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> str:
+        """returns str."""
+        # Define the expected return types from the smart contract call
+
+        return_types = str
+
+        # Call the function
+
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+        return cast(str, rename_returned_types(structs, return_types, raw_values))
+
+
 class HyperdriveFactoryFeeCollectorContractFunction(ContractFunction):
     """ContractFunction for the feeCollector method."""
 
     def __call__(self) -> HyperdriveFactoryFeeCollectorContractFunction:  # type: ignore
         clone = super().__call__()
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -609,14 +636,41 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(int, rename_returned_types(structs, return_types, raw_values))
 
 
+class HyperdriveFactoryMaxCircuitBreakerDeltaContractFunction(ContractFunction):
+    """ContractFunction for the maxCircuitBreakerDelta method."""
+
+    def __call__(self) -> HyperdriveFactoryMaxCircuitBreakerDeltaContractFunction:  # type: ignore
+        clone = super().__call__()
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> int:
+        """returns int."""
+        # Define the expected return types from the smart contract call
+
+        return_types = int
+
+        # Call the function
+
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+        return cast(int, rename_returned_types(structs, return_types, raw_values))
+
+
 class HyperdriveFactoryMaxFeesContractFunction(ContractFunction):
     """ContractFunction for the maxFees method."""
 
     def __call__(self) -> HyperdriveFactoryMaxFeesContractFunction:  # type: ignore
         clone = super().__call__()
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -744,14 +798,41 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(int, rename_returned_types(structs, return_types, raw_values))
 
 
+class HyperdriveFactoryMinCircuitBreakerDeltaContractFunction(ContractFunction):
+    """ContractFunction for the minCircuitBreakerDelta method."""
+
+    def __call__(self) -> HyperdriveFactoryMinCircuitBreakerDeltaContractFunction:  # type: ignore
+        clone = super().__call__()
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> int:
+        """returns int."""
+        # Define the expected return types from the smart contract call
+
+        return_types = int
+
+        # Call the function
+
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+        return cast(int, rename_returned_types(structs, return_types, raw_values))
+
+
 class HyperdriveFactoryMinFeesContractFunction(ContractFunction):
     """ContractFunction for the minFees method."""
 
     def __call__(self) -> HyperdriveFactoryMinFeesContractFunction:  # type: ignore
         clone = super().__call__()
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -852,14 +933,41 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(int, rename_returned_types(structs, return_types, raw_values))
 
 
+class HyperdriveFactoryNameContractFunction(ContractFunction):
+    """ContractFunction for the name method."""
+
+    def __call__(self) -> HyperdriveFactoryNameContractFunction:  # type: ignore
+        clone = super().__call__()
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> str:
+        """returns str."""
+        # Define the expected return types from the smart contract call
+
+        return_types = str
+
+        # Call the function
+
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+        return cast(str, rename_returned_types(structs, return_types, raw_values))
+
+
 class HyperdriveFactoryRemoveDeployerCoordinatorContractFunction(ContractFunction):
     """ContractFunction for the removeDeployerCoordinator method."""
 
     def __call__(self, deployerCoordinator: str, index: int) -> HyperdriveFactoryRemoveDeployerCoordinatorContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(deployerCoordinator), dataclass_to_tuple(index))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -945,14 +1053,36 @@
     ) -> None:
         """returns None."""
         # Define the expected return types from the smart contract call
 
         # Call the function
 
 
+class HyperdriveFactoryUpdateDeployerCoordinatorManagerContractFunction(ContractFunction):
+    """ContractFunction for the updateDeployerCoordinatorManager method."""
+
+    def __call__(self, deployerCoordinatorManager: str) -> HyperdriveFactoryUpdateDeployerCoordinatorManagerContractFunction:  # type: ignore
+        clone = super().__call__(dataclass_to_tuple(deployerCoordinatorManager))
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> None:
+        """returns None."""
+        # Define the expected return types from the smart contract call
+
+        # Call the function
+
+
 class HyperdriveFactoryUpdateFeeCollectorContractFunction(ContractFunction):
     """ContractFunction for the updateFeeCollector method."""
 
     def __call__(self, feeCollector: str) -> HyperdriveFactoryUpdateFeeCollectorContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(feeCollector))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -1077,14 +1207,36 @@
     ) -> None:
         """returns None."""
         # Define the expected return types from the smart contract call
 
         # Call the function
 
 
+class HyperdriveFactoryUpdateMaxCircuitBreakerDeltaContractFunction(ContractFunction):
+    """ContractFunction for the updateMaxCircuitBreakerDelta method."""
+
+    def __call__(self, maxCircuitBreakerDelta: int) -> HyperdriveFactoryUpdateMaxCircuitBreakerDeltaContractFunction:  # type: ignore
+        clone = super().__call__(dataclass_to_tuple(maxCircuitBreakerDelta))
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> None:
+        """returns None."""
+        # Define the expected return types from the smart contract call
+
+        # Call the function
+
+
 class HyperdriveFactoryUpdateMaxFeesContractFunction(ContractFunction):
     """ContractFunction for the updateMaxFees method."""
 
     def __call__(self, maxFees: Fees) -> HyperdriveFactoryUpdateMaxFeesContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(maxFees))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -1187,14 +1339,36 @@
     ) -> None:
         """returns None."""
         # Define the expected return types from the smart contract call
 
         # Call the function
 
 
+class HyperdriveFactoryUpdateMinCircuitBreakerDeltaContractFunction(ContractFunction):
+    """ContractFunction for the updateMinCircuitBreakerDelta method."""
+
+    def __call__(self, minCircuitBreakerDelta: int) -> HyperdriveFactoryUpdateMinCircuitBreakerDeltaContractFunction:  # type: ignore
+        clone = super().__call__(dataclass_to_tuple(minCircuitBreakerDelta))
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> None:
+        """returns None."""
+        # Define the expected return types from the smart contract call
+
+        # Call the function
+
+
 class HyperdriveFactoryUpdateMinFeesContractFunction(ContractFunction):
     """ContractFunction for the updateMinFees method."""
 
     def __call__(self, minFees: Fees) -> HyperdriveFactoryUpdateMinFeesContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(minFees))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -1297,27 +1471,56 @@
     ) -> None:
         """returns None."""
         # Define the expected return types from the smart contract call
 
         # Call the function
 
 
+class HyperdriveFactoryVersionContractFunction(ContractFunction):
+    """ContractFunction for the version method."""
+
+    def __call__(self) -> HyperdriveFactoryVersionContractFunction:  # type: ignore
+        clone = super().__call__()
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> str:
+        """returns str."""
+        # Define the expected return types from the smart contract call
+
+        return_types = str
+
+        # Call the function
+
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+        return cast(str, rename_returned_types(structs, return_types, raw_values))
+
+
 class HyperdriveFactoryContractFunctions(ContractFunctions):
     """ContractFunctions for the HyperdriveFactory contract."""
 
     addDeployerCoordinator: HyperdriveFactoryAddDeployerCoordinatorContractFunction
 
     checkpointDurationResolution: HyperdriveFactoryCheckpointDurationResolutionContractFunction
 
     defaultPausers: HyperdriveFactoryDefaultPausersContractFunction
 
     deployAndInitialize: HyperdriveFactoryDeployAndInitializeContractFunction
 
     deployTarget: HyperdriveFactoryDeployTargetContractFunction
 
+    deployerCoordinatorManager: HyperdriveFactoryDeployerCoordinatorManagerContractFunction
+
     feeCollector: HyperdriveFactoryFeeCollectorContractFunction
 
     getDeployerCoordinatorAtIndex: HyperdriveFactoryGetDeployerCoordinatorAtIndexContractFunction
 
     getDeployerCoordinatorsInRange: HyperdriveFactoryGetDeployerCoordinatorsInRangeContractFunction
 
     getInstanceAtIndex: HyperdriveFactoryGetInstanceAtIndexContractFunction
@@ -1340,72 +1543,86 @@
 
     linkerCodeHash: HyperdriveFactoryLinkerCodeHashContractFunction
 
     linkerFactory: HyperdriveFactoryLinkerFactoryContractFunction
 
     maxCheckpointDuration: HyperdriveFactoryMaxCheckpointDurationContractFunction
 
+    maxCircuitBreakerDelta: HyperdriveFactoryMaxCircuitBreakerDeltaContractFunction
+
     maxFees: HyperdriveFactoryMaxFeesContractFunction
 
     maxFixedAPR: HyperdriveFactoryMaxFixedAPRContractFunction
 
     maxPositionDuration: HyperdriveFactoryMaxPositionDurationContractFunction
 
     maxTimeStretchAPR: HyperdriveFactoryMaxTimeStretchAPRContractFunction
 
     minCheckpointDuration: HyperdriveFactoryMinCheckpointDurationContractFunction
 
+    minCircuitBreakerDelta: HyperdriveFactoryMinCircuitBreakerDeltaContractFunction
+
     minFees: HyperdriveFactoryMinFeesContractFunction
 
     minFixedAPR: HyperdriveFactoryMinFixedAPRContractFunction
 
     minPositionDuration: HyperdriveFactoryMinPositionDurationContractFunction
 
     minTimeStretchAPR: HyperdriveFactoryMinTimeStretchAPRContractFunction
 
+    name: HyperdriveFactoryNameContractFunction
+
     removeDeployerCoordinator: HyperdriveFactoryRemoveDeployerCoordinatorContractFunction
 
     sweepCollector: HyperdriveFactorySweepCollectorContractFunction
 
     updateCheckpointDurationResolution: HyperdriveFactoryUpdateCheckpointDurationResolutionContractFunction
 
     updateDefaultPausers: HyperdriveFactoryUpdateDefaultPausersContractFunction
 
+    updateDeployerCoordinatorManager: HyperdriveFactoryUpdateDeployerCoordinatorManagerContractFunction
+
     updateFeeCollector: HyperdriveFactoryUpdateFeeCollectorContractFunction
 
     updateGovernance: HyperdriveFactoryUpdateGovernanceContractFunction
 
     updateHyperdriveGovernance: HyperdriveFactoryUpdateHyperdriveGovernanceContractFunction
 
     updateLinkerCodeHash: HyperdriveFactoryUpdateLinkerCodeHashContractFunction
 
     updateLinkerFactory: HyperdriveFactoryUpdateLinkerFactoryContractFunction
 
     updateMaxCheckpointDuration: HyperdriveFactoryUpdateMaxCheckpointDurationContractFunction
 
+    updateMaxCircuitBreakerDelta: HyperdriveFactoryUpdateMaxCircuitBreakerDeltaContractFunction
+
     updateMaxFees: HyperdriveFactoryUpdateMaxFeesContractFunction
 
     updateMaxFixedAPR: HyperdriveFactoryUpdateMaxFixedAPRContractFunction
 
     updateMaxPositionDuration: HyperdriveFactoryUpdateMaxPositionDurationContractFunction
 
     updateMaxTimeStretchAPR: HyperdriveFactoryUpdateMaxTimeStretchAPRContractFunction
 
     updateMinCheckpointDuration: HyperdriveFactoryUpdateMinCheckpointDurationContractFunction
 
+    updateMinCircuitBreakerDelta: HyperdriveFactoryUpdateMinCircuitBreakerDeltaContractFunction
+
     updateMinFees: HyperdriveFactoryUpdateMinFeesContractFunction
 
     updateMinFixedAPR: HyperdriveFactoryUpdateMinFixedAPRContractFunction
 
     updateMinPositionDuration: HyperdriveFactoryUpdateMinPositionDurationContractFunction
 
     updateMinTimeStretchAPR: HyperdriveFactoryUpdateMinTimeStretchAPRContractFunction
 
     updateSweepCollector: HyperdriveFactoryUpdateSweepCollectorContractFunction
 
+    version: HyperdriveFactoryVersionContractFunction
+
     def __init__(
         self,
         abi: ABI,
         w3: "Web3",
         address: ChecksumAddress | None = None,
         decode_tuples: bool | None = False,
     ) -> None:
@@ -1446,14 +1663,22 @@
             "deployTarget",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="deployTarget",
         )
+        self.deployerCoordinatorManager = HyperdriveFactoryDeployerCoordinatorManagerContractFunction.factory(
+            "deployerCoordinatorManager",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="deployerCoordinatorManager",
+        )
         self.feeCollector = HyperdriveFactoryFeeCollectorContractFunction.factory(
             "feeCollector",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="feeCollector",
@@ -1566,14 +1791,22 @@
             "maxCheckpointDuration",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="maxCheckpointDuration",
         )
+        self.maxCircuitBreakerDelta = HyperdriveFactoryMaxCircuitBreakerDeltaContractFunction.factory(
+            "maxCircuitBreakerDelta",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="maxCircuitBreakerDelta",
+        )
         self.maxFees = HyperdriveFactoryMaxFeesContractFunction.factory(
             "maxFees",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="maxFees",
@@ -1606,14 +1839,22 @@
             "minCheckpointDuration",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="minCheckpointDuration",
         )
+        self.minCircuitBreakerDelta = HyperdriveFactoryMinCircuitBreakerDeltaContractFunction.factory(
+            "minCircuitBreakerDelta",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="minCircuitBreakerDelta",
+        )
         self.minFees = HyperdriveFactoryMinFeesContractFunction.factory(
             "minFees",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="minFees",
@@ -1638,14 +1879,22 @@
             "minTimeStretchAPR",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="minTimeStretchAPR",
         )
+        self.name = HyperdriveFactoryNameContractFunction.factory(
+            "name",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="name",
+        )
         self.removeDeployerCoordinator = HyperdriveFactoryRemoveDeployerCoordinatorContractFunction.factory(
             "removeDeployerCoordinator",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="removeDeployerCoordinator",
@@ -1672,14 +1921,24 @@
             "updateDefaultPausers",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="updateDefaultPausers",
         )
+        self.updateDeployerCoordinatorManager = (
+            HyperdriveFactoryUpdateDeployerCoordinatorManagerContractFunction.factory(
+                "updateDeployerCoordinatorManager",
+                w3=w3,
+                contract_abi=abi,
+                address=address,
+                decode_tuples=decode_tuples,
+                function_identifier="updateDeployerCoordinatorManager",
+            )
+        )
         self.updateFeeCollector = HyperdriveFactoryUpdateFeeCollectorContractFunction.factory(
             "updateFeeCollector",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="updateFeeCollector",
@@ -1720,14 +1979,22 @@
             "updateMaxCheckpointDuration",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="updateMaxCheckpointDuration",
         )
+        self.updateMaxCircuitBreakerDelta = HyperdriveFactoryUpdateMaxCircuitBreakerDeltaContractFunction.factory(
+            "updateMaxCircuitBreakerDelta",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="updateMaxCircuitBreakerDelta",
+        )
         self.updateMaxFees = HyperdriveFactoryUpdateMaxFeesContractFunction.factory(
             "updateMaxFees",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="updateMaxFees",
@@ -1760,14 +2027,22 @@
             "updateMinCheckpointDuration",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="updateMinCheckpointDuration",
         )
+        self.updateMinCircuitBreakerDelta = HyperdriveFactoryUpdateMinCircuitBreakerDeltaContractFunction.factory(
+            "updateMinCircuitBreakerDelta",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="updateMinCircuitBreakerDelta",
+        )
         self.updateMinFees = HyperdriveFactoryUpdateMinFeesContractFunction.factory(
             "updateMinFees",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="updateMinFees",
@@ -1800,14 +2075,22 @@
             "updateSweepCollector",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="updateSweepCollector",
         )
+        self.version = HyperdriveFactoryVersionContractFunction.factory(
+            "version",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="version",
+        )
 
 
 class HyperdriveFactoryCheckpointDurationResolutionUpdatedContractEvent(ContractEvent):
     """ContractEvent for CheckpointDurationResolutionUpdated."""
 
     # super() get_logs and create_filter methods are generic, while our version adds values & types
     # pylint: disable=arguments-differ
@@ -2106,14 +2389,90 @@
             LogFilter,
             super().create_filter(
                 argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, address=address, topics=topics
             ),
         )
 
 
+class HyperdriveFactoryDeployerCoordinatorManagerUpdatedContractEvent(ContractEvent):
+    """ContractEvent for DeployerCoordinatorManagerUpdated."""
+
+    # super() get_logs and create_filter methods are generic, while our version adds values & types
+    # pylint: disable=arguments-differ
+
+    # @combomethod destroys return types, so we are redefining functions as both class and instance
+    # pylint: disable=function-redefined
+
+    # pylint: disable=useless-parent-delegation
+    def __init__(self, *argument_names: tuple[str]) -> None:
+        super().__init__(*argument_names)
+
+    def get_logs(  # type: ignore
+        self: "HyperdriveFactoryDeployerCoordinatorManagerUpdatedContractEvent",
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier | None = None,
+        block_hash: HexBytes | None = None,
+    ) -> Iterable[EventData]:
+        return cast(
+            Iterable[EventData],
+            super().get_logs(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, block_hash=block_hash
+            ),
+        )
+
+    @classmethod
+    def get_logs(  # type: ignore
+        cls: Type["HyperdriveFactoryDeployerCoordinatorManagerUpdatedContractEvent"],
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier | None = None,
+        block_hash: HexBytes | None = None,
+    ) -> Iterable[EventData]:
+        return cast(
+            Iterable[EventData],
+            super().get_logs(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, block_hash=block_hash
+            ),
+        )
+
+    def create_filter(  # type: ignore
+        self: "HyperdriveFactoryDeployerCoordinatorManagerUpdatedContractEvent",
+        *,  # PEP 3102
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier = "latest",
+        address: ChecksumAddress | None = None,
+        topics: Sequence[Any] | None = None,
+    ) -> LogFilter:
+        return cast(
+            LogFilter,
+            super().create_filter(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, address=address, topics=topics
+            ),
+        )
+
+    @classmethod
+    def create_filter(  # type: ignore
+        cls: Type["HyperdriveFactoryDeployerCoordinatorManagerUpdatedContractEvent"],
+        *,  # PEP 3102
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier = "latest",
+        address: ChecksumAddress | None = None,
+        topics: Sequence[Any] | None = None,
+    ) -> LogFilter:
+        return cast(
+            LogFilter,
+            super().create_filter(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, address=address, topics=topics
+            ),
+        )
+
+
 class HyperdriveFactoryDeployerCoordinatorRemovedContractEvent(ContractEvent):
     """ContractEvent for DeployerCoordinatorRemoved."""
 
     # super() get_logs and create_filter methods are generic, while our version adds values & types
     # pylint: disable=arguments-differ
 
     # @combomethod destroys return types, so we are redefining functions as both class and instance
@@ -2638,14 +2997,90 @@
             LogFilter,
             super().create_filter(
                 argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, address=address, topics=topics
             ),
         )
 
 
+class HyperdriveFactoryMaxCircuitBreakerDeltaUpdatedContractEvent(ContractEvent):
+    """ContractEvent for MaxCircuitBreakerDeltaUpdated."""
+
+    # super() get_logs and create_filter methods are generic, while our version adds values & types
+    # pylint: disable=arguments-differ
+
+    # @combomethod destroys return types, so we are redefining functions as both class and instance
+    # pylint: disable=function-redefined
+
+    # pylint: disable=useless-parent-delegation
+    def __init__(self, *argument_names: tuple[str]) -> None:
+        super().__init__(*argument_names)
+
+    def get_logs(  # type: ignore
+        self: "HyperdriveFactoryMaxCircuitBreakerDeltaUpdatedContractEvent",
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier | None = None,
+        block_hash: HexBytes | None = None,
+    ) -> Iterable[EventData]:
+        return cast(
+            Iterable[EventData],
+            super().get_logs(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, block_hash=block_hash
+            ),
+        )
+
+    @classmethod
+    def get_logs(  # type: ignore
+        cls: Type["HyperdriveFactoryMaxCircuitBreakerDeltaUpdatedContractEvent"],
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier | None = None,
+        block_hash: HexBytes | None = None,
+    ) -> Iterable[EventData]:
+        return cast(
+            Iterable[EventData],
+            super().get_logs(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, block_hash=block_hash
+            ),
+        )
+
+    def create_filter(  # type: ignore
+        self: "HyperdriveFactoryMaxCircuitBreakerDeltaUpdatedContractEvent",
+        *,  # PEP 3102
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier = "latest",
+        address: ChecksumAddress | None = None,
+        topics: Sequence[Any] | None = None,
+    ) -> LogFilter:
+        return cast(
+            LogFilter,
+            super().create_filter(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, address=address, topics=topics
+            ),
+        )
+
+    @classmethod
+    def create_filter(  # type: ignore
+        cls: Type["HyperdriveFactoryMaxCircuitBreakerDeltaUpdatedContractEvent"],
+        *,  # PEP 3102
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier = "latest",
+        address: ChecksumAddress | None = None,
+        topics: Sequence[Any] | None = None,
+    ) -> LogFilter:
+        return cast(
+            LogFilter,
+            super().create_filter(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, address=address, topics=topics
+            ),
+        )
+
+
 class HyperdriveFactoryMaxFeesUpdatedContractEvent(ContractEvent):
     """ContractEvent for MaxFeesUpdated."""
 
     # super() get_logs and create_filter methods are generic, while our version adds values & types
     # pylint: disable=arguments-differ
 
     # @combomethod destroys return types, so we are redefining functions as both class and instance
@@ -3018,14 +3453,90 @@
             LogFilter,
             super().create_filter(
                 argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, address=address, topics=topics
             ),
         )
 
 
+class HyperdriveFactoryMinCircuitBreakerDeltaUpdatedContractEvent(ContractEvent):
+    """ContractEvent for MinCircuitBreakerDeltaUpdated."""
+
+    # super() get_logs and create_filter methods are generic, while our version adds values & types
+    # pylint: disable=arguments-differ
+
+    # @combomethod destroys return types, so we are redefining functions as both class and instance
+    # pylint: disable=function-redefined
+
+    # pylint: disable=useless-parent-delegation
+    def __init__(self, *argument_names: tuple[str]) -> None:
+        super().__init__(*argument_names)
+
+    def get_logs(  # type: ignore
+        self: "HyperdriveFactoryMinCircuitBreakerDeltaUpdatedContractEvent",
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier | None = None,
+        block_hash: HexBytes | None = None,
+    ) -> Iterable[EventData]:
+        return cast(
+            Iterable[EventData],
+            super().get_logs(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, block_hash=block_hash
+            ),
+        )
+
+    @classmethod
+    def get_logs(  # type: ignore
+        cls: Type["HyperdriveFactoryMinCircuitBreakerDeltaUpdatedContractEvent"],
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier | None = None,
+        block_hash: HexBytes | None = None,
+    ) -> Iterable[EventData]:
+        return cast(
+            Iterable[EventData],
+            super().get_logs(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, block_hash=block_hash
+            ),
+        )
+
+    def create_filter(  # type: ignore
+        self: "HyperdriveFactoryMinCircuitBreakerDeltaUpdatedContractEvent",
+        *,  # PEP 3102
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier = "latest",
+        address: ChecksumAddress | None = None,
+        topics: Sequence[Any] | None = None,
+    ) -> LogFilter:
+        return cast(
+            LogFilter,
+            super().create_filter(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, address=address, topics=topics
+            ),
+        )
+
+    @classmethod
+    def create_filter(  # type: ignore
+        cls: Type["HyperdriveFactoryMinCircuitBreakerDeltaUpdatedContractEvent"],
+        *,  # PEP 3102
+        argument_filters: dict[str, Any] | None = None,
+        fromBlock: BlockIdentifier | None = None,
+        toBlock: BlockIdentifier = "latest",
+        address: ChecksumAddress | None = None,
+        topics: Sequence[Any] | None = None,
+    ) -> LogFilter:
+        return cast(
+            LogFilter,
+            super().create_filter(
+                argument_filters=argument_filters, fromBlock=fromBlock, toBlock=toBlock, address=address, topics=topics
+            ),
+        )
+
+
 class HyperdriveFactoryMinFeesUpdatedContractEvent(ContractEvent):
     """ContractEvent for MinFeesUpdated."""
 
     # super() get_logs and create_filter methods are generic, while our version adds values & types
     # pylint: disable=arguments-differ
 
     # @combomethod destroys return types, so we are redefining functions as both class and instance
@@ -3409,38 +3920,44 @@
 
     DefaultPausersUpdated: HyperdriveFactoryDefaultPausersUpdatedContractEvent
 
     Deployed: HyperdriveFactoryDeployedContractEvent
 
     DeployerCoordinatorAdded: HyperdriveFactoryDeployerCoordinatorAddedContractEvent
 
+    DeployerCoordinatorManagerUpdated: HyperdriveFactoryDeployerCoordinatorManagerUpdatedContractEvent
+
     DeployerCoordinatorRemoved: HyperdriveFactoryDeployerCoordinatorRemovedContractEvent
 
     FeeCollectorUpdated: HyperdriveFactoryFeeCollectorUpdatedContractEvent
 
     GovernanceUpdated: HyperdriveFactoryGovernanceUpdatedContractEvent
 
     HyperdriveGovernanceUpdated: HyperdriveFactoryHyperdriveGovernanceUpdatedContractEvent
 
     LinkerCodeHashUpdated: HyperdriveFactoryLinkerCodeHashUpdatedContractEvent
 
     LinkerFactoryUpdated: HyperdriveFactoryLinkerFactoryUpdatedContractEvent
 
     MaxCheckpointDurationUpdated: HyperdriveFactoryMaxCheckpointDurationUpdatedContractEvent
 
+    MaxCircuitBreakerDeltaUpdated: HyperdriveFactoryMaxCircuitBreakerDeltaUpdatedContractEvent
+
     MaxFeesUpdated: HyperdriveFactoryMaxFeesUpdatedContractEvent
 
     MaxFixedAPRUpdated: HyperdriveFactoryMaxFixedAPRUpdatedContractEvent
 
     MaxPositionDurationUpdated: HyperdriveFactoryMaxPositionDurationUpdatedContractEvent
 
     MaxTimeStretchAPRUpdated: HyperdriveFactoryMaxTimeStretchAPRUpdatedContractEvent
 
     MinCheckpointDurationUpdated: HyperdriveFactoryMinCheckpointDurationUpdatedContractEvent
 
+    MinCircuitBreakerDeltaUpdated: HyperdriveFactoryMinCircuitBreakerDeltaUpdatedContractEvent
+
     MinFeesUpdated: HyperdriveFactoryMinFeesUpdatedContractEvent
 
     MinFixedAPRUpdated: HyperdriveFactoryMinFixedAPRUpdatedContractEvent
 
     MinPositionDurationUpdated: HyperdriveFactoryMinPositionDurationUpdatedContractEvent
 
     MinTimeStretchAPRUpdated: HyperdriveFactoryMinTimeStretchAPRUpdatedContractEvent
@@ -3482,14 +3999,24 @@
                 "DeployerCoordinatorAdded",
                 w3=w3,
                 contract_abi=abi,
                 address=address,
                 event_name="DeployerCoordinatorAdded",
             ),
         )
+        self.DeployerCoordinatorManagerUpdated = cast(
+            HyperdriveFactoryDeployerCoordinatorManagerUpdatedContractEvent,
+            HyperdriveFactoryDeployerCoordinatorManagerUpdatedContractEvent.factory(
+                "DeployerCoordinatorManagerUpdated",
+                w3=w3,
+                contract_abi=abi,
+                address=address,
+                event_name="DeployerCoordinatorManagerUpdated",
+            ),
+        )
         self.DeployerCoordinatorRemoved = cast(
             HyperdriveFactoryDeployerCoordinatorRemovedContractEvent,
             HyperdriveFactoryDeployerCoordinatorRemovedContractEvent.factory(
                 "DeployerCoordinatorRemoved",
                 w3=w3,
                 contract_abi=abi,
                 address=address,
@@ -3536,14 +4063,24 @@
                 "MaxCheckpointDurationUpdated",
                 w3=w3,
                 contract_abi=abi,
                 address=address,
                 event_name="MaxCheckpointDurationUpdated",
             ),
         )
+        self.MaxCircuitBreakerDeltaUpdated = cast(
+            HyperdriveFactoryMaxCircuitBreakerDeltaUpdatedContractEvent,
+            HyperdriveFactoryMaxCircuitBreakerDeltaUpdatedContractEvent.factory(
+                "MaxCircuitBreakerDeltaUpdated",
+                w3=w3,
+                contract_abi=abi,
+                address=address,
+                event_name="MaxCircuitBreakerDeltaUpdated",
+            ),
+        )
         self.MaxFeesUpdated = cast(
             HyperdriveFactoryMaxFeesUpdatedContractEvent,
             HyperdriveFactoryMaxFeesUpdatedContractEvent.factory(
                 "MaxFeesUpdated", w3=w3, contract_abi=abi, address=address, event_name="MaxFeesUpdated"
             ),
         )
         self.MaxFixedAPRUpdated = cast(
@@ -3578,14 +4115,24 @@
                 "MinCheckpointDurationUpdated",
                 w3=w3,
                 contract_abi=abi,
                 address=address,
                 event_name="MinCheckpointDurationUpdated",
             ),
         )
+        self.MinCircuitBreakerDeltaUpdated = cast(
+            HyperdriveFactoryMinCircuitBreakerDeltaUpdatedContractEvent,
+            HyperdriveFactoryMinCircuitBreakerDeltaUpdatedContractEvent.factory(
+                "MinCircuitBreakerDeltaUpdated",
+                w3=w3,
+                contract_abi=abi,
+                address=address,
+                event_name="MinCircuitBreakerDeltaUpdated",
+            ),
+        )
         self.MinFeesUpdated = cast(
             HyperdriveFactoryMinFeesUpdatedContractEvent,
             HyperdriveFactoryMinFeesUpdatedContractEvent.factory(
                 "MinFeesUpdated", w3=w3, contract_abi=abi, address=address, event_name="MinFeesUpdated"
             ),
         )
         self.MinFixedAPRUpdated = cast(
@@ -3960,14 +4507,71 @@
         )
         types = get_abi_input_types(error_abi)
         abi_codec = ABICodec(default_registry)
         decoded = abi_codec.decode(types, data)
         return decoded
 
 
+class HyperdriveFactoryInvalidCircuitBreakerDeltaContractError:
+    """ContractError for InvalidCircuitBreakerDelta."""
+
+    # @combomethod destroys return types, so we are redefining functions as both class and instance
+    # pylint: disable=function-redefined
+
+    # 4 byte error selector
+    selector: str
+    # error signature, i.e. CustomError(uint256,bool)
+    signature: str
+
+    # pylint: disable=useless-parent-delegation
+    def __init__(
+        self: "HyperdriveFactoryInvalidCircuitBreakerDeltaContractError",
+    ) -> None:
+        self.selector = "0xef9bc65f"
+        self.signature = "InvalidCircuitBreakerDelta()"
+
+    def decode_error_data(  # type: ignore
+        self: "HyperdriveFactoryInvalidCircuitBreakerDeltaContractError",
+        data: HexBytes,
+        # TODO: instead of returning a tuple, return a dataclass with the input names and types just like we do for functions
+    ) -> tuple[Any, ...]:
+        """Decodes error data returns from a smart contract."""
+        error_abi = cast(
+            ABIFunction,
+            [
+                item
+                for item in hyperdrivefactory_abi
+                if item.get("name") == "InvalidCircuitBreakerDelta" and item.get("type") == "error"
+            ][0],
+        )
+        types = get_abi_input_types(error_abi)
+        abi_codec = ABICodec(default_registry)
+        decoded = abi_codec.decode(types, data)
+        return decoded
+
+    @classmethod
+    def decode_error_data(  # type: ignore
+        cls: Type["HyperdriveFactoryInvalidCircuitBreakerDeltaContractError"],
+        data: HexBytes,
+    ) -> tuple[Any, ...]:
+        """Decodes error data returns from a smart contract."""
+        error_abi = cast(
+            ABIFunction,
+            [
+                item
+                for item in hyperdrivefactory_abi
+                if item.get("name") == "InvalidCircuitBreakerDelta" and item.get("type") == "error"
+            ][0],
+        )
+        types = get_abi_input_types(error_abi)
+        abi_codec = ABICodec(default_registry)
+        decoded = abi_codec.decode(types, data)
+        return decoded
+
+
 class HyperdriveFactoryInvalidDeployConfigContractError:
     """ContractError for InvalidDeployConfig."""
 
     # @combomethod destroys return types, so we are redefining functions as both class and instance
     # pylint: disable=function-redefined
 
     # 4 byte error selector
@@ -4302,14 +4906,71 @@
         )
         types = get_abi_input_types(error_abi)
         abi_codec = ABICodec(default_registry)
         decoded = abi_codec.decode(types, data)
         return decoded
 
 
+class HyperdriveFactoryInvalidMaxCircuitBreakerDeltaContractError:
+    """ContractError for InvalidMaxCircuitBreakerDelta."""
+
+    # @combomethod destroys return types, so we are redefining functions as both class and instance
+    # pylint: disable=function-redefined
+
+    # 4 byte error selector
+    selector: str
+    # error signature, i.e. CustomError(uint256,bool)
+    signature: str
+
+    # pylint: disable=useless-parent-delegation
+    def __init__(
+        self: "HyperdriveFactoryInvalidMaxCircuitBreakerDeltaContractError",
+    ) -> None:
+        self.selector = "0xfdb80c26"
+        self.signature = "InvalidMaxCircuitBreakerDelta()"
+
+    def decode_error_data(  # type: ignore
+        self: "HyperdriveFactoryInvalidMaxCircuitBreakerDeltaContractError",
+        data: HexBytes,
+        # TODO: instead of returning a tuple, return a dataclass with the input names and types just like we do for functions
+    ) -> tuple[Any, ...]:
+        """Decodes error data returns from a smart contract."""
+        error_abi = cast(
+            ABIFunction,
+            [
+                item
+                for item in hyperdrivefactory_abi
+                if item.get("name") == "InvalidMaxCircuitBreakerDelta" and item.get("type") == "error"
+            ][0],
+        )
+        types = get_abi_input_types(error_abi)
+        abi_codec = ABICodec(default_registry)
+        decoded = abi_codec.decode(types, data)
+        return decoded
+
+    @classmethod
+    def decode_error_data(  # type: ignore
+        cls: Type["HyperdriveFactoryInvalidMaxCircuitBreakerDeltaContractError"],
+        data: HexBytes,
+    ) -> tuple[Any, ...]:
+        """Decodes error data returns from a smart contract."""
+        error_abi = cast(
+            ABIFunction,
+            [
+                item
+                for item in hyperdrivefactory_abi
+                if item.get("name") == "InvalidMaxCircuitBreakerDelta" and item.get("type") == "error"
+            ][0],
+        )
+        types = get_abi_input_types(error_abi)
+        abi_codec = ABICodec(default_registry)
+        decoded = abi_codec.decode(types, data)
+        return decoded
+
+
 class HyperdriveFactoryInvalidMaxFeesContractError:
     """ContractError for InvalidMaxFees."""
 
     # @combomethod destroys return types, so we are redefining functions as both class and instance
     # pylint: disable=function-redefined
 
     # 4 byte error selector
@@ -4587,14 +5248,71 @@
         )
         types = get_abi_input_types(error_abi)
         abi_codec = ABICodec(default_registry)
         decoded = abi_codec.decode(types, data)
         return decoded
 
 
+class HyperdriveFactoryInvalidMinCircuitBreakerDeltaContractError:
+    """ContractError for InvalidMinCircuitBreakerDelta."""
+
+    # @combomethod destroys return types, so we are redefining functions as both class and instance
+    # pylint: disable=function-redefined
+
+    # 4 byte error selector
+    selector: str
+    # error signature, i.e. CustomError(uint256,bool)
+    signature: str
+
+    # pylint: disable=useless-parent-delegation
+    def __init__(
+        self: "HyperdriveFactoryInvalidMinCircuitBreakerDeltaContractError",
+    ) -> None:
+        self.selector = "0x28a2d9a9"
+        self.signature = "InvalidMinCircuitBreakerDelta()"
+
+    def decode_error_data(  # type: ignore
+        self: "HyperdriveFactoryInvalidMinCircuitBreakerDeltaContractError",
+        data: HexBytes,
+        # TODO: instead of returning a tuple, return a dataclass with the input names and types just like we do for functions
+    ) -> tuple[Any, ...]:
+        """Decodes error data returns from a smart contract."""
+        error_abi = cast(
+            ABIFunction,
+            [
+                item
+                for item in hyperdrivefactory_abi
+                if item.get("name") == "InvalidMinCircuitBreakerDelta" and item.get("type") == "error"
+            ][0],
+        )
+        types = get_abi_input_types(error_abi)
+        abi_codec = ABICodec(default_registry)
+        decoded = abi_codec.decode(types, data)
+        return decoded
+
+    @classmethod
+    def decode_error_data(  # type: ignore
+        cls: Type["HyperdriveFactoryInvalidMinCircuitBreakerDeltaContractError"],
+        data: HexBytes,
+    ) -> tuple[Any, ...]:
+        """Decodes error data returns from a smart contract."""
+        error_abi = cast(
+            ABIFunction,
+            [
+                item
+                for item in hyperdrivefactory_abi
+                if item.get("name") == "InvalidMinCircuitBreakerDelta" and item.get("type") == "error"
+            ][0],
+        )
+        types = get_abi_input_types(error_abi)
+        abi_codec = ABICodec(default_registry)
+        decoded = abi_codec.decode(types, data)
+        return decoded
+
+
 class HyperdriveFactoryInvalidMinFeesContractError:
     """ContractError for InvalidMinFees."""
 
     # @combomethod destroys return types, so we are redefining functions as both class and instance
     # pylint: disable=function-redefined
 
     # 4 byte error selector
@@ -5229,36 +5947,42 @@
 
     EndIndexTooLarge: HyperdriveFactoryEndIndexTooLargeContractError
 
     InvalidCheckpointDuration: HyperdriveFactoryInvalidCheckpointDurationContractError
 
     InvalidCheckpointDurationResolution: HyperdriveFactoryInvalidCheckpointDurationResolutionContractError
 
+    InvalidCircuitBreakerDelta: HyperdriveFactoryInvalidCircuitBreakerDeltaContractError
+
     InvalidDeployConfig: HyperdriveFactoryInvalidDeployConfigContractError
 
     InvalidDeployerCoordinator: HyperdriveFactoryInvalidDeployerCoordinatorContractError
 
     InvalidFees: HyperdriveFactoryInvalidFeesContractError
 
     InvalidFixedAPR: HyperdriveFactoryInvalidFixedAPRContractError
 
     InvalidIndexes: HyperdriveFactoryInvalidIndexesContractError
 
     InvalidMaxCheckpointDuration: HyperdriveFactoryInvalidMaxCheckpointDurationContractError
 
+    InvalidMaxCircuitBreakerDelta: HyperdriveFactoryInvalidMaxCircuitBreakerDeltaContractError
+
     InvalidMaxFees: HyperdriveFactoryInvalidMaxFeesContractError
 
     InvalidMaxFixedAPR: HyperdriveFactoryInvalidMaxFixedAPRContractError
 
     InvalidMaxPositionDuration: HyperdriveFactoryInvalidMaxPositionDurationContractError
 
     InvalidMaxTimeStretchAPR: HyperdriveFactoryInvalidMaxTimeStretchAPRContractError
 
     InvalidMinCheckpointDuration: HyperdriveFactoryInvalidMinCheckpointDurationContractError
 
+    InvalidMinCircuitBreakerDelta: HyperdriveFactoryInvalidMinCircuitBreakerDeltaContractError
+
     InvalidMinFees: HyperdriveFactoryInvalidMinFeesContractError
 
     InvalidMinFixedAPR: HyperdriveFactoryInvalidMinFixedAPRContractError
 
     InvalidMinPositionDuration: HyperdriveFactoryInvalidMinPositionDurationContractError
 
     InvalidMinTimeStretchAPR: HyperdriveFactoryInvalidMinTimeStretchAPRContractError
@@ -5282,25 +6006,28 @@
     ) -> None:
         self.DeployerCoordinatorAlreadyAdded = HyperdriveFactoryDeployerCoordinatorAlreadyAddedContractError()
         self.DeployerCoordinatorIndexMismatch = HyperdriveFactoryDeployerCoordinatorIndexMismatchContractError()
         self.DeployerCoordinatorNotAdded = HyperdriveFactoryDeployerCoordinatorNotAddedContractError()
         self.EndIndexTooLarge = HyperdriveFactoryEndIndexTooLargeContractError()
         self.InvalidCheckpointDuration = HyperdriveFactoryInvalidCheckpointDurationContractError()
         self.InvalidCheckpointDurationResolution = HyperdriveFactoryInvalidCheckpointDurationResolutionContractError()
+        self.InvalidCircuitBreakerDelta = HyperdriveFactoryInvalidCircuitBreakerDeltaContractError()
         self.InvalidDeployConfig = HyperdriveFactoryInvalidDeployConfigContractError()
         self.InvalidDeployerCoordinator = HyperdriveFactoryInvalidDeployerCoordinatorContractError()
         self.InvalidFees = HyperdriveFactoryInvalidFeesContractError()
         self.InvalidFixedAPR = HyperdriveFactoryInvalidFixedAPRContractError()
         self.InvalidIndexes = HyperdriveFactoryInvalidIndexesContractError()
         self.InvalidMaxCheckpointDuration = HyperdriveFactoryInvalidMaxCheckpointDurationContractError()
+        self.InvalidMaxCircuitBreakerDelta = HyperdriveFactoryInvalidMaxCircuitBreakerDeltaContractError()
         self.InvalidMaxFees = HyperdriveFactoryInvalidMaxFeesContractError()
         self.InvalidMaxFixedAPR = HyperdriveFactoryInvalidMaxFixedAPRContractError()
         self.InvalidMaxPositionDuration = HyperdriveFactoryInvalidMaxPositionDurationContractError()
         self.InvalidMaxTimeStretchAPR = HyperdriveFactoryInvalidMaxTimeStretchAPRContractError()
         self.InvalidMinCheckpointDuration = HyperdriveFactoryInvalidMinCheckpointDurationContractError()
+        self.InvalidMinCircuitBreakerDelta = HyperdriveFactoryInvalidMinCircuitBreakerDeltaContractError()
         self.InvalidMinFees = HyperdriveFactoryInvalidMinFeesContractError()
         self.InvalidMinFixedAPR = HyperdriveFactoryInvalidMinFixedAPRContractError()
         self.InvalidMinPositionDuration = HyperdriveFactoryInvalidMinPositionDurationContractError()
         self.InvalidMinTimeStretchAPR = HyperdriveFactoryInvalidMinTimeStretchAPRContractError()
         self.InvalidPositionDuration = HyperdriveFactoryInvalidPositionDurationContractError()
         self.InvalidTimeStretchAPR = HyperdriveFactoryInvalidTimeStretchAPRContractError()
         self.LnInvalidInput = HyperdriveFactoryLnInvalidInputContractError()
@@ -5312,25 +6039,28 @@
         self._all = [
             self.DeployerCoordinatorAlreadyAdded,
             self.DeployerCoordinatorIndexMismatch,
             self.DeployerCoordinatorNotAdded,
             self.EndIndexTooLarge,
             self.InvalidCheckpointDuration,
             self.InvalidCheckpointDurationResolution,
+            self.InvalidCircuitBreakerDelta,
             self.InvalidDeployConfig,
             self.InvalidDeployerCoordinator,
             self.InvalidFees,
             self.InvalidFixedAPR,
             self.InvalidIndexes,
             self.InvalidMaxCheckpointDuration,
+            self.InvalidMaxCircuitBreakerDelta,
             self.InvalidMaxFees,
             self.InvalidMaxFixedAPR,
             self.InvalidMaxPositionDuration,
             self.InvalidMaxTimeStretchAPR,
             self.InvalidMinCheckpointDuration,
+            self.InvalidMinCircuitBreakerDelta,
             self.InvalidMinFees,
             self.InvalidMinFixedAPR,
             self.InvalidMinPositionDuration,
             self.InvalidMinTimeStretchAPR,
             self.InvalidPositionDuration,
             self.InvalidTimeStretchAPR,
             self.LnInvalidInput,
@@ -5358,23 +6088,26 @@
             "inputs": [
                 {
                     "name": "_factoryConfig",
                     "type": "tuple",
                     "internalType": "struct HyperdriveFactory.FactoryConfig",
                     "components": [
                         {"name": "governance", "type": "address", "internalType": "address"},
+                        {"name": "deployerCoordinatorManager", "type": "address", "internalType": "address"},
                         {"name": "hyperdriveGovernance", "type": "address", "internalType": "address"},
                         {"name": "defaultPausers", "type": "address[]", "internalType": "address[]"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {"name": "checkpointDurationResolution", "type": "uint256", "internalType": "uint256"},
                         {"name": "minCheckpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "maxCheckpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "minPositionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "maxPositionDuration", "type": "uint256", "internalType": "uint256"},
+                        {"name": "minCircuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
+                        {"name": "maxCircuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "minFixedAPR", "type": "uint256", "internalType": "uint256"},
                         {"name": "maxFixedAPR", "type": "uint256", "internalType": "uint256"},
                         {"name": "minTimeStretchAPR", "type": "uint256", "internalType": "uint256"},
                         {"name": "maxTimeStretchAPR", "type": "uint256", "internalType": "uint256"},
                         {
                             "name": "minFees",
                             "type": "tuple",
@@ -5396,15 +6129,16 @@
                                 {"name": "governanceLP", "type": "uint256", "internalType": "uint256"},
                                 {"name": "governanceZombie", "type": "uint256", "internalType": "uint256"},
                             ],
                         },
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                     ],
-                }
+                },
+                {"name": "_name", "type": "string", "internalType": "string"},
             ],
             "stateMutability": "nonpayable",
         },
         {"type": "receive", "stateMutability": "payable"},
         {
             "type": "function",
             "name": "addDeployerCoordinator",
@@ -5439,14 +6173,15 @@
                     "components": [
                         {"name": "baseToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "vaultSharesToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "minimumShareReserves", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumTransactionAmount", "type": "uint256", "internalType": "uint256"},
+                        {"name": "circuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "positionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "checkpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "timeStretch", "type": "uint256", "internalType": "uint256"},
                         {"name": "governance", "type": "address", "internalType": "address"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {
@@ -5494,14 +6229,15 @@
                     "components": [
                         {"name": "baseToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "vaultSharesToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "minimumShareReserves", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumTransactionAmount", "type": "uint256", "internalType": "uint256"},
+                        {"name": "circuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "positionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "checkpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "timeStretch", "type": "uint256", "internalType": "uint256"},
                         {"name": "governance", "type": "address", "internalType": "address"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {
@@ -5524,14 +6260,21 @@
                 {"name": "_salt", "type": "bytes32", "internalType": "bytes32"},
             ],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "nonpayable",
         },
         {
             "type": "function",
+            "name": "deployerCoordinatorManager",
+            "inputs": [],
+            "outputs": [{"name": "", "type": "address", "internalType": "address"}],
+            "stateMutability": "view",
+        },
+        {
+            "type": "function",
             "name": "feeCollector",
             "inputs": [],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
@@ -5635,14 +6378,21 @@
             "name": "maxCheckpointDuration",
             "inputs": [],
             "outputs": [{"name": "", "type": "uint256", "internalType": "uint256"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
+            "name": "maxCircuitBreakerDelta",
+            "inputs": [],
+            "outputs": [{"name": "", "type": "uint256", "internalType": "uint256"}],
+            "stateMutability": "view",
+        },
+        {
+            "type": "function",
             "name": "maxFees",
             "inputs": [],
             "outputs": [
                 {
                     "name": "",
                     "type": "tuple",
                     "internalType": "struct IHyperdrive.Fees",
@@ -5682,14 +6432,21 @@
             "name": "minCheckpointDuration",
             "inputs": [],
             "outputs": [{"name": "", "type": "uint256", "internalType": "uint256"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
+            "name": "minCircuitBreakerDelta",
+            "inputs": [],
+            "outputs": [{"name": "", "type": "uint256", "internalType": "uint256"}],
+            "stateMutability": "view",
+        },
+        {
+            "type": "function",
             "name": "minFees",
             "inputs": [],
             "outputs": [
                 {
                     "name": "",
                     "type": "tuple",
                     "internalType": "struct IHyperdrive.Fees",
@@ -5722,14 +6479,21 @@
             "name": "minTimeStretchAPR",
             "inputs": [],
             "outputs": [{"name": "", "type": "uint256", "internalType": "uint256"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
+            "name": "name",
+            "inputs": [],
+            "outputs": [{"name": "", "type": "string", "internalType": "string"}],
+            "stateMutability": "view",
+        },
+        {
+            "type": "function",
             "name": "removeDeployerCoordinator",
             "inputs": [
                 {"name": "_deployerCoordinator", "type": "address", "internalType": "address"},
                 {"name": "_index", "type": "uint256", "internalType": "uint256"},
             ],
             "outputs": [],
             "stateMutability": "nonpayable",
@@ -5753,14 +6517,21 @@
             "name": "updateDefaultPausers",
             "inputs": [{"name": "_defaultPausers_", "type": "address[]", "internalType": "address[]"}],
             "outputs": [],
             "stateMutability": "nonpayable",
         },
         {
             "type": "function",
+            "name": "updateDeployerCoordinatorManager",
+            "inputs": [{"name": "_deployerCoordinatorManager", "type": "address", "internalType": "address"}],
+            "outputs": [],
+            "stateMutability": "nonpayable",
+        },
+        {
+            "type": "function",
             "name": "updateFeeCollector",
             "inputs": [{"name": "_feeCollector", "type": "address", "internalType": "address"}],
             "outputs": [],
             "stateMutability": "nonpayable",
         },
         {
             "type": "function",
@@ -5795,14 +6566,21 @@
             "name": "updateMaxCheckpointDuration",
             "inputs": [{"name": "_maxCheckpointDuration", "type": "uint256", "internalType": "uint256"}],
             "outputs": [],
             "stateMutability": "nonpayable",
         },
         {
             "type": "function",
+            "name": "updateMaxCircuitBreakerDelta",
+            "inputs": [{"name": "_maxCircuitBreakerDelta", "type": "uint256", "internalType": "uint256"}],
+            "outputs": [],
+            "stateMutability": "nonpayable",
+        },
+        {
+            "type": "function",
             "name": "updateMaxFees",
             "inputs": [
                 {
                     "name": "__maxFees",
                     "type": "tuple",
                     "internalType": "struct IHyperdrive.Fees",
                     "components": [
@@ -5842,14 +6620,21 @@
             "name": "updateMinCheckpointDuration",
             "inputs": [{"name": "_minCheckpointDuration", "type": "uint256", "internalType": "uint256"}],
             "outputs": [],
             "stateMutability": "nonpayable",
         },
         {
             "type": "function",
+            "name": "updateMinCircuitBreakerDelta",
+            "inputs": [{"name": "_minCircuitBreakerDelta", "type": "uint256", "internalType": "uint256"}],
+            "outputs": [],
+            "stateMutability": "nonpayable",
+        },
+        {
+            "type": "function",
             "name": "updateMinFees",
             "inputs": [
                 {
                     "name": "__minFees",
                     "type": "tuple",
                     "internalType": "struct IHyperdrive.Fees",
                     "components": [
@@ -5888,14 +6673,21 @@
             "type": "function",
             "name": "updateSweepCollector",
             "inputs": [{"name": "_sweepCollector", "type": "address", "internalType": "address"}],
             "outputs": [],
             "stateMutability": "nonpayable",
         },
         {
+            "type": "function",
+            "name": "version",
+            "inputs": [],
+            "outputs": [{"name": "", "type": "string", "internalType": "string"}],
+            "stateMutability": "view",
+        },
+        {
             "type": "event",
             "name": "CheckpointDurationResolutionUpdated",
             "inputs": [
                 {
                     "name": "newCheckpointDurationResolution",
                     "type": "uint256",
                     "indexed": False,
@@ -5926,14 +6718,15 @@
                     "components": [
                         {"name": "baseToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "vaultSharesToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "minimumShareReserves", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumTransactionAmount", "type": "uint256", "internalType": "uint256"},
+                        {"name": "circuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "positionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "checkpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "timeStretch", "type": "uint256", "internalType": "uint256"},
                         {"name": "governance", "type": "address", "internalType": "address"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {
@@ -5957,14 +6750,22 @@
             "type": "event",
             "name": "DeployerCoordinatorAdded",
             "inputs": [{"name": "deployerCoordinator", "type": "address", "indexed": True, "internalType": "address"}],
             "anonymous": False,
         },
         {
             "type": "event",
+            "name": "DeployerCoordinatorManagerUpdated",
+            "inputs": [
+                {"name": "deployerCoordinatorManager", "type": "address", "indexed": True, "internalType": "address"}
+            ],
+            "anonymous": False,
+        },
+        {
+            "type": "event",
             "name": "DeployerCoordinatorRemoved",
             "inputs": [{"name": "deployerCoordinator", "type": "address", "indexed": True, "internalType": "address"}],
             "anonymous": False,
         },
         {
             "type": "event",
             "name": "FeeCollectorUpdated",
@@ -6001,14 +6802,22 @@
             "inputs": [
                 {"name": "newMaxCheckpointDuration", "type": "uint256", "indexed": False, "internalType": "uint256"}
             ],
             "anonymous": False,
         },
         {
             "type": "event",
+            "name": "MaxCircuitBreakerDeltaUpdated",
+            "inputs": [
+                {"name": "newMaxCircuitBreakerDelta", "type": "uint256", "indexed": False, "internalType": "uint256"}
+            ],
+            "anonymous": False,
+        },
+        {
+            "type": "event",
             "name": "MaxFeesUpdated",
             "inputs": [
                 {
                     "name": "newMaxFees",
                     "type": "tuple",
                     "indexed": False,
                     "internalType": "struct IHyperdrive.Fees",
@@ -6050,14 +6859,22 @@
             "inputs": [
                 {"name": "newMinCheckpointDuration", "type": "uint256", "indexed": False, "internalType": "uint256"}
             ],
             "anonymous": False,
         },
         {
             "type": "event",
+            "name": "MinCircuitBreakerDeltaUpdated",
+            "inputs": [
+                {"name": "newMinCircuitBreakerDelta", "type": "uint256", "indexed": False, "internalType": "uint256"}
+            ],
+            "anonymous": False,
+        },
+        {
+            "type": "event",
             "name": "MinFeesUpdated",
             "inputs": [
                 {
                     "name": "newMinFees",
                     "type": "tuple",
                     "indexed": False,
                     "internalType": "struct IHyperdrive.Fees",
@@ -6101,25 +6918,28 @@
         },
         {"type": "error", "name": "DeployerCoordinatorAlreadyAdded", "inputs": []},
         {"type": "error", "name": "DeployerCoordinatorIndexMismatch", "inputs": []},
         {"type": "error", "name": "DeployerCoordinatorNotAdded", "inputs": []},
         {"type": "error", "name": "EndIndexTooLarge", "inputs": []},
         {"type": "error", "name": "InvalidCheckpointDuration", "inputs": []},
         {"type": "error", "name": "InvalidCheckpointDurationResolution", "inputs": []},
+        {"type": "error", "name": "InvalidCircuitBreakerDelta", "inputs": []},
         {"type": "error", "name": "InvalidDeployConfig", "inputs": []},
         {"type": "error", "name": "InvalidDeployerCoordinator", "inputs": []},
         {"type": "error", "name": "InvalidFees", "inputs": []},
         {"type": "error", "name": "InvalidFixedAPR", "inputs": []},
         {"type": "error", "name": "InvalidIndexes", "inputs": []},
         {"type": "error", "name": "InvalidMaxCheckpointDuration", "inputs": []},
+        {"type": "error", "name": "InvalidMaxCircuitBreakerDelta", "inputs": []},
         {"type": "error", "name": "InvalidMaxFees", "inputs": []},
         {"type": "error", "name": "InvalidMaxFixedAPR", "inputs": []},
         {"type": "error", "name": "InvalidMaxPositionDuration", "inputs": []},
         {"type": "error", "name": "InvalidMaxTimeStretchAPR", "inputs": []},
         {"type": "error", "name": "InvalidMinCheckpointDuration", "inputs": []},
+        {"type": "error", "name": "InvalidMinCircuitBreakerDelta", "inputs": []},
         {"type": "error", "name": "InvalidMinFees", "inputs": []},
         {"type": "error", "name": "InvalidMinFixedAPR", "inputs": []},
         {"type": "error", "name": "InvalidMinPositionDuration", "inputs": []},
         {"type": "error", "name": "InvalidMinTimeStretchAPR", "inputs": []},
         {"type": "error", "name": "InvalidPositionDuration", "inputs": []},
         {"type": "error", "name": "InvalidTimeStretchAPR", "inputs": []},
         {"type": "error", "name": "LnInvalidInput", "inputs": []},
@@ -6127,23 +6947,23 @@
         {"type": "error", "name": "TransferFailed", "inputs": []},
         {"type": "error", "name": "Unauthorized", "inputs": []},
         {"type": "error", "name": "UnsafeCastToInt256", "inputs": []},
     ],
 )
 # pylint: disable=line-too-long
 hyperdrivefactory_bytecode = HexStr(
-    "0x608060405260026000553480156200001657600080fd5b50604051620036e4380380620036e48339810160408190526200003991620005e9565b8060a001518160c0015110806200006457508060a001518160c0015162000061919062000759565b15155b156200008357604051630219d66360e11b815260040160405180910390fd5b60c0810151600881905560e08201511080620000b357508060a001518160e00151620000b0919062000759565b15155b15620000d25760405163f9c0959d60e01b815260040160405180910390fd5b60e0810151600981905561010082015110806200010457508060a0015181610100015162000101919062000759565b15155b156200012357604051633007ad0160e11b815260040160405180910390fd5b610100810151600a81905561012082015110806200015657508060a0015181610120015162000153919062000759565b15155b15620001755760405163cfb699cb60e01b815260040160405180910390fd5b610120810151600b556101608101516101408201511115620001aa576040516330554de160e01b815260040160405180910390fd5b610140810151600c55610160810151600d556101a08101516101808201511115620001e8576040516383ebdfb760e01b815260040160405180910390fd5b610180810151600e556101a0810151600f556101e081015151670de0b6b3a76400001080620002275750670de0b6b3a7640000816101e0015160200151115b80620002435750670de0b6b3a7640000816101e0015160400151115b806200025f5750670de0b6b3a7640000816101e0015160600151115b156200027e5760405163161071fb60e11b815260040160405180910390fd5b6101e081015180516014819055602082015160155560408201516016556060909101516017556101c0820151511180620002c95750806101e0015160200151816101c0015160200151115b80620002e65750806101e0015160400151816101c0015160400151115b80620003035750806101e0015160600151816101c0015160600151115b1562000322576040516315b05a8f60e01b815260040160405180910390fd5b6101c081015180516010556020808201516011556040808301516012556060928301516013558351600180546001600160a01b03199081166001600160a01b03938416179091558386015160028054831691841691909117905593850151600580548616918316919091179055608085015160068054909516911617909255908201518051620003b7926018920190620003f3565b50610200810151600380546001600160a01b0319166001600160a01b0390921691909117905561022081015160045560a001516007556200077c565b8280548282559060005260206000209081019282156200044b579160200282015b828111156200044b57825182546001600160a01b0319166001600160a01b0390911617825560209092019160019091019062000414565b50620004599291506200045d565b5090565b5b808211156200045957600081556001016200045e565b634e487b7160e01b600052604160045260246000fd5b60405161024081016001600160401b0381118282101715620004b057620004b062000474565b60405290565b80516001600160a01b0381168114620004ce57600080fd5b919050565b600082601f830112620004e557600080fd5b815160206001600160401b038083111562000504576200050462000474565b8260051b604051601f19603f830116810181811084821117156200052c576200052c62000474565b6040529384528581018301938381019250878511156200054b57600080fd5b83870191505b8482101562000575576200056582620004b6565b8352918301919083019062000551565b979650505050505050565b6000608082840312156200059357600080fd5b604051608081016001600160401b0381118282101715620005b857620005b862000474565b8060405250809150825181526020830151602082015260408301516040820152606083015160608201525092915050565b600060208284031215620005fc57600080fd5b81516001600160401b03808211156200061457600080fd5b9083019061030082860312156200062a57600080fd5b620006346200048a565b6200063f83620004b6565b81526200064f60208401620004b6565b60208201526040830151828111156200066757600080fd5b6200067587828601620004d3565b6040830152506200068960608401620004b6565b60608201526200069c60808401620004b6565b608082015260a0838101519082015260c0808401519082015260e08084015190820152610100808401519082015261012080840151908201526101408084015190820152610160808401519082015261018080840151908201526101a080840151908201526101c09150620007148683850162000580565b828201526200072886610240850162000580565b6101e08201526200073d6102c08401620004b6565b6102008201526102e09290920151610220830152509392505050565b6000826200077757634e487b7160e01b600052601260045260246000fd5b500690565b612f58806200078c6000396000f3fe6080604052600436106102b25760003560e01c806399623bb111610175578063d6f50169116100dc578063e333155511610095578063eb71f66c1161006f578063eb71f66c14610854578063ec895f1114610874578063f8c09e5914610894578063fe3d5aeb146108c457600080fd5b8063e3331555146107ff578063e71f34b31461081f578063e83e34b11461083f57600080fd5b8063d6f5016914610768578063daac24da1461077e578063daf012e61461079e578063dd2b8fbb146107b4578063e0e2daaa146107d4578063e1b39c80146107ea57600080fd5b8063c17225631161012e578063c1722563146106c4578063c415b95c146106e6578063c905a4b514610706578063d0f96b921461071c578063d23d7ea314610732578063d2c35ce81461074857600080fd5b806399623bb11461060c5780639af252621461062c578063a64c90bf1461064c578063b25612631461066e578063bc30e7a11461068e578063bf9bd5cd146106ae57600080fd5b80635aa6e6751161021957806383b361e8116101d257806383b361e81461055657806385229785146105765780638627a4f0146105965780638e127cf5146105b65780638efc0986146105d657806397b0e8ce146105ec57600080fd5b80635aa6e6751461046b578063628027a31461048b5780636b44e6be146104ab5780636c8cc865146104eb5780636e95d67c146105215780636f6d5c4a1461053657600080fd5b80632facc5191161026b5780632facc519146103b1578063411c3035146103d1578063421caba8146103f157806348800760146104115780634fbfee77146104355780635720c9d51461045557600080fd5b806306902494146102e157806310780f731461031157806310d1dc3e1461033157806311e77bfe146103515780631978ebcf146103715780632885e3ac1461039157600080fd5b366102dc576002600054036102da57604051630aac75b560e31b815260040160405180910390fd5b005b600080fd5b6102f46102ef366004612841565b6108e4565b6040516001600160a01b0390911681526020015b60405180910390f35b34801561031d57600080fd5b506006546102f4906001600160a01b031681565b34801561033d57600080fd5b506102da61034c366004612970565b610cd4565b34801561035d57600080fd5b506102da61036c366004612982565b610ded565b34801561037d57600080fd5b506102da61038c366004612982565b610ec6565b34801561039d57600080fd5b506102da6103ac366004612970565b610f48565b3480156103bd57600080fd5b506102f46103cc36600461299b565b6110ae565b3480156103dd57600080fd5b506102da6103ec366004612a2f565b6111a0565b3480156103fd57600080fd5b506102da61040c366004612a5b565b611358565b34801561041d57600080fd5b50610427600f5481565b604051908152602001610308565b34801561044157600080fd5b506102da610450366004612982565b611448565b34801561046157600080fd5b5061042760085481565b34801561047757600080fd5b506001546102f4906001600160a01b031681565b34801561049757600080fd5b506102da6104a6366004612982565b6114a5565b3480156104b757600080fd5b506104db6104c6366004612a5b565b601d6020526000908152604090205460ff1681565b6040519015158152602001610308565b3480156104f757600080fd5b506102f4610506366004612a5b565b601b602052600090815260409020546001600160a01b031681565b34801561052d57600080fd5b50601c54610427565b34801561054257600080fd5b506102da610551366004612982565b611527565b34801561056257600080fd5b506102da610571366004612982565b6115cb565b34801561058257600080fd5b506102da610591366004612a5b565b61164d565b3480156105a257600080fd5b506102da6105b1366004612a5b565b6116c1565b3480156105c257600080fd5b506102da6105d1366004612982565b611735565b3480156105e257600080fd5b50610427600b5481565b3480156105f857600080fd5b506102da610607366004612982565b6117d9565b34801561061857600080fd5b506003546102f4906001600160a01b031681565b34801561063857600080fd5b506102da610647366004612a7f565b61185b565b34801561065857600080fd5b506106616118c3565b6040516103089190612af4565b34801561067a57600080fd5b506102da610689366004612a5b565b611925565b34801561069a57600080fd5b506106616106a9366004612b41565b611999565b3480156106ba57600080fd5b50610427600d5481565b3480156106d057600080fd5b506106d9611ab6565b6040516103089190612b63565b3480156106f257600080fd5b506005546102f4906001600160a01b031681565b34801561071257600080fd5b5061042760045481565b34801561072857600080fd5b5061042760075481565b34801561073e57600080fd5b50610427600c5481565b34801561075457600080fd5b506102da610763366004612a5b565b611b0e565b34801561077457600080fd5b50610427600e5481565b34801561078a57600080fd5b506102f4610799366004612982565b611b82565b3480156107aa57600080fd5b50610427600a5481565b3480156107c057600080fd5b506102da6107cf366004612a5b565b611bb2565b3480156107e057600080fd5b5061042760095481565b3480156107f657600080fd5b50601954610427565b34801561080b57600080fd5b506002546102f4906001600160a01b031681565b34801561082b57600080fd5b506102da61083a366004612982565b611c26565b34801561084b57600080fd5b506106d9611cca565b34801561086057600080fd5b506102da61086f366004612982565b611d22565b34801561088057600080fd5b5061066161088f366004612b41565b611dba565b3480156108a057600080fd5b506104db6108af366004612a5b565b601a6020526000908152604090205460ff1681565b3480156108d057600080fd5b506102f46108df366004612982565b611ed0565b6001600160a01b0388166000908152601a602052604081205460ff1661091d57604051636e623f0f60e01b815260040160405180910390fd5b610928888686611ee5565b60408051336020808301919091528183018d905282518083038401815260608301938490528051910120631ae6f51560e01b9092526000916001600160a01b038c1691631ae6f51591610983918d908d908990606401612ccc565b6020604051808303816000875af11580156109a2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109c69190612d07565b6001600160a01b038181166000908152601b60205260409081902080546001600160a01b0319168e84169081179091556002549092166101208d015251919250907fd371ed88cc563fd25b2a95ce8bb8d0adbf9bb4d8725c94996d2cae1d0ddf2a7290610a389084908d908d90612d24565b60405180910390a2601c805460018082019092557f0e4562a10381dec21b205ed72637e6b1b523bdd0e4d4d50af5cd23dd4500a2110180546001600160a01b0319166001600160a01b038481169182179092556000908152601d60209081526040808320805460ff19168617905593909155825133918101919091529182018d90528b16906316abfc7090349060600160405160208183030381529060405280519060200120338b8b8a6040518763ffffffff1660e01b8152600401610b02959493929190612d5f565b60206040518083038185885af1158015610b20573d6000803e3d6000fd5b50505050506040513d601f19601f82011682018060405250810190610b459190612dc2565b50600260009081555b601854811015610bf157816001600160a01b0316637180c8ca60188381548110610b7a57610b7a612ddb565b60009182526020909120015460405160e083901b6001600160e01b03191681526001600160a01b03909116600482015260016024820152604401600060405180830381600087803b158015610bce57600080fd5b505af1158015610be2573d6000803e3d6000fd5b50505050806001019050610b4e565b5060025460405163ab033ea960e01b81526001600160a01b0391821660048201529082169063ab033ea990602401600060405180830381600087803b158015610c3957600080fd5b505af1158015610c4d573d6000803e3d6000fd5b504792505081159050610cc557604051600090339083908381818185875af1925050503d8060008114610c9c576040519150601f19603f3d011682016040523d82523d6000602084013e610ca1565b606091505b5050905080610cc3576040516312171d8360e31b815260040160405180910390fd5b505b509a9950505050505050505050565b6001546001600160a01b03163314610cfe576040516282b42960e81b815260040160405180910390fd5b6040805160808101825260145480825260155460208301526016549282019290925260175460608201529082351180610d3e575080602001518260200135115b80610d50575080604001518260400135115b80610d62575080606001518260600135115b15610d80576040516315b05a8f60e01b815260040160405180910390fd5b81356010819055602080840135601181905560408086013560128190556060808801356013819055835196875294860193909352908401528201527fe1c45f8aeb543f30b37cc2fccfbac0f32cc8f234284df921d71cff04e51ef421906080015b60405180910390a15050565b6001546001600160a01b03163314610e17576040516282b42960e81b815260040160405180910390fd5b80600854610e259190612df1565b151580610e3e575080600954610e3b9190612df1565b15155b80610e55575080600a54610e529190612df1565b15155b80610e6c575080600b54610e699190612df1565b15155b15610e8a576040516311b75c1560e31b815260040160405180910390fd5b60078190556040518181527f04ed835b488b4fcf0a212a46ed67cbbffc2fc81b5cb6a12c546572cbf7b7e06a906020015b60405180910390a150565b6001546001600160a01b03163314610ef0576040516282b42960e81b815260040160405180910390fd5b600d54811115610f1357604051631670f79760e01b815260040160405180910390fd5b600c8190556040518181527faab0ee9100629c405a4d75336e1640cc81e0608fb0d7f17389c06ee8d4f0219190602001610ebb565b6001546001600160a01b03163314610f72576040516282b42960e81b815260040160405180910390fd5b6040805160808101825260105481526011546020820152601254918101919091526013546060820152670de0b6b3a764000082351180610fbd5750670de0b6b3a76400008260200135115b80610fd35750670de0b6b3a76400008260400135115b80610fe95750670de0b6b3a76400008260600135115b80610ff5575080518235105b80611007575080602001518260200135105b80611019575080604001518260400135105b8061102b575080606001518260600135105b156110495760405163161071fb60e11b815260040160405180910390fd5b81356014819055602080840135601581905560408086013560168190556060808801356017819055835196875294860193909352908401528201527f8c6093c7e65dd862e88162770c4e156e8a0da57d25d961e0fb6f28cfb7ff89a790608001610de1565b6001600160a01b0387166000908152601a602052604081205460ff166110e757604051636e623f0f60e01b815260040160405180910390fd5b6110f2878686611ee5565b60408051336020808301919091528183018c90528251808303840181526060830193849052805191012063059e27c360e11b9092526000916001600160a01b038b1691630b3c4f869161114f918c908c908a908a90606401612e13565b6020604051808303816000875af115801561116e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111929190612d07565b9a9950505050505050505050565b6001546001600160a01b031633146111ca576040516282b42960e81b815260040160405180910390fd5b6001600160a01b0382166000908152601a602052604090205460ff1661120357604051634bf121ab60e01b815260040160405180910390fd5b816001600160a01b03166019828154811061122057611220612ddb565b6000918252602090912001546001600160a01b03161461125357604051630f2700cb60e21b815260040160405180910390fd5b6001600160a01b0382166000908152601a60205260409020805460ff191690556019805461128390600190612e68565b8154811061129357611293612ddb565b600091825260209091200154601980546001600160a01b0390921691839081106112bf576112bf612ddb565b9060005260206000200160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060198054806112fe576112fe612e7b565b600082815260208120820160001990810180546001600160a01b03191690559091019091556040516001600160a01b038416917f709b7450bfafda93efd91d29149870a794637ac9d696ca61625fd2f53548afe091a25050565b6001546001600160a01b03163314611382576040516282b42960e81b815260040160405180910390fd5b6001600160a01b0381166000908152601a602052604090205460ff16156113bc5760405163bd34634f60e01b815260040160405180910390fd5b6001600160a01b0381166000818152601a6020526040808220805460ff1916600190811790915560198054918201815583527f944998273e477b495144fb8794c914197f3ccb46be2900f4698fd0ef743c96950180546001600160a01b03191684179055517f16ce88285cfd59829a5aa04370a5ec8090a18c14e7e7fb9d4b12a42291c098e39190a250565b6001546001600160a01b03163314611472576040516282b42960e81b815260040160405180910390fd5b600481905560405181907f395a61259037298d1c4cd4bf177b64ad5995d38a9394573fcd9060d649314ad090600090a250565b6001546001600160a01b031633146114cf576040516282b42960e81b815260040160405180910390fd5b600e548110156114f257604051630a35539d60e41b815260040160405180910390fd5b600f8190556040518181527fa9e7961bb3342715dbecc208087a6a9df8986d524b3a0a829fd90f5a2f5ba53e90602001610ebb565b6001546001600160a01b03163314611551576040516282b42960e81b815260040160405180910390fd5b60085481108061156c57506007546115699082612df1565b15155b806115785750600a5481115b156115965760405163f9c0959d60e01b815260040160405180910390fd5b60098190556040518181527f31407ddd1722f500b8aa2c18e112398626dd7c2869a5f80731ec30b244d9b5f290602001610ebb565b6001546001600160a01b031633146115f5576040516282b42960e81b815260040160405180910390fd5b600f5481111561161857604051635a8f655760e01b815260040160405180910390fd5b600e8190556040518181527f490eb2a91746aa933c9ffe2f7939aa06498f3259139f8805f008b12c8c697a4690602001610ebb565b6001546001600160a01b03163314611677576040516282b42960e81b815260040160405180910390fd5b600380546001600160a01b0319166001600160a01b0383169081179091556040517f03aa5b0fb65014eea89fda04a7bc11742014881f3c078f2c75b7226ce10d941890600090a250565b6001546001600160a01b031633146116eb576040516282b42960e81b815260040160405180910390fd5b600680546001600160a01b0319166001600160a01b0383169081179091556040517fc049058b1df2dd8902739ceb78992df12fa8369c06c450b3c6787137b452fdd290600090a250565b6001546001600160a01b0316331461175f576040516282b42960e81b815260040160405180910390fd5b60075481108061177a57506007546117779082612df1565b15155b80611786575060095481115b156117a457604051630219d66360e11b815260040160405180910390fd5b60088190556040518181527f6f8175cdbac1b4d238abba24a17d2554d7b9750bbeda6414e191c478384b763190602001610ebb565b6001546001600160a01b03163314611803576040516282b42960e81b815260040160405180910390fd5b600c548110156118265760405163019cfb7b60e61b815260040160405180910390fd5b600d8190556040518181527f4fa35c11ce9a45ae882c154ecb53ab5cac52a74a5b9b0373be36deb30c78297890602001610ebb565b6001546001600160a01b03163314611885576040516282b42960e81b815260040160405180910390fd5b611891601883836125a0565b507f2a85276cf604a3822e19b29a3e97aebfbc47a19025c2e8f6e80b3af774dcbc388282604051610de1929190612e91565b6060601880548060200260200160405190810160405280929190818152602001828054801561191b57602002820191906000526020600020905b81546001600160a01b031681526001909101906020018083116118fd575b5050505050905090565b6001546001600160a01b0316331461194f576040516282b42960e81b815260040160405180910390fd5b600180546001600160a01b0319166001600160a01b0383169081179091556040517f9d3e522e1e47a2f6009739342b9cc7b252a1888154e843ab55ee1c81745795ab90600090a250565b6060818311156119bc57604051633b2735ab60e11b815260040160405180910390fd5b601c5482106119de5760405163e0f7becb60e01b815260040160405180910390fd5b6119e88383612e68565b6119f3906001612edf565b67ffffffffffffffff811115611a0b57611a0b612637565b604051908082528060200260200182016040528015611a34578160200160208202803683370190505b509050825b828111611aaf57601c8181548110611a5357611a53612ddb565b9060005260206000200160009054906101000a90046001600160a01b03168285830381518110611a8557611a85612ddb565b6001600160a01b039092166020928302919091019091015280611aa781612ef2565b915050611a39565b5092915050565b611ae16040518060800160405280600081526020016000815260200160008152602001600081525090565b50604080516080810182526010548152601154602082015260125491810191909152601354606082015290565b6001546001600160a01b03163314611b38576040516282b42960e81b815260040160405180910390fd5b600580546001600160a01b0319166001600160a01b0383169081179091556040517fe5693914d19c789bdee50a362998c0bc8d035a835f9871da5d51152f0582c34f90600090a250565b6000601c8281548110611b9757611b97612ddb565b6000918252602090912001546001600160a01b031692915050565b6001546001600160a01b03163314611bdc576040516282b42960e81b815260040160405180910390fd5b600280546001600160a01b0319166001600160a01b0383169081179091556040517ff3e07b4bb4394f2ff320bd1dd151551dff304d5e948b401d8558b228482c97d890600090a250565b6001546001600160a01b03163314611c50576040516282b42960e81b815260040160405180910390fd5b600954811080611c6b5750600754611c689082612df1565b15155b80611c775750600b5481115b15611c9557604051633007ad0160e11b815260040160405180910390fd5b600a8190556040518181527fe9ef3e93dff799d4db8a12ff79e0918a5a78d75b10527864f4b1c920f6f4f17890602001610ebb565b611cf56040518060800160405280600081526020016000815260200160008152602001600081525090565b50604080516080810182526014548152601554602082015260165491810191909152601754606082015290565b6001546001600160a01b03163314611d4c576040516282b42960e81b815260040160405180910390fd5b600a54811080611d675750600754611d649082612df1565b15155b15611d855760405163cfb699cb60e01b815260040160405180910390fd5b600b8190556040518181527f866fe9485f9983afceaa1385307b6eb0fd3df5a250ae2b0bf76dc9ddd316926b90602001610ebb565b606081831115611ddd57604051633b2735ab60e11b815260040160405180910390fd5b6019548210611dff5760405163e0f7becb60e01b815260040160405180910390fd5b611e098383612e68565b611e14906001612edf565b67ffffffffffffffff811115611e2c57611e2c612637565b604051908082528060200260200182016040528015611e55578160200160208202803683370190505b509050825b828111611aaf5760198181548110611e7457611e74612ddb565b9060005260206000200160009054906101000a90046001600160a01b03168285830381518110611ea657611ea6612ddb565b6001600160a01b039092166020928302919091019091015280611ec881612ef2565b915050611e5a565b600060198281548110611b9757611b97612ddb565b6008548360e001511080611efe57506009548360e00151115b80611f1957506007548360e00151611f169190612df1565b15155b15611f3757604051635428734d60e01b815260040160405180910390fd5b600a548360c001511080611f505750600b548360c00151115b80611f6d57508260e001518360c00151611f6a9190612df1565b15155b15611f8b5760405163253fffcf60e11b815260040160405180910390fd5b601454610180840151511180611fbf575060155460c084015161018085015160200151611fbd916301e13380906121fc565b115b80611fd4575060165461018084015160400151115b80611fe9575060175461018084015160600151115b80611ffb575060105461018084015151105b80612024575060115460c084015161018085015160200151612022916301e1338090612222565b105b80612039575060125461018084015160400151105b8061204e575060135461018084015160600151105b1561206c57604051632d8768f960e01b815260040160405180910390fd5b600c5482108061207d5750600d5482115b1561209b576040516330554de160e01b815260040160405180910390fd5b60006120c06611c37937e080006120ba85671bc16d674ec80000612240565b9061225e565b600e549091506120d0908261225e565b82108061210357506121006120f7671bc16d674ec800006120f1868561225e565b90612274565b600f5490612289565b82115b15612121576040516383ebdfb760e01b815260040160405180910390fd5b6000612131838660c0015161229e565b60035460408701519192506001600160a01b03918216911614158061215c5750600454856060015114155b8061217b57506005546101408601516001600160a01b03908116911614155b8061219a57506006546101608601516001600160a01b03908116911614155b806121b957506002546101208601516001600160a01b03908116911614155b806121c8575061010085015115155b156121e65760405163e8c02dd760e01b815260040160405180910390fd5b3061012086015261010090940193909352505050565b600082600019048411830215820261221357600080fd5b50910281810615159190040190565b600082600019048411830215820261223957600080fd5b5091020490565b600061225583670de0b6b3a764000084612222565b90505b92915050565b600081831161226d5781612255565b5090919050565b60006122558383670de0b6b3a7640000612222565b60008183116122985782612255565b50919050565b6000806122cf6122c06122b2866064612f0b565b66a5bbed86c5a00090612274565b6748cd4072281e000090612240565b90506122e3670de0b6b3a764000082612240565b905061233b816120f161230e61230961230489670de0b6b3a7640000612edf565b612343565b612371565b6123356123096123238a8a6301e13380612222565b61230490670de0b6b3a7640000612edf565b90612240565b949350505050565b60006001600160ff1b0382111561236d5760405163396ea70160e11b815260040160405180910390fd5b5090565b60008082136123935760405163e61b497560e01b815260040160405180910390fd5b506fffffffffffffffffffffffffffffffff811160071b81811c67ffffffffffffffff1060061b1781811c63ffffffff1060051b1781811c61ffff1060041b1781811c60ff10600390811b90911782811c600f1060021b1782811c909110600190811b90911782811c90911017609f8181036060019290921b91605f1982019061241f9084901c612343565b6c465772b2bbbb5f824b15207a3081018102606090811d6d0388eaa27412d5aca026815d636e018202811d6d0df99ac502031bf953eff472fdcc018202811d6d13cdffb29d51d99322bdff5f2211018202811d6d0a0f742023def783a307a986912e018202811d6d01920d8043ca89b5239253284e42018202811d6c0b7a86d7375468fac667a0a527016c29508e458543d8aa4df2abee7883018302821d6d0139601a2efabe717e604cbb4894018302821d6d02247f7a7b6594320649aa03aba1018302821d6c8c3f38e95a6b1ff2ab1c3b343619018302821d6d02384773bdf1ac5676facced60901901830290911d6cb9a025d814b29c212b8b1a07cd1901909102780a09507084cc699bb0e71ea869ffffffffffffffffffffffff190105711340daa0d5f769dba1915cef59f0815a5506027d0267a36c0c95b3975ab3ee5b203a7614a3f75373f047d803ae7b6687f2b391909102017d57115e47018c7177eebf7cd370a3356a1b7863008a5ae8028c72b88642840160ae1d92915050565b8280548282559060005260206000209081019282156125f3579160200282015b828111156125f35781546001600160a01b0319166001600160a01b038435161782556020909201916001909101906125c0565b5061236d9291505b8082111561236d57600081556001016125fb565b6001600160a01b038116811461262457600080fd5b50565b80356126328161260f565b919050565b634e487b7160e01b600052604160045260246000fd5b6040516101a0810167ffffffffffffffff8111828210171561267157612671612637565b60405290565b60006080828403121561268957600080fd5b6040516080810181811067ffffffffffffffff821117156126ac576126ac612637565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b600061020082840312156126f057600080fd5b6126f861264d565b905061270382612627565b815261271160208301612627565b602082015261272260408301612627565b6040820152606082013560608201526080820135608082015260a082013560a082015260c082013560c082015260e082013560e0820152610100808301358183015250610120612773818401612627565b90820152610140612785838201612627565b90820152610160612797838201612627565b908201526101806127aa84848301612677565b9082015292915050565b600082601f8301126127c557600080fd5b813567ffffffffffffffff808211156127e0576127e0612637565b604051601f8301601f19908116603f0116810190828211818310171561280857612808612637565b8160405283815286602085880101111561282157600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060008060008060008060006103008a8c03121561286057600080fd5b8935985060208a01356128728161260f565b97506128818b60408c016126dd565b96506102408a013567ffffffffffffffff8082111561289f57600080fd5b6128ab8d838e016127b4565b97506102608c013596506102808c013595506102a08c013594506102c08c01359150808211156128da57600080fd5b908b01906060828e0312156128ee57600080fd5b60405160608101818110838211171561290957612909612637565b60405282356129178161260f565b81526020830135801515811461292c57600080fd5b602082015260408301358281111561294357600080fd5b61294f8f8286016127b4565b6040830152508094505050506102e08a013590509295985092959850929598565b60006080828403121561229857600080fd5b60006020828403121561299457600080fd5b5035919050565b6000806000806000806000806102e0898b0312156129b857600080fd5b8835975060208901356129ca8161260f565b96506129d98a60408b016126dd565b955061024089013567ffffffffffffffff8111156129f657600080fd5b612a028b828c016127b4565b989b979a5095986102608101359761028082013597506102a082013596506102c090910135945092505050565b60008060408385031215612a4257600080fd5b8235612a4d8161260f565b946020939093013593505050565b600060208284031215612a6d57600080fd5b8135612a788161260f565b9392505050565b60008060208385031215612a9257600080fd5b823567ffffffffffffffff80821115612aaa57600080fd5b818501915085601f830112612abe57600080fd5b813581811115612acd57600080fd5b8660208260051b8501011115612ae257600080fd5b60209290920196919550909350505050565b6020808252825182820181905260009190848201906040850190845b81811015612b355783516001600160a01b031683529284019291840191600101612b10565b50909695505050505050565b60008060408385031215612b5457600080fd5b50508035926020909101359150565b8151815260208083015190820152604080830151908201526060808301519082015260808101612258565b80516001600160a01b031682526020810151612bb560208401826001600160a01b03169052565b506040810151612bd060408401826001600160a01b03169052565b50606081015160608301526080810151608083015260a081015160a083015260c081015160c083015260e081015160e083015261010080820151818401525061012080820151612c2a828501826001600160a01b03169052565b5050610140818101516001600160a01b039081169184019190915261016080830151909116908301526101809081015180519183019190915260208101516101a083015260408101516101c0830152606001516101e090910152565b6000815180845260005b81811015612cac57602081850181015186830182015201612c90565b506000602082860101526020601f19601f83011685010191505092915050565b6000610260868352612ce16020840187612b8e565b80610220840152612cf481840186612c86565b9150508261024083015295945050505050565b600060208284031215612d1957600080fd5b8151612a788161260f565b6001600160a01b03841681526000610240612d426020840186612b8e565b80610220840152612d5581840185612c86565b9695505050505050565b858152600060018060a01b03808716602084015285604084015284606084015260a060808401528084511660a0840152506020830151151560c08301526040830151606060e0840152612db6610100840182612c86565b98975050505050505050565b600060208284031215612dd457600080fd5b5051919050565b634e487b7160e01b600052603260045260246000fd5b600082612e0e57634e487b7160e01b600052601260045260246000fd5b500690565b6000610280878352612e286020840188612b8e565b80610220840152612e3b81840187612c86565b610240840195909552505061026001529392505050565b634e487b7160e01b600052601160045260246000fd5b8181038181111561225857612258612e52565b634e487b7160e01b600052603160045260246000fd5b60208082528181018390526000908460408401835b86811015612ed4578235612eb98161260f565b6001600160a01b031682529183019190830190600101612ea6565b509695505050505050565b8082018082111561225857612258612e52565b600060018201612f0457612f04612e52565b5060010190565b808202811582820484141761225857612258612e5256fea264697066735822122019200bf581e869dd7a08f6b1f06a3d8cefe417fe913a9b6b7ce0e6d0faed792264736f6c63430008140033"
+    "0x608060405260026001553480156200001657600080fd5b5060405162003e3538038062003e358339810160408190526200003991620006f1565b600062000047828262000940565b508160c001518260e0015110806200007357508160c001518260e0015162000070919062000a0c565b15155b156200009257604051630219d66360e11b815260040160405180910390fd5b60e0820151600a8190556101008301511080620000c457508160c00151826101000151620000c1919062000a0c565b15155b15620000e35760405163f9c0959d60e01b815260040160405180910390fd5b610100820151600b81905561012083015110806200011657508160c0015182610120015162000113919062000a0c565b15155b156200013557604051633007ad0160e11b815260040160405180910390fd5b610120820151600c81905561014083015110806200016857508160c0015182610140015162000165919062000a0c565b15155b15620001875760405163cfb699cb60e01b815260040160405180910390fd5b610140820151600d556101808201516101608301511115620001bc5760405163ef9bc65f60e01b815260040160405180910390fd5b610160820151600e55610180820151600f556101c08201516101a08301511115620001fa576040516330554de160e01b815260040160405180910390fd5b6101a08201516010556101c08201516011556102008201516101e0830151111562000238576040516383ebdfb760e01b815260040160405180910390fd5b6101e082015160125561020082015160135561024082015151670de0b6b3a76400001080620002775750670de0b6b3a764000082610240015160200151115b80620002935750670de0b6b3a764000082610240015160400151115b80620002af5750670de0b6b3a764000082610240015160600151115b15620002ce5760405163161071fb60e11b815260040160405180910390fd5b6102408201518051601881905560208201516019556040820151601a55606090910151601b556102208301515111806200031957508161024001516020015182610220015160200151115b806200033657508161024001516040015182610220015160400151115b806200035357508161024001516060015182610220015160600151115b1562000372576040516315b05a8f60e01b815260040160405180910390fd5b61022082015180516014556020808201516015556040808301516016556060928301516017558451600280546001600160a01b03199081166001600160a01b03938416179091558387015160038054831691841691909117905591860151600480548416918316919091179055608086015160078054841691831691909117905560a08601516008805490931691161790559083015180516200041a92601c92019062000457565b5050610260810151600580546001600160a01b0319166001600160a01b0390921691909117905561028081015160065560c0015160095562000a2f565b828054828255906000526020600020908101928215620004af579160200282015b82811115620004af57825182546001600160a01b0319166001600160a01b0390911617825560209092019160019091019062000478565b50620004bd929150620004c1565b5090565b5b80821115620004bd5760008155600101620004c2565b634e487b7160e01b600052604160045260246000fd5b6040516102a081016001600160401b0381118282101715620005145762000514620004d8565b60405290565b604051601f8201601f191681016001600160401b0381118282101715620005455762000545620004d8565b604052919050565b80516001600160a01b03811681146200056557600080fd5b919050565b600082601f8301126200057c57600080fd5b815160206001600160401b038211156200059a576200059a620004d8565b8160051b620005ab8282016200051a565b9283528481018201928281019087851115620005c657600080fd5b83870192505b84831015620005f057620005e0836200054d565b82529183019190830190620005cc565b979650505050505050565b6000608082840312156200060e57600080fd5b604051608081016001600160401b0381118282101715620006335762000633620004d8565b8060405250809150825181526020830151602082015260408301516040820152606083015160608201525092915050565b600082601f8301126200067657600080fd5b81516001600160401b03811115620006925762000692620004d8565b6020620006a8601f8301601f191682016200051a565b8281528582848701011115620006bd57600080fd5b60005b83811015620006dd578581018301518282018401528201620006c0565b506000928101909101919091529392505050565b600080604083850312156200070557600080fd5b82516001600160401b03808211156200071d57600080fd5b9084019061036082870312156200073357600080fd5b6200073d620004ee565b62000748836200054d565b815262000758602084016200054d565b60208201526200076b604084016200054d565b60408201526060830151828111156200078357600080fd5b62000791888286016200056a565b606083015250620007a5608084016200054d565b6080820152620007b860a084016200054d565b60a082015260c0838101519082015260e08084015190820152610100808401519082015261012080840151908201526101408084015190820152610160808401519082015261018080840151908201526101a080840151908201526101c080840151908201526101e0808401519082015261020080840151908201526102206200084588828601620005fb565b9082015262000859876102a08501620005fb565b6102408201526200086e61032084016200054d565b61026082015261034092909201516102808301526020850151919350808211156200089857600080fd5b50620008a78582860162000664565b9150509250929050565b600181811c90821680620008c657607f821691505b602082108103620008e757634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200093b57600081815260208120601f850160051c81016020861015620009165750805b601f850160051c820191505b81811015620009375782815560010162000922565b5050505b505050565b81516001600160401b038111156200095c576200095c620004d8565b62000974816200096d8454620008b1565b84620008ed565b602080601f831160018114620009ac5760008415620009935750858301515b600019600386901b1c1916600185901b17855562000937565b600085815260208120601f198616915b82811015620009dd57888601518255948401946001909101908401620009bc565b5085821015620009fc5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60008262000a2a57634e487b7160e01b600052601260045260246000fd5b500690565b6133f68062000a3f6000396000f3fe60806040526004361061037a5760003560e01c806399623bb1116101d1578063d6f5016911610102578063e4e7148f116100a0578063ec895f111161006f578063ec895f1114610a20578063f8c09e5914610a40578063fe3d5aeb14610a70578063fec4513914610a9057600080fd5b8063e4e7148f146109ab578063e71f34b3146109cb578063e83e34b1146109eb578063eb71f66c14610a0057600080fd5b8063dd2b8fbb116100dc578063dd2b8fbb14610940578063e0e2daaa14610960578063e1b39c8014610976578063e33315551461098b57600080fd5b8063d6f50169146108f4578063daac24da1461090a578063daf012e61461092a57600080fd5b8063bf9bd5cd1161016f578063c905a4b511610149578063c905a4b514610892578063d0f96b92146108a8578063d23d7ea3146108be578063d2c35ce8146108d457600080fd5b8063bf9bd5cd1461083a578063c172256314610850578063c415b95c1461087257600080fd5b8063a98a46db116101ab578063a98a46db146107c7578063b2561263146107e7578063b9fdb31914610807578063bc30e7a11461081a57600080fd5b806399623bb1146107655780639af2526214610785578063a64c90bf146107a557600080fd5b80635720c9d5116102ab57806383b361e8116102495780638627a4f0116102235780638627a4f0146106ef5780638e127cf51461070f5780638efc09861461072f57806397b0e8ce1461074557600080fd5b806383b361e81461068f57806384c19aab146106af57806385229785146106cf57600080fd5b80636b44e6be116102855780636b44e6be146105e45780636c8cc865146106245780636e95d67c1461065a5780636f6d5c4a1461066f57600080fd5b80635720c9d51461058e5780635aa6e675146105a4578063628027a3146105c457600080fd5b80632907d3dd116103185780634554f9a9116102f25780634554f9a91461051057806348800760146105265780634fbfee771461053c57806354fd4d501461055c57600080fd5b80632907d3dd146104b0578063411c3035146104d0578063421caba8146104f057600080fd5b806311e77bfe1161035457806311e77bfe1461042c5780631978ebcf1461044c5780631ecda0fe1461046c5780632885e3ac1461049057600080fd5b806306fdde03146103a957806310780f73146103d457806310d1dc3e1461040c57600080fd5b366103a4576002600154036103a257604051630aac75b560e31b815260040160405180910390fd5b005b600080fd5b3480156103b557600080fd5b506103be610ab0565b6040516103cb9190612a94565b60405180910390f35b3480156103e057600080fd5b506008546103f4906001600160a01b031681565b6040516001600160a01b0390911681526020016103cb565b34801561041857600080fd5b506103a2610427366004612aa7565b610b3e565b34801561043857600080fd5b506103a2610447366004612ab9565b610c57565b34801561045857600080fd5b506103a2610467366004612ab9565b610d30565b34801561047857600080fd5b50610482600e5481565b6040519081526020016103cb565b34801561049c57600080fd5b506103a26104ab366004612aa7565b610db2565b3480156104bc57600080fd5b506103a26104cb366004612ab9565b610f18565b3480156104dc57600080fd5b506103a26104eb366004612afa565b610f9a565b3480156104fc57600080fd5b506103a261050b366004612b26565b61116b565b34801561051c57600080fd5b50610482600f5481565b34801561053257600080fd5b5061048260135481565b34801561054857600080fd5b506103a2610557366004612ab9565b611274565b34801561056857600080fd5b506103be604051806040016040528060068152602001653b189718171b60d11b81525081565b34801561059a57600080fd5b50610482600a5481565b3480156105b057600080fd5b506002546103f4906001600160a01b031681565b3480156105d057600080fd5b506103a26105df366004612ab9565b6112d1565b3480156105f057600080fd5b506106146105ff366004612b26565b60216020526000908152604090205460ff1681565b60405190151581526020016103cb565b34801561063057600080fd5b506103f461063f366004612b26565b601f602052600090815260409020546001600160a01b031681565b34801561066657600080fd5b50602054610482565b34801561067b57600080fd5b506103a261068a366004612ab9565b611353565b34801561069b57600080fd5b506103a26106aa366004612ab9565b6113f7565b3480156106bb57600080fd5b506103a26106ca366004612ab9565b611479565b3480156106db57600080fd5b506103a26106ea366004612b26565b6114fb565b3480156106fb57600080fd5b506103a261070a366004612b26565b61156f565b34801561071b57600080fd5b506103a261072a366004612ab9565b6115e3565b34801561073b57600080fd5b50610482600d5481565b34801561075157600080fd5b506103a2610760366004612ab9565b611687565b34801561077157600080fd5b506005546103f4906001600160a01b031681565b34801561079157600080fd5b506103a26107a0366004612b4a565b611709565b3480156107b157600080fd5b506107ba611771565b6040516103cb9190612bbf565b3480156107d357600080fd5b506103a26107e2366004612b26565b6117d3565b3480156107f357600080fd5b506103a2610802366004612b26565b611847565b6103f4610815366004612e22565b6118bb565b34801561082657600080fd5b506107ba610835366004612f51565b611cab565b34801561084657600080fd5b5061048260115481565b34801561085c57600080fd5b50610865611dc8565b6040516103cb9190612f73565b34801561087e57600080fd5b506007546103f4906001600160a01b031681565b34801561089e57600080fd5b5061048260065481565b3480156108b457600080fd5b5061048260095481565b3480156108ca57600080fd5b5061048260105481565b3480156108e057600080fd5b506103a26108ef366004612b26565b611e20565b34801561090057600080fd5b5061048260125481565b34801561091657600080fd5b506103f4610925366004612ab9565b611e94565b34801561093657600080fd5b50610482600c5481565b34801561094c57600080fd5b506103a261095b366004612b26565b611ec4565b34801561096c57600080fd5b50610482600b5481565b34801561098257600080fd5b50601d54610482565b34801561099757600080fd5b506004546103f4906001600160a01b031681565b3480156109b757600080fd5b506003546103f4906001600160a01b031681565b3480156109d757600080fd5b506103a26109e6366004612ab9565b611f38565b3480156109f757600080fd5b50610865611fdc565b348015610a0c57600080fd5b506103a2610a1b366004612ab9565b612034565b348015610a2c57600080fd5b506107ba610a3b366004612f51565b6120cc565b348015610a4c57600080fd5b50610614610a5b366004612b26565b601e6020526000908152604090205460ff1681565b348015610a7c57600080fd5b506103f4610a8b366004612ab9565b6121e2565b348015610a9c57600080fd5b506103f4610aab366004612f9e565b6121f7565b60008054610abd90613032565b80601f0160208091040260200160405190810160405280929190818152602001828054610ae990613032565b8015610b365780601f10610b0b57610100808354040283529160200191610b36565b820191906000526020600020905b815481529060010190602001808311610b1957829003601f168201915b505050505081565b6002546001600160a01b03163314610b68576040516282b42960e81b815260040160405180910390fd5b604080516080810182526018548082526019546020830152601a5492820192909252601b5460608201529082351180610ba8575080602001518260200135115b80610bba575080604001518260400135115b80610bcc575080606001518260600135115b15610bea576040516315b05a8f60e01b815260040160405180910390fd5b81356014819055602080840135601581905560408086013560168190556060808801356017819055835196875294860193909352908401528201527fe1c45f8aeb543f30b37cc2fccfbac0f32cc8f234284df921d71cff04e51ef421906080015b60405180910390a15050565b6002546001600160a01b03163314610c81576040516282b42960e81b815260040160405180910390fd5b80600a54610c8f9190613066565b151580610ca8575080600b54610ca59190613066565b15155b80610cbf575080600c54610cbc9190613066565b15155b80610cd6575080600d54610cd39190613066565b15155b15610cf4576040516311b75c1560e31b815260040160405180910390fd5b60098190556040518181527f04ed835b488b4fcf0a212a46ed67cbbffc2fc81b5cb6a12c546572cbf7b7e06a906020015b60405180910390a150565b6002546001600160a01b03163314610d5a576040516282b42960e81b815260040160405180910390fd5b601154811115610d7d57604051631670f79760e01b815260040160405180910390fd5b60108190556040518181527faab0ee9100629c405a4d75336e1640cc81e0608fb0d7f17389c06ee8d4f0219190602001610d25565b6002546001600160a01b03163314610ddc576040516282b42960e81b815260040160405180910390fd5b6040805160808101825260145481526015546020820152601654918101919091526017546060820152670de0b6b3a764000082351180610e275750670de0b6b3a76400008260200135115b80610e3d5750670de0b6b3a76400008260400135115b80610e535750670de0b6b3a76400008260600135115b80610e5f575080518235105b80610e71575080602001518260200135105b80610e83575080604001518260400135105b80610e95575080606001518260600135105b15610eb35760405163161071fb60e11b815260040160405180910390fd5b813560188190556020808401356019819055604080860135601a819055606080880135601b819055835196875294860193909352908401528201527f8c6093c7e65dd862e88162770c4e156e8a0da57d25d961e0fb6f28cfb7ff89a790608001610c4b565b6002546001600160a01b03163314610f42576040516282b42960e81b815260040160405180910390fd5b600f54811115610f65576040516328a2d9a960e01b815260040160405180910390fd5b600e8190556040518181527f41f729b931ad8e33d697fff6bc6736a1ac6ee09e8265efae2794ac1635c217a690602001610d25565b6002546001600160a01b03163314801590610fc057506003546001600160a01b03163314155b15610fdd576040516282b42960e81b815260040160405180910390fd5b6001600160a01b0382166000908152601e602052604090205460ff1661101657604051634bf121ab60e01b815260040160405180910390fd5b816001600160a01b0316601d828154811061103357611033613088565b6000918252602090912001546001600160a01b03161461106657604051630f2700cb60e21b815260040160405180910390fd5b6001600160a01b0382166000908152601e60205260409020805460ff19169055601d8054611096906001906130b4565b815481106110a6576110a6613088565b600091825260209091200154601d80546001600160a01b0390921691839081106110d2576110d2613088565b9060005260206000200160006101000a8154816001600160a01b0302191690836001600160a01b03160217905550601d805480611111576111116130c7565b600082815260208120820160001990810180546001600160a01b03191690559091019091556040516001600160a01b038416917f709b7450bfafda93efd91d29149870a794637ac9d696ca61625fd2f53548afe091a25050565b6002546001600160a01b0316331480159061119157506003546001600160a01b03163314155b156111ae576040516282b42960e81b815260040160405180910390fd5b6001600160a01b0381166000908152601e602052604090205460ff16156111e85760405163bd34634f60e01b815260040160405180910390fd5b6001600160a01b0381166000818152601e6020526040808220805460ff19166001908117909155601d8054918201815583527f6d4407e7be21f808e6509aa9fa9143369579dd7d760fe20a2c09680fc146134f0180546001600160a01b03191684179055517f16ce88285cfd59829a5aa04370a5ec8090a18c14e7e7fb9d4b12a42291c098e39190a250565b6002546001600160a01b0316331461129e576040516282b42960e81b815260040160405180910390fd5b600681905560405181907f395a61259037298d1c4cd4bf177b64ad5995d38a9394573fcd9060d649314ad090600090a250565b6002546001600160a01b031633146112fb576040516282b42960e81b815260040160405180910390fd5b60125481101561131e57604051630a35539d60e41b815260040160405180910390fd5b60138190556040518181527fa9e7961bb3342715dbecc208087a6a9df8986d524b3a0a829fd90f5a2f5ba53e90602001610d25565b6002546001600160a01b0316331461137d576040516282b42960e81b815260040160405180910390fd5b600a5481108061139857506009546113959082613066565b15155b806113a45750600c5481115b156113c25760405163f9c0959d60e01b815260040160405180910390fd5b600b8190556040518181527f31407ddd1722f500b8aa2c18e112398626dd7c2869a5f80731ec30b244d9b5f290602001610d25565b6002546001600160a01b03163314611421576040516282b42960e81b815260040160405180910390fd5b60135481111561144457604051635a8f655760e01b815260040160405180910390fd5b60128190556040518181527f490eb2a91746aa933c9ffe2f7939aa06498f3259139f8805f008b12c8c697a4690602001610d25565b6002546001600160a01b031633146114a3576040516282b42960e81b815260040160405180910390fd5b600e548110156114c657604051637edc061360e11b815260040160405180910390fd5b600f8190556040518181527f0e56d83f54e6f5b08716a54b3abdb59b3025bf12c1875c87ab98ab081d6f838190602001610d25565b6002546001600160a01b03163314611525576040516282b42960e81b815260040160405180910390fd5b600580546001600160a01b0319166001600160a01b0383169081179091556040517f03aa5b0fb65014eea89fda04a7bc11742014881f3c078f2c75b7226ce10d941890600090a250565b6002546001600160a01b03163314611599576040516282b42960e81b815260040160405180910390fd5b600880546001600160a01b0319166001600160a01b0383169081179091556040517fc049058b1df2dd8902739ceb78992df12fa8369c06c450b3c6787137b452fdd290600090a250565b6002546001600160a01b0316331461160d576040516282b42960e81b815260040160405180910390fd5b60095481108061162857506009546116259082613066565b15155b806116345750600b5481115b1561165257604051630219d66360e11b815260040160405180910390fd5b600a8190556040518181527f6f8175cdbac1b4d238abba24a17d2554d7b9750bbeda6414e191c478384b763190602001610d25565b6002546001600160a01b031633146116b1576040516282b42960e81b815260040160405180910390fd5b6010548110156116d45760405163019cfb7b60e61b815260040160405180910390fd5b60118190556040518181527f4fa35c11ce9a45ae882c154ecb53ab5cac52a74a5b9b0373be36deb30c78297890602001610d25565b6002546001600160a01b03163314611733576040516282b42960e81b815260040160405180910390fd5b61173f601c83836129df565b507f2a85276cf604a3822e19b29a3e97aebfbc47a19025c2e8f6e80b3af774dcbc388282604051610c4b9291906130dd565b6060601c8054806020026020016040519081016040528092919081815260200182805480156117c957602002820191906000526020600020905b81546001600160a01b031681526001909101906020018083116117ab575b5050505050905090565b6002546001600160a01b031633146117fd576040516282b42960e81b815260040160405180910390fd5b600380546001600160a01b0319166001600160a01b0383169081179091556040517f6f717fb0ab51206dea4064a35c94c2784f8714b012fbde820e0ddee36265eb6a90600090a250565b6002546001600160a01b03163314611871576040516282b42960e81b815260040160405180910390fd5b600280546001600160a01b0319166001600160a01b0383169081179091556040517f9d3e522e1e47a2f6009739342b9cc7b252a1888154e843ab55ee1c81745795ab90600090a250565b6001600160a01b0388166000908152601e602052604081205460ff166118f457604051636e623f0f60e01b815260040160405180910390fd5b6118ff8886866122e9565b60408051336020808301919091528183018d90528251808303840181526060830193849052805191012063c29d10c160e01b9092526000916001600160a01b038c169163c29d10c19161195a918d908d90899060640161322f565b6020604051808303816000875af1158015611979573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061199d919061326a565b6001600160a01b038181166000908152601f60205260409081902080546001600160a01b0319168e84169081179091556004549092166101408d015251919250907ff353a3c7608dc37624175f4f0c0a6d2e6b418797ecbff5943616e9da3eb1ae8290611a0f9084908d908d90613287565b60405180910390a260208054600180820183557fc97bfaf2f8ee708c303a06d134f5ecd8389ae0432af62dc132a24118292866bb90910180546001600160a01b0319166001600160a01b03858116918217909255600090815260218452604090819020805460ff191684179055918055815133938101939093529082018d90528b16906316abfc7090349060600160405160208183030381529060405280519060200120338b8b8a6040518763ffffffff1660e01b8152600401611ad79594939291906132c2565b60206040518083038185885af1158015611af5573d6000803e3d6000fd5b50505050506040513d601f19601f82011682018060405250810190611b1a9190613325565b50600260015560005b601c54811015611bc657816001600160a01b0316637180c8ca601c8381548110611b4f57611b4f613088565b60009182526020909120015460405160e083901b6001600160e01b03191681526001600160a01b03909116600482015260016024820152604401600060405180830381600087803b158015611ba357600080fd5b505af1158015611bb7573d6000803e3d6000fd5b50505050806001019050611b23565b506004805460405163ab033ea960e01b81526001600160a01b039182169281019290925282169063ab033ea990602401600060405180830381600087803b158015611c1057600080fd5b505af1158015611c24573d6000803e3d6000fd5b504792505081159050611c9c57604051600090339083908381818185875af1925050503d8060008114611c73576040519150601f19603f3d011682016040523d82523d6000602084013e611c78565b606091505b5050905080611c9a576040516312171d8360e31b815260040160405180910390fd5b505b509a9950505050505050505050565b606081831115611cce57604051633b2735ab60e11b815260040160405180910390fd5b6020548210611cf05760405163e0f7becb60e01b815260040160405180910390fd5b611cfa83836130b4565b611d0590600161333e565b67ffffffffffffffff811115611d1d57611d1d612c0c565b604051908082528060200260200182016040528015611d46578160200160208202803683370190505b509050825b828111611dc15760208181548110611d6557611d65613088565b9060005260206000200160009054906101000a90046001600160a01b03168285830381518110611d9757611d97613088565b6001600160a01b039092166020928302919091019091015280611db981613351565b915050611d4b565b5092915050565b611df36040518060800160405280600081526020016000815260200160008152602001600081525090565b50604080516080810182526014548152601554602082015260165491810191909152601754606082015290565b6002546001600160a01b03163314611e4a576040516282b42960e81b815260040160405180910390fd5b600780546001600160a01b0319166001600160a01b0383169081179091556040517fe5693914d19c789bdee50a362998c0bc8d035a835f9871da5d51152f0582c34f90600090a250565b600060208281548110611ea957611ea9613088565b6000918252602090912001546001600160a01b031692915050565b6002546001600160a01b03163314611eee576040516282b42960e81b815260040160405180910390fd5b600480546001600160a01b0319166001600160a01b0383169081179091556040517ff3e07b4bb4394f2ff320bd1dd151551dff304d5e948b401d8558b228482c97d890600090a250565b6002546001600160a01b03163314611f62576040516282b42960e81b815260040160405180910390fd5b600b54811080611f7d5750600954611f7a9082613066565b15155b80611f895750600d5481115b15611fa757604051633007ad0160e11b815260040160405180910390fd5b600c8190556040518181527fe9ef3e93dff799d4db8a12ff79e0918a5a78d75b10527864f4b1c920f6f4f17890602001610d25565b6120076040518060800160405280600081526020016000815260200160008152602001600081525090565b506040805160808101825260185481526019546020820152601a5491810191909152601b54606082015290565b6002546001600160a01b0316331461205e576040516282b42960e81b815260040160405180910390fd5b600c5481108061207957506009546120769082613066565b15155b156120975760405163cfb699cb60e01b815260040160405180910390fd5b600d8190556040518181527f866fe9485f9983afceaa1385307b6eb0fd3df5a250ae2b0bf76dc9ddd316926b90602001610d25565b6060818311156120ef57604051633b2735ab60e11b815260040160405180910390fd5b601d5482106121115760405163e0f7becb60e01b815260040160405180910390fd5b61211b83836130b4565b61212690600161333e565b67ffffffffffffffff81111561213e5761213e612c0c565b604051908082528060200260200182016040528015612167578160200160208202803683370190505b509050825b828111611dc157601d818154811061218657612186613088565b9060005260206000200160009054906101000a90046001600160a01b031682858303815181106121b8576121b8613088565b6001600160a01b0390921660209283029190910190910152806121da81613351565b91505061216c565b6000601d8281548110611ea957611ea9613088565b6001600160a01b0387166000908152601e602052604081205460ff1661223057604051636e623f0f60e01b815260040160405180910390fd5b61223b8786866122e9565b60408051336020808301919091528183018c905282518083038401815260608301938490528051910120637f88be8160e01b9092526000916001600160a01b038b1691637f88be8191612298918c908c908a908a9060640161336a565b6020604051808303816000875af11580156122b7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906122db919061326a565b9a9950505050505050505050565b600a5483610100015110806123045750600b54836101000151115b80612320575060095483610100015161231d9190613066565b15155b1561233e57604051635428734d60e01b815260040160405180910390fd5b600c548360e0015110806123575750600d548360e00151115b8061237557508261010001518360e001516123729190613066565b15155b156123935760405163253fffcf60e11b815260040160405180910390fd5b600e548360c0015110806123ac5750600f548360c00151115b156123ca5760405163ef9bc65f60e01b815260040160405180910390fd5b6018546101a08401515111806123fe575060195460e08401516101a0850151602001516123fc916301e133809061263b565b115b806124135750601a546101a084015160400151115b806124285750601b546101a084015160600151115b8061243a57506014546101a084015151105b80612463575060155460e08401516101a085015160200151612461916301e1338090612661565b105b8061247857506016546101a084015160400151105b8061248d57506017546101a084015160600151105b156124ab57604051632d8768f960e01b815260040160405180910390fd5b6010548210806124bc575060115482115b156124da576040516330554de160e01b815260040160405180910390fd5b60006124ff6611c37937e080006124f985671bc16d674ec8000061267f565b9061269d565b60125490915061250f908261269d565b821080612542575061253f612536671bc16d674ec80000612530868561269d565b906126b3565b601354906126c8565b82115b15612560576040516383ebdfb760e01b815260040160405180910390fd5b6000612570838660e001516126dd565b60055460408701519192506001600160a01b03918216911614158061259b5750600654856060015114155b806125ba57506007546101608601516001600160a01b03908116911614155b806125d957506008546101808601516001600160a01b03908116911614155b806125f857506004546101408601516001600160a01b03908116911614155b80612607575061012085015115155b156126255760405163e8c02dd760e01b815260040160405180910390fd5b3061014086015261012090940193909352505050565b600082600019048411830215820261265257600080fd5b50910281810615159190040190565b600082600019048411830215820261267857600080fd5b5091020490565b600061269483670de0b6b3a764000084612661565b90505b92915050565b60008183116126ac5781612694565b5090919050565b60006126948383670de0b6b3a7640000612661565b60008183116126d75782612694565b50919050565b60008061270e6126ff6126f18660646133a9565b66a5bbed86c5a000906126b3565b6748cd4072281e00009061267f565b9050612722670de0b6b3a76400008261267f565b905061277a8161253061274d61274861274389670de0b6b3a764000061333e565b612782565b6127b0565b6127746127486127628a8a6301e13380612661565b61274390670de0b6b3a764000061333e565b9061267f565b949350505050565b60006001600160ff1b038211156127ac5760405163396ea70160e11b815260040160405180910390fd5b5090565b60008082136127d25760405163e61b497560e01b815260040160405180910390fd5b506fffffffffffffffffffffffffffffffff811160071b81811c67ffffffffffffffff1060061b1781811c63ffffffff1060051b1781811c61ffff1060041b1781811c60ff10600390811b90911782811c600f1060021b1782811c909110600190811b90911782811c90911017609f8181036060019290921b91605f1982019061285e9084901c612782565b6c465772b2bbbb5f824b15207a3081018102606090811d6d0388eaa27412d5aca026815d636e018202811d6d0df99ac502031bf953eff472fdcc018202811d6d13cdffb29d51d99322bdff5f2211018202811d6d0a0f742023def783a307a986912e018202811d6d01920d8043ca89b5239253284e42018202811d6c0b7a86d7375468fac667a0a527016c29508e458543d8aa4df2abee7883018302821d6d0139601a2efabe717e604cbb4894018302821d6d02247f7a7b6594320649aa03aba1018302821d6c8c3f38e95a6b1ff2ab1c3b343619018302821d6d02384773bdf1ac5676facced60901901830290911d6cb9a025d814b29c212b8b1a07cd1901909102780a09507084cc699bb0e71ea869ffffffffffffffffffffffff190105711340daa0d5f769dba1915cef59f0815a5506027d0267a36c0c95b3975ab3ee5b203a7614a3f75373f047d803ae7b6687f2b391909102017d57115e47018c7177eebf7cd370a3356a1b7863008a5ae8028c72b88642840160ae1d92915050565b828054828255906000526020600020908101928215612a32579160200282015b82811115612a325781546001600160a01b0319166001600160a01b038435161782556020909201916001909101906129ff565b506127ac9291505b808211156127ac5760008155600101612a3a565b6000815180845260005b81811015612a7457602081850181015186830182015201612a58565b506000602082860101526020601f19601f83011685010191505092915050565b6020815260006126946020830184612a4e565b6000608082840312156126d757600080fd5b600060208284031215612acb57600080fd5b5035919050565b6001600160a01b0381168114612ae757600080fd5b50565b8035612af581612ad2565b919050565b60008060408385031215612b0d57600080fd5b8235612b1881612ad2565b946020939093013593505050565b600060208284031215612b3857600080fd5b8135612b4381612ad2565b9392505050565b60008060208385031215612b5d57600080fd5b823567ffffffffffffffff80821115612b7557600080fd5b818501915085601f830112612b8957600080fd5b813581811115612b9857600080fd5b8660208260051b8501011115612bad57600080fd5b60209290920196919550909350505050565b6020808252825182820181905260009190848201906040850190845b81811015612c005783516001600160a01b031683529284019291840191600101612bdb565b50909695505050505050565b634e487b7160e01b600052604160045260246000fd5b6040516101c0810167ffffffffffffffff81118282101715612c4657612c46612c0c565b60405290565b600060808284031215612c5e57600080fd5b6040516080810181811067ffffffffffffffff82111715612c8157612c81612c0c565b8060405250809150823581526020830135602082015260408301356040820152606083013560608201525092915050565b60006102208284031215612cc557600080fd5b612ccd612c22565b9050612cd882612aea565b8152612ce660208301612aea565b6020820152612cf760408301612aea565b6040820152606082013560608201526080820135608082015260a082013560a082015260c082013560c082015260e082013560e0820152610100808301358183015250610120808301358183015250610140612d54818401612aea565b90820152610160612d66838201612aea565b90820152610180612d78838201612aea565b908201526101a0612d8b84848301612c4c565b9082015292915050565b600082601f830112612da657600080fd5b813567ffffffffffffffff80821115612dc157612dc1612c0c565b604051601f8301601f19908116603f01168101908282118183101715612de957612de9612c0c565b81604052838152866020858801011115612e0257600080fd5b836020870160208301376000602085830101528094505050505092915050565b60008060008060008060008060006103208a8c031215612e4157600080fd5b8935985060208a0135612e5381612ad2565b9750612e628b60408c01612cb2565b96506102608a013567ffffffffffffffff80821115612e8057600080fd5b612e8c8d838e01612d95565b97506102808c013596506102a08c013595506102c08c013594506102e08c0135915080821115612ebb57600080fd5b908b01906060828e031215612ecf57600080fd5b604051606081018181108382111715612eea57612eea612c0c565b6040528235612ef881612ad2565b815260208301358015158114612f0d57600080fd5b6020820152604083013582811115612f2457600080fd5b612f308f828601612d95565b6040830152508094505050506103008a013590509295985092959850929598565b60008060408385031215612f6457600080fd5b50508035926020909101359150565b8151815260208083015190820152604080830151908201526060808301519082015260808101612697565b600080600080600080600080610300898b031215612fbb57600080fd5b883597506020890135612fcd81612ad2565b9650612fdc8a60408b01612cb2565b955061026089013567ffffffffffffffff811115612ff957600080fd5b6130058b828c01612d95565b989b979a509598610280810135976102a082013597506102c082013596506102e090910135945092505050565b600181811c9082168061304657607f821691505b6020821081036126d757634e487b7160e01b600052602260045260246000fd5b60008261308357634e487b7160e01b600052601260045260246000fd5b500690565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b818103818111156126975761269761309e565b634e487b7160e01b600052603160045260246000fd5b60208082528181018390526000908460408401835b8681101561312057823561310581612ad2565b6001600160a01b0316825291830191908301906001016130f2565b509695505050505050565b80516001600160a01b03168252602081015161315260208401826001600160a01b03169052565b50604081015161316d60408401826001600160a01b03169052565b50606081015160608301526080810151608083015260a081015160a083015260c081015160c083015260e081015160e0830152610100808201518184015250610120808201518184015250610140808201516131d3828501826001600160a01b03169052565b5050610160818101516001600160a01b039081169184019190915261018080830151909116908301526101a09081015180519183019190915260208101516101c083015260408101516101e08301526060015161020090910152565b6000610280868352613244602084018761312b565b8061024084015261325781840186612a4e565b9150508261026083015295945050505050565b60006020828403121561327c57600080fd5b8151612b4381612ad2565b6001600160a01b038416815260006102606132a5602084018661312b565b806102408401526132b881840185612a4e565b9695505050505050565b858152600060018060a01b03808716602084015285604084015284606084015260a060808401528084511660a0840152506020830151151560c08301526040830151606060e0840152613319610100840182612a4e565b98975050505050505050565b60006020828403121561333757600080fd5b5051919050565b808201808211156126975761269761309e565b6000600182016133635761336361309e565b5060010190565b60006102a087835261337f602084018861312b565b8061024084015261339281840187612a4e565b610260840195909552505061028001529392505050565b80820281158282048414176126975761269761309e56fea26469706673582212206cf39be6fc46f7c989a7b30d9b45075b1ff9e7c37031b1b7c7791e78c8521a5764736f6c63430008140033"
 )
 
 
 class HyperdriveFactoryContract(Contract):
     """A web3.py Contract class for the HyperdriveFactory contract."""
 
     abi: ABI = hyperdrivefactory_abi
-    bytecode: bytes = HexBytes(hyperdrivefactory_bytecode)
+    bytecode: bytes | None = try_bytecode_hexbytes(hyperdrivefactory_bytecode, "hyperdrivefactory")
 
     def __init__(self, address: ChecksumAddress | None = None) -> None:
         try:
             # Initialize parent Contract class
             super().__init__(address=address)
             self.functions = HyperdriveFactoryContractFunctions(hyperdrivefactory_abi, self.w3, address)  # type: ignore
             self.events = HyperdriveFactoryContractEvents(hyperdrivefactory_abi, self.w3, address)  # type: ignore
@@ -6159,16 +6979,18 @@
     functions: HyperdriveFactoryContractFunctions
 
     class ConstructorArgs(NamedTuple):
         """Arguments to pass the contract's constructor function."""
 
         factoryConfig: FactoryConfig
 
+        name: str
+
     @classmethod
-    def constructor(cls, factoryConfig: FactoryConfig) -> ContractConstructor:  # type: ignore
+    def constructor(cls, factoryConfig: FactoryConfig, name: str) -> ContractConstructor:  # type: ignore
         """Creates a transaction with the contract's constructor function.
 
         Parameters
         ----------
 
         w3 : Web3
             A web3 instance.
@@ -6178,15 +7000,15 @@
         Returns
         -------
         Self
             A deployed instance of the contract.
 
         """
 
-        return super().constructor(dataclass_to_tuple(factoryConfig))
+        return super().constructor(dataclass_to_tuple(factoryConfig), dataclass_to_tuple(name))
 
     @classmethod
     def deploy(cls, w3: Web3, account: LocalAccount | ChecksumAddress, constructorArgs: ConstructorArgs) -> Self:
         """Deploys and instance of the contract.
 
         Parameters
         ----------
@@ -6216,15 +7038,15 @@
         current_nonce = w3.eth.get_transaction_count(account.address)
         deployment_tx.update({"nonce": current_nonce})
 
         # Sign the transaction with local account private key
         signed_tx = account.sign_transaction(deployment_tx)
 
         # Send the signed transaction and wait for receipt
-        tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
+        tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
         tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
 
         deployed_contract = deployer(address=tx_receipt.contractAddress)  # type: ignore
         return deployed_contract
 
     @classmethod
     def factory(cls, w3: Web3, class_name: str | None = None, **kwargs: Any) -> Type[Self]:
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/HyperdriveFactoryTypes.py` & `agent0-0.20.0/src/agent0/hypertypes/types/HyperdriveFactoryTypes.py`

 * *Files 5% similar despite different names*

```diff
@@ -26,23 +26,26 @@
 
 
 @dataclass
 class FactoryConfig:
     """FactoryConfig struct."""
 
     governance: str
+    deployerCoordinatorManager: str
     hyperdriveGovernance: str
     defaultPausers: list[str]
     feeCollector: str
     sweepCollector: str
     checkpointDurationResolution: int
     minCheckpointDuration: int
     maxCheckpointDuration: int
     minPositionDuration: int
     maxPositionDuration: int
+    minCircuitBreakerDelta: int
+    maxCircuitBreakerDelta: int
     minFixedAPR: int
     maxFixedAPR: int
     minTimeStretchAPR: int
     maxTimeStretchAPR: int
     minFees: IHyperdrive.Fees
     maxFees: IHyperdrive.Fees
     linkerFactory: str
@@ -84,14 +87,23 @@
     inputs=[
         ABIEventParams(indexed=True, name="deployerCoordinator", type="address"),
     ],
     name="DeployerCoordinatorAdded",
     type="event",
 )
 
+DeployerCoordinatorManagerUpdated = ABIEvent(
+    anonymous=False,
+    inputs=[
+        ABIEventParams(indexed=True, name="deployerCoordinatorManager", type="address"),
+    ],
+    name="DeployerCoordinatorManagerUpdated",
+    type="event",
+)
+
 DeployerCoordinatorRemoved = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=True, name="deployerCoordinator", type="address"),
     ],
     name="DeployerCoordinatorRemoved",
     type="event",
@@ -147,14 +159,23 @@
     inputs=[
         ABIEventParams(indexed=False, name="newMaxCheckpointDuration", type="uint256"),
     ],
     name="MaxCheckpointDurationUpdated",
     type="event",
 )
 
+MaxCircuitBreakerDeltaUpdated = ABIEvent(
+    anonymous=False,
+    inputs=[
+        ABIEventParams(indexed=False, name="newMaxCircuitBreakerDelta", type="uint256"),
+    ],
+    name="MaxCircuitBreakerDeltaUpdated",
+    type="event",
+)
+
 MaxFeesUpdated = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=False, name="newMaxFees", type="tuple"),
     ],
     name="MaxFeesUpdated",
     type="event",
@@ -192,14 +213,23 @@
     inputs=[
         ABIEventParams(indexed=False, name="newMinCheckpointDuration", type="uint256"),
     ],
     name="MinCheckpointDurationUpdated",
     type="event",
 )
 
+MinCircuitBreakerDeltaUpdated = ABIEvent(
+    anonymous=False,
+    inputs=[
+        ABIEventParams(indexed=False, name="newMinCircuitBreakerDelta", type="uint256"),
+    ],
+    name="MinCircuitBreakerDeltaUpdated",
+    type="event",
+)
+
 MinFeesUpdated = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=False, name="newMinFees", type="tuple"),
     ],
     name="MinFeesUpdated",
     type="event",
@@ -299,14 +329,21 @@
 InvalidCheckpointDurationResolutionError = ErrorInfo(
     inputs=[],
     name="InvalidCheckpointDurationResolution",
     selector="0x8dbae0a8",
     signature="InvalidCheckpointDurationResolution()",
 )
 
+InvalidCircuitBreakerDeltaError = ErrorInfo(
+    inputs=[],
+    name="InvalidCircuitBreakerDelta",
+    selector="0xef9bc65f",
+    signature="InvalidCircuitBreakerDelta()",
+)
+
 InvalidDeployConfigError = ErrorInfo(
     inputs=[],
     name="InvalidDeployConfig",
     selector="0xe8c02dd7",
     signature="InvalidDeployConfig()",
 )
 
@@ -341,14 +378,21 @@
 InvalidMaxCheckpointDurationError = ErrorInfo(
     inputs=[],
     name="InvalidMaxCheckpointDuration",
     selector="0xf9c0959d",
     signature="InvalidMaxCheckpointDuration()",
 )
 
+InvalidMaxCircuitBreakerDeltaError = ErrorInfo(
+    inputs=[],
+    name="InvalidMaxCircuitBreakerDelta",
+    selector="0xfdb80c26",
+    signature="InvalidMaxCircuitBreakerDelta()",
+)
+
 InvalidMaxFeesError = ErrorInfo(
     inputs=[],
     name="InvalidMaxFees",
     selector="0x2c20e3f6",
     signature="InvalidMaxFees()",
 )
 
@@ -376,14 +420,21 @@
 InvalidMinCheckpointDurationError = ErrorInfo(
     inputs=[],
     name="InvalidMinCheckpointDuration",
     selector="0x0433acc6",
     signature="InvalidMinCheckpointDuration()",
 )
 
+InvalidMinCircuitBreakerDeltaError = ErrorInfo(
+    inputs=[],
+    name="InvalidMinCircuitBreakerDelta",
+    selector="0x28a2d9a9",
+    signature="InvalidMinCircuitBreakerDelta()",
+)
+
 InvalidMinFeesError = ErrorInfo(
     inputs=[],
     name="InvalidMinFees",
     selector="0x15b05a8f",
     signature="InvalidMinFees()",
 )
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/IHyperdriveContract.py` & `agent0-0.20.0/src/agent0/hypertypes/types/IHyperdriveContract.py`

 * *Files 2% similar despite different names*

```diff
@@ -22,15 +22,15 @@
 
 # consumers have too many opinions on line length
 # pylint: disable=line-too-long
 
 
 from __future__ import annotations
 
-from typing import Any, Iterable, NamedTuple, Sequence, Type, cast
+from typing import Any, Iterable, NamedTuple, Sequence, Type, cast, overload
 
 from eth_abi.codec import ABICodec
 from eth_abi.registry import registry as default_registry
 from eth_account.signers.local import LocalAccount
 from eth_typing import ChecksumAddress, HexStr
 from hexbytes import HexBytes
 from typing_extensions import Self
@@ -44,15 +44,15 @@
     ContractFunction,
     ContractFunctions,
 )
 from web3.exceptions import FallbackNotFound
 from web3.types import ABI, ABIFunction, BlockIdentifier, CallOverride, EventData, TxParams
 
 from .IHyperdriveTypes import Checkpoint, Fees, MarketState, Options, PoolConfig, PoolInfo, WithdrawPool
-from .utilities import dataclass_to_tuple, get_abi_input_types, rename_returned_types
+from .utilities import dataclass_to_tuple, get_abi_input_types, rename_returned_types, try_bytecode_hexbytes
 
 structs = {
     "Options": Options,
     "Checkpoint": Checkpoint,
     "MarketState": MarketState,
     "Fees": Fees,
     "PoolConfig": PoolConfig,
@@ -659,41 +659,86 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(list[bytes], rename_returned_types(structs, return_types, raw_values))
 
 
-class IHyperdriveNameContractFunction(ContractFunction):
+class IHyperdriveNameContractFunction0(ContractFunction):
     """ContractFunction for the name method."""
 
     def __call__(self, tokenId: int) -> IHyperdriveNameContractFunction:  # type: ignore
-        clone = super().__call__(dataclass_to_tuple(tokenId))
-        self.kwargs = clone.kwargs
-        self.args = clone.args
-        return self
+        super().__call__()  # type: ignore
+        return cast(IHyperdriveNameContractFunction, self)
 
     def call(
         self,
         transaction: TxParams | None = None,
         block_identifier: BlockIdentifier = "latest",
         state_override: CallOverride | None = None,
         ccip_read_enabled: bool | None = None,
     ) -> str:
         """returns str."""
         # Define the expected return types from the smart contract call
 
         return_types = str
 
         # Call the function
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+
+        return cast(str, rename_returned_types(structs, return_types, raw_values))
+
+
+class IHyperdriveNameContractFunction1(ContractFunction):
+    """ContractFunction for the name method."""
+
+    def __call__(self) -> IHyperdriveNameContractFunction:  # type: ignore
+        super().__call__()  # type: ignore
+        return cast(IHyperdriveNameContractFunction, self)
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> str:
+        """returns str."""
+        # Define the expected return types from the smart contract call
+
+        return_types = str
 
+        # Call the function
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
+class IHyperdriveNameContractFunction(ContractFunction):
+    """ContractFunction for the name method."""
+
+    # super() call methods are generic, while our version adds values & types
+    # pylint: disable=arguments-differ# disable this warning when there is overloading
+    # pylint: disable=function-redefined
+
+    @overload
+    def __call__(self, tokenId: int) -> IHyperdriveNameContractFunction0:  # type: ignore
+        ...
+
+    @overload
+    def __call__(self) -> IHyperdriveNameContractFunction1:  # type: ignore
+        ...
+
+    def __call__(self, *args) -> IHyperdriveNameContractFunction:  # type: ignore
+        clone = super().__call__(*(dataclass_to_tuple(arg) for arg in args))
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self  # type: ignore
+
+
 class IHyperdriveNoncesContractFunction(ContractFunction):
     """ContractFunction for the nonces method."""
 
     def __call__(self, owner: str) -> IHyperdriveNoncesContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(owner))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -1254,41 +1299,14 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
-class IHyperdriveTarget4ContractFunction(ContractFunction):
-    """ContractFunction for the target4 method."""
-
-    def __call__(self) -> IHyperdriveTarget4ContractFunction:  # type: ignore
-        clone = super().__call__()
-        self.kwargs = clone.kwargs
-        self.args = clone.args
-        return self
-
-    def call(
-        self,
-        transaction: TxParams | None = None,
-        block_identifier: BlockIdentifier = "latest",
-        state_override: CallOverride | None = None,
-        ccip_read_enabled: bool | None = None,
-    ) -> str:
-        """returns str."""
-        # Define the expected return types from the smart contract call
-
-        return_types = str
-
-        # Call the function
-
-        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
-        return cast(str, rename_returned_types(structs, return_types, raw_values))
-
-
 class IHyperdriveTotalSupplyContractFunction(ContractFunction):
     """ContractFunction for the totalSupply method."""
 
     def __call__(self, tokenId: int) -> IHyperdriveTotalSupplyContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(tokenId))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -1387,14 +1405,41 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(str, rename_returned_types(structs, return_types, raw_values))
 
 
+class IHyperdriveVersionContractFunction(ContractFunction):
+    """ContractFunction for the version method."""
+
+    def __call__(self) -> IHyperdriveVersionContractFunction:  # type: ignore
+        clone = super().__call__()
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> str:
+        """returns str."""
+        # Define the expected return types from the smart contract call
+
+        return_types = str
+
+        # Call the function
+
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+        return cast(str, rename_returned_types(structs, return_types, raw_values))
+
+
 class IHyperdriveContractFunctions(ContractFunctions):
     """ContractFunctions for the IHyperdrive contract."""
 
     PERMIT_TYPEHASH: IHyperdrivePERMIT_TYPEHASHContractFunction
 
     addLiquidity: IHyperdriveAddLiquidityContractFunction
 
@@ -1478,24 +1523,24 @@
 
     target1: IHyperdriveTarget1ContractFunction
 
     target2: IHyperdriveTarget2ContractFunction
 
     target3: IHyperdriveTarget3ContractFunction
 
-    target4: IHyperdriveTarget4ContractFunction
-
     totalSupply: IHyperdriveTotalSupplyContractFunction
 
     transferFrom: IHyperdriveTransferFromContractFunction
 
     transferFromBridge: IHyperdriveTransferFromBridgeContractFunction
 
     vaultSharesToken: IHyperdriveVaultSharesTokenContractFunction
 
+    version: IHyperdriveVersionContractFunction
+
     def __init__(
         self,
         abi: ABI,
         w3: "Web3",
         address: ChecksumAddress | None = None,
         decode_tuples: bool | None = False,
     ) -> None:
@@ -1848,22 +1893,14 @@
             "target3",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="target3",
         )
-        self.target4 = IHyperdriveTarget4ContractFunction.factory(
-            "target4",
-            w3=w3,
-            contract_abi=abi,
-            address=address,
-            decode_tuples=decode_tuples,
-            function_identifier="target4",
-        )
         self.totalSupply = IHyperdriveTotalSupplyContractFunction.factory(
             "totalSupply",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="totalSupply",
@@ -1888,14 +1925,22 @@
             "vaultSharesToken",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="vaultSharesToken",
         )
+        self.version = IHyperdriveVersionContractFunction.factory(
+            "version",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="version",
+        )
 
 
 class IHyperdriveAddLiquidityContractEvent(ContractEvent):
     """ContractEvent for AddLiquidity."""
 
     # super() get_logs and create_filter methods are generic, while our version adds values & types
     # pylint: disable=arguments-differ
@@ -3612,14 +3657,71 @@
         )
         types = get_abi_input_types(error_abi)
         abi_codec = ABICodec(default_registry)
         decoded = abi_codec.decode(types, data)
         return decoded
 
 
+class IHyperdriveCircuitBreakerTriggeredContractError:
+    """ContractError for CircuitBreakerTriggered."""
+
+    # @combomethod destroys return types, so we are redefining functions as both class and instance
+    # pylint: disable=function-redefined
+
+    # 4 byte error selector
+    selector: str
+    # error signature, i.e. CustomError(uint256,bool)
+    signature: str
+
+    # pylint: disable=useless-parent-delegation
+    def __init__(
+        self: "IHyperdriveCircuitBreakerTriggeredContractError",
+    ) -> None:
+        self.selector = "0x2a958098"
+        self.signature = "CircuitBreakerTriggered()"
+
+    def decode_error_data(  # type: ignore
+        self: "IHyperdriveCircuitBreakerTriggeredContractError",
+        data: HexBytes,
+        # TODO: instead of returning a tuple, return a dataclass with the input names and types just like we do for functions
+    ) -> tuple[Any, ...]:
+        """Decodes error data returns from a smart contract."""
+        error_abi = cast(
+            ABIFunction,
+            [
+                item
+                for item in ihyperdrive_abi
+                if item.get("name") == "CircuitBreakerTriggered" and item.get("type") == "error"
+            ][0],
+        )
+        types = get_abi_input_types(error_abi)
+        abi_codec = ABICodec(default_registry)
+        decoded = abi_codec.decode(types, data)
+        return decoded
+
+    @classmethod
+    def decode_error_data(  # type: ignore
+        cls: Type["IHyperdriveCircuitBreakerTriggeredContractError"],
+        data: HexBytes,
+    ) -> tuple[Any, ...]:
+        """Decodes error data returns from a smart contract."""
+        error_abi = cast(
+            ABIFunction,
+            [
+                item
+                for item in ihyperdrive_abi
+                if item.get("name") == "CircuitBreakerTriggered" and item.get("type") == "error"
+            ][0],
+        )
+        types = get_abi_input_types(error_abi)
+        abi_codec = ABICodec(default_registry)
+        decoded = abi_codec.decode(types, data)
+        return decoded
+
+
 class IHyperdriveDecreasedPresentValueWhenAddingLiquidityContractError:
     """ContractError for DecreasedPresentValueWhenAddingLiquidity."""
 
     # @combomethod destroys return types, so we are redefining functions as both class and instance
     # pylint: disable=function-redefined
 
     # 4 byte error selector
@@ -4113,14 +4215,71 @@
         )
         types = get_abi_input_types(error_abi)
         abi_codec = ABICodec(default_registry)
         decoded = abi_codec.decode(types, data)
         return decoded
 
 
+class IHyperdriveInvalidEffectiveShareReservesContractError:
+    """ContractError for InvalidEffectiveShareReserves."""
+
+    # @combomethod destroys return types, so we are redefining functions as both class and instance
+    # pylint: disable=function-redefined
+
+    # 4 byte error selector
+    selector: str
+    # error signature, i.e. CustomError(uint256,bool)
+    signature: str
+
+    # pylint: disable=useless-parent-delegation
+    def __init__(
+        self: "IHyperdriveInvalidEffectiveShareReservesContractError",
+    ) -> None:
+        self.selector = "0x85bd2ac4"
+        self.signature = "InvalidEffectiveShareReserves()"
+
+    def decode_error_data(  # type: ignore
+        self: "IHyperdriveInvalidEffectiveShareReservesContractError",
+        data: HexBytes,
+        # TODO: instead of returning a tuple, return a dataclass with the input names and types just like we do for functions
+    ) -> tuple[Any, ...]:
+        """Decodes error data returns from a smart contract."""
+        error_abi = cast(
+            ABIFunction,
+            [
+                item
+                for item in ihyperdrive_abi
+                if item.get("name") == "InvalidEffectiveShareReserves" and item.get("type") == "error"
+            ][0],
+        )
+        types = get_abi_input_types(error_abi)
+        abi_codec = ABICodec(default_registry)
+        decoded = abi_codec.decode(types, data)
+        return decoded
+
+    @classmethod
+    def decode_error_data(  # type: ignore
+        cls: Type["IHyperdriveInvalidEffectiveShareReservesContractError"],
+        data: HexBytes,
+    ) -> tuple[Any, ...]:
+        """Decodes error data returns from a smart contract."""
+        error_abi = cast(
+            ABIFunction,
+            [
+                item
+                for item in ihyperdrive_abi
+                if item.get("name") == "InvalidEffectiveShareReserves" and item.get("type") == "error"
+            ][0],
+        )
+        types = get_abi_input_types(error_abi)
+        abi_codec = ABICodec(default_registry)
+        decoded = abi_codec.decode(types, data)
+        return decoded
+
+
 class IHyperdriveInvalidFeeDestinationContractError:
     """ContractError for InvalidFeeDestination."""
 
     # @combomethod destroys return types, so we are redefining functions as both class and instance
     # pylint: disable=function-redefined
 
     # 4 byte error selector
@@ -5489,14 +5648,16 @@
 class IHyperdriveContractErrors:
     """ContractErrors for the IHyperdrive contract."""
 
     BatchInputLengthMismatch: IHyperdriveBatchInputLengthMismatchContractError
 
     BelowMinimumContribution: IHyperdriveBelowMinimumContributionContractError
 
+    CircuitBreakerTriggered: IHyperdriveCircuitBreakerTriggeredContractError
+
     DecreasedPresentValueWhenAddingLiquidity: IHyperdriveDecreasedPresentValueWhenAddingLiquidityContractError
 
     DistributeExcessIdleFailed: IHyperdriveDistributeExcessIdleFailedContractError
 
     ExpInvalidExponent: IHyperdriveExpInvalidExponentContractError
 
     ExpiredDeadline: IHyperdriveExpiredDeadlineContractError
@@ -5507,14 +5668,16 @@
 
     InvalidApr: IHyperdriveInvalidAprContractError
 
     InvalidCheckpointTime: IHyperdriveInvalidCheckpointTimeContractError
 
     InvalidERC20Bridge: IHyperdriveInvalidERC20BridgeContractError
 
+    InvalidEffectiveShareReserves: IHyperdriveInvalidEffectiveShareReservesContractError
+
     InvalidFeeDestination: IHyperdriveInvalidFeeDestinationContractError
 
     InvalidInitialVaultSharePrice: IHyperdriveInvalidInitialVaultSharePriceContractError
 
     InvalidLPSharePrice: IHyperdriveInvalidLPSharePriceContractError
 
     InvalidPresentValue: IHyperdriveInvalidPresentValueContractError
@@ -5562,25 +5725,27 @@
     UpdateLiquidityFailed: IHyperdriveUpdateLiquidityFailedContractError
 
     def __init__(
         self,
     ) -> None:
         self.BatchInputLengthMismatch = IHyperdriveBatchInputLengthMismatchContractError()
         self.BelowMinimumContribution = IHyperdriveBelowMinimumContributionContractError()
+        self.CircuitBreakerTriggered = IHyperdriveCircuitBreakerTriggeredContractError()
         self.DecreasedPresentValueWhenAddingLiquidity = (
             IHyperdriveDecreasedPresentValueWhenAddingLiquidityContractError()
         )
         self.DistributeExcessIdleFailed = IHyperdriveDistributeExcessIdleFailedContractError()
         self.ExpInvalidExponent = IHyperdriveExpInvalidExponentContractError()
         self.ExpiredDeadline = IHyperdriveExpiredDeadlineContractError()
         self.InsufficientBalance = IHyperdriveInsufficientBalanceContractError()
         self.InsufficientLiquidity = IHyperdriveInsufficientLiquidityContractError()
         self.InvalidApr = IHyperdriveInvalidAprContractError()
         self.InvalidCheckpointTime = IHyperdriveInvalidCheckpointTimeContractError()
         self.InvalidERC20Bridge = IHyperdriveInvalidERC20BridgeContractError()
+        self.InvalidEffectiveShareReserves = IHyperdriveInvalidEffectiveShareReservesContractError()
         self.InvalidFeeDestination = IHyperdriveInvalidFeeDestinationContractError()
         self.InvalidInitialVaultSharePrice = IHyperdriveInvalidInitialVaultSharePriceContractError()
         self.InvalidLPSharePrice = IHyperdriveInvalidLPSharePriceContractError()
         self.InvalidPresentValue = IHyperdriveInvalidPresentValueContractError()
         self.InvalidSignature = IHyperdriveInvalidSignatureContractError()
         self.InvalidTimestamp = IHyperdriveInvalidTimestampContractError()
         self.LnInvalidInput = IHyperdriveLnInvalidInputContractError()
@@ -5602,23 +5767,25 @@
         self.UnsafeCastToUint128 = IHyperdriveUnsafeCastToUint128ContractError()
         self.UnsupportedToken = IHyperdriveUnsupportedTokenContractError()
         self.UpdateLiquidityFailed = IHyperdriveUpdateLiquidityFailedContractError()
 
         self._all = [
             self.BatchInputLengthMismatch,
             self.BelowMinimumContribution,
+            self.CircuitBreakerTriggered,
             self.DecreasedPresentValueWhenAddingLiquidity,
             self.DistributeExcessIdleFailed,
             self.ExpInvalidExponent,
             self.ExpiredDeadline,
             self.InsufficientBalance,
             self.InsufficientLiquidity,
             self.InvalidApr,
             self.InvalidCheckpointTime,
             self.InvalidERC20Bridge,
+            self.InvalidEffectiveShareReserves,
             self.InvalidFeeDestination,
             self.InvalidInitialVaultSharePrice,
             self.InvalidLPSharePrice,
             self.InvalidPresentValue,
             self.InvalidSignature,
             self.InvalidTimestamp,
             self.LnInvalidInput,
@@ -5802,15 +5969,19 @@
             "name": "getCheckpoint",
             "inputs": [{"name": "_checkpointTime", "type": "uint256", "internalType": "uint256"}],
             "outputs": [
                 {
                     "name": "",
                     "type": "tuple",
                     "internalType": "struct IHyperdrive.Checkpoint",
-                    "components": [{"name": "vaultSharePrice", "type": "uint128", "internalType": "uint128"}],
+                    "components": [
+                        {"name": "weightedSpotPrice", "type": "uint128", "internalType": "uint128"},
+                        {"name": "lastWeightedSpotPriceUpdateTime", "type": "uint128", "internalType": "uint128"},
+                        {"name": "vaultSharePrice", "type": "uint128", "internalType": "uint128"},
+                    ],
                 }
             ],
             "stateMutability": "view",
         },
         {
             "type": "function",
             "name": "getCheckpointExposure",
@@ -5858,14 +6029,15 @@
                         {"name": "baseToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "vaultSharesToken", "type": "address", "internalType": "contract IERC20"},
                         {"name": "linkerFactory", "type": "address", "internalType": "address"},
                         {"name": "linkerCodeHash", "type": "bytes32", "internalType": "bytes32"},
                         {"name": "initialVaultSharePrice", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumShareReserves", "type": "uint256", "internalType": "uint256"},
                         {"name": "minimumTransactionAmount", "type": "uint256", "internalType": "uint256"},
+                        {"name": "circuitBreakerDelta", "type": "uint256", "internalType": "uint256"},
                         {"name": "positionDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "checkpointDuration", "type": "uint256", "internalType": "uint256"},
                         {"name": "timeStretch", "type": "uint256", "internalType": "uint256"},
                         {"name": "governance", "type": "address", "internalType": "address"},
                         {"name": "feeCollector", "type": "address", "internalType": "address"},
                         {"name": "sweepCollector", "type": "address", "internalType": "address"},
                         {
@@ -5987,14 +6159,21 @@
             "name": "name",
             "inputs": [{"name": "tokenId", "type": "uint256", "internalType": "uint256"}],
             "outputs": [{"name": "", "type": "string", "internalType": "string"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
+            "name": "name",
+            "inputs": [],
+            "outputs": [{"name": "", "type": "string", "internalType": "string"}],
+            "stateMutability": "pure",
+        },
+        {
+            "type": "function",
             "name": "nonces",
             "inputs": [{"name": "owner", "type": "address", "internalType": "address"}],
             "outputs": [{"name": "", "type": "uint256", "internalType": "uint256"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
@@ -6227,21 +6406,14 @@
             "name": "target3",
             "inputs": [],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
-            "name": "target4",
-            "inputs": [],
-            "outputs": [{"name": "", "type": "address", "internalType": "address"}],
-            "stateMutability": "view",
-        },
-        {
-            "type": "function",
             "name": "totalSupply",
             "inputs": [{"name": "tokenId", "type": "uint256", "internalType": "uint256"}],
             "outputs": [{"name": "", "type": "uint256", "internalType": "uint256"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
@@ -6272,21 +6444,28 @@
             "type": "function",
             "name": "vaultSharesToken",
             "inputs": [],
             "outputs": [{"name": "", "type": "address", "internalType": "address"}],
             "stateMutability": "view",
         },
         {
+            "type": "function",
+            "name": "version",
+            "inputs": [],
+            "outputs": [{"name": "", "type": "string", "internalType": "string"}],
+            "stateMutability": "pure",
+        },
+        {
             "type": "event",
             "name": "AddLiquidity",
             "inputs": [
                 {"name": "provider", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "lpAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "baseAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "vaultShareAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "amount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "vaultSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "asBase", "type": "bool", "indexed": False, "internalType": "bool"},
                 {"name": "lpSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
             ],
             "anonymous": False,
         },
         {
             "type": "event",
@@ -6312,43 +6491,45 @@
             "type": "event",
             "name": "CloseLong",
             "inputs": [
                 {"name": "trader", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "destination", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "assetId", "type": "uint256", "indexed": True, "internalType": "uint256"},
                 {"name": "maturityTime", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "baseAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "vaultShareAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "amount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "vaultSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "asBase", "type": "bool", "indexed": False, "internalType": "bool"},
                 {"name": "bondAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
             ],
             "anonymous": False,
         },
         {
             "type": "event",
             "name": "CloseShort",
             "inputs": [
                 {"name": "trader", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "destination", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "assetId", "type": "uint256", "indexed": True, "internalType": "uint256"},
                 {"name": "maturityTime", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "baseAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "vaultShareAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "amount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "vaultSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "asBase", "type": "bool", "indexed": False, "internalType": "bool"},
                 {"name": "basePayment", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "bondAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
             ],
             "anonymous": False,
         },
         {
             "type": "event",
             "name": "CollectGovernanceFee",
             "inputs": [
                 {"name": "collector", "type": "address", "indexed": True, "internalType": "address"},
-                {"name": "fees", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "amount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "vaultSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "asBase", "type": "bool", "indexed": False, "internalType": "bool"},
             ],
             "anonymous": False,
         },
         {
             "type": "event",
             "name": "CreateCheckpoint",
             "inputs": [
@@ -6375,44 +6556,44 @@
         },
         {
             "type": "event",
             "name": "Initialize",
             "inputs": [
                 {"name": "provider", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "lpAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "baseAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "vaultShareAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "amount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "vaultSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "asBase", "type": "bool", "indexed": False, "internalType": "bool"},
                 {"name": "apr", "type": "uint256", "indexed": False, "internalType": "uint256"},
             ],
             "anonymous": False,
         },
         {
             "type": "event",
             "name": "OpenLong",
             "inputs": [
                 {"name": "trader", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "assetId", "type": "uint256", "indexed": True, "internalType": "uint256"},
                 {"name": "maturityTime", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "baseAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "vaultShareAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "amount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "vaultSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "asBase", "type": "bool", "indexed": False, "internalType": "bool"},
                 {"name": "bondAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
             ],
             "anonymous": False,
         },
         {
             "type": "event",
             "name": "OpenShort",
             "inputs": [
                 {"name": "trader", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "assetId", "type": "uint256", "indexed": True, "internalType": "uint256"},
                 {"name": "maturityTime", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "baseAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "vaultShareAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "amount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "vaultSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "asBase", "type": "bool", "indexed": False, "internalType": "bool"},
                 {"name": "baseProceeds", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "bondAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
             ],
             "anonymous": False,
         },
         {
@@ -6433,29 +6614,29 @@
         {
             "type": "event",
             "name": "RedeemWithdrawalShares",
             "inputs": [
                 {"name": "provider", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "destination", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "withdrawalShareAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "baseAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "vaultShareAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "amount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "vaultSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "asBase", "type": "bool", "indexed": False, "internalType": "bool"},
             ],
             "anonymous": False,
         },
         {
             "type": "event",
             "name": "RemoveLiquidity",
             "inputs": [
                 {"name": "provider", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "destination", "type": "address", "indexed": True, "internalType": "address"},
                 {"name": "lpAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "baseAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
-                {"name": "vaultShareAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "amount", "type": "uint256", "indexed": False, "internalType": "uint256"},
+                {"name": "vaultSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "asBase", "type": "bool", "indexed": False, "internalType": "bool"},
                 {"name": "withdrawalShareAmount", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "lpSharePrice", "type": "uint256", "indexed": False, "internalType": "uint256"},
             ],
             "anonymous": False,
         },
         {
@@ -6483,23 +6664,25 @@
                 {"name": "id", "type": "uint256", "indexed": False, "internalType": "uint256"},
                 {"name": "value", "type": "uint256", "indexed": False, "internalType": "uint256"},
             ],
             "anonymous": False,
         },
         {"type": "error", "name": "BatchInputLengthMismatch", "inputs": []},
         {"type": "error", "name": "BelowMinimumContribution", "inputs": []},
+        {"type": "error", "name": "CircuitBreakerTriggered", "inputs": []},
         {"type": "error", "name": "DecreasedPresentValueWhenAddingLiquidity", "inputs": []},
         {"type": "error", "name": "DistributeExcessIdleFailed", "inputs": []},
         {"type": "error", "name": "ExpInvalidExponent", "inputs": []},
         {"type": "error", "name": "ExpiredDeadline", "inputs": []},
         {"type": "error", "name": "InsufficientBalance", "inputs": []},
         {"type": "error", "name": "InsufficientLiquidity", "inputs": []},
         {"type": "error", "name": "InvalidApr", "inputs": []},
         {"type": "error", "name": "InvalidCheckpointTime", "inputs": []},
         {"type": "error", "name": "InvalidERC20Bridge", "inputs": []},
+        {"type": "error", "name": "InvalidEffectiveShareReserves", "inputs": []},
         {"type": "error", "name": "InvalidFeeDestination", "inputs": []},
         {"type": "error", "name": "InvalidInitialVaultSharePrice", "inputs": []},
         {"type": "error", "name": "InvalidLPSharePrice", "inputs": []},
         {"type": "error", "name": "InvalidPresentValue", "inputs": []},
         {"type": "error", "name": "InvalidSignature", "inputs": []},
         {"type": "error", "name": "InvalidTimestamp", "inputs": []},
         {"type": "error", "name": "LnInvalidInput", "inputs": []},
@@ -6527,15 +6710,15 @@
 ihyperdrive_bytecode = HexStr("0x")
 
 
 class IHyperdriveContract(Contract):
     """A web3.py Contract class for the IHyperdrive contract."""
 
     abi: ABI = ihyperdrive_abi
-    bytecode: bytes = HexBytes(ihyperdrive_bytecode)
+    bytecode: bytes | None = try_bytecode_hexbytes(ihyperdrive_bytecode, "ihyperdrive")
 
     def __init__(self, address: ChecksumAddress | None = None) -> None:
         try:
             # Initialize parent Contract class
             super().__init__(address=address)
             self.functions = IHyperdriveContractFunctions(ihyperdrive_abi, self.w3, address)  # type: ignore
             self.events = IHyperdriveContractEvents(ihyperdrive_abi, self.w3, address)  # type: ignore
@@ -6603,15 +6786,15 @@
         current_nonce = w3.eth.get_transaction_count(account.address)
         deployment_tx.update({"nonce": current_nonce})
 
         # Sign the transaction with local account private key
         signed_tx = account.sign_transaction(deployment_tx)
 
         # Send the signed transaction and wait for receipt
-        tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
+        tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
         tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
 
         deployed_contract = deployer(address=tx_receipt.contractAddress)  # type: ignore
         return deployed_contract
 
     @classmethod
     def factory(cls, w3: Web3, class_name: str | None = None, **kwargs: Any) -> Type[Self]:
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/IHyperdriveTypes.py` & `agent0-0.20.0/src/agent0/hypertypes/types/IHyperdriveTypes.py`

 * *Files 4% similar despite different names*

```diff
@@ -32,14 +32,16 @@
     extraData: bytes
 
 
 @dataclass
 class Checkpoint:
     """Checkpoint struct."""
 
+    weightedSpotPrice: int
+    lastWeightedSpotPriceUpdateTime: int
     vaultSharePrice: int
 
 
 @dataclass
 class MarketState:
     """MarketState struct."""
 
@@ -74,14 +76,15 @@
     baseToken: str
     vaultSharesToken: str
     linkerFactory: str
     linkerCodeHash: bytes
     initialVaultSharePrice: int
     minimumShareReserves: int
     minimumTransactionAmount: int
+    circuitBreakerDelta: int
     positionDuration: int
     checkpointDuration: int
     timeStretch: int
     governance: str
     feeCollector: str
     sweepCollector: str
     fees: Fees
@@ -122,30 +125,31 @@
 
     baseToken: str
     vaultSharesToken: str
     linkerFactory: str
     linkerCodeHash: bytes
     minimumShareReserves: int
     minimumTransactionAmount: int
+    circuitBreakerDelta: int
     positionDuration: int
     checkpointDuration: int
     timeStretch: int
     governance: str
     feeCollector: str
     sweepCollector: str
     fees: Fees
 
 
 AddLiquidity = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=True, name="provider", type="address"),
         ABIEventParams(indexed=False, name="lpAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="baseAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="vaultShareAmount", type="uint256"),
+        ABIEventParams(indexed=False, name="amount", type="uint256"),
+        ABIEventParams(indexed=False, name="vaultSharePrice", type="uint256"),
         ABIEventParams(indexed=False, name="asBase", type="bool"),
         ABIEventParams(indexed=False, name="lpSharePrice", type="uint256"),
     ],
     name="AddLiquidity",
     type="event",
 )
 
@@ -174,45 +178,47 @@
 CloseLong = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=True, name="trader", type="address"),
         ABIEventParams(indexed=True, name="destination", type="address"),
         ABIEventParams(indexed=True, name="assetId", type="uint256"),
         ABIEventParams(indexed=False, name="maturityTime", type="uint256"),
-        ABIEventParams(indexed=False, name="baseAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="vaultShareAmount", type="uint256"),
+        ABIEventParams(indexed=False, name="amount", type="uint256"),
+        ABIEventParams(indexed=False, name="vaultSharePrice", type="uint256"),
         ABIEventParams(indexed=False, name="asBase", type="bool"),
         ABIEventParams(indexed=False, name="bondAmount", type="uint256"),
     ],
     name="CloseLong",
     type="event",
 )
 
 CloseShort = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=True, name="trader", type="address"),
         ABIEventParams(indexed=True, name="destination", type="address"),
         ABIEventParams(indexed=True, name="assetId", type="uint256"),
         ABIEventParams(indexed=False, name="maturityTime", type="uint256"),
-        ABIEventParams(indexed=False, name="baseAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="vaultShareAmount", type="uint256"),
+        ABIEventParams(indexed=False, name="amount", type="uint256"),
+        ABIEventParams(indexed=False, name="vaultSharePrice", type="uint256"),
         ABIEventParams(indexed=False, name="asBase", type="bool"),
         ABIEventParams(indexed=False, name="basePayment", type="uint256"),
         ABIEventParams(indexed=False, name="bondAmount", type="uint256"),
     ],
     name="CloseShort",
     type="event",
 )
 
 CollectGovernanceFee = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=True, name="collector", type="address"),
-        ABIEventParams(indexed=False, name="fees", type="uint256"),
+        ABIEventParams(indexed=False, name="amount", type="uint256"),
+        ABIEventParams(indexed=False, name="vaultSharePrice", type="uint256"),
+        ABIEventParams(indexed=False, name="asBase", type="bool"),
     ],
     name="CollectGovernanceFee",
     type="event",
 )
 
 CreateCheckpoint = ABIEvent(
     anonymous=False,
@@ -247,46 +253,46 @@
 )
 
 Initialize = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=True, name="provider", type="address"),
         ABIEventParams(indexed=False, name="lpAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="baseAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="vaultShareAmount", type="uint256"),
+        ABIEventParams(indexed=False, name="amount", type="uint256"),
+        ABIEventParams(indexed=False, name="vaultSharePrice", type="uint256"),
         ABIEventParams(indexed=False, name="asBase", type="bool"),
         ABIEventParams(indexed=False, name="apr", type="uint256"),
     ],
     name="Initialize",
     type="event",
 )
 
 OpenLong = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=True, name="trader", type="address"),
         ABIEventParams(indexed=True, name="assetId", type="uint256"),
         ABIEventParams(indexed=False, name="maturityTime", type="uint256"),
-        ABIEventParams(indexed=False, name="baseAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="vaultShareAmount", type="uint256"),
+        ABIEventParams(indexed=False, name="amount", type="uint256"),
+        ABIEventParams(indexed=False, name="vaultSharePrice", type="uint256"),
         ABIEventParams(indexed=False, name="asBase", type="bool"),
         ABIEventParams(indexed=False, name="bondAmount", type="uint256"),
     ],
     name="OpenLong",
     type="event",
 )
 
 OpenShort = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=True, name="trader", type="address"),
         ABIEventParams(indexed=True, name="assetId", type="uint256"),
         ABIEventParams(indexed=False, name="maturityTime", type="uint256"),
-        ABIEventParams(indexed=False, name="baseAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="vaultShareAmount", type="uint256"),
+        ABIEventParams(indexed=False, name="amount", type="uint256"),
+        ABIEventParams(indexed=False, name="vaultSharePrice", type="uint256"),
         ABIEventParams(indexed=False, name="asBase", type="bool"),
         ABIEventParams(indexed=False, name="baseProceeds", type="uint256"),
         ABIEventParams(indexed=False, name="bondAmount", type="uint256"),
     ],
     name="OpenShort",
     type="event",
 )
@@ -312,30 +318,30 @@
 
 RedeemWithdrawalShares = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=True, name="provider", type="address"),
         ABIEventParams(indexed=True, name="destination", type="address"),
         ABIEventParams(indexed=False, name="withdrawalShareAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="baseAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="vaultShareAmount", type="uint256"),
+        ABIEventParams(indexed=False, name="amount", type="uint256"),
+        ABIEventParams(indexed=False, name="vaultSharePrice", type="uint256"),
         ABIEventParams(indexed=False, name="asBase", type="bool"),
     ],
     name="RedeemWithdrawalShares",
     type="event",
 )
 
 RemoveLiquidity = ABIEvent(
     anonymous=False,
     inputs=[
         ABIEventParams(indexed=True, name="provider", type="address"),
         ABIEventParams(indexed=True, name="destination", type="address"),
         ABIEventParams(indexed=False, name="lpAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="baseAmount", type="uint256"),
-        ABIEventParams(indexed=False, name="vaultShareAmount", type="uint256"),
+        ABIEventParams(indexed=False, name="amount", type="uint256"),
+        ABIEventParams(indexed=False, name="vaultSharePrice", type="uint256"),
         ABIEventParams(indexed=False, name="asBase", type="bool"),
         ABIEventParams(indexed=False, name="withdrawalShareAmount", type="uint256"),
         ABIEventParams(indexed=False, name="lpSharePrice", type="uint256"),
     ],
     name="RemoveLiquidity",
     type="event",
 )
@@ -402,14 +408,21 @@
 BelowMinimumContributionError = ErrorInfo(
     inputs=[],
     name="BelowMinimumContribution",
     selector="0xabed41c4",
     signature="BelowMinimumContribution()",
 )
 
+CircuitBreakerTriggeredError = ErrorInfo(
+    inputs=[],
+    name="CircuitBreakerTriggered",
+    selector="0x2a958098",
+    signature="CircuitBreakerTriggered()",
+)
+
 DecreasedPresentValueWhenAddingLiquidityError = ErrorInfo(
     inputs=[],
     name="DecreasedPresentValueWhenAddingLiquidity",
     selector="0x309b2a42",
     signature="DecreasedPresentValueWhenAddingLiquidity()",
 )
 
@@ -465,14 +478,21 @@
 InvalidERC20BridgeError = ErrorInfo(
     inputs=[],
     name="InvalidERC20Bridge",
     selector="0x2aab8bd3",
     signature="InvalidERC20Bridge()",
 )
 
+InvalidEffectiveShareReservesError = ErrorInfo(
+    inputs=[],
+    name="InvalidEffectiveShareReserves",
+    selector="0x85bd2ac4",
+    signature="InvalidEffectiveShareReserves()",
+)
+
 InvalidFeeDestinationError = ErrorInfo(
     inputs=[],
     name="InvalidFeeDestination",
     selector="0x2b44eccc",
     signature="InvalidFeeDestination()",
 )
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/MockERC4626Contract.py` & `agent0-0.20.0/src/agent0/hypertypes/types/MockERC4626Contract.py`

 * *Files 5% similar despite different names*

```diff
@@ -41,15 +41,15 @@
     ContractEvents,
     ContractFunction,
     ContractFunctions,
 )
 from web3.exceptions import FallbackNotFound
 from web3.types import ABI, BlockIdentifier, CallOverride, EventData, TxParams
 
-from .utilities import dataclass_to_tuple, rename_returned_types
+from .utilities import dataclass_to_tuple, rename_returned_types, try_bytecode_hexbytes
 
 structs = {}
 
 
 class MockERC4626DOMAIN_SEPARATORContractFunction(ContractFunction):
     """ContractFunction for the DOMAIN_SEPARATOR method."""
 
@@ -623,14 +623,41 @@
 
         # Call the function
 
         raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
         return cast(bool, rename_returned_types(structs, return_types, raw_values))
 
 
+class MockERC4626IsUnrestrictedContractFunction(ContractFunction):
+    """ContractFunction for the isUnrestricted method."""
+
+    def __call__(self, arg1: str) -> MockERC4626IsUnrestrictedContractFunction:  # type: ignore
+        clone = super().__call__(dataclass_to_tuple(arg1))
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> bool:
+        """returns bool."""
+        # Define the expected return types from the smart contract call
+
+        return_types = bool
+
+        # Call the function
+
+        raw_values = super().call(transaction, block_identifier, state_override, ccip_read_enabled)
+        return cast(bool, rename_returned_types(structs, return_types, raw_values))
+
+
 class MockERC4626MaxDepositContractFunction(ContractFunction):
     """ContractFunction for the maxDeposit method."""
 
     def __call__(self, arg1: str) -> MockERC4626MaxDepositContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(arg1))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -1119,14 +1146,36 @@
     ) -> None:
         """returns None."""
         # Define the expected return types from the smart contract call
 
         # Call the function
 
 
+class MockERC4626SetMaxMintAmountContractFunction(ContractFunction):
+    """ContractFunction for the setMaxMintAmount method."""
+
+    def __call__(self, maxMintAmount: int) -> MockERC4626SetMaxMintAmountContractFunction:  # type: ignore
+        clone = super().__call__(dataclass_to_tuple(maxMintAmount))
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> None:
+        """returns None."""
+        # Define the expected return types from the smart contract call
+
+        # Call the function
+
+
 class MockERC4626SetPublicCapabilityContractFunction(ContractFunction):
     """ContractFunction for the setPublicCapability method."""
 
     def __call__(self, functionSig: bytes, enabled: bool) -> MockERC4626SetPublicCapabilityContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(functionSig), dataclass_to_tuple(enabled))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -1207,14 +1256,36 @@
     ) -> None:
         """returns None."""
         # Define the expected return types from the smart contract call
 
         # Call the function
 
 
+class MockERC4626SetUnrestrictedMintStatusContractFunction(ContractFunction):
+    """ContractFunction for the setUnrestrictedMintStatus method."""
+
+    def __call__(self, target: str, status: bool) -> MockERC4626SetUnrestrictedMintStatusContractFunction:  # type: ignore
+        clone = super().__call__(dataclass_to_tuple(target), dataclass_to_tuple(status))
+        self.kwargs = clone.kwargs
+        self.args = clone.args
+        return self
+
+    def call(
+        self,
+        transaction: TxParams | None = None,
+        block_identifier: BlockIdentifier = "latest",
+        state_override: CallOverride | None = None,
+        ccip_read_enabled: bool | None = None,
+    ) -> None:
+        """returns None."""
+        # Define the expected return types from the smart contract call
+
+        # Call the function
+
+
 class MockERC4626SetUserRoleContractFunction(ContractFunction):
     """ContractFunction for the setUserRole method."""
 
     def __call__(self, user: str, role: int, enabled: bool) -> MockERC4626SetUserRoleContractFunction:  # type: ignore
         clone = super().__call__(dataclass_to_tuple(user), dataclass_to_tuple(role), dataclass_to_tuple(enabled))
         self.kwargs = clone.kwargs
         self.args = clone.args
@@ -1456,14 +1527,16 @@
 
     getUserRoles: MockERC4626GetUserRolesContractFunction
 
     isCapabilityPublic: MockERC4626IsCapabilityPublicContractFunction
 
     isCompetitionMode: MockERC4626IsCompetitionModeContractFunction
 
+    isUnrestricted: MockERC4626IsUnrestrictedContractFunction
+
     maxDeposit: MockERC4626MaxDepositContractFunction
 
     maxMint: MockERC4626MaxMintContractFunction
 
     maxMintAmount: MockERC4626MaxMintAmountContractFunction
 
     maxRedeem: MockERC4626MaxRedeemContractFunction
@@ -1488,22 +1561,26 @@
 
     previewWithdraw: MockERC4626PreviewWithdrawContractFunction
 
     redeem: MockERC4626RedeemContractFunction
 
     setAuthority: MockERC4626SetAuthorityContractFunction
 
+    setMaxMintAmount: MockERC4626SetMaxMintAmountContractFunction
+
     setPublicCapability: MockERC4626SetPublicCapabilityContractFunction
 
     setRate: MockERC4626SetRateContractFunction
 
     setRoleCapability: MockERC4626SetRoleCapabilityContractFunction
 
     setTargetCustomAuthority: MockERC4626SetTargetCustomAuthorityContractFunction
 
+    setUnrestrictedMintStatus: MockERC4626SetUnrestrictedMintStatusContractFunction
+
     setUserRole: MockERC4626SetUserRoleContractFunction
 
     symbol: MockERC4626SymbolContractFunction
 
     totalAssets: MockERC4626TotalAssetsContractFunction
 
     totalSupply: MockERC4626TotalSupplyContractFunction
@@ -1680,14 +1757,22 @@
             "isCompetitionMode",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="isCompetitionMode",
         )
+        self.isUnrestricted = MockERC4626IsUnrestrictedContractFunction.factory(
+            "isUnrestricted",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="isUnrestricted",
+        )
         self.maxDeposit = MockERC4626MaxDepositContractFunction.factory(
             "maxDeposit",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="maxDeposit",
@@ -1808,14 +1893,22 @@
             "setAuthority",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="setAuthority",
         )
+        self.setMaxMintAmount = MockERC4626SetMaxMintAmountContractFunction.factory(
+            "setMaxMintAmount",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="setMaxMintAmount",
+        )
         self.setPublicCapability = MockERC4626SetPublicCapabilityContractFunction.factory(
             "setPublicCapability",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="setPublicCapability",
@@ -1840,14 +1933,22 @@
             "setTargetCustomAuthority",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="setTargetCustomAuthority",
         )
+        self.setUnrestrictedMintStatus = MockERC4626SetUnrestrictedMintStatusContractFunction.factory(
+            "setUnrestrictedMintStatus",
+            w3=w3,
+            contract_abi=abi,
+            address=address,
+            decode_tuples=decode_tuples,
+            function_identifier="setUnrestrictedMintStatus",
+        )
         self.setUserRole = MockERC4626SetUserRoleContractFunction.factory(
             "setUserRole",
             w3=w3,
             contract_abi=abi,
             address=address,
             decode_tuples=decode_tuples,
             function_identifier="setUserRole",
@@ -2953,14 +3054,21 @@
             "name": "isCompetitionMode",
             "inputs": [],
             "outputs": [{"name": "", "type": "bool", "internalType": "bool"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
+            "name": "isUnrestricted",
+            "inputs": [{"name": "", "type": "address", "internalType": "address"}],
+            "outputs": [{"name": "", "type": "bool", "internalType": "bool"}],
+            "stateMutability": "view",
+        },
+        {
+            "type": "function",
             "name": "maxDeposit",
             "inputs": [{"name": "", "type": "address", "internalType": "address"}],
             "outputs": [{"name": "", "type": "uint256", "internalType": "uint256"}],
             "stateMutability": "view",
         },
         {
             "type": "function",
@@ -3097,14 +3205,21 @@
             "name": "setAuthority",
             "inputs": [{"name": "newAuthority", "type": "address", "internalType": "contract Authority"}],
             "outputs": [],
             "stateMutability": "nonpayable",
         },
         {
             "type": "function",
+            "name": "setMaxMintAmount",
+            "inputs": [{"name": "_maxMintAmount", "type": "uint256", "internalType": "uint256"}],
+            "outputs": [],
+            "stateMutability": "nonpayable",
+        },
+        {
+            "type": "function",
             "name": "setPublicCapability",
             "inputs": [
                 {"name": "functionSig", "type": "bytes4", "internalType": "bytes4"},
                 {"name": "enabled", "type": "bool", "internalType": "bool"},
             ],
             "outputs": [],
             "stateMutability": "nonpayable",
@@ -3135,14 +3250,24 @@
                 {"name": "customAuthority", "type": "address", "internalType": "contract Authority"},
             ],
             "outputs": [],
             "stateMutability": "nonpayable",
         },
         {
             "type": "function",
+            "name": "setUnrestrictedMintStatus",
+            "inputs": [
+                {"name": "_target", "type": "address", "internalType": "address"},
+                {"name": "_status", "type": "bool", "internalType": "bool"},
+            ],
+            "outputs": [],
+            "stateMutability": "nonpayable",
+        },
+        {
+            "type": "function",
             "name": "setUserRole",
             "inputs": [
                 {"name": "user", "type": "address", "internalType": "address"},
                 {"name": "role", "type": "uint8", "internalType": "uint8"},
                 {"name": "enabled", "type": "bool", "internalType": "bool"},
             ],
             "outputs": [],
@@ -3307,23 +3432,23 @@
             ],
             "anonymous": False,
         },
     ],
 )
 # pylint: disable=line-too-long
 mockerc4626_bytecode = HexStr(
-    "0x6101406040523480156200001257600080fd5b5060405162002b9738038062002b97833981016040819052620000359162000315565b823081818a8a8a8181846001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156200007d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620000a39190620003d8565b6000620000b1848262000493565b506001620000c0838262000493565b5060ff81166080524660a052620000d66200019b565b60c0525050506001600160a01b0392831660e0525050600680548483166001600160a01b0319918216811790925560078054938516939091169290921790915560405133907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a36040516001600160a01b0382169033907fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b7638998019890600090a3505050600c9490945542600d55901515610100526101205250620005dd9350505050565b60007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f6000604051620001cf91906200055f565b6040805191829003822060208301939093528101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201523060a082015260c00160405160208183030381529060405280519060200120905090565b6001600160a01b03811681146200024d57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200027857600080fd5b81516001600160401b038082111562000295576200029562000250565b604051601f8301601f19908116603f01168101908282118183101715620002c057620002c062000250565b81604052838152602092508683858801011115620002dd57600080fd5b600091505b83821015620003015785820183015181830184015290820190620002e2565b600093810190920192909252949350505050565b600080600080600080600060e0888a0312156200033157600080fd5b87516200033e8162000237565b60208901519097506001600160401b03808211156200035c57600080fd5b6200036a8b838c0162000266565b975060408a01519150808211156200038157600080fd5b50620003908a828b0162000266565b955050606088015193506080880151620003aa8162000237565b60a08901519093508015158114620003c157600080fd5b8092505060c0880151905092959891949750929550565b600060208284031215620003eb57600080fd5b815160ff81168114620003fd57600080fd5b9392505050565b600181811c908216806200041957607f821691505b6020821081036200043a57634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200048e57600081815260208120601f850160051c81016020861015620004695750805b601f850160051c820191505b818110156200048a5782815560010162000475565b5050505b505050565b81516001600160401b03811115620004af57620004af62000250565b620004c781620004c0845462000404565b8462000440565b602080601f831160018114620004ff5760008415620004e65750858301515b600019600386901b1c1916600185901b1785556200048a565b600085815260208120601f198616915b8281101562000530578886015182559484019460019091019084016200050f565b50858210156200054f5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60008083546200056f8162000404565b600182811680156200058a5760018114620005a057620005d1565b60ff1984168752821515830287019450620005d1565b8760005260208060002060005b85811015620005c85781548a820152908401908201620005ad565b50505082870194505b50929695505050505050565b60805160a05160c05160e05161010051610120516125086200068f600039600081816103d501528181610ca7015261115101526000818161056401528181610b9401528181610c4f01528181610d250152818161109701526110f901526000818161046301528181610807015281816116ee0152818161187c01528181611a9601528181611b2e01528181611c800152611dc201526000610c2b01526000610bfb0152600061040f01526125086000f3fe608060405234801561001057600080fd5b50600436106102f15760003560e01c80637a8c63b51161019d578063bf7e214f116100e9578063d905777e116100a2578063ea7ca2761161007c578063ea7ca2761461076b578063ed0d0efb146107a2578063ef8b30f7146107c2578063f2fde38b146107d557600080fd5b8063d905777e146106e1578063dd62ed3e1461070a578063e688747b1461073557600080fd5b8063bf7e214f1461066c578063c53a39851461067f578063c63d75b61461049d578063c6e6f592146106a8578063ce96cb77146106bb578063d505accf146106ce57600080fd5b80639dc29fac11610156578063b3d7f6b911610130578063b3d7f6b914610620578063b460af9414610633578063b700961314610646578063ba0876521461065957600080fd5b80639dc29fac146105e7578063a0712d68146105fa578063a9059cbb1461060d57600080fd5b80637a8c63b51461055f5780637a9e5e4b146105865780637ecebe00146105995780638da5cb5b146105b957806394bf804d146105cc57806395d89b41146105df57600080fd5b806334fcf4371161025c5780634b5159da1161021557806367aff484116101ef57806367aff484146105065780636e553f651461051957806370a082311461052c578063728b952b1461054c57600080fd5b80634b5159da146104d85780634cdad506146104eb578063679aefce146104fe57600080fd5b806334fcf437146104435780633644e5151461045657806338d52e0f1461045e578063402d267d1461049d57806340c10f19146104b257806342966c68146104c557600080fd5b80630bade8a4116102ae5780630bade8a41461038f5780630ea9b75b146103b257806318160ddd146103c7578063239c70ae146103d057806323b872dd146103f7578063313ce5671461040a57600080fd5b806301e1d114146102f657806306a36aee1461031157806306fdde031461033157806307a2d13a14610346578063095ea7b3146103595780630a28a4771461037c575b600080fd5b6102fe6107e8565b6040519081526020015b60405180910390f35b6102fe61031f366004611f4b565b60096020526000908152604090205481565b610339610889565b6040516103089190611f68565b6102fe610354366004611fb6565b610917565b61036c610367366004611fcf565b610944565b6040519015158152602001610308565b6102fe61038a366004611fb6565b6109b1565b61036c61039d366004612018565b600a6020526000908152604090205460ff1681565b6103c56103c0366004612052565b6109d1565b005b6102fe60025481565b6102fe7f000000000000000000000000000000000000000000000000000000000000000081565b61036c610405366004612099565b610ab2565b6104317f000000000000000000000000000000000000000000000000000000000000000081565b60405160ff9091168152602001610308565b6103c5610451366004611fb6565b610b92565b6102fe610bf7565b6104857f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b039091168152602001610308565b6102fe6104ab366004611f4b565b5060001990565b6103c56104c0366004611fcf565b610c4d565b6103c56104d3366004611fb6565b610d23565b6103c56104e63660046120da565b610d88565b6102fe6104f9366004611fb6565b610e1a565b600c546102fe565b6103c5610514366004612111565b610e25565b6102fe61052736600461213f565b610eed565b6102fe61053a366004611f4b565b60036020526000908152604090205481565b6103c561055a366004612164565b610f01565b61036c7f000000000000000000000000000000000000000000000000000000000000000081565b6103c5610594366004611f4b565b610f8a565b6102fe6105a7366004611f4b565b60056020526000908152604090205481565b600654610485906001600160a01b031681565b6102fe6105da36600461213f565b611074565b610339611088565b6103c56105f5366004611fcf565b611095565b6103c5610608366004611fb6565b6110f7565b61036c61061b366004611fcf565b6111c9565b6102fe61062e366004611fb6565b61122f565b6102fe610641366004612192565b61124e565b61036c6106543660046121c9565b61126b565b6102fe610667366004612192565b611369565b600754610485906001600160a01b031681565b61048561068d366004611f4b565b6008602052600090815260409020546001600160a01b031681565b6102fe6106b6366004611fb6565b61137e565b6102fe6106c9366004611f4b565b61139e565b6103c56106dc366004612210565b6113c0565b6102fe6106ef366004611f4b565b6001600160a01b031660009081526003602052604090205490565b6102fe610718366004612164565b600460209081526000928352604080842090915290825290205481565b61036c61074336600461227e565b6001600160e01b0319166000908152600b602052604090205460ff919091161c600116151590565b61036c6107793660046122b1565b6001600160a01b0391909116600090815260096020526040902054600160ff9092161c16151590565b6102fe6107b0366004612018565b600b6020526000908152604090205481565b6102fe6107d0366004611fb6565b611604565b6103c56107e3366004611f4b565b61160f565b60006107f261168d565b6040516370a0823160e01b81523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa158015610856573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061087a91906122dd565b610884919061230c565b905090565b600080546108969061231f565b80601f01602080910402602001604051908101604052809291908181526020018280546108c29061231f565b801561090f5780601f106108e45761010080835404028352916020019161090f565b820191906000526020600020905b8154815290600101906020018083116108f257829003601f168201915b505050505081565b600254600090801561093b5761093661092e6107e8565b849083611767565b61093d565b825b9392505050565b3360008181526004602090815260408083206001600160a01b038716808552925280832085905551919290917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259061099f9086815260200190565b60405180910390a35060015b92915050565b600254600090801561093b57610936816109c96107e8565b859190611785565b6109e7336000356001600160e01b0319166117ab565b610a0c5760405162461bcd60e51b8152600401610a0390612359565b60405180910390fd5b8015610a3c576001600160e01b031982166000908152600b602052604090208054600160ff86161b179055610a63565b6001600160e01b031982166000908152600b602052604090208054600160ff86161b191690555b816001600160e01b0319168360ff167fbfe16b2c35ce23dfd1ab0e7b5d086a10060c9b52d1574e1680c881b3b3a2b15183604051610aa5911515815260200190565b60405180910390a3505050565b6001600160a01b03831660009081526004602090815260408083203384529091528120546000198114610b0e57610ae9838261237f565b6001600160a01b03861660009081526004602090815260408083203384529091529020555b6001600160a01b03851660009081526003602052604081208054859290610b3690849061237f565b90915550506001600160a01b03808516600081815260036020526040908190208054870190555190918716906000805160206124b383398151915290610b7f9087815260200190565b60405180910390a3506001949350505050565b7f000000000000000000000000000000000000000000000000000000000000000015610bea57610bce336000356001600160e01b0319166117ab565b610bea5760405162461bcd60e51b8152600401610a0390612392565b610bf2611854565b600c55565b60007f00000000000000000000000000000000000000000000000000000000000000004614610c28576108846118e8565b507f000000000000000000000000000000000000000000000000000000000000000090565b7f000000000000000000000000000000000000000000000000000000000000000015610ca557610c89336000356001600160e01b0319166117ab565b610ca55760405162461bcd60e51b8152600401610a0390612392565b7f0000000000000000000000000000000000000000000000000000000000000000811115610d155760405162461bcd60e51b815260206004820181905260248201527f4d6f636b455243343632363a20496e76616c6964206d696e7420616d6f756e746044820152606401610a03565b610d1f8282611982565b5050565b7f000000000000000000000000000000000000000000000000000000000000000015610d7b57610d5f336000356001600160e01b0319166117ab565b610d7b5760405162461bcd60e51b8152600401610a0390612392565b610d8533826119dc565b50565b610d9e336000356001600160e01b0319166117ab565b610dba5760405162461bcd60e51b8152600401610a0390612359565b6001600160e01b031982166000818152600a6020908152604091829020805460ff191685151590811790915591519182527f36d28126bef21a4f3765d7fcb7c45cead463ae4c41094ef3b771ede598544103910160405180910390a25050565b60006109ab82610917565b610e3b336000356001600160e01b0319166117ab565b610e575760405162461bcd60e51b8152600401610a0390612359565b8015610e86576001600160a01b03831660009081526009602052604090208054600160ff85161b179055610eac565b6001600160a01b03831660009081526009602052604090208054600160ff85161b191690555b8160ff16836001600160a01b03167f4c9bdd0c8e073eb5eda2250b18d8e5121ff27b62064fbeeeed4869bb99bc5bf283604051610aa5911515815260200190565b6000610ef7611854565b61093d8383611a3e565b610f17336000356001600160e01b0319166117ab565b610f335760405162461bcd60e51b8152600401610a0390612359565b6001600160a01b0382811660008181526008602052604080822080546001600160a01b0319169486169485179055517fa4908e11a5f895b13d51526c331ac93cdd30e59772361c5d07874eb36bff20659190a35050565b6006546001600160a01b031633148061101f575060075460405163b700961360e01b81526001600160a01b039091169063b700961390610fde90339030906001600160e01b031960003516906004016123c9565b602060405180830381865afa158015610ffb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061101f91906123f6565b61102857600080fd5b600780546001600160a01b0319166001600160a01b03831690811790915560405133907fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b7638998019890600090a350565b600061107e611854565b61093d8383611b14565b600180546108969061231f565b7f0000000000000000000000000000000000000000000000000000000000000000156110ed576110d1336000356001600160e01b0319166117ab565b6110ed5760405162461bcd60e51b8152600401610a0390612392565b610d1f82826119dc565b7f00000000000000000000000000000000000000000000000000000000000000001561114f57611133336000356001600160e01b0319166117ab565b61114f5760405162461bcd60e51b8152600401610a0390612392565b7f00000000000000000000000000000000000000000000000000000000000000008111156111bf5760405162461bcd60e51b815260206004820181905260248201527f4d6f636b455243343632363a20496e76616c6964206d696e7420616d6f756e746044820152606401610a03565b610d853382611982565b336000908152600360205260408120805483919083906111ea90849061237f565b90915550506001600160a01b038316600081815260036020526040908190208054850190555133906000805160206124b38339815191529061099f9086815260200190565b600254600090801561093b576109366112466107e8565b849083611785565b6000611258611854565b611263848484611ba3565b949350505050565b6001600160a01b0380831660009081526008602052604081205490911680156113075760405163b700961360e01b81526001600160a01b0382169063b7009613906112be908890889088906004016123c9565b602060405180830381865afa1580156112db573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112ff91906123f6565b91505061093d565b6001600160e01b031983166000908152600a602052604090205460ff168061136057506001600160e01b031983166000908152600b60209081526040808320546001600160a01b03891684526009909252909120541615155b95945050505050565b6000611373611854565b611263848484611ca7565b600254600090801561093b57610936816113966107e8565b859190611767565b6001600160a01b0381166000908152600360205260408120546109ab90610917565b428410156114105760405162461bcd60e51b815260206004820152601760248201527f5045524d49545f444541444c494e455f455850495245440000000000000000006044820152606401610a03565b6000600161141c610bf7565b6001600160a01b038a811660008181526005602090815260409182902080546001810190915582517f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c98184015280840194909452938d166060840152608083018c905260a083019390935260c08083018b90528151808403909101815260e08301909152805192019190912061190160f01b6101008301526101028201929092526101228101919091526101420160408051601f198184030181528282528051602091820120600084529083018083525260ff871690820152606081018590526080810184905260a0016020604051602081039080840390855afa158015611528573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b0381161580159061155e5750876001600160a01b0316816001600160a01b0316145b61159b5760405162461bcd60e51b815260206004820152600e60248201526d24a72b20a624a22fa9a4a3a722a960911b6044820152606401610a03565b6001600160a01b0390811660009081526004602090815260408083208a8516808552908352928190208990555188815291928a16917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a350505050505050565b60006109ab8261137e565b611625336000356001600160e01b0319166117ab565b6116415760405162461bcd60e51b8152600401610a0390612359565b600680546001600160a01b0319166001600160a01b03831690811790915560405133907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a350565b6000600c5460000361169f5750600090565b60006116bd6301e13380600d54426116b7919061237f565b90611de9565b9050600061093d6116d983600c54611dfe90919063ffffffff16565b6040516370a0823160e01b81523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa15801561173d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061176191906122dd565b90611dfe565b600082600019048411830215820261177e57600080fd5b5091020490565b600082600019048411830215820261179c57600080fd5b50910281810615159190040190565b6007546000906001600160a01b03168015801590611835575060405163b700961360e01b81526001600160a01b0382169063b7009613906117f4908790309088906004016123c9565b602060405180830381865afa158015611811573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061183591906123f6565b8061126357506006546001600160a01b03858116911614949350505050565b600061185e61168d565b905080156118e15760405163140e25ad60e31b8152600481018290527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063a0712d6890602401600060405180830381600087803b1580156118c857600080fd5b505af11580156118dc573d6000803e3d6000fd5b505050505b5042600d55565b60007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f600060405161191a9190612413565b6040805191829003822060208301939093528101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201523060a082015260c00160405160208183030381529060405280519060200120905090565b8060026000828254611994919061230c565b90915550506001600160a01b0382166000818152600360209081526040808320805486019055518481526000805160206124b383398151915291015b60405180910390a35050565b6001600160a01b03821660009081526003602052604081208054839290611a0490849061237f565b90915550506002805482900390556040518181526000906001600160a01b038416906000805160206124b3833981519152906020016119d0565b6000611a4983611604565b905080600003611a895760405162461bcd60e51b815260206004820152600b60248201526a5a45524f5f53484152455360a81b6044820152606401610a03565b611abe6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016333086611e13565b611ac88282611982565b60408051848152602081018390526001600160a01b0384169133917fdcbc1c05240f31ff3ad067ef1ee35ce4997762752e3a095284754544f4c709d791015b60405180910390a36109ab565b6000611b1f8361122f565b9050611b566001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016333084611e13565b611b608284611982565b60408051828152602081018590526001600160a01b0384169133917fdcbc1c05240f31ff3ad067ef1ee35ce4997762752e3a095284754544f4c709d79101611b07565b6000611bae846109b1565b9050336001600160a01b03831614611c1e576001600160a01b03821660009081526004602090815260408083203384529091529020546000198114611c1c57611bf7828261237f565b6001600160a01b03841660009081526004602090815260408083203384529091529020555b505b611c2882826119dc565b60408051858152602081018390526001600160a01b03808516929086169133917ffbde797d201c681b91056529119e0b02407c7bb96a4a2c75c01fc9667232c8db910160405180910390a461093d6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000168486611eaf565b6000336001600160a01b03831614611d17576001600160a01b03821660009081526004602090815260408083203384529091529020546000198114611d1557611cf0858261237f565b6001600160a01b03841660009081526004602090815260408083203384529091529020555b505b611d2084610e1a565b905080600003611d605760405162461bcd60e51b815260206004820152600b60248201526a5a45524f5f41535345545360a81b6044820152606401610a03565b611d6a82856119dc565b60408051828152602081018690526001600160a01b03808516929086169133917ffbde797d201c681b91056529119e0b02407c7bb96a4a2c75c01fc9667232c8db910160405180910390a461093d6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000168483611eaf565b600061093d83670de0b6b3a764000084611767565b600061093d8383670de0b6b3a7640000611767565b60006040516323b872dd60e01b81526001600160a01b03851660048201526001600160a01b03841660248201528260448201526020600060648360008a5af13d15601f3d1160016000511416171691505080611ea85760405162461bcd60e51b81526020600482015260146024820152731514905394d1915497d19493d357d1905253115160621b6044820152606401610a03565b5050505050565b600060405163a9059cbb60e01b81526001600160a01b0384166004820152826024820152602060006044836000895af13d15601f3d1160016000511416171691505080611f305760405162461bcd60e51b815260206004820152600f60248201526e1514905394d1915497d19052531151608a1b6044820152606401610a03565b50505050565b6001600160a01b0381168114610d8557600080fd5b600060208284031215611f5d57600080fd5b813561093d81611f36565b600060208083528351808285015260005b81811015611f9557858101830151858201604001528201611f79565b506000604082860101526040601f19601f8301168501019250505092915050565b600060208284031215611fc857600080fd5b5035919050565b60008060408385031215611fe257600080fd5b8235611fed81611f36565b946020939093013593505050565b80356001600160e01b03198116811461201357600080fd5b919050565b60006020828403121561202a57600080fd5b61093d82611ffb565b803560ff8116811461201357600080fd5b8015158114610d8557600080fd5b60008060006060848603121561206757600080fd5b61207084612033565b925061207e60208501611ffb565b9150604084013561208e81612044565b809150509250925092565b6000806000606084860312156120ae57600080fd5b83356120b981611f36565b925060208401356120c981611f36565b929592945050506040919091013590565b600080604083850312156120ed57600080fd5b6120f683611ffb565b9150602083013561210681612044565b809150509250929050565b60008060006060848603121561212657600080fd5b833561213181611f36565b925061207e60208501612033565b6000806040838503121561215257600080fd5b82359150602083013561210681611f36565b6000806040838503121561217757600080fd5b823561218281611f36565b9150602083013561210681611f36565b6000806000606084860312156121a757600080fd5b8335925060208401356121b981611f36565b9150604084013561208e81611f36565b6000806000606084860312156121de57600080fd5b83356121e981611f36565b925060208401356121f981611f36565b915061220760408501611ffb565b90509250925092565b600080600080600080600060e0888a03121561222b57600080fd5b873561223681611f36565b9650602088013561224681611f36565b9550604088013594506060880135935061226260808901612033565b925060a0880135915060c0880135905092959891949750929550565b6000806040838503121561229157600080fd5b61229a83612033565b91506122a860208401611ffb565b90509250929050565b600080604083850312156122c457600080fd5b82356122cf81611f36565b91506122a860208401612033565b6000602082840312156122ef57600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b808201808211156109ab576109ab6122f6565b600181811c9082168061233357607f821691505b60208210810361235357634e487b7160e01b600052602260045260246000fd5b50919050565b6020808252600c908201526b15539055551213d49256915160a21b604082015260600190565b818103818111156109ab576109ab6122f6565b6020808252601b908201527f4d6f636b455243343632363a206e6f7420617574686f72697a65640000000000604082015260600190565b6001600160a01b0393841681529190921660208201526001600160e01b0319909116604082015260600190565b60006020828403121561240857600080fd5b815161093d81612044565b600080835481600182811c91508083168061242f57607f831692505b6020808410820361244e57634e487b7160e01b86526022600452602486fd5b8180156124625760018114612477576124a4565b60ff19861689528415158502890196506124a4565b60008a81526020902060005b8681101561249c5781548b820152908501908301612483565b505084890196505b50949897505050505050505056feddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa26469706673582212205e379b5a159894b650843fb5d82d7bc685bfeab068513c374035b14a5522fec364736f6c63430008140033"
+    "0x6101206040523480156200001257600080fd5b5060405162002f3338038062002f33833981016040819052620000359162000314565b823081818a8a8a8181846001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156200007d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620000a39190620003d7565b6000620000b1848262000492565b506001620000c0838262000492565b5060ff81166080524660a052620000d66200019a565b60c0525050506001600160a01b0392831660e0525050600680548483166001600160a01b0319918216811790925560078054938516939091169290921790915560405133907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a36040516001600160a01b0382169033907fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b7638998019890600090a3505050600c9490945542600d5590151561010052600e5550620005dc9350505050565b60007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f6000604051620001ce91906200055e565b6040805191829003822060208301939093528101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201523060a082015260c00160405160208183030381529060405280519060200120905090565b6001600160a01b03811681146200024c57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200027757600080fd5b81516001600160401b03808211156200029457620002946200024f565b604051601f8301601f19908116603f01168101908282118183101715620002bf57620002bf6200024f565b81604052838152602092508683858801011115620002dc57600080fd5b600091505b83821015620003005785820183015181830184015290820190620002e1565b600093810190920192909252949350505050565b600080600080600080600060e0888a0312156200033057600080fd5b87516200033d8162000236565b60208901519097506001600160401b03808211156200035b57600080fd5b620003698b838c0162000265565b975060408a01519150808211156200038057600080fd5b506200038f8a828b0162000265565b955050606088015193506080880151620003a98162000236565b60a08901519093508015158114620003c057600080fd5b8092505060c0880151905092959891949750929550565b600060208284031215620003ea57600080fd5b815160ff81168114620003fc57600080fd5b9392505050565b600181811c908216806200041857607f821691505b6020821081036200043957634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200048d57600081815260208120601f850160051c81016020861015620004685750805b601f850160051c820191505b81811015620004895782815560010162000474565b5050505b505050565b81516001600160401b03811115620004ae57620004ae6200024f565b620004c681620004bf845462000403565b846200043f565b602080601f831160018114620004fe5760008415620004e55750858301515b600019600386901b1c1916600185901b17855562000489565b600085815260208120601f198616915b828110156200052f578886015182559484019460019091019084016200050e565b50858210156200054e5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60008083546200056e8162000403565b600182811680156200058957600181146200059f57620005d0565b60ff1984168752821515830287019450620005d0565b8760005260208060002060005b85811015620005c75781548a820152908401908201620005ac565b50505082870194505b50929695505050505050565b60805160a05160c05160e051610100516128946200069f600039600081816105bd0152818161090701528181610a4e01528181610cf001528181610dab01528181610f02015281816112fc01526113e60152600081816104bc0152818161088301528181610e6c01528181610f5a01528181611354015281816114a701528181611a5c01528181611bea01528181611e0401528181611e9c01528181611fee015261213001526000610d8701526000610d570152600061046801526128946000f3fe608060405234801561001057600080fd5b50600436106103425760003560e01c80637a8c63b5116101b8578063ba08765211610104578063d905777e116100a2578063ea7ca2761161007c578063ea7ca276146107e7578063ed0d0efb1461081e578063ef8b30f71461083e578063f2fde38b1461085157600080fd5b8063d905777e1461075d578063dd62ed3e14610786578063e688747b146107b157600080fd5b8063c63d75b6116100de578063c63d75b6146104f6578063c6e6f59214610724578063ce96cb7714610737578063d505accf1461074a57600080fd5b8063ba087652146106d5578063bf7e214f146106e8578063c53a3985146106fb57600080fd5b80639dc29fac11610171578063aed307771161014b578063aed3077714610679578063b3d7f6b91461069c578063b460af94146106af578063b7009613146106c257600080fd5b80639dc29fac14610640578063a0712d6814610653578063a9059cbb1461066657600080fd5b80637a8c63b5146105b85780637a9e5e4b146105df5780637ecebe00146105f25780638da5cb5b1461061257806394bf804d1461062557806395d89b411461063857600080fd5b8063313ce567116102925780634b5159da1161023057806367aff4841161020a57806367aff4841461055f5780636e553f651461057257806370a0823114610585578063728b952b146105a557600080fd5b80634b5159da146105315780634cdad50614610544578063679aefce1461055757600080fd5b806338d52e0f1161026c57806338d52e0f146104b7578063402d267d146104f657806340c10f191461050b57806342966c681461051e57600080fd5b8063313ce5671461046357806334fcf4371461049c5780633644e515146104af57600080fd5b8063095ea7b3116102ff5780630ea9b75b116102d95780630ea9b75b1461042b57806318160ddd1461043e578063239c70ae1461044757806323b872dd1461045057600080fd5b8063095ea7b3146103d25780630a28a477146103f55780630bade8a41461040857600080fd5b806301e1d1141461034757806305f05a941461036257806306a36aee1461037757806306fdde031461039757806307a2d13a146103ac578063088a4ed0146103bf575b600080fd5b61034f610864565b6040519081526020015b60405180910390f35b6103756103703660046122c7565b610905565b005b61034f610385366004612300565b60096020526000908152604090205481565b61039f610991565b604051610359919061231d565b61034f6103ba36600461236b565b610a1f565b6103756103cd36600461236b565b610a4c565b6103e56103e0366004612384565b610aa9565b6040519015158152602001610359565b61034f61040336600461236b565b610b16565b6103e56104163660046123cd565b600a6020526000908152604090205460ff1681565b6103756104393660046123f9565b610b36565b61034f60025481565b61034f600e5481565b6103e561045e366004612440565b610c0e565b61048a7f000000000000000000000000000000000000000000000000000000000000000081565b60405160ff9091168152602001610359565b6103756104aa36600461236b565b610cee565b61034f610d53565b6104de7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b039091168152602001610359565b61034f610504366004612300565b5060001990565b610375610519366004612384565b610da9565b61037561052c36600461236b565b610f00565b61037561053f366004612481565b610fed565b61034f61055236600461236b565b61107f565b600c5461034f565b61037561056d36600461249d565b61108a565b61034f6105803660046124cb565b611152565b61034f610593366004612300565b60036020526000908152604090205481565b6103756105b33660046124f0565b611166565b6103e57f000000000000000000000000000000000000000000000000000000000000000081565b6103756105ed366004612300565b6111ef565b61034f610600366004612300565b60056020526000908152604090205481565b6006546104de906001600160a01b031681565b61034f6106333660046124cb565b6112d9565b61039f6112ed565b61037561064e366004612384565b6112fa565b61037561066136600461236b565b6113e4565b6103e5610674366004612384565b611537565b6103e5610687366004612300565b600f6020526000908152604090205460ff1681565b61034f6106aa36600461236b565b61159d565b61034f6106bd36600461251e565b6115bc565b6103e56106d0366004612555565b6115d9565b61034f6106e336600461251e565b6116d7565b6007546104de906001600160a01b031681565b6104de610709366004612300565b6008602052600090815260409020546001600160a01b031681565b61034f61073236600461236b565b6116ec565b61034f610745366004612300565b61170c565b61037561075836600461259c565b61172e565b61034f61076b366004612300565b6001600160a01b031660009081526003602052604090205490565b61034f6107943660046124f0565b600460209081526000928352604080842090915290825290205481565b6103e56107bf36600461260a565b6001600160e01b0319166000908152600b602052604090205460ff919091161c600116151590565b6103e56107f536600461263d565b6001600160a01b0391909116600090815260096020526040902054600160ff9092161c16151590565b61034f61082c3660046123cd565b600b6020526000908152604090205481565b61034f61084c36600461236b565b611972565b61037561085f366004612300565b61197d565b600061086e6119fb565b6040516370a0823160e01b81523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa1580156108d2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108f69190612669565b6109009190612698565b905090565b7f00000000000000000000000000000000000000000000000000000000000000001561096657610941336000356001600160e01b031916611ad5565b6109665760405162461bcd60e51b815260040161095d906126ab565b60405180910390fd5b6001600160a01b03919091166000908152600f60205260409020805460ff1916911515919091179055565b6000805461099e906126e2565b80601f01602080910402602001604051908101604052809291908181526020018280546109ca906126e2565b8015610a175780601f106109ec57610100808354040283529160200191610a17565b820191906000526020600020905b8154815290600101906020018083116109fa57829003601f168201915b505050505081565b6002546000908015610a4357610a3e610a36610864565b849083611b7e565b610a45565b825b9392505050565b7f000000000000000000000000000000000000000000000000000000000000000015610aa457610a88336000356001600160e01b031916611ad5565b610aa45760405162461bcd60e51b815260040161095d906126ab565b600e55565b3360008181526004602090815260408083206001600160a01b038716808552925280832085905551919290917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92590610b049086815260200190565b60405180910390a35060015b92915050565b6002546000908015610a4357610a3e81610b2e610864565b859190611b9c565b610b4c336000356001600160e01b031916611ad5565b610b685760405162461bcd60e51b815260040161095d9061271c565b8015610b98576001600160e01b031982166000908152600b602052604090208054600160ff86161b179055610bbf565b6001600160e01b031982166000908152600b602052604090208054600160ff86161b191690555b816001600160e01b0319168360ff167fbfe16b2c35ce23dfd1ab0e7b5d086a10060c9b52d1574e1680c881b3b3a2b15183604051610c01911515815260200190565b60405180910390a3505050565b6001600160a01b03831660009081526004602090815260408083203384529091528120546000198114610c6a57610c458382612742565b6001600160a01b03861660009081526004602090815260408083203384529091529020555b6001600160a01b03851660009081526003602052604081208054859290610c92908490612742565b90915550506001600160a01b038085166000818152600360205260409081902080548701905551909187169060008051602061283f83398151915290610cdb9087815260200190565b60405180910390a3506001949350505050565b7f000000000000000000000000000000000000000000000000000000000000000015610d4657610d2a336000356001600160e01b031916611ad5565b610d465760405162461bcd60e51b815260040161095d906126ab565b610d4e611bc2565b600c55565b60007f00000000000000000000000000000000000000000000000000000000000000004614610d8457610900611c56565b507f000000000000000000000000000000000000000000000000000000000000000090565b7f000000000000000000000000000000000000000000000000000000000000000015610e0157610de5336000356001600160e01b031916611ad5565b610e015760405162461bcd60e51b815260040161095d906126ab565b336000908152600f602052604090205460ff16610e6a57600e54811115610e6a5760405162461bcd60e51b815260206004820181905260248201527f4d6f636b455243343632363a20496e76616c6964206d696e7420616d6f756e74604482015260640161095d565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663a0712d68610ea283610a1f565b6040518263ffffffff1660e01b8152600401610ec091815260200190565b600060405180830381600087803b158015610eda57600080fd5b505af1158015610eee573d6000803e3d6000fd5b50505050610efc8282611cf0565b5050565b7f000000000000000000000000000000000000000000000000000000000000000015610f5857610f3c336000356001600160e01b031916611ad5565b610f585760405162461bcd60e51b815260040161095d906126ab565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166342966c68610f9083610a1f565b6040518263ffffffff1660e01b8152600401610fae91815260200190565b600060405180830381600087803b158015610fc857600080fd5b505af1158015610fdc573d6000803e3d6000fd5b50505050610fea3382611d4a565b50565b611003336000356001600160e01b031916611ad5565b61101f5760405162461bcd60e51b815260040161095d9061271c565b6001600160e01b031982166000818152600a6020908152604091829020805460ff191685151590811790915591519182527f36d28126bef21a4f3765d7fcb7c45cead463ae4c41094ef3b771ede598544103910160405180910390a25050565b6000610b1082610a1f565b6110a0336000356001600160e01b031916611ad5565b6110bc5760405162461bcd60e51b815260040161095d9061271c565b80156110eb576001600160a01b03831660009081526009602052604090208054600160ff85161b179055611111565b6001600160a01b03831660009081526009602052604090208054600160ff85161b191690555b8160ff16836001600160a01b03167f4c9bdd0c8e073eb5eda2250b18d8e5121ff27b62064fbeeeed4869bb99bc5bf283604051610c01911515815260200190565b600061115c611bc2565b610a458383611dac565b61117c336000356001600160e01b031916611ad5565b6111985760405162461bcd60e51b815260040161095d9061271c565b6001600160a01b0382811660008181526008602052604080822080546001600160a01b0319169486169485179055517fa4908e11a5f895b13d51526c331ac93cdd30e59772361c5d07874eb36bff20659190a35050565b6006546001600160a01b0316331480611284575060075460405163b700961360e01b81526001600160a01b039091169063b70096139061124390339030906001600160e01b03196000351690600401612755565b602060405180830381865afa158015611260573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112849190612782565b61128d57600080fd5b600780546001600160a01b0319166001600160a01b03831690811790915560405133907fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b7638998019890600090a350565b60006112e3611bc2565b610a458383611e82565b6001805461099e906126e2565b7f00000000000000000000000000000000000000000000000000000000000000001561135257611336336000356001600160e01b031916611ad5565b6113525760405162461bcd60e51b815260040161095d906126ab565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166342966c6861138a83610a1f565b6040518263ffffffff1660e01b81526004016113a891815260200190565b600060405180830381600087803b1580156113c257600080fd5b505af11580156113d6573d6000803e3d6000fd5b50505050610efc8282611d4a565b7f00000000000000000000000000000000000000000000000000000000000000001561143c57611420336000356001600160e01b031916611ad5565b61143c5760405162461bcd60e51b815260040161095d906126ab565b336000908152600f602052604090205460ff166114a557600e548111156114a55760405162461bcd60e51b815260206004820181905260248201527f4d6f636b455243343632363a20496e76616c6964206d696e7420616d6f756e74604482015260640161095d565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663a0712d686114dd83610a1f565b6040518263ffffffff1660e01b81526004016114fb91815260200190565b600060405180830381600087803b15801561151557600080fd5b505af1158015611529573d6000803e3d6000fd5b50505050610fea3382611cf0565b33600090815260036020526040812080548391908390611558908490612742565b90915550506001600160a01b0383166000818152600360205260409081902080548501905551339060008051602061283f83398151915290610b049086815260200190565b6002546000908015610a4357610a3e6115b4610864565b849083611b9c565b60006115c6611bc2565b6115d1848484611f11565b949350505050565b6001600160a01b0380831660009081526008602052604081205490911680156116755760405163b700961360e01b81526001600160a01b0382169063b70096139061162c90889088908890600401612755565b602060405180830381865afa158015611649573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061166d9190612782565b915050610a45565b6001600160e01b031983166000908152600a602052604090205460ff16806116ce57506001600160e01b031983166000908152600b60209081526040808320546001600160a01b03891684526009909252909120541615155b95945050505050565b60006116e1611bc2565b6115d1848484612015565b6002546000908015610a4357610a3e81611704610864565b859190611b7e565b6001600160a01b038116600090815260036020526040812054610b1090610a1f565b4284101561177e5760405162461bcd60e51b815260206004820152601760248201527f5045524d49545f444541444c494e455f45585049524544000000000000000000604482015260640161095d565b6000600161178a610d53565b6001600160a01b038a811660008181526005602090815260409182902080546001810190915582517f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c98184015280840194909452938d166060840152608083018c905260a083019390935260c08083018b90528151808403909101815260e08301909152805192019190912061190160f01b6101008301526101028201929092526101228101919091526101420160408051601f198184030181528282528051602091820120600084529083018083525260ff871690820152606081018590526080810184905260a0016020604051602081039080840390855afa158015611896573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b038116158015906118cc5750876001600160a01b0316816001600160a01b0316145b6119095760405162461bcd60e51b815260206004820152600e60248201526d24a72b20a624a22fa9a4a3a722a960911b604482015260640161095d565b6001600160a01b0390811660009081526004602090815260408083208a8516808552908352928190208990555188815291928a16917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a350505050505050565b6000610b10826116ec565b611993336000356001600160e01b031916611ad5565b6119af5760405162461bcd60e51b815260040161095d9061271c565b600680546001600160a01b0319166001600160a01b03831690811790915560405133907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a350565b6000600c54600003611a0d5750600090565b6000611a2b6301e13380600d5442611a259190612742565b90612157565b90506000610a45611a4783600c5461216c90919063ffffffff16565b6040516370a0823160e01b81523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a0823190602401602060405180830381865afa158015611aab573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611acf9190612669565b9061216c565b6007546000906001600160a01b03168015801590611b5f575060405163b700961360e01b81526001600160a01b0382169063b700961390611b1e90879030908890600401612755565b602060405180830381865afa158015611b3b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611b5f9190612782565b806115d157506006546001600160a01b03858116911614949350505050565b6000826000190484118302158202611b9557600080fd5b5091020490565b6000826000190484118302158202611bb357600080fd5b50910281810615159190040190565b6000611bcc6119fb565b90508015611c4f5760405163140e25ad60e31b8152600481018290527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063a0712d6890602401600060405180830381600087803b158015611c3657600080fd5b505af1158015611c4a573d6000803e3d6000fd5b505050505b5042600d55565b60007f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f6000604051611c88919061279f565b6040805191829003822060208301939093528101919091527fc89efdaa54c0f20c7adf612882df0950f5a951637e0307cdcb4c672f298b8bc660608201524660808201523060a082015260c00160405160208183030381529060405280519060200120905090565b8060026000828254611d029190612698565b90915550506001600160a01b03821660008181526003602090815260408083208054860190555184815260008051602061283f83398151915291015b60405180910390a35050565b6001600160a01b03821660009081526003602052604081208054839290611d72908490612742565b90915550506002805482900390556040518181526000906001600160a01b0384169060008051602061283f83398151915290602001611d3e565b6000611db783611972565b905080600003611df75760405162461bcd60e51b815260206004820152600b60248201526a5a45524f5f53484152455360a81b604482015260640161095d565b611e2c6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016333086612181565b611e368282611cf0565b60408051848152602081018390526001600160a01b0384169133917fdcbc1c05240f31ff3ad067ef1ee35ce4997762752e3a095284754544f4c709d791015b60405180910390a3610b10565b6000611e8d8361159d565b9050611ec46001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016333084612181565b611ece8284611cf0565b60408051828152602081018590526001600160a01b0384169133917fdcbc1c05240f31ff3ad067ef1ee35ce4997762752e3a095284754544f4c709d79101611e75565b6000611f1c84610b16565b9050336001600160a01b03831614611f8c576001600160a01b03821660009081526004602090815260408083203384529091529020546000198114611f8a57611f658282612742565b6001600160a01b03841660009081526004602090815260408083203384529091529020555b505b611f968282611d4a565b60408051858152602081018390526001600160a01b03808516929086169133917ffbde797d201c681b91056529119e0b02407c7bb96a4a2c75c01fc9667232c8db910160405180910390a4610a456001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016848661221d565b6000336001600160a01b03831614612085576001600160a01b038216600090815260046020908152604080832033845290915290205460001981146120835761205e8582612742565b6001600160a01b03841660009081526004602090815260408083203384529091529020555b505b61208e8461107f565b9050806000036120ce5760405162461bcd60e51b815260206004820152600b60248201526a5a45524f5f41535345545360a81b604482015260640161095d565b6120d88285611d4a565b60408051828152602081018690526001600160a01b03808516929086169133917ffbde797d201c681b91056529119e0b02407c7bb96a4a2c75c01fc9667232c8db910160405180910390a4610a456001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016848361221d565b6000610a4583670de0b6b3a764000084611b7e565b6000610a458383670de0b6b3a7640000611b7e565b60006040516323b872dd60e01b81526001600160a01b03851660048201526001600160a01b03841660248201528260448201526020600060648360008a5af13d15601f3d11600160005114161716915050806122165760405162461bcd60e51b81526020600482015260146024820152731514905394d1915497d19493d357d1905253115160621b604482015260640161095d565b5050505050565b600060405163a9059cbb60e01b81526001600160a01b0384166004820152826024820152602060006044836000895af13d15601f3d116001600051141617169150508061229e5760405162461bcd60e51b815260206004820152600f60248201526e1514905394d1915497d19052531151608a1b604482015260640161095d565b50505050565b6001600160a01b0381168114610fea57600080fd5b8015158114610fea57600080fd5b600080604083850312156122da57600080fd5b82356122e5816122a4565b915060208301356122f5816122b9565b809150509250929050565b60006020828403121561231257600080fd5b8135610a45816122a4565b600060208083528351808285015260005b8181101561234a5785810183015185820160400152820161232e565b506000604082860101526040601f19601f8301168501019250505092915050565b60006020828403121561237d57600080fd5b5035919050565b6000806040838503121561239757600080fd5b82356123a2816122a4565b946020939093013593505050565b80356001600160e01b0319811681146123c857600080fd5b919050565b6000602082840312156123df57600080fd5b610a45826123b0565b803560ff811681146123c857600080fd5b60008060006060848603121561240e57600080fd5b612417846123e8565b9250612425602085016123b0565b91506040840135612435816122b9565b809150509250925092565b60008060006060848603121561245557600080fd5b8335612460816122a4565b92506020840135612470816122a4565b929592945050506040919091013590565b6000806040838503121561249457600080fd5b6122e5836123b0565b6000806000606084860312156124b257600080fd5b83356124bd816122a4565b9250612425602085016123e8565b600080604083850312156124de57600080fd5b8235915060208301356122f5816122a4565b6000806040838503121561250357600080fd5b823561250e816122a4565b915060208301356122f5816122a4565b60008060006060848603121561253357600080fd5b833592506020840135612545816122a4565b91506040840135612435816122a4565b60008060006060848603121561256a57600080fd5b8335612575816122a4565b92506020840135612585816122a4565b9150612593604085016123b0565b90509250925092565b600080600080600080600060e0888a0312156125b757600080fd5b87356125c2816122a4565b965060208801356125d2816122a4565b955060408801359450606088013593506125ee608089016123e8565b925060a0880135915060c0880135905092959891949750929550565b6000806040838503121561261d57600080fd5b612626836123e8565b9150612634602084016123b0565b90509250929050565b6000806040838503121561265057600080fd5b823561265b816122a4565b9150612634602084016123e8565b60006020828403121561267b57600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610b1057610b10612682565b6020808252601b908201527f4d6f636b455243343632363a206e6f7420617574686f72697a65640000000000604082015260600190565b600181811c908216806126f657607f821691505b60208210810361271657634e487b7160e01b600052602260045260246000fd5b50919050565b6020808252600c908201526b15539055551213d49256915160a21b604082015260600190565b81810381811115610b1057610b10612682565b6001600160a01b0393841681529190921660208201526001600160e01b0319909116604082015260600190565b60006020828403121561279457600080fd5b8151610a45816122b9565b600080835481600182811c9150808316806127bb57607f831692505b602080841082036127da57634e487b7160e01b86526022600452602486fd5b8180156127ee576001811461280357612830565b60ff1986168952841515850289019650612830565b60008a81526020902060005b868110156128285781548b82015290850190830161280f565b505084890196505b50949897505050505050505056feddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa26469706673582212208017f43c1c0f7d93b8592634daf2d68c2a1086b3164c7ce7b2ff0691fac5842764736f6c63430008140033"
 )
 
 
 class MockERC4626Contract(Contract):
     """A web3.py Contract class for the MockERC4626 contract."""
 
     abi: ABI = mockerc4626_abi
-    bytecode: bytes = HexBytes(mockerc4626_bytecode)
+    bytecode: bytes | None = try_bytecode_hexbytes(mockerc4626_bytecode, "mockerc4626")
 
     def __init__(self, address: ChecksumAddress | None = None) -> None:
         try:
             # Initialize parent Contract class
             super().__init__(address=address)
             self.functions = MockERC4626ContractFunctions(mockerc4626_abi, self.w3, address)  # type: ignore
             self.events = MockERC4626ContractEvents(mockerc4626_abi, self.w3, address)  # type: ignore
@@ -3413,15 +3538,15 @@
         current_nonce = w3.eth.get_transaction_count(account.address)
         deployment_tx.update({"nonce": current_nonce})
 
         # Sign the transaction with local account private key
         signed_tx = account.sign_transaction(deployment_tx)
 
         # Send the signed transaction and wait for receipt
-        tx_hash = w3.eth.send_raw_transaction(signed_tx.rawTransaction)
+        tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
         tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
 
         deployed_contract = deployer(address=tx_receipt.contractAddress)  # type: ignore
         return deployed_contract
 
     @classmethod
     def factory(cls, w3: Web3, class_name: str | None = None, **kwargs: Any) -> Type[Self]:
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/MockERC4626Types.py` & `agent0-0.20.0/src/agent0/hypertypes/types/MockERC4626Types.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/__init__.py` & `agent0-0.20.0/src/agent0/hypertypes/types/__init__.py`

 * *Files 9% similar despite different names*

```diff
@@ -11,16 +11,19 @@
 from .IHyperdriveTypes import *
 from .ERC20ForwarderFactoryContract import *
 from .ERC4626Target0DeployerContract import *
 from .ERC4626HyperdriveDeployerCoordinatorContract import *
 from .HyperdriveDeployerCoordinatorTypes import *
 from .HyperdriveFactoryContract import *
 from .HyperdriveFactoryTypes import *
+from .LPMathContract import *
+from .LPMathTypes import *
 from .ERC4626Target3DeployerContract import *
-from .ERC4626Target4DeployerContract import *
+from .HyperdriveRegistryContract import *
+from .HyperdriveRegistryTypes import *
 from .ERC4626Target1DeployerContract import *
 from .ERC4626Target2DeployerContract import *
 from .ERC20MintableContract import *
 from .ERC20MintableTypes import *
 from .MockERC4626Contract import *
 from .MockERC4626Types import *
 from .ERC4626HyperdriveCoreDeployerContract import *
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/types/utilities.py` & `agent0-0.20.0/src/agent0/hypertypes/types/utilities.py`

 * *Files 13% similar despite different names*

```diff
@@ -5,14 +5,15 @@
 
 from __future__ import annotations
 
 from dataclasses import fields, is_dataclass
 from typing import Any, Tuple, TypeVar, cast
 
 from eth_utils.abi import collapse_if_tuple
+from hexbytes import HexBytes
 from web3.types import ABIFunction
 
 T = TypeVar("T")
 
 
 def tuple_to_dataclass(cls: type[T], structs: dict[str, Any], tuple_data: Any | Tuple[Any, ...]) -> T:
     """
@@ -130,7 +131,32 @@
         A list of solidity input types.
 
     """
 
     if "inputs" not in abi and (abi.get("type") == "fallback" or abi.get("type") == "receive"):
         return []
     return [collapse_if_tuple(cast(dict[str, Any], arg)) for arg in abi.get("inputs", [])]
+
+
+def try_bytecode_hexbytes(in_bytecode: Any, contract_name: str | None = None) -> HexBytes | None:
+    """Attempts to convert bytecode input to HexBytes. Returns None if it fails.
+
+    Parameters
+    ----------
+    in_bytecode : Any
+        The bytecode to attempt to convert to HexBytes
+    contract_name : str | None, optional
+        The name of the contract being deployed. Used for better warning printing.
+
+    Returns
+    -------
+    HexBytes | None
+        The HexBytes if it succeeds, otherwise None
+    """
+    try:
+        return HexBytes(in_bytecode)
+    except Exception as e:  # pylint: disable=broad-except
+        if contract_name is None:
+            print(f"Warning: failed to convert bytecode to HexBytes: {e}")
+        else:
+            print(f"Warning: failed to convert bytecode for {contract_name} to HexBytes: {e}")
+        return None
```

### Comparing `agent0-0.18.1/src/agent0/hypertypes/utilities/conversions.py` & `agent0-0.20.0/src/agent0/hypertypes/utilities/conversions.py`

 * *Files 8% similar despite different names*

```diff
@@ -98,15 +98,17 @@
 
     Returns
     -------
     CheckpointFP
         A dataclass containing the checkpoint vault_share_price and exposure fields converted to FixedPoint.
     """
     return CheckpointFP(
-        **{camel_to_snake(key): FixedPoint(scaled_value=value) for key, value in asdict(hypertypes_checkpoint).items()}
+        weighted_spot_price=FixedPoint(scaled_value=hypertypes_checkpoint.weightedSpotPrice),
+        last_weighted_spot_price_update_time=hypertypes_checkpoint.lastWeightedSpotPriceUpdateTime,
+        vault_share_price=FixedPoint(scaled_value=hypertypes_checkpoint.vaultSharePrice),
     )
 
 
 def fixedpoint_to_checkpoint(
     fixedpoint_checkpoint: CheckpointFP,
 ) -> Checkpoint:
     """Convert the Checkpoint attribute types from FixedPoint to what the Solidity ABI specifies.
@@ -145,14 +147,15 @@
           - FixedPoint types are used if the type was FixedPoint in the underlying contract.
     """
     dict_pool_config = {camel_to_snake(key): value for key, value in asdict(hypertypes_pool_config).items()}
     fixedpoint_keys = [
         "initial_vault_share_price",
         "minimum_share_reserves",
         "minimum_transaction_amount",
+        "circuit_breaker_delta",
         "time_stretch",
     ]
     for key in dict_pool_config:
         if key in fixedpoint_keys:
             dict_pool_config[key] = FixedPoint(scaled_value=dict_pool_config[key])
         elif key == "fees":
             dict_pool_config[key] = (
@@ -180,14 +183,15 @@
         A dataclass containing the Hyperdrive PoolConfig with types specified by the ABI via Pypechain
     """
     dict_pool_config = {snake_to_camel(key): value for key, value in asdict(fixedpoint_pool_config).items()}
     fixedpoint_keys = [
         "initialVaultSharePrice",
         "minimumShareReserves",
         "minimumTransactionAmount",
+        "circuitBreakerDelta",
         "timeStretch",
     ]
     for key in dict_pool_config:
         if key in fixedpoint_keys:
             dict_pool_config[key] = dict_pool_config[key].scaled_value
         elif key == "fees":
             dict_pool_config[key] = (
@@ -200,14 +204,15 @@
         baseToken=dict_pool_config["baseToken"],
         vaultSharesToken=dict_pool_config["vaultSharesToken"],
         linkerFactory=dict_pool_config["linkerFactory"],
         linkerCodeHash=dict_pool_config["linkerCodeHash"],
         initialVaultSharePrice=dict_pool_config["initialVaultSharePrice"],
         minimumShareReserves=dict_pool_config["minimumShareReserves"],
         minimumTransactionAmount=dict_pool_config["minimumTransactionAmount"],
+        circuitBreakerDelta=dict_pool_config["circuitBreakerDelta"],
         positionDuration=dict_pool_config["positionDuration"],
         checkpointDuration=dict_pool_config["checkpointDuration"],
         timeStretch=dict_pool_config["timeStretch"],
         governance=dict_pool_config["governance"],
         feeCollector=dict_pool_config["feeCollector"],
         sweepCollector=dict_pool_config["sweepCollector"],
         fees=Fees(
```

### Comparing `agent0-0.18.1/src/agent0/traiderdaive/__init__.py` & `agent0-0.20.0/src/agent0/traiderdaive/__init__.py`

 * *Files identical despite different names*

### Comparing `agent0-0.18.1/src/agent0/traiderdaive/gym_environments/full_hyperdrive_env.py` & `agent0-0.20.0/src/agent0/traiderdaive/gym_environments/full_hyperdrive_env.py`

 * *Files 2% similar despite different names*

```diff
@@ -11,15 +11,15 @@
 import gymnasium as gym
 import numpy as np
 import pandas as pd
 from fixedpointmath import FixedPoint
 from gymnasium import spaces
 from scipy.special import expit
 
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 from agent0.core.hyperdrive.policies import PolicyZoo
 
 # Global suppression of warnings, TODO fix
 warnings.filterwarnings("ignore")
 
 
 class TradeTypes(Enum):
@@ -75,20 +75,20 @@
         gym_config: Config,
     ):
         """Initializes the environment"""
         # TODO parameterize these in the gym config
         self.eval_mode = gym_config.eval_mode
         self.sample_actions = gym_config.sample_actions
         if self.eval_mode:
-            local_chain_config = ILocalChain.Config(block_timestamp_interval=12, db_port=5434, chain_port=10001)
+            local_chain_config = LocalChain.Config(block_timestamp_interval=12, db_port=5434, chain_port=10001)
         else:
-            local_chain_config = ILocalChain.Config(block_timestamp_interval=12, db_port=5435, chain_port=10002)
-        initial_pool_config = ILocalHyperdrive.Config()
-        self.chain = ILocalChain(local_chain_config)
-        self.interactive_hyperdrive = ILocalHyperdrive(self.chain, initial_pool_config)
+            local_chain_config = LocalChain.Config(block_timestamp_interval=12, db_port=5435, chain_port=10002)
+        initial_pool_config = LocalHyperdrive.Config()
+        self.chain = LocalChain(local_chain_config)
+        self.interactive_hyperdrive = LocalHyperdrive(self.chain, initial_pool_config)
 
         # TODO set seed
         self.rng = np.random.default_rng()
 
         # Define the rl bot
         self.rl_bot = self.interactive_hyperdrive.init_agent(base=gym_config.rl_agent_budget, name="rl_bot")
         # Define the random bots
@@ -172,15 +172,15 @@
         # TODO add bookkeeping for entry spot price
         # Long Orders: trade type, order_i -> [volume, value, normalized_time_remaining]
         # Short Orders: trade type, order_i -> [volume, value, normalized_time_remaining]
         # LP: -> [volume, value]
         # Here, orders_i is a direct mapping to agent.wallet
         # Note normalize_time_to_maturity will always be 0 for LP positions
         # Removing timestamp and block number from pool state
-        self.num_pool_features = len(self.interactive_hyperdrive.get_pool_state(coerce_float=True).columns) - 2
+        self.num_pool_features = len(self.interactive_hyperdrive.get_pool_info(coerce_float=True).columns) - 2
         inf = 1e10
         self.observation_space = spaces.Dict(
             {
                 # "balance": spaces.Box(low=-INF, high=INF, shape=(1,), dtype=np.float64),
                 # "equity": spaces.Box(low=-INF, high=INF, shape=(1,), dtype=np.float64),
                 # "margin": spaces.Box(low=-INF, high=INF, shape=(1,), dtype=np.float64),
                 "pool_features": spaces.Box(low=-inf, high=inf, shape=(self.num_pool_features,), dtype=np.float64),
@@ -341,15 +341,15 @@
                 if self.sample_actions:
                     open_order = self.rng.uniform(0, 1) <= new_order_probability
                 else:
                     open_order = new_order_probability > self.gym_config.open_threshold
 
                 if open_order:
                     # If the wallet has enough money
-                    if volume_adjusted <= self.rl_bot.wallet.balance.amount:
+                    if volume_adjusted <= self.rl_bot.get_wallet().balance.amount:
                         try:
                             if trade_type == TradeTypes.LONG:
                                 self.rl_bot.open_long(base=volume_adjusted)
                             elif trade_type == TradeTypes.SHORT:
                                 # max_short = self.interactive_hyperdrive.interface.calc_max_short(
                                 #    volume_adjusted,
                                 #    self.interactive_hyperdrive.interface.current_pool_state,
@@ -378,20 +378,20 @@
         else:
             add_lp = add_lp_probability > self.gym_config.open_threshold
             remove_lp = remove_lp_probability > self.gym_config.close_threshold
 
         try:
             if add_lp:
                 self.rl_bot.add_liquidity(add_lp_volume)
-            if remove_lp and remove_lp_volume <= self.rl_bot.wallet.lp_tokens:
+            if remove_lp and remove_lp_volume <= self.rl_bot.get_wallet().lp_tokens:
                 self.rl_bot.remove_liquidity(remove_lp_volume)
             # Always try and remove withdrawal shares
-            if self.rl_bot.wallet.withdraw_shares > 0:
+            if self.rl_bot.get_wallet().withdraw_shares > 0:
                 # TODO error handling or check when withdrawal shares are not withdrawable
-                self.rl_bot.redeem_withdraw_share(self.rl_bot.wallet.withdraw_shares)
+                self.rl_bot.redeem_withdraw_share(self.rl_bot.get_wallet().withdraw_shares)
         except Exception as err:  # pylint: disable=broad-except
             # TODO use logging here
             print(f"Warning: Failed to LP: {err=}")
             # Terminate if error
             return True
 
         return False
@@ -455,22 +455,22 @@
         return observation, step_reward, terminated, truncated, info
 
     def _get_info(self) -> dict:
         # TODO return aux info here
         return {}
 
     def _get_rl_wallet_positions(self, coerce_float: bool) -> pd.DataFrame:
-        current_wallet = self.interactive_hyperdrive.get_current_wallet(coerce_float=coerce_float)
+        current_wallet = self.interactive_hyperdrive.get_positions(coerce_float=coerce_float)
         # Filter for rl bot
         rl_bot_wallet = current_wallet[current_wallet["wallet_address"] == self.rl_bot.checksum_address]
         return rl_bot_wallet
 
     def _get_observation(self) -> dict[str, np.ndarray]:
         # Get the latest pool state feature from the db
-        pool_state_df = self.interactive_hyperdrive.get_pool_state(coerce_float=True)
+        pool_state_df = self.interactive_hyperdrive.get_pool_info(coerce_float=True)
         pool_state_columns = [c for c in pool_state_df.columns if c not in ("timestamp", "block_number")]
         pool_state_df = pool_state_df[pool_state_columns].iloc[-1].astype(float)
 
         out_obs = {}
         out_obs["pool_features"] = pool_state_df.values
 
         # Observation data uses floats
@@ -511,15 +511,15 @@
 
         # Sanity check
         return out_obs
 
     def _calculate_reward(self) -> float:
         # The total delta for this episode
 
-        current_wallet = self.interactive_hyperdrive.get_current_wallet()
+        current_wallet = self.interactive_hyperdrive.get_positions()
         # Filter by rl bot
         rl_bot_wallet = current_wallet[current_wallet["wallet_address"] == self.rl_bot.checksum_address]
         # The rl_bot_wallet shows the pnl of all positions
         # Sum across all positions
         # TODO one option here is to only look at base positions instead of sum across all positions.
         # TODO handle the case where pnl calculation doesn't return a number
         # when you can't close the position
```

### Comparing `agent0-0.18.1/src/agent0/traiderdaive/gym_environments/simple_hyperdrive_env.py` & `agent0-0.20.0/src/agent0/traiderdaive/gym_environments/simple_hyperdrive_env.py`

 * *Files 1% similar despite different names*

```diff
@@ -8,15 +8,15 @@
 from typing import Any
 
 import gymnasium as gym
 import numpy as np
 from fixedpointmath import FixedPoint
 from gymnasium import spaces
 
-from agent0.core.hyperdrive.interactive import ILocalChain, ILocalHyperdrive
+from agent0.core.hyperdrive.interactive import LocalChain, LocalHyperdrive
 from agent0.core.hyperdrive.policies import PolicyZoo
 
 # Global suppression of warnings, TODO fix
 warnings.filterwarnings("ignore")
 
 
 class Actions(Enum):
@@ -85,18 +85,18 @@
 
     def __init__(
         self,
         gym_config: Config,
     ):
         """Initializes the environment"""
         # TODO parameterize these in the gym config
-        local_chain_config = ILocalChain.Config(block_timestamp_interval=3600)
-        self.chain = ILocalChain(local_chain_config)
-        initial_pool_config = ILocalHyperdrive.Config()
-        self.interactive_hyperdrive = ILocalHyperdrive(self.chain, initial_pool_config)
+        local_chain_config = LocalChain.Config(block_timestamp_interval=3600)
+        self.chain = LocalChain(local_chain_config)
+        initial_pool_config = LocalHyperdrive.Config()
+        self.interactive_hyperdrive = LocalHyperdrive(self.chain, initial_pool_config)
 
         # Define the rl bot
         self.rl_bot = self.interactive_hyperdrive.init_agent(base=gym_config.rl_agent_budget, name="rl_bot")
         # Define the random bots
         self.random_bots = [
             self.interactive_hyperdrive.init_agent(
                 base=gym_config.random_bot_budget,
@@ -246,15 +246,15 @@
         -------
         bool
             Whether the agent reaches the terminal state due to a failed trade.
         """
         assert self._current_position is not None
         terminated = False
 
-        agent_wallet = self.rl_bot.wallet
+        agent_wallet = self.rl_bot.get_wallet()
 
         self._current_position = self._current_position.opposite()
         if self._current_position == CurrentPosition.LONG:
             # Close short position (if exists), open long
             if len(agent_wallet.shorts) > 0:
                 # Sanity check, only one short open
                 assert len(agent_wallet.shorts) == 1
@@ -372,15 +372,15 @@
 
     def _get_info(self) -> dict:
         # TODO return aux info here
         return {}
 
     def _get_observation(self) -> np.ndarray:
         # Get the spot price and share price of hyperdrive
-        pool_state_df = self.interactive_hyperdrive.get_pool_state(coerce_float=True)
+        pool_state_df = self.interactive_hyperdrive.get_pool_info(coerce_float=True)
         self._obs_buffer = (
             pool_state_df[["lp_share_price", "spot_price"]].iloc[-self.gym_config.window_size :].to_numpy()
         )
         # If not enough data points, we left pad with zeros
         if self._obs_buffer.shape[0] < self.gym_config.window_size:
             pad_size = self.gym_config.window_size - self._obs_buffer.shape[0]
             self._obs_buffer = np.pad(self._obs_buffer, pad_width=((pad_size, 0), (0, 0)))
@@ -389,15 +389,15 @@
         assert self._obs_buffer.shape == (self.gym_config.window_size, 2)
 
         return self._obs_buffer
 
     def _calculate_reward(self) -> float:
         # The total delta for this episode
 
-        current_wallet = self.interactive_hyperdrive.get_current_wallet()
+        current_wallet = self.interactive_hyperdrive.get_positions()
         # Filter by rl bot
         rl_bot_wallet = current_wallet[current_wallet["wallet_address"] == self.rl_bot.checksum_address]
         # The rl_bot_wallet shows the pnl of all positions
         # Sum across all positions
         # TODO one option here is to only look at base positions instead of sum across all positions.
         # TODO handle the case where pnl calculation doesn't return a number
         # when you can't close the position
```

### Comparing `agent0-0.18.1/PKG-INFO` & `agent0-0.20.0/PKG-INFO`

 * *Files 4% similar despite different names*

```diff
@@ -1,38 +1,39 @@
 Metadata-Version: 2.1
 Name: agent0
-Version: 0.18.1
+Version: 0.20.0
 Summary: Agent interface for on-chain protocols.
 Author-email: Dylan Paiton <dylan@delv.tech>, Mihai Cosma <mihai@delv.tech>, Matthew Brown <matt@delv.tech>, Sheng Lundquist <sheng@delv.tech>, Jonny Rhea <jonny@delv.tech>, Alex Towle <alex@delv.tech>, Giovanni Effio <mazygio@delv.tech>, Ryan Goree <ryan@delv.tech>
 Requires-Python: >=3.10, <=3.11
 Description-Content-Type: text/markdown
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: Apache Software License
 Classifier: Operating System :: OS Independent
 Classifier: Development Status :: 3 - Alpha
 Classifier: Natural Language :: English
 Requires-Dist: dill
 Requires-Dist: docker
 Requires-Dist: eth-typing==4.1.0
+Requires-Dist: eth-account
 Requires-Dist: fixedpointmath
 Requires-Dist: flask
 Requires-Dist: flask-expects-json
 Requires-Dist: hexbytes
-Requires-Dist: hyperdrivepy==1.0.1
+Requires-Dist: hyperdrivepy==0.15.5
 Requires-Dist: ipython
 Requires-Dist: matplotlib
 Requires-Dist: mplfinance
 Requires-Dist: nest_asyncio
 Requires-Dist: numpy
 Requires-Dist: pandas
 Requires-Dist: pandas-stubs
 Requires-Dist: psycopg[binary]
 Requires-Dist: pytest
 Requires-Dist: python-dotenv
-Requires-Dist: requests
+Requires-Dist: requests==2.31.0
 Requires-Dist: rollbar
 Requires-Dist: setuptools
 Requires-Dist: sqlalchemy
 Requires-Dist: sqlalchemy-utils
 Requires-Dist: streamlit
 Requires-Dist: web3
 Requires-Dist: gymnasium ; extra == "ai"
@@ -66,15 +67,15 @@
 Provides-Extra: dev
 Provides-Extra: rollbar
 
 [![linting: pylint](https://img.shields.io/badge/linting-pylint-yellowgreen)](https://github.com/pylint-dev/pylint)
 [![code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)
 [![testing: pytest](https://img.shields.io/badge/testing-pytest-blue.svg)](https://docs.pytest.org/en/latest/contents.html)
 [![license: Apache 2.0](https://img.shields.io/badge/License-Apache_2.0-lightgrey)](http://www.apache.org/licenses/LICENSE-2.0)
-[![DELV - Terms of Service](https://img.shields.io/badge/DELV-Terms_of_Service-orange)](https://elementfi.s3.us-east-2.amazonaws.com/element-finance-terms-of-service.pdf)
+[![DELV - Terms of Service](https://img.shields.io/badge/DELV-Terms_of_Service-orange)](https://delv-public.s3.us-east-2.amazonaws.com/delv-terms-of-service.pdf)
 
 [![testing: coverage](https://codecov.io/gh/delvtech/agent0/branch/main/graph/badge.svg?token=1S60MD42ZP)](https://app.codecov.io/gh/delvtech/agent0?displayType=list)
 [![docs: build](https://readthedocs.org/projects/agent0/badge/?version=latest)](https://agent0.readthedocs.io/en/latest/?badge=latest)
 <br><a href="https://app.codecov.io/gh/delvtech/agent0?displayType=list"><img height="50px" src="https://codecov.io/gh/delvtech/agent0/graphs/sunburst.svg?token=1S60MD42ZP"><a>
 
 <img src="icons/agent0-dark.svg" width="800" alt="agent0"><br>
 
@@ -82,42 +83,45 @@
 
 This docs page can be found via [https://agent0.readthedocs.io/en/latest/](https://agent0.readthedocs.io/en/latest/).
 
 ## Quickstart
 
 This repo contains general purpose code for interacting with Ethereum smart contracts.
 However, it was bulit for the primary use case of trading on [Hyperdrive](https://hyperdrive.delv.tech) markets.
-Using a Python 3.10 environment, you can install agent0 via pip:
+
+First, install [Foundry](https://book.getfoundry.sh/getting-started/installation) and [Docker](https://docs.docker.com/engine/install/).
+
+Next, using a Python 3.10 environment, you can install agent0 via pip:
 
 ```sh
 pip install --upgrade agent0
 ```
 
-Next you can execute Hyperdrive trades in a simulated blockchain environment:
+Finally, you can execute Hyperdrive trades in a simulated blockchain environment:
 
 ```python
 import datetime
 from fixedpointmath import FixedPoint
-from agent0 import ILocalHyperdrive, ILocalChain
+from agent0 import LocalHyperdrive, LocalChain
 
 # Initialize
-chain = ILocalChain()
-interactive_hyperdrive = ILocalHyperdrive(chain)
-hyperdrive_agent0 = interactive_hyperdrive.init_agent(base=FixedPoint(100_000))
+chain = LocalChain()
+hyperdrive = LocalHyperdrive(chain)
+hyperdrive_agent0 = hyperdrive.init_agent(base=FixedPoint(100_000), eth=FixedPoint(10))
 
 # Run trades
 chain.advance_time(datetime.timedelta(weeks=1))
-open_long_event = hyperdrive_agent0.open_long(base=FixedPoint(100))
+open_long_event = hyperdrive_agent0.open_long(base=FixedPoint(100), eth=FixedPoint(10))
 chain.advance_time(datetime.timedelta(weeks=5))
 close_event = hyperdrive_agent0.close_long(
     maturity_time=open_long_event.maturity_time, bonds=open_long_event.bond_amount
 )
 
 # Analyze
-pool_state = interactive_hyperdrive.get_pool_state(coerce_float=True)
+pool_state = hyperdrive.get_pool_state(coerce_float=True)
 pool_state.plot(x="block_number", y="longs_outstanding", kind="line")
 ```
 
 See our [tutorial notebook](examples/tutorial.ipynb) for more information, including details on executing trades on remote chains.
 
 ## Install
 
@@ -163,11 +167,11 @@
 
 ---
 
 Copyright © 2024  DELV
 
 Licensed under the Apache License, Version 2.0 (the "OSS License").
 
-By accessing or using this code, you signify that you have read, understand and agree to be bound by and to comply with the [OSS License](http://www.apache.org/licenses/LICENSE-2.0) and [DELV's Terms of Service](https://elementfi.s3.us-east-2.amazonaws.com/element-finance-terms-of-service.pdf). If you do not agree to those terms, you are prohibited from accessing or using this code.
+By accessing or using this code, you signify that you have read, understand and agree to be bound by and to comply with the [OSS License](http://www.apache.org/licenses/LICENSE-2.0) and [DELV's Terms of Service](https://delv-public.s3.us-east-2.amazonaws.com/delv-terms-of-service.pdf). If you do not agree to those terms, you are prohibited from accessing or using this code.
 
 Unless required by applicable law or agreed to in writing, software distributed under the OSS License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the OSS License and the DELV Terms of Service for the specific language governing permissions and limitations.
```

#### html2text {}

```diff
@@ -1,105 +1,107 @@
-Metadata-Version: 2.1 Name: agent0 Version: 0.18.1 Summary: Agent interface for
+Metadata-Version: 2.1 Name: agent0 Version: 0.20.0 Summary: Agent interface for
 on-chain protocols. Author-email: Dylan Paiton
 delv.tech>, Mihai Cosma
 delv.tech>, Matthew Brown
 delv.tech>, Sheng Lundquist
 delv.tech>, Jonny Rhea
 delv.tech>, Alex Towle
 delv.tech>, Giovanni Effio
 delv.tech>, Ryan Goree
 delv.tech> Requires-Python: >=3.10, <=3.11 Description-Content-Type: text/
 markdown Classifier: Programming Language :: Python :: 3 Classifier: License ::
 OSI Approved :: Apache Software License Classifier: Operating System :: OS
 Independent Classifier: Development Status :: 3 - Alpha Classifier: Natural
 Language :: English Requires-Dist: dill Requires-Dist: docker Requires-Dist:
-eth-typing==4.1.0 Requires-Dist: fixedpointmath Requires-Dist: flask Requires-
-Dist: flask-expects-json Requires-Dist: hexbytes Requires-Dist:
-hyperdrivepy==1.0.1 Requires-Dist: ipython Requires-Dist: matplotlib Requires-
-Dist: mplfinance Requires-Dist: nest_asyncio Requires-Dist: numpy Requires-
-Dist: pandas Requires-Dist: pandas-stubs Requires-Dist: psycopg[binary]
-Requires-Dist: pytest Requires-Dist: python-dotenv Requires-Dist: requests
-Requires-Dist: rollbar Requires-Dist: setuptools Requires-Dist: sqlalchemy
-Requires-Dist: sqlalchemy-utils Requires-Dist: streamlit Requires-Dist: web3
-Requires-Dist: gymnasium ; extra == "ai" Requires-Dist: scipy ; extra == "ai"
-Requires-Dist: agent0[dev,ai,rollbar] ; extra == "all" Requires-Dist:
-autodocsumm>=0.2.11 ; extra == "dev" Requires-Dist: black==24.* ; extra ==
-"dev" Requires-Dist: coverage ; extra == "dev" Requires-Dist: ipykernel ; extra
-== "dev" Requires-Dist: jupytext ; extra == "dev" Requires-Dist: myst-
-parser>=2.0.0 ; extra == "dev" Requires-Dist: nbconvert ; extra == "dev"
-Requires-Dist: nbsphinx>=0.8.12 ; extra == "dev" Requires-Dist: numpydoc>=1.5.0
-; extra == "dev" Requires-Dist: pylint ; extra == "dev" Requires-Dist:
-pypechain ; extra == "dev" Requires-Dist: pytest-postgresql ; extra == "dev"
-Requires-Dist: pyright ; extra == "dev" Requires-Dist: sphinx>=6 ; extra ==
-"dev" Requires-Dist: sphinx-autoapi>=2.0.1 ; extra == "dev" Requires-Dist:
-sphinx_autodoc_typehints>=1.21.8 ; extra == "dev" Requires-Dist: sphinx-rtd-
-theme>=1.2.2 ; extra == "dev" Requires-Dist: sphinxcontrib-napoleon>=0.7 ;
-extra == "dev" Requires-Dist: tomli>=2.0.1 ; extra == "dev" Requires-Dist:
-urllib3 ; extra == "dev" Requires-Dist: rollbar ; extra == "rollbar" Project-
-URL: Bug Tracker, https://github.com/delvtech/agent0/issues Project-URL:
-Homepage, https://agent0.readthedocs.io/en/latest/ Provides-Extra: ai Provides-
-Extra: all Provides-Extra: dev Provides-Extra: rollbar [![linting: pylint]
-(https://img.shields.io/badge/linting-pylint-yellowgreen)](https://github.com/
-pylint-dev/pylint) [![code style: black](https://img.shields.io/badge/
-code%20style-black-000000.svg)](https://github.com/psf/black) [![testing:
+eth-typing==4.1.0 Requires-Dist: eth-account Requires-Dist: fixedpointmath
+Requires-Dist: flask Requires-Dist: flask-expects-json Requires-Dist: hexbytes
+Requires-Dist: hyperdrivepy==0.15.5 Requires-Dist: ipython Requires-Dist:
+matplotlib Requires-Dist: mplfinance Requires-Dist: nest_asyncio Requires-Dist:
+numpy Requires-Dist: pandas Requires-Dist: pandas-stubs Requires-Dist: psycopg
+[binary] Requires-Dist: pytest Requires-Dist: python-dotenv Requires-Dist:
+requests==2.31.0 Requires-Dist: rollbar Requires-Dist: setuptools Requires-
+Dist: sqlalchemy Requires-Dist: sqlalchemy-utils Requires-Dist: streamlit
+Requires-Dist: web3 Requires-Dist: gymnasium ; extra == "ai" Requires-Dist:
+scipy ; extra == "ai" Requires-Dist: agent0[dev,ai,rollbar] ; extra == "all"
+Requires-Dist: autodocsumm>=0.2.11 ; extra == "dev" Requires-Dist: black==24.*
+; extra == "dev" Requires-Dist: coverage ; extra == "dev" Requires-Dist:
+ipykernel ; extra == "dev" Requires-Dist: jupytext ; extra == "dev" Requires-
+Dist: myst-parser>=2.0.0 ; extra == "dev" Requires-Dist: nbconvert ; extra ==
+"dev" Requires-Dist: nbsphinx>=0.8.12 ; extra == "dev" Requires-Dist:
+numpydoc>=1.5.0 ; extra == "dev" Requires-Dist: pylint ; extra == "dev"
+Requires-Dist: pypechain ; extra == "dev" Requires-Dist: pytest-postgresql ;
+extra == "dev" Requires-Dist: pyright ; extra == "dev" Requires-Dist: sphinx>=6
+; extra == "dev" Requires-Dist: sphinx-autoapi>=2.0.1 ; extra == "dev"
+Requires-Dist: sphinx_autodoc_typehints>=1.21.8 ; extra == "dev" Requires-Dist:
+sphinx-rtd-theme>=1.2.2 ; extra == "dev" Requires-Dist: sphinxcontrib-
+napoleon>=0.7 ; extra == "dev" Requires-Dist: tomli>=2.0.1 ; extra == "dev"
+Requires-Dist: urllib3 ; extra == "dev" Requires-Dist: rollbar ; extra ==
+"rollbar" Project-URL: Bug Tracker, https://github.com/delvtech/agent0/issues
+Project-URL: Homepage, https://agent0.readthedocs.io/en/latest/ Provides-Extra:
+ai Provides-Extra: all Provides-Extra: dev Provides-Extra: rollbar [![linting:
+pylint](https://img.shields.io/badge/linting-pylint-yellowgreen)](https://
+github.com/pylint-dev/pylint) [![code style: black](https://img.shields.io/
+badge/code%20style-black-000000.svg)](https://github.com/psf/black) [![testing:
 pytest](https://img.shields.io/badge/testing-pytest-blue.svg)](https://
 docs.pytest.org/en/latest/contents.html) [![license: Apache 2.0](https://
 img.shields.io/badge/License-Apache_2.0-lightgrey)](http://www.apache.org/
 licenses/LICENSE-2.0) [![DELV - Terms of Service](https://img.shields.io/badge/
-DELV-Terms_of_Service-orange)](https://elementfi.s3.us-east-2.amazonaws.com/
-element-finance-terms-of-service.pdf) [![testing: coverage](https://codecov.io/
-gh/delvtech/agent0/branch/main/graph/badge.svg?token=1S60MD42ZP)](https://
+DELV-Terms_of_Service-orange)](https://delv-public.s3.us-east-2.amazonaws.com/
+delv-terms-of-service.pdf) [![testing: coverage](https://codecov.io/gh/
+delvtech/agent0/branch/main/graph/badge.svg?token=1S60MD42ZP)](https://
 app.codecov.io/gh/delvtech/agent0?displayType=list) [![docs: build](https://
 readthedocs.org/projects/agent0/badge/?version=latest)](https://
 agent0.readthedocs.io/en/latest/?badge=latest)
 _[_h_t_t_p_s_:_/_/_c_o_d_e_c_o_v_._i_o_/_g_h_/_d_e_l_v_t_e_c_h_/_a_g_e_n_t_0_/_g_r_a_p_h_s_/_s_u_n_b_u_r_s_t_._s_v_g_?_t_o_k_e_n_=_1_S_6_0_M_D_4_2_Z_P_]
 _[_a_g_e_n_t_0_]
 _#_ _[_D_E_L_V_]_(_h_t_t_p_s_:_/_/_d_e_l_v_._t_e_c_h_)_ _r_e_p_o_ _f_o_r_ _m_a_r_k_e_t_ _s_i_m_u_l_a_t_i_o_n_ _a_n_d_ _a_n_a_l_y_s_i_s_ _T_h_i_s_ _d_o_c_s
 _p_a_g_e_ _c_a_n_ _b_e_ _f_o_u_n_d_ _v_i_a_ _[_h_t_t_p_s_:_/_/_a_g_e_n_t_0_._r_e_a_d_t_h_e_d_o_c_s_._i_o_/_e_n_/_l_a_t_e_s_t_/_]_(_h_t_t_p_s_:_/_/
 _a_g_e_n_t_0_._r_e_a_d_t_h_e_d_o_c_s_._i_o_/_e_n_/_l_a_t_e_s_t_/_)_._ _#_#_ _Q_u_i_c_k_s_t_a_r_t_ _T_h_i_s_ _r_e_p_o_ _c_o_n_t_a_i_n_s_ _g_e_n_e_r_a_l
 _p_u_r_p_o_s_e_ _c_o_d_e_ _f_o_r_ _i_n_t_e_r_a_c_t_i_n_g_ _w_i_t_h_ _E_t_h_e_r_e_u_m_ _s_m_a_r_t_ _c_o_n_t_r_a_c_t_s_._ _H_o_w_e_v_e_r_,_ _i_t_ _w_a_s
 _b_u_l_i_t_ _f_o_r_ _t_h_e_ _p_r_i_m_a_r_y_ _u_s_e_ _c_a_s_e_ _o_f_ _t_r_a_d_i_n_g_ _o_n_ _[_H_y_p_e_r_d_r_i_v_e_]_(_h_t_t_p_s_:_/_/
-_h_y_p_e_r_d_r_i_v_e_._d_e_l_v_._t_e_c_h_)_ _m_a_r_k_e_t_s_._ _U_s_i_n_g_ _a_ _P_y_t_h_o_n_ _3_._1_0_ _e_n_v_i_r_o_n_m_e_n_t_,_ _y_o_u_ _c_a_n_ _i_n_s_t_a_l_l
-_a_g_e_n_t_0_ _v_i_a_ _p_i_p_:_ _`_`_`_s_h_ _p_i_p_ _i_n_s_t_a_l_l_ _-_-_u_p_g_r_a_d_e_ _a_g_e_n_t_0_ _`_`_`_ _N_e_x_t_ _y_o_u_ _c_a_n_ _e_x_e_c_u_t_e
-_H_y_p_e_r_d_r_i_v_e_ _t_r_a_d_e_s_ _i_n_ _a_ _s_i_m_u_l_a_t_e_d_ _b_l_o_c_k_c_h_a_i_n_ _e_n_v_i_r_o_n_m_e_n_t_:_ _`_`_`_p_y_t_h_o_n_ _i_m_p_o_r_t
-_d_a_t_e_t_i_m_e_ _f_r_o_m_ _f_i_x_e_d_p_o_i_n_t_m_a_t_h_ _i_m_p_o_r_t_ _F_i_x_e_d_P_o_i_n_t_ _f_r_o_m_ _a_g_e_n_t_0_ _i_m_p_o_r_t
-_I_L_o_c_a_l_H_y_p_e_r_d_r_i_v_e_,_ _I_L_o_c_a_l_C_h_a_i_n_ _#_ _I_n_i_t_i_a_l_i_z_e_ _c_h_a_i_n_ _=_ _I_L_o_c_a_l_C_h_a_i_n_(_)
-_i_n_t_e_r_a_c_t_i_v_e___h_y_p_e_r_d_r_i_v_e_ _=_ _I_L_o_c_a_l_H_y_p_e_r_d_r_i_v_e_(_c_h_a_i_n_)_ _h_y_p_e_r_d_r_i_v_e___a_g_e_n_t_0_ _=
-_i_n_t_e_r_a_c_t_i_v_e___h_y_p_e_r_d_r_i_v_e_._i_n_i_t___a_g_e_n_t_(_b_a_s_e_=_F_i_x_e_d_P_o_i_n_t_(_1_0_0___0_0_0_)_)_ _#_ _R_u_n_ _t_r_a_d_e_s
-_c_h_a_i_n_._a_d_v_a_n_c_e___t_i_m_e_(_d_a_t_e_t_i_m_e_._t_i_m_e_d_e_l_t_a_(_w_e_e_k_s_=_1_)_)_ _o_p_e_n___l_o_n_g___e_v_e_n_t_ _=
-_h_y_p_e_r_d_r_i_v_e___a_g_e_n_t_0_._o_p_e_n___l_o_n_g_(_b_a_s_e_=_F_i_x_e_d_P_o_i_n_t_(_1_0_0_)_)_ _c_h_a_i_n_._a_d_v_a_n_c_e___t_i_m_e
+_h_y_p_e_r_d_r_i_v_e_._d_e_l_v_._t_e_c_h_)_ _m_a_r_k_e_t_s_._ _F_i_r_s_t_,_ _i_n_s_t_a_l_l_ _[_F_o_u_n_d_r_y_]_(_h_t_t_p_s_:_/_/
+_b_o_o_k_._g_e_t_f_o_u_n_d_r_y_._s_h_/_g_e_t_t_i_n_g_-_s_t_a_r_t_e_d_/_i_n_s_t_a_l_l_a_t_i_o_n_)_ _a_n_d_ _[_D_o_c_k_e_r_]_(_h_t_t_p_s_:_/_/
+_d_o_c_s_._d_o_c_k_e_r_._c_o_m_/_e_n_g_i_n_e_/_i_n_s_t_a_l_l_/_)_._ _N_e_x_t_,_ _u_s_i_n_g_ _a_ _P_y_t_h_o_n_ _3_._1_0_ _e_n_v_i_r_o_n_m_e_n_t_,_ _y_o_u
+_c_a_n_ _i_n_s_t_a_l_l_ _a_g_e_n_t_0_ _v_i_a_ _p_i_p_:_ _`_`_`_s_h_ _p_i_p_ _i_n_s_t_a_l_l_ _-_-_u_p_g_r_a_d_e_ _a_g_e_n_t_0_ _`_`_`_ _F_i_n_a_l_l_y_,_ _y_o_u
+_c_a_n_ _e_x_e_c_u_t_e_ _H_y_p_e_r_d_r_i_v_e_ _t_r_a_d_e_s_ _i_n_ _a_ _s_i_m_u_l_a_t_e_d_ _b_l_o_c_k_c_h_a_i_n_ _e_n_v_i_r_o_n_m_e_n_t_:_ _`_`_`_p_y_t_h_o_n
+_i_m_p_o_r_t_ _d_a_t_e_t_i_m_e_ _f_r_o_m_ _f_i_x_e_d_p_o_i_n_t_m_a_t_h_ _i_m_p_o_r_t_ _F_i_x_e_d_P_o_i_n_t_ _f_r_o_m_ _a_g_e_n_t_0_ _i_m_p_o_r_t
+_L_o_c_a_l_H_y_p_e_r_d_r_i_v_e_,_ _L_o_c_a_l_C_h_a_i_n_ _#_ _I_n_i_t_i_a_l_i_z_e_ _c_h_a_i_n_ _=_ _L_o_c_a_l_C_h_a_i_n_(_)_ _h_y_p_e_r_d_r_i_v_e_ _=
+_L_o_c_a_l_H_y_p_e_r_d_r_i_v_e_(_c_h_a_i_n_)_ _h_y_p_e_r_d_r_i_v_e___a_g_e_n_t_0_ _=_ _h_y_p_e_r_d_r_i_v_e_._i_n_i_t___a_g_e_n_t
+_(_b_a_s_e_=_F_i_x_e_d_P_o_i_n_t_(_1_0_0___0_0_0_)_,_ _e_t_h_=_F_i_x_e_d_P_o_i_n_t_(_1_0_)_)_ _#_ _R_u_n_ _t_r_a_d_e_s_ _c_h_a_i_n_._a_d_v_a_n_c_e___t_i_m_e
+_(_d_a_t_e_t_i_m_e_._t_i_m_e_d_e_l_t_a_(_w_e_e_k_s_=_1_)_)_ _o_p_e_n___l_o_n_g___e_v_e_n_t_ _=_ _h_y_p_e_r_d_r_i_v_e___a_g_e_n_t_0_._o_p_e_n___l_o_n_g
+_(_b_a_s_e_=_F_i_x_e_d_P_o_i_n_t_(_1_0_0_)_,_ _e_t_h_=_F_i_x_e_d_P_o_i_n_t_(_1_0_)_)_ _c_h_a_i_n_._a_d_v_a_n_c_e___t_i_m_e
 _(_d_a_t_e_t_i_m_e_._t_i_m_e_d_e_l_t_a_(_w_e_e_k_s_=_5_)_)_ _c_l_o_s_e___e_v_e_n_t_ _=_ _h_y_p_e_r_d_r_i_v_e___a_g_e_n_t_0_._c_l_o_s_e___l_o_n_g
 _(_ _m_a_t_u_r_i_t_y___t_i_m_e_=_o_p_e_n___l_o_n_g___e_v_e_n_t_._m_a_t_u_r_i_t_y___t_i_m_e_,
 _b_o_n_d_s_=_o_p_e_n___l_o_n_g___e_v_e_n_t_._b_o_n_d___a_m_o_u_n_t_ _)_ _#_ _A_n_a_l_y_z_e_ _p_o_o_l___s_t_a_t_e_ _=
-_i_n_t_e_r_a_c_t_i_v_e___h_y_p_e_r_d_r_i_v_e_._g_e_t___p_o_o_l___s_t_a_t_e_(_c_o_e_r_c_e___f_l_o_a_t_=_T_r_u_e_)_ _p_o_o_l___s_t_a_t_e_._p_l_o_t
-_(_x_=_"_b_l_o_c_k___n_u_m_b_e_r_"_,_ _y_=_"_l_o_n_g_s___o_u_t_s_t_a_n_d_i_n_g_"_,_ _k_i_n_d_=_"_l_i_n_e_"_)_ _`_`_`_ _S_e_e_ _o_u_r_ _[_t_u_t_o_r_i_a_l
-_n_o_t_e_b_o_o_k_]_(_e_x_a_m_p_l_e_s_/_t_u_t_o_r_i_a_l_._i_p_y_n_b_)_ _f_o_r_ _m_o_r_e_ _i_n_f_o_r_m_a_t_i_o_n_,_ _i_n_c_l_u_d_i_n_g_ _d_e_t_a_i_l_s_ _o_n
-_e_x_e_c_u_t_i_n_g_ _t_r_a_d_e_s_ _o_n_ _r_e_m_o_t_e_ _c_h_a_i_n_s_._ _#_#_ _I_n_s_t_a_l_l_ _P_l_e_a_s_e_ _r_e_f_e_r_ _t_o_ _[_I_N_S_T_A_L_L_._m_d_]
-_(_I_N_S_T_A_L_L_._m_d_)_ _f_o_r_ _m_o_r_e_ _a_d_v_a_n_c_e_d_ _i_n_s_t_a_l_l_ _o_p_t_i_o_n_s_._ _#_#_ _D_e_p_l_o_y_m_e_n_t_ _P_l_e_a_s_e_ _r_e_f_e_r_ _t_o_ 
-_[_B_U_I_L_D_._m_d_]_(_B_U_I_L_D_._m_d_)_._ _#_#_ _T_e_s_t_i_n_g_ _W_e_ _d_e_p_l_o_y_ _a_ _l_o_c_a_l_ _a_n_v_i_l_ _c_h_a_i_n_ _t_o_ _r_u_n_ _s_y_s_t_e_m
-_t_e_s_t_s_._ _T_h_e_r_e_f_o_r_e_,_ _y_o_u_ _m_u_s_t_ _[_i_n_s_t_a_l_l_ _f_o_u_n_d_r_y_]_(_h_t_t_p_s_:_/_/_g_i_t_h_u_b_._c_o_m_/_f_o_u_n_d_r_y_-_r_s_/
-_f_o_u_n_d_r_y_#_i_n_s_t_a_l_l_a_t_i_o_:_/_/_g_i_t_h_u_b_._c_o_m_/_f_o_u_n_d_r_y_-_r_s_/_f_o_u_n_d_r_y_#_i_n_s_t_a_l_l_a_t_i_o_n_)_ _a_s_ _a
-_p_r_e_r_e_q_u_i_s_i_t_e_ _f_o_r_ _r_u_n_n_i_n_g_ _t_e_s_t_s_._ _T_e_s_t_i_n_g_ _i_s_ _a_c_h_i_e_v_e_d_ _w_i_t_h_ _[_p_y_._t_e_s_t_]_(_h_t_t_p_s_:_/_/
-_d_o_c_s_._p_y_t_e_s_t_._o_r_g_/_e_n_/_l_a_t_e_s_t_/_c_o_n_t_e_n_t_s_._h_t_m_l_)_._ _Y_o_u_ _c_a_n_ _r_u_n_ _a_l_l_ _t_e_s_t_s_ _f_r_o_m_ _t_h_e
-_r_e_p_o_s_i_t_o_r_y_ _r_o_o_t_ _d_i_r_e_c_t_o_r_y_ _b_y_ _r_u_n_n_i_n_g_ _`_p_y_t_h_o_n_ _-_m_ _p_y_t_e_s_t_`_,_ _o_r_ _y_o_u_ _c_a_n_ _p_i_c_k_ _a
-_s_p_e_c_i_f_i_c_ _t_e_s_t_ _w_i_t_h_ _`_p_y_t_h_o_n_ _-_m_ _p_y_t_e_s_t_ _{_p_a_t_h_/_t_o_/_t_e_s_t___f_i_l_e_._p_y_}_`_._ _G_e_n_e_r_a_l
-_i_n_t_e_g_r_a_t_i_o_n_-_l_e_v_e_l_ _t_e_s_t_s_ _a_r_e_ _i_n_ _t_h_e_ _`_t_e_s_t_s_`_ _f_o_l_d_e_r_,_ _w_h_i_l_e_ _m_o_r_e_ _i_s_o_l_a_t_e_d_ _o_r_ _u_n_i_t
-_t_e_s_t_s_ _a_r_e_ _c_o_l_o_c_a_t_e_d_ _w_i_t_h_ _t_h_e_ _f_i_l_e_s_ _t_h_e_y_ _a_r_e_ _t_e_s_t_i_n_g_ _a_n_d_ _e_n_d_ _w_i_t_h_ _a_ _`___t_e_s_t_._p_y_`
-_s_u_f_f_i_x_._ _#_#_ _C_o_n_t_r_i_b_u_t_i_o_n_s_ _P_l_e_a_s_e_ _r_e_f_e_r_ _t_o_ _[_C_O_N_T_R_I_B_U_T_I_N_G_._m_d_]_(_C_O_N_T_R_I_B_U_T_I_N_G_._m_d_)_._ _#_#
-_C_o_v_e_r_a_g_e_ _T_o_ _r_u_n_ _c_o_v_e_r_a_g_e_ _l_o_c_a_l_l_y_ _y_o_u_ _c_a_n_ _f_o_l_l_o_w_ _t_h_e_s_e_ _s_t_e_p_s_:_ _`_`_`_b_a_s_h_ _p_i_p
-_i_n_s_t_a_l_l_ _c_o_v_e_r_a_g_e_ _c_o_v_e_r_a_g_e_ _r_u_n_ _-_m_ _p_y_t_e_s_t_ _c_o_v_e_r_a_g_e_ _h_t_m_l_ _`_`_`_ _t_h_e_n_ _j_u_s_t_ _o_p_e_n
-_`_h_t_m_l_c_o_v_/_i_n_d_e_x_._h_t_m_l_`_ _t_o_ _v_i_e_w_ _t_h_e_ _r_e_p_o_r_t_!_ _#_#_ _N_u_m_b_e_r_ _f_o_r_m_a_t_ _W_e_ _f_r_e_q_u_e_n_t_l_y_ _u_s_e_ _1_8_-
-_d_e_c_i_m_a_l_ _[_f_i_x_e_d_-_p_o_i_n_t_ _p_r_e_c_i_s_i_o_n_ _n_u_m_b_e_r_s_]_(_h_t_t_p_s_:_/_/_g_i_t_h_u_b_._c_o_m_/_d_e_l_v_t_e_c_h_/
-_f_i_x_e_d_p_o_i_n_t_m_a_t_h_#_r_e_a_d_m_e_)_ _f_o_r_ _a_r_i_t_h_m_e_t_i_c_._ _#_#_ _D_i_s_c_l_a_i_m_e_r_ _T_h_i_s_ _p_r_o_j_e_c_t_ _i_s_ _a_ _w_o_r_k_-_i_n_-
-_p_r_o_g_r_e_s_s_._ _T_h_e_ _l_a_n_g_u_a_g_e_ _u_s_e_d_ _i_n_ _t_h_i_s_ _c_o_d_e_ _a_n_d_ _d_o_c_u_m_e_n_t_a_t_i_o_n_ _i_s_ _n_o_t_ _i_n_t_e_n_d_e_d_ _t_o_,
-_a_n_d_ _d_o_e_s_ _n_o_t_,_ _h_a_v_e_ _a_n_y_ _p_a_r_t_i_c_u_l_a_r_ _f_i_n_a_n_c_i_a_l_,_ _l_e_g_a_l_,_ _o_r_ _r_e_g_u_l_a_t_o_r_y_ _s_i_g_n_i_f_i_c_a_n_c_e_.
-_-_-_-_ _C_o_p_y_r_i_g_h_t_ _Â_©_ _2_0_2_4_ _D_E_L_V_ _L_i_c_e_n_s_e_d_ _u_n_d_e_r_ _t_h_e_ _A_p_a_c_h_e_ _L_i_c_e_n_s_e_,_ _V_e_r_s_i_o_n_ _2_._0_ _(_t_h_e
-_"_O_S_S_ _L_i_c_e_n_s_e_"_)_._ _B_y_ _a_c_c_e_s_s_i_n_g_ _o_r_ _u_s_i_n_g_ _t_h_i_s_ _c_o_d_e_,_ _y_o_u_ _s_i_g_n_i_f_y_ _t_h_a_t_ _y_o_u_ _h_a_v_e
-_r_e_a_d_,_ _u_n_d_e_r_s_t_a_n_d_ _a_n_d_ _a_g_r_e_e_ _t_o_ _b_e_ _b_o_u_n_d_ _b_y_ _a_n_d_ _t_o_ _c_o_m_p_l_y_ _w_i_t_h_ _t_h_e_ _[_O_S_S_ _L_i_c_e_n_s_e_]
-_(_h_t_t_p_:_/_/_w_w_w_._a_p_a_c_h_e_._o_r_g_/_l_i_c_e_n_s_e_s_/_L_I_C_E_N_S_E_-_2_._0_)_ _a_n_d_ _[_D_E_L_V_'_s_ _T_e_r_m_s_ _o_f_ _S_e_r_v_i_c_e_]
-_(_h_t_t_p_s_:_/_/_e_l_e_m_e_n_t_f_i_._s_3_._u_s_-_e_a_s_t_-_2_._a_m_a_z_o_n_a_w_s_._c_o_m_/_e_l_e_m_e_n_t_-_f_i_n_a_n_c_e_-_t_e_r_m_s_-_o_f_-
-_s_e_r_v_i_c_e_._p_d_f_)_._ _I_f_ _y_o_u_ _d_o_ _n_o_t_ _a_g_r_e_e_ _t_o_ _t_h_o_s_e_ _t_e_r_m_s_,_ _y_o_u_ _a_r_e_ _p_r_o_h_i_b_i_t_e_d_ _f_r_o_m
-_a_c_c_e_s_s_i_n_g_ _o_r_ _u_s_i_n_g_ _t_h_i_s_ _c_o_d_e_._ _U_n_l_e_s_s_ _r_e_q_u_i_r_e_d_ _b_y_ _a_p_p_l_i_c_a_b_l_e_ _l_a_w_ _o_r_ _a_g_r_e_e_d_ _t_o_ _i_n
-_w_r_i_t_i_n_g_,_ _s_o_f_t_w_a_r_e_ _d_i_s_t_r_i_b_u_t_e_d_ _u_n_d_e_r_ _t_h_e_ _O_S_S_ _L_i_c_e_n_s_e_ _i_s_ _d_i_s_t_r_i_b_u_t_e_d_ _o_n_ _a_n_ _"_A_S
-_I_S_"_ _B_A_S_I_S_,_ _W_I_T_H_O_U_T_ _W_A_R_R_A_N_T_I_E_S_ _O_R_ _C_O_N_D_I_T_I_O_N_S_ _O_F_ _A_N_Y_ _K_I_N_D_,_ _e_i_t_h_e_r_ _e_x_p_r_e_s_s_ _o_r
-_i_m_p_l_i_e_d_._ _S_e_e_ _t_h_e_ _O_S_S_ _L_i_c_e_n_s_e_ _a_n_d_ _t_h_e_ _D_E_L_V_ _T_e_r_m_s_ _o_f_ _S_e_r_v_i_c_e_ _f_o_r_ _t_h_e_ _s_p_e_c_i_f_i_c
-_l_a_n_g_u_a_g_e_ _g_o_v_e_r_n_i_n_g_ _p_e_r_m_i_s_s_i_o_n_s_ _a_n_d_ _l_i_m_i_t_a_t_i_o_n_s_.
+_h_y_p_e_r_d_r_i_v_e_._g_e_t___p_o_o_l___s_t_a_t_e_(_c_o_e_r_c_e___f_l_o_a_t_=_T_r_u_e_)_ _p_o_o_l___s_t_a_t_e_._p_l_o_t_(_x_=_"_b_l_o_c_k___n_u_m_b_e_r_"_,
+_y_=_"_l_o_n_g_s___o_u_t_s_t_a_n_d_i_n_g_"_,_ _k_i_n_d_=_"_l_i_n_e_"_)_ _`_`_`_ _S_e_e_ _o_u_r_ _[_t_u_t_o_r_i_a_l_ _n_o_t_e_b_o_o_k_]_(_e_x_a_m_p_l_e_s_/
+_t_u_t_o_r_i_a_l_._i_p_y_n_b_)_ _f_o_r_ _m_o_r_e_ _i_n_f_o_r_m_a_t_i_o_n_,_ _i_n_c_l_u_d_i_n_g_ _d_e_t_a_i_l_s_ _o_n_ _e_x_e_c_u_t_i_n_g_ _t_r_a_d_e_s_ _o_n
+_r_e_m_o_t_e_ _c_h_a_i_n_s_._ _#_#_ _I_n_s_t_a_l_l_ _P_l_e_a_s_e_ _r_e_f_e_r_ _t_o_ _[_I_N_S_T_A_L_L_._m_d_]_(_I_N_S_T_A_L_L_._m_d_)_ _f_o_r_ _m_o_r_e
+_a_d_v_a_n_c_e_d_ _i_n_s_t_a_l_l_ _o_p_t_i_o_n_s_._ _#_#_ _D_e_p_l_o_y_m_e_n_t_ _P_l_e_a_s_e_ _r_e_f_e_r_ _t_o_ _[_B_U_I_L_D_._m_d_]_(_B_U_I_L_D_._m_d_)_.
+_#_#_ _T_e_s_t_i_n_g_ _W_e_ _d_e_p_l_o_y_ _a_ _l_o_c_a_l_ _a_n_v_i_l_ _c_h_a_i_n_ _t_o_ _r_u_n_ _s_y_s_t_e_m_ _t_e_s_t_s_._ _T_h_e_r_e_f_o_r_e_,_ _y_o_u
+_m_u_s_t_ _[_i_n_s_t_a_l_l_ _f_o_u_n_d_r_y_]_(_h_t_t_p_s_:_/_/_g_i_t_h_u_b_._c_o_m_/_f_o_u_n_d_r_y_-_r_s_/_f_o_u_n_d_r_y_#_i_n_s_t_a_l_l_a_t_i_o_:_/_/
+_g_i_t_h_u_b_._c_o_m_/_f_o_u_n_d_r_y_-_r_s_/_f_o_u_n_d_r_y_#_i_n_s_t_a_l_l_a_t_i_o_n_)_ _a_s_ _a_ _p_r_e_r_e_q_u_i_s_i_t_e_ _f_o_r_ _r_u_n_n_i_n_g
+_t_e_s_t_s_._ _T_e_s_t_i_n_g_ _i_s_ _a_c_h_i_e_v_e_d_ _w_i_t_h_ _[_p_y_._t_e_s_t_]_(_h_t_t_p_s_:_/_/_d_o_c_s_._p_y_t_e_s_t_._o_r_g_/_e_n_/_l_a_t_e_s_t_/
+_c_o_n_t_e_n_t_s_._h_t_m_l_)_._ _Y_o_u_ _c_a_n_ _r_u_n_ _a_l_l_ _t_e_s_t_s_ _f_r_o_m_ _t_h_e_ _r_e_p_o_s_i_t_o_r_y_ _r_o_o_t_ _d_i_r_e_c_t_o_r_y_ _b_y
+_r_u_n_n_i_n_g_ _`_p_y_t_h_o_n_ _-_m_ _p_y_t_e_s_t_`_,_ _o_r_ _y_o_u_ _c_a_n_ _p_i_c_k_ _a_ _s_p_e_c_i_f_i_c_ _t_e_s_t_ _w_i_t_h_ _`_p_y_t_h_o_n_ _-
+_m_ _p_y_t_e_s_t_ _{_p_a_t_h_/_t_o_/_t_e_s_t___f_i_l_e_._p_y_}_`_._ _G_e_n_e_r_a_l_ _i_n_t_e_g_r_a_t_i_o_n_-_l_e_v_e_l_ _t_e_s_t_s_ _a_r_e_ _i_n_ _t_h_e
+_`_t_e_s_t_s_`_ _f_o_l_d_e_r_,_ _w_h_i_l_e_ _m_o_r_e_ _i_s_o_l_a_t_e_d_ _o_r_ _u_n_i_t_ _t_e_s_t_s_ _a_r_e_ _c_o_l_o_c_a_t_e_d_ _w_i_t_h_ _t_h_e_ _f_i_l_e_s
+_t_h_e_y_ _a_r_e_ _t_e_s_t_i_n_g_ _a_n_d_ _e_n_d_ _w_i_t_h_ _a_ _`___t_e_s_t_._p_y_`_ _s_u_f_f_i_x_._ _#_#_ _C_o_n_t_r_i_b_u_t_i_o_n_s_ _P_l_e_a_s_e
+_r_e_f_e_r_ _t_o_ _[_C_O_N_T_R_I_B_U_T_I_N_G_._m_d_]_(_C_O_N_T_R_I_B_U_T_I_N_G_._m_d_)_._ _#_#_ _C_o_v_e_r_a_g_e_ _T_o_ _r_u_n_ _c_o_v_e_r_a_g_e
+_l_o_c_a_l_l_y_ _y_o_u_ _c_a_n_ _f_o_l_l_o_w_ _t_h_e_s_e_ _s_t_e_p_s_:_ _`_`_`_b_a_s_h_ _p_i_p_ _i_n_s_t_a_l_l_ _c_o_v_e_r_a_g_e_ _c_o_v_e_r_a_g_e_ _r_u_n_ _-
+_m_ _p_y_t_e_s_t_ _c_o_v_e_r_a_g_e_ _h_t_m_l_ _`_`_`_ _t_h_e_n_ _j_u_s_t_ _o_p_e_n_ _`_h_t_m_l_c_o_v_/_i_n_d_e_x_._h_t_m_l_`_ _t_o_ _v_i_e_w_ _t_h_e
+_r_e_p_o_r_t_!_ _#_#_ _N_u_m_b_e_r_ _f_o_r_m_a_t_ _W_e_ _f_r_e_q_u_e_n_t_l_y_ _u_s_e_ _1_8_-_d_e_c_i_m_a_l_ _[_f_i_x_e_d_-_p_o_i_n_t_ _p_r_e_c_i_s_i_o_n
+_n_u_m_b_e_r_s_]_(_h_t_t_p_s_:_/_/_g_i_t_h_u_b_._c_o_m_/_d_e_l_v_t_e_c_h_/_f_i_x_e_d_p_o_i_n_t_m_a_t_h_#_r_e_a_d_m_e_)_ _f_o_r_ _a_r_i_t_h_m_e_t_i_c_._ _#_#
+_D_i_s_c_l_a_i_m_e_r_ _T_h_i_s_ _p_r_o_j_e_c_t_ _i_s_ _a_ _w_o_r_k_-_i_n_-_p_r_o_g_r_e_s_s_._ _T_h_e_ _l_a_n_g_u_a_g_e_ _u_s_e_d_ _i_n_ _t_h_i_s_ _c_o_d_e
+_a_n_d_ _d_o_c_u_m_e_n_t_a_t_i_o_n_ _i_s_ _n_o_t_ _i_n_t_e_n_d_e_d_ _t_o_,_ _a_n_d_ _d_o_e_s_ _n_o_t_,_ _h_a_v_e_ _a_n_y_ _p_a_r_t_i_c_u_l_a_r
+_f_i_n_a_n_c_i_a_l_,_ _l_e_g_a_l_,_ _o_r_ _r_e_g_u_l_a_t_o_r_y_ _s_i_g_n_i_f_i_c_a_n_c_e_._ _-_-_-_ _C_o_p_y_r_i_g_h_t_ _Â_©_ _2_0_2_4_ _D_E_L_V
+_L_i_c_e_n_s_e_d_ _u_n_d_e_r_ _t_h_e_ _A_p_a_c_h_e_ _L_i_c_e_n_s_e_,_ _V_e_r_s_i_o_n_ _2_._0_ _(_t_h_e_ _"_O_S_S_ _L_i_c_e_n_s_e_"_)_._ _B_y
+_a_c_c_e_s_s_i_n_g_ _o_r_ _u_s_i_n_g_ _t_h_i_s_ _c_o_d_e_,_ _y_o_u_ _s_i_g_n_i_f_y_ _t_h_a_t_ _y_o_u_ _h_a_v_e_ _r_e_a_d_,_ _u_n_d_e_r_s_t_a_n_d_ _a_n_d
+_a_g_r_e_e_ _t_o_ _b_e_ _b_o_u_n_d_ _b_y_ _a_n_d_ _t_o_ _c_o_m_p_l_y_ _w_i_t_h_ _t_h_e_ _[_O_S_S_ _L_i_c_e_n_s_e_]_(_h_t_t_p_:_/_/
+_w_w_w_._a_p_a_c_h_e_._o_r_g_/_l_i_c_e_n_s_e_s_/_L_I_C_E_N_S_E_-_2_._0_)_ _a_n_d_ _[_D_E_L_V_'_s_ _T_e_r_m_s_ _o_f_ _S_e_r_v_i_c_e_]_(_h_t_t_p_s_:_/_/
+_d_e_l_v_-_p_u_b_l_i_c_._s_3_._u_s_-_e_a_s_t_-_2_._a_m_a_z_o_n_a_w_s_._c_o_m_/_d_e_l_v_-_t_e_r_m_s_-_o_f_-_s_e_r_v_i_c_e_._p_d_f_)_._ _I_f_ _y_o_u_ _d_o
+_n_o_t_ _a_g_r_e_e_ _t_o_ _t_h_o_s_e_ _t_e_r_m_s_,_ _y_o_u_ _a_r_e_ _p_r_o_h_i_b_i_t_e_d_ _f_r_o_m_ _a_c_c_e_s_s_i_n_g_ _o_r_ _u_s_i_n_g_ _t_h_i_s_ _c_o_d_e_.
+_U_n_l_e_s_s_ _r_e_q_u_i_r_e_d_ _b_y_ _a_p_p_l_i_c_a_b_l_e_ _l_a_w_ _o_r_ _a_g_r_e_e_d_ _t_o_ _i_n_ _w_r_i_t_i_n_g_,_ _s_o_f_t_w_a_r_e_ _d_i_s_t_r_i_b_u_t_e_d
+_u_n_d_e_r_ _t_h_e_ _O_S_S_ _L_i_c_e_n_s_e_ _i_s_ _d_i_s_t_r_i_b_u_t_e_d_ _o_n_ _a_n_ _"_A_S_ _I_S_"_ _B_A_S_I_S_,_ _W_I_T_H_O_U_T_ _W_A_R_R_A_N_T_I_E_S_ _O_R
+_C_O_N_D_I_T_I_O_N_S_ _O_F_ _A_N_Y_ _K_I_N_D_,_ _e_i_t_h_e_r_ _e_x_p_r_e_s_s_ _o_r_ _i_m_p_l_i_e_d_._ _S_e_e_ _t_h_e_ _O_S_S_ _L_i_c_e_n_s_e_ _a_n_d_ _t_h_e
+_D_E_L_V_ _T_e_r_m_s_ _o_f_ _S_e_r_v_i_c_e_ _f_o_r_ _t_h_e_ _s_p_e_c_i_f_i_c_ _l_a_n_g_u_a_g_e_ _g_o_v_e_r_n_i_n_g_ _p_e_r_m_i_s_s_i_o_n_s_ _a_n_d
+_l_i_m_i_t_a_t_i_o_n_s_.
```

