# Comparing `tmp/appbuilder_sdk-0.7.0-py3-none-any.whl.zip` & `tmp/appbuilder_sdk-0.7.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,83 +1,85 @@
-Zip file size: 377942 bytes, number of entries: 243
--rw-r--r--  2.0 unx     6392 b- defN 24-Apr-29 10:56 appbuilder/__init__.py
+Zip file size: 419123 bytes, number of entries: 263
+-rw-r--r--  2.0 unx     6704 b- defN 24-May-22 07:26 appbuilder/__init__.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/__init__.py
--rw-r--r--  2.0 unx     9441 b- defN 24-Apr-29 10:56 appbuilder/core/_client.py
--rw-r--r--  2.0 unx     3120 b- defN 24-Apr-29 10:56 appbuilder/core/_exception.py
--rw-r--r--  2.0 unx    16573 b- defN 24-Apr-15 15:08 appbuilder/core/agent.py
--rw-r--r--  2.0 unx     4843 b- defN 24-Apr-29 10:56 appbuilder/core/component.py
--rw-r--r--  2.0 unx      826 b- defN 24-Apr-28 05:08 appbuilder/core/constants.py
+-rw-r--r--  2.0 unx     9645 b- defN 24-May-22 07:26 appbuilder/core/_client.py
+-rw-r--r--  2.0 unx     3120 b- defN 24-May-09 06:14 appbuilder/core/_exception.py
+-rw-r--r--  2.0 unx    19913 b- defN 24-May-22 07:26 appbuilder/core/agent.py
+-rw-r--r--  2.0 unx     4843 b- defN 24-May-09 06:14 appbuilder/core/component.py
+-rw-r--r--  2.0 unx      826 b- defN 24-May-09 06:14 appbuilder/core/constants.py
 -rw-r--r--  2.0 unx     2297 b- defN 24-Apr-15 15:08 appbuilder/core/context.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/functional.py
--rw-r--r--  2.0 unx     1383 b- defN 24-Apr-24 07:05 appbuilder/core/message.py
--rw-r--r--  2.0 unx     7636 b- defN 24-Apr-15 15:08 appbuilder/core/user_session.py
--rw-r--r--  2.0 unx     5453 b- defN 24-Apr-15 15:08 appbuilder/core/utils.py
--rw-r--r--  2.0 unx      600 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/__init__.py
--rw-r--r--  2.0 unx     1452 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/base.py
--rw-r--r--  2.0 unx      723 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/assistants/__init__.py
--rw-r--r--  2.0 unx     3907 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/assistants/assistants.py
--rw-r--r--  2.0 unx     2393 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/assistants/files.py
--rw-r--r--  2.0 unx      770 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/threads/__init__.py
--rw-r--r--  2.0 unx     2504 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/threads/threads.py
--rw-r--r--  2.0 unx      670 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/threads/messages/__init__.py
--rw-r--r--  2.0 unx     2458 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/threads/messages/messages.py
--rw-r--r--  2.0 unx      658 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/threads/runs/__init__.py
--rw-r--r--  2.0 unx    12247 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/threads/runs/runs.py
--rw-r--r--  2.0 unx     1667 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/type/__init__.py
--rw-r--r--  2.0 unx     3165 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/type/assistant_type.py
--rw-r--r--  2.0 unx     3799 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/type/public_type.py
--rw-r--r--  2.0 unx     6482 b- defN 24-Apr-29 10:56 appbuilder/core/assistant/type/thread_type.py
+-rw-r--r--  2.0 unx     1383 b- defN 24-May-09 06:14 appbuilder/core/message.py
+-rw-r--r--  2.0 unx     7749 b- defN 24-May-22 07:26 appbuilder/core/user_session.py
+-rw-r--r--  2.0 unx     5513 b- defN 24-May-22 07:26 appbuilder/core/utils.py
+-rw-r--r--  2.0 unx      600 b- defN 24-May-09 06:14 appbuilder/core/assistant/__init__.py
+-rw-r--r--  2.0 unx     1452 b- defN 24-May-09 06:14 appbuilder/core/assistant/base.py
+-rw-r--r--  2.0 unx      723 b- defN 24-May-09 06:14 appbuilder/core/assistant/assistants/__init__.py
+-rw-r--r--  2.0 unx    16770 b- defN 24-May-22 07:26 appbuilder/core/assistant/assistants/assistants.py
+-rw-r--r--  2.0 unx    10957 b- defN 24-May-22 07:26 appbuilder/core/assistant/assistants/files.py
+-rw-r--r--  2.0 unx      792 b- defN 24-May-22 07:26 appbuilder/core/assistant/threads/__init__.py
+-rw-r--r--  2.0 unx     6479 b- defN 24-May-22 07:26 appbuilder/core/assistant/threads/threads.py
+-rw-r--r--  2.0 unx      670 b- defN 24-May-09 06:14 appbuilder/core/assistant/threads/messages/__init__.py
+-rw-r--r--  2.0 unx     9156 b- defN 24-May-22 07:26 appbuilder/core/assistant/threads/messages/messages.py
+-rw-r--r--  2.0 unx      897 b- defN 24-May-22 07:26 appbuilder/core/assistant/threads/runs/__init__.py
+-rw-r--r--  2.0 unx    19737 b- defN 24-May-22 07:26 appbuilder/core/assistant/threads/runs/runs.py
+-rw-r--r--  2.0 unx     3774 b- defN 24-May-22 07:26 appbuilder/core/assistant/threads/runs/steps.py
+-rw-r--r--  2.0 unx    12739 b- defN 24-May-22 07:26 appbuilder/core/assistant/threads/runs/stream_helper.py
+-rw-r--r--  2.0 unx     2777 b- defN 24-May-22 07:26 appbuilder/core/assistant/type/__init__.py
+-rw-r--r--  2.0 unx    10239 b- defN 24-May-22 07:26 appbuilder/core/assistant/type/assistant_type.py
+-rw-r--r--  2.0 unx     3799 b- defN 24-May-09 06:14 appbuilder/core/assistant/type/public_type.py
+-rw-r--r--  2.0 unx    11329 b- defN 24-May-22 07:26 appbuilder/core/assistant/type/thread_type.py
 -rw-r--r--  2.0 unx      600 b- defN 24-Apr-15 15:08 appbuilder/core/components/__init__.py
 -rw-r--r--  2.0 unx        0 b- defN 24-Apr-15 15:08 appbuilder/core/components/animal_recognize/__init__.py
--rw-r--r--  2.0 unx     8413 b- defN 24-Apr-15 15:08 appbuilder/core/components/animal_recognize/component.py
+-rw-r--r--  2.0 unx     8435 b- defN 24-May-22 07:26 appbuilder/core/components/animal_recognize/component.py
 -rw-r--r--  2.0 unx     4079 b- defN 24-Apr-15 15:08 appbuilder/core/components/animal_recognize/model.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/components/asr/__init__.py
--rw-r--r--  2.0 unx     8020 b- defN 24-Apr-15 15:08 appbuilder/core/components/asr/component.py
+-rw-r--r--  2.0 unx     8102 b- defN 24-May-22 07:26 appbuilder/core/components/asr/component.py
 -rw-r--r--  2.0 unx     3214 b- defN 24-Apr-15 15:08 appbuilder/core/components/asr/model.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/components/dish_recognize/__init__.py
--rw-r--r--  2.0 unx     4538 b- defN 24-Apr-15 15:08 appbuilder/core/components/dish_recognize/component.py
+-rw-r--r--  2.0 unx     4560 b- defN 24-May-22 07:26 appbuilder/core/components/dish_recognize/component.py
 -rw-r--r--  2.0 unx     5009 b- defN 24-Apr-15 15:08 appbuilder/core/components/dish_recognize/model.py
 -rw-r--r--  2.0 unx        0 b- defN 24-Apr-15 15:08 appbuilder/core/components/doc_crop_enhance/__init__.py
--rw-r--r--  2.0 unx     5570 b- defN 24-Apr-15 15:08 appbuilder/core/components/doc_crop_enhance/component.py
+-rw-r--r--  2.0 unx     5627 b- defN 24-May-22 07:26 appbuilder/core/components/doc_crop_enhance/component.py
 -rw-r--r--  2.0 unx     4637 b- defN 24-Apr-15 15:08 appbuilder/core/components/doc_crop_enhance/model.py
--rw-r--r--  2.0 unx      599 b- defN 24-Apr-29 03:06 appbuilder/core/components/doc_format_converter/__init__.py
--rw-r--r--  2.0 unx    10617 b- defN 24-Apr-29 03:06 appbuilder/core/components/doc_format_converter/component.py
--rw-r--r--  2.0 unx     3882 b- defN 24-Apr-29 03:06 appbuilder/core/components/doc_format_converter/model.py
+-rw-r--r--  2.0 unx      599 b- defN 24-May-09 06:14 appbuilder/core/components/doc_format_converter/__init__.py
+-rw-r--r--  2.0 unx    10726 b- defN 24-May-22 07:26 appbuilder/core/components/doc_format_converter/component.py
+-rw-r--r--  2.0 unx     3882 b- defN 24-May-09 06:14 appbuilder/core/components/doc_format_converter/model.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/components/doc_parser/__init__.py
 -rw-r--r--  2.0 unx     2514 b- defN 24-Apr-15 15:08 appbuilder/core/components/doc_parser/base.py
 -rw-r--r--  2.0 unx     6007 b- defN 24-Apr-15 15:08 appbuilder/core/components/doc_parser/doc_parser.py
 -rw-r--r--  2.0 unx        0 b- defN 24-Apr-15 15:08 appbuilder/core/components/doc_splitter/__init__.py
--rw-r--r--  2.0 unx    13916 b- defN 24-Apr-24 07:05 appbuilder/core/components/doc_splitter/doc_splitter.py
+-rw-r--r--  2.0 unx    13916 b- defN 24-May-09 06:14 appbuilder/core/components/doc_splitter/doc_splitter.py
 -rw-r--r--  2.0 unx       88 b- defN 24-Apr-15 15:08 appbuilder/core/components/embeddings/__init__.py
 -rw-r--r--  2.0 unx     2097 b- defN 24-Apr-15 15:08 appbuilder/core/components/embeddings/base.py
 -rw-r--r--  2.0 unx     4547 b- defN 24-Apr-15 15:08 appbuilder/core/components/embeddings/component.py
 -rw-r--r--  2.0 unx      636 b- defN 24-Apr-15 15:08 appbuilder/core/components/excel2figure/__init__.py
--rw-r--r--  2.0 unx     8705 b- defN 24-Apr-24 07:05 appbuilder/core/components/excel2figure/component.py
+-rw-r--r--  2.0 unx     8727 b- defN 24-May-22 07:26 appbuilder/core/components/excel2figure/component.py
 -rw-r--r--  2.0 unx      616 b- defN 24-Apr-15 15:08 appbuilder/core/components/extract_table/__init__.py
--rw-r--r--  2.0 unx     6152 b- defN 24-Apr-15 15:08 appbuilder/core/components/extract_table/component.py
+-rw-r--r--  2.0 unx     6260 b- defN 24-May-22 07:26 appbuilder/core/components/extract_table/component.py
 -rw-r--r--  2.0 unx      600 b- defN 24-Apr-15 15:08 appbuilder/core/components/gbi/__init__.py
--rw-r--r--  2.0 unx     1965 b- defN 24-Apr-24 07:05 appbuilder/core/components/gbi/basic.py
+-rw-r--r--  2.0 unx     1965 b- defN 24-May-09 06:14 appbuilder/core/components/gbi/basic.py
 -rw-r--r--  2.0 unx      600 b- defN 24-Apr-15 15:08 appbuilder/core/components/gbi/nl2sql/__init__.py
--rw-r--r--  2.0 unx     6531 b- defN 24-Apr-24 07:05 appbuilder/core/components/gbi/nl2sql/component.py
+-rw-r--r--  2.0 unx     6538 b- defN 24-May-22 07:26 appbuilder/core/components/gbi/nl2sql/component.py
 -rw-r--r--  2.0 unx      600 b- defN 24-Apr-15 15:08 appbuilder/core/components/gbi/select_table/__init__.py
--rw-r--r--  2.0 unx     6319 b- defN 24-Apr-24 07:05 appbuilder/core/components/gbi/select_table/component.py
+-rw-r--r--  2.0 unx     6356 b- defN 24-May-22 07:26 appbuilder/core/components/gbi/select_table/component.py
 -rw-r--r--  2.0 unx      600 b- defN 24-Apr-15 15:08 appbuilder/core/components/general_ocr/__init__.py
--rw-r--r--  2.0 unx     7643 b- defN 24-Apr-15 15:08 appbuilder/core/components/general_ocr/component.py
+-rw-r--r--  2.0 unx     7783 b- defN 24-May-22 07:26 appbuilder/core/components/general_ocr/component.py
 -rw-r--r--  2.0 unx     8077 b- defN 24-Apr-15 15:08 appbuilder/core/components/general_ocr/model.py
 -rw-r--r--  2.0 unx      600 b- defN 24-Apr-15 15:08 appbuilder/core/components/handwrite_ocr/__init__.py
--rw-r--r--  2.0 unx     7265 b- defN 24-Apr-15 15:08 appbuilder/core/components/handwrite_ocr/component.py
+-rw-r--r--  2.0 unx     7309 b- defN 24-May-22 07:26 appbuilder/core/components/handwrite_ocr/component.py
 -rw-r--r--  2.0 unx     7388 b- defN 24-Apr-15 15:08 appbuilder/core/components/handwrite_ocr/model.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/components/image_understand/__init__.py
--rw-r--r--  2.0 unx     9533 b- defN 24-Apr-30 08:28 appbuilder/core/components/image_understand/component.py
--rw-r--r--  2.0 unx     5610 b- defN 24-Apr-30 08:28 appbuilder/core/components/image_understand/model.py
+-rw-r--r--  2.0 unx     9667 b- defN 24-May-22 07:26 appbuilder/core/components/image_understand/component.py
+-rw-r--r--  2.0 unx     5610 b- defN 24-May-09 06:14 appbuilder/core/components/image_understand/model.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/components/landmark_recognize/__init__.py
--rw-r--r--  2.0 unx     4566 b- defN 24-Apr-15 15:08 appbuilder/core/components/landmark_recognize/component.py
+-rw-r--r--  2.0 unx     4588 b- defN 24-May-22 07:26 appbuilder/core/components/landmark_recognize/component.py
 -rw-r--r--  2.0 unx     2205 b- defN 24-Apr-15 15:08 appbuilder/core/components/landmark_recognize/model.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/__init__.py
--rw-r--r--  2.0 unx    16675 b- defN 24-Apr-23 13:40 appbuilder/core/components/llms/base.py
+-rw-r--r--  2.0 unx    16795 b- defN 24-May-22 07:26 appbuilder/core/components/llms/base.py
 -rw-r--r--  2.0 unx       56 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/dialog_summary/__init__.py
 -rw-r--r--  2.0 unx     4097 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/dialog_summary/component.py
 -rw-r--r--  2.0 unx       39 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/is_complex_query/__init__.py
 -rw-r--r--  2.0 unx     4102 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/is_complex_query/component.py
 -rw-r--r--  2.0 unx       28 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/mrc/__init__.py
 -rw-r--r--  2.0 unx     9683 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/mrc/component.py
 -rw-r--r--  2.0 unx       62 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/nl2pandas/__init__.py
@@ -87,159 +89,177 @@
 -rw-r--r--  2.0 unx       54 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/playground/__init__.py
 -rw-r--r--  2.0 unx     5436 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/playground/component.py
 -rw-r--r--  2.0 unx       37 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/qa_pair_mining/__init__.py
 -rw-r--r--  2.0 unx     4196 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/qa_pair_mining/component.py
 -rw-r--r--  2.0 unx       43 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/query_decomposition/__init__.py
 -rw-r--r--  2.0 unx     4113 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/query_decomposition/component.py
 -rw-r--r--  2.0 unx       56 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/query_rewrite/__init__.py
--rw-r--r--  2.0 unx     7062 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/query_rewrite/component.py
+-rw-r--r--  2.0 unx     7046 b- defN 24-May-22 07:26 appbuilder/core/components/llms/query_rewrite/component.py
 -rw-r--r--  2.0 unx       40 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/similar_question/__init__.py
--rw-r--r--  2.0 unx     5104 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/similar_question/component.py
+-rw-r--r--  2.0 unx     5104 b- defN 24-May-09 06:14 appbuilder/core/components/llms/similar_question/component.py
 -rw-r--r--  2.0 unx       55 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/style_rewrite/__init__.py
--rw-r--r--  2.0 unx     6949 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/style_rewrite/component.py
+-rw-r--r--  2.0 unx     6949 b- defN 24-May-09 06:14 appbuilder/core/components/llms/style_rewrite/component.py
 -rw-r--r--  2.0 unx      622 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/style_writing/__init__.py
--rw-r--r--  2.0 unx     8355 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/style_writing/component.py
+-rw-r--r--  2.0 unx     8355 b- defN 24-May-09 06:14 appbuilder/core/components/llms/style_writing/component.py
 -rw-r--r--  2.0 unx       37 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/tag_extraction/__init__.py
 -rw-r--r--  2.0 unx     4195 b- defN 24-Apr-15 15:08 appbuilder/core/components/llms/tag_extraction/component.py
 -rw-r--r--  2.0 unx      648 b- defN 24-Apr-15 15:08 appbuilder/core/components/matching/__init__.py
 -rw-r--r--  2.0 unx     1517 b- defN 24-Apr-15 15:08 appbuilder/core/components/matching/base.py
 -rw-r--r--  2.0 unx     4561 b- defN 24-Apr-15 15:08 appbuilder/core/components/matching/component.py
 -rw-r--r--  2.0 unx      600 b- defN 24-Apr-15 15:08 appbuilder/core/components/mix_card_ocr/__init__.py
--rw-r--r--  2.0 unx     8230 b- defN 24-Apr-24 07:05 appbuilder/core/components/mix_card_ocr/component.py
+-rw-r--r--  2.0 unx     8274 b- defN 24-May-22 07:26 appbuilder/core/components/mix_card_ocr/component.py
 -rw-r--r--  2.0 unx     7264 b- defN 24-Apr-15 15:08 appbuilder/core/components/mix_card_ocr/model.py
 -rw-r--r--  2.0 unx      478 b- defN 24-Apr-15 15:08 appbuilder/core/components/object_recognize/__init__.py
--rw-r--r--  2.0 unx     7847 b- defN 24-Apr-15 15:08 appbuilder/core/components/object_recognize/component.py
+-rw-r--r--  2.0 unx     7913 b- defN 24-May-22 07:26 appbuilder/core/components/object_recognize/component.py
 -rw-r--r--  2.0 unx     4328 b- defN 24-Apr-15 15:08 appbuilder/core/components/object_recognize/model.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/components/plant_recognize/__init__.py
--rw-r--r--  2.0 unx     8262 b- defN 24-Apr-15 15:08 appbuilder/core/components/plant_recognize/component.py
+-rw-r--r--  2.0 unx     8284 b- defN 24-May-22 07:26 appbuilder/core/components/plant_recognize/component.py
 -rw-r--r--  2.0 unx     3577 b- defN 24-Apr-15 15:08 appbuilder/core/components/plant_recognize/model.py
 -rw-r--r--  2.0 unx        0 b- defN 24-Apr-15 15:08 appbuilder/core/components/qrcode_ocr/__init__.py
--rw-r--r--  2.0 unx     8039 b- defN 24-Apr-15 15:08 appbuilder/core/components/qrcode_ocr/component.py
+-rw-r--r--  2.0 unx     8260 b- defN 24-May-22 07:26 appbuilder/core/components/qrcode_ocr/component.py
 -rw-r--r--  2.0 unx     5119 b- defN 24-Apr-15 15:08 appbuilder/core/components/qrcode_ocr/model.py
 -rw-r--r--  2.0 unx      642 b- defN 24-Apr-15 15:08 appbuilder/core/components/rag_with_baidu_search/__init__.py
--rw-r--r--  2.0 unx     8605 b- defN 24-Apr-15 15:08 appbuilder/core/components/rag_with_baidu_search/component.py
+-rw-r--r--  2.0 unx     8623 b- defN 24-May-22 07:26 appbuilder/core/components/rag_with_baidu_search/component.py
 -rw-r--r--  2.0 unx      792 b- defN 24-Apr-15 15:08 appbuilder/core/components/retriever/__init__.py
 -rw-r--r--  2.0 unx      751 b- defN 24-Apr-15 15:08 appbuilder/core/components/retriever/baidu_vdb/__init__.py
--rw-r--r--  2.0 unx    17326 b- defN 24-Apr-15 15:08 appbuilder/core/components/retriever/baidu_vdb/baiduvdb_retriever.py
+-rw-r--r--  2.0 unx    17349 b- defN 24-May-22 07:26 appbuilder/core/components/retriever/baidu_vdb/baiduvdb_retriever.py
 -rw-r--r--  2.0 unx      688 b- defN 24-Apr-15 15:08 appbuilder/core/components/retriever/bes/__init__.py
--rw-r--r--  2.0 unx     9075 b- defN 24-Apr-28 05:08 appbuilder/core/components/retriever/bes/bes_retriever.py
+-rw-r--r--  2.0 unx     9075 b- defN 24-May-09 06:14 appbuilder/core/components/retriever/bes/bes_retriever.py
 -rw-r--r--  2.0 unx        0 b- defN 24-Apr-15 15:08 appbuilder/core/components/table_ocr/__init__.py
--rw-r--r--  2.0 unx     9099 b- defN 24-Apr-29 03:06 appbuilder/core/components/table_ocr/component.py
+-rw-r--r--  2.0 unx     9211 b- defN 24-May-22 07:26 appbuilder/core/components/table_ocr/component.py
 -rw-r--r--  2.0 unx     7610 b- defN 24-Apr-15 15:08 appbuilder/core/components/table_ocr/model.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/components/text_to_image/__init__.py
--rw-r--r--  2.0 unx    10260 b- defN 24-Apr-24 07:05 appbuilder/core/components/text_to_image/component.py
+-rw-r--r--  2.0 unx    10250 b- defN 24-May-22 07:26 appbuilder/core/components/text_to_image/component.py
 -rw-r--r--  2.0 unx     9444 b- defN 24-Apr-15 15:08 appbuilder/core/components/text_to_image/model.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/components/translate/__init__.py
 -rw-r--r--  2.0 unx     8025 b- defN 24-Apr-15 15:08 appbuilder/core/components/translate/component.py
 -rw-r--r--  2.0 unx     3352 b- defN 24-Apr-15 15:08 appbuilder/core/components/translate/model.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/core/components/tts/__init__.py
--rw-r--r--  2.0 unx     9907 b- defN 24-Apr-15 15:08 appbuilder/core/components/tts/component.py
--rw-r--r--  2.0 unx     5379 b- defN 24-Apr-15 15:08 appbuilder/core/components/tts/model.py
+-rw-r--r--  2.0 unx    10106 b- defN 24-May-22 07:26 appbuilder/core/components/tts/component.py
+-rw-r--r--  2.0 unx     5577 b- defN 24-May-22 07:26 appbuilder/core/components/tts/model.py
 -rw-r--r--  2.0 unx      652 b- defN 24-Apr-15 15:08 appbuilder/core/console/__init__.py
--rw-r--r--  2.0 unx     6229 b- defN 24-Apr-24 07:05 appbuilder/core/console/base.py
--rw-r--r--  2.0 unx      600 b- defN 24-Apr-29 03:06 appbuilder/core/console/appbuilder_client/__init__.py
--rw-r--r--  2.0 unx     8540 b- defN 24-Apr-30 08:28 appbuilder/core/console/appbuilder_client/appbuilder_client.py
--rw-r--r--  2.0 unx     6281 b- defN 24-Apr-29 03:06 appbuilder/core/console/appbuilder_client/data_class.py
+-rw-r--r--  2.0 unx     5075 b- defN 24-May-22 07:26 appbuilder/core/console/base.py
+-rw-r--r--  2.0 unx      600 b- defN 24-May-09 06:14 appbuilder/core/console/appbuilder_client/__init__.py
+-rw-r--r--  2.0 unx     8736 b- defN 24-May-22 07:26 appbuilder/core/console/appbuilder_client/appbuilder_client.py
+-rw-r--r--  2.0 unx     6281 b- defN 24-May-09 06:14 appbuilder/core/console/appbuilder_client/data_class.py
 -rw-r--r--  2.0 unx      629 b- defN 24-Apr-15 15:08 appbuilder/core/console/dataset/__init__.py
--rw-r--r--  2.0 unx     8993 b- defN 24-Apr-15 15:08 appbuilder/core/console/dataset/dataset.py
+-rw-r--r--  2.0 unx     9009 b- defN 24-May-22 07:26 appbuilder/core/console/dataset/dataset.py
 -rw-r--r--  2.0 unx      561 b- defN 24-Apr-15 15:08 appbuilder/core/console/dataset/model.py
 -rw-r--r--  2.0 unx      621 b- defN 24-Apr-15 15:08 appbuilder/core/console/rag/__init__.py
 -rw-r--r--  2.0 unx     2622 b- defN 24-Apr-15 15:08 appbuilder/core/console/rag/rag.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-01 07:14 appbuilder/tests/__init__.py
--rw-r--r--  2.0 unx    14563 b- defN 24-Apr-30 08:28 appbuilder/tests/parallel_ut_run.py
--rw-r--r--  2.0 unx     1318 b- defN 24-Apr-24 07:05 appbuilder/tests/pytest_config.py
--rw-r--r--  2.0 unx     1079 b- defN 24-Apr-24 07:05 appbuilder/tests/pytest_utils.py
--rw-r--r--  2.0 unx     1788 b- defN 24-Apr-24 07:05 appbuilder/tests/sed_str.py
--rw-r--r--  2.0 unx     1919 b- defN 24-Apr-24 07:05 appbuilder/tests/test_agent.py
--rw-r--r--  2.0 unx     5362 b- defN 24-Apr-30 08:28 appbuilder/tests/test_animal_recognize.py
--rw-r--r--  2.0 unx     2236 b- defN 24-Apr-30 08:28 appbuilder/tests/test_appbuilder_client.py
--rw-r--r--  2.0 unx     1823 b- defN 24-Apr-30 08:28 appbuilder/tests/test_appbuilder_core_components_retriever.py
--rw-r--r--  2.0 unx     4122 b- defN 24-Apr-24 07:05 appbuilder/tests/test_asr.py
--rw-r--r--  2.0 unx     2270 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_basic_import.py
--rw-r--r--  2.0 unx     1955 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_class_assistans.py
--rw-r--r--  2.0 unx     1226 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_class_messages.py
--rw-r--r--  2.0 unx     2247 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_class_runs.py
--rw-r--r--  2.0 unx     1164 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_class_threads.py
--rw-r--r--  2.0 unx     3142 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_e2e_funccall.py
--rw-r--r--  2.0 unx     3000 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_e2e_funccall_component.py
--rw-r--r--  2.0 unx     1110 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_e2e_run.py
--rw-r--r--  2.0 unx     2483 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_e2e_stream_cancel.py
--rw-r--r--  2.0 unx     2892 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_e2e_stream_funccall.py
--rw-r--r--  2.0 unx     1409 b- defN 24-Apr-29 10:56 appbuilder/tests/test_assistant_e2e_stream_run.py
--rw-r--r--  2.0 unx     3969 b- defN 24-Apr-24 07:05 appbuilder/tests/test_bes_retriever.py
--rw-r--r--  2.0 unx     1779 b- defN 24-Apr-30 08:28 appbuilder/tests/test_console_dataset.py
--rw-r--r--  2.0 unx     1080 b- defN 24-Apr-29 03:06 appbuilder/tests/test_console_rag.py
--rw-r--r--  2.0 unx     1520 b- defN 24-Apr-30 08:28 appbuilder/tests/test_core_console_base.py
--rw-r--r--  2.0 unx     3213 b- defN 24-Apr-30 08:28 appbuilder/tests/test_core_user_session.py
--rw-r--r--  2.0 unx     2401 b- defN 24-Apr-30 08:28 appbuilder/tests/test_core_utils.py
--rw-r--r--  2.0 unx     2439 b- defN 24-Apr-30 08:28 appbuilder/tests/test_dialog_summary.py
--rw-r--r--  2.0 unx     3297 b- defN 24-Apr-24 07:05 appbuilder/tests/test_dish_recognize.py
--rw-r--r--  2.0 unx     4269 b- defN 24-Apr-30 08:28 appbuilder/tests/test_doc_crop_enhance.py
--rw-r--r--  2.0 unx     1201 b- defN 24-Apr-29 03:06 appbuilder/tests/test_doc_format_converter.py
--rw-r--r--  2.0 unx     3092 b- defN 24-Apr-30 08:28 appbuilder/tests/test_doc_parser.py
--rw-r--r--  2.0 unx     3658 b- defN 24-Apr-24 07:05 appbuilder/tests/test_doc_splitter.py
--rw-r--r--  2.0 unx     1615 b- defN 24-Apr-24 07:05 appbuilder/tests/test_embedding.py
--rw-r--r--  2.0 unx     2445 b- defN 24-Apr-24 07:05 appbuilder/tests/test_extract_table.py
--rw-r--r--  2.0 unx     3498 b- defN 24-Apr-30 08:28 appbuilder/tests/test_gbi_nl2sql.py
--rw-r--r--  2.0 unx     4887 b- defN 24-Apr-30 08:28 appbuilder/tests/test_gbi_select_table.py
--rw-r--r--  2.0 unx     4822 b- defN 24-Apr-30 08:28 appbuilder/tests/test_general_ocr.py
--rw-r--r--  2.0 unx     2302 b- defN 24-Apr-24 07:05 appbuilder/tests/test_get_model_list.py
--rw-r--r--  2.0 unx     2250 b- defN 24-Apr-24 07:05 appbuilder/tests/test_handwrite_ocr.py
--rw-r--r--  2.0 unx     3923 b- defN 24-Apr-30 08:28 appbuilder/tests/test_image_understand.py
--rw-r--r--  2.0 unx     2223 b- defN 24-Apr-24 07:05 appbuilder/tests/test_is_complex_query.py
--rw-r--r--  2.0 unx     2836 b- defN 24-Apr-24 07:05 appbuilder/tests/test_landmark_recognize.py
--rw-r--r--  2.0 unx     2185 b- defN 24-Apr-28 05:08 appbuilder/tests/test_matching.py
--rw-r--r--  2.0 unx      813 b- defN 24-Feb-28 03:35 appbuilder/tests/test_message.py
--rw-r--r--  2.0 unx     2246 b- defN 24-Apr-24 07:05 appbuilder/tests/test_mix_card_ocr.py
--rw-r--r--  2.0 unx     4351 b- defN 24-Apr-30 08:28 appbuilder/tests/test_mrc.py
--rw-r--r--  2.0 unx     2037 b- defN 24-Apr-30 08:28 appbuilder/tests/test_nl2pandas.py
--rw-r--r--  2.0 unx     4898 b- defN 24-Apr-24 07:05 appbuilder/tests/test_object_recognize.py
--rw-r--r--  2.0 unx     2451 b- defN 24-Apr-30 08:28 appbuilder/tests/test_oral_query_generation.py
--rw-r--r--  2.0 unx     3416 b- defN 24-Apr-30 08:28 appbuilder/tests/test_plant_recognize.py
--rw-r--r--  2.0 unx     2288 b- defN 24-Apr-24 07:05 appbuilder/tests/test_playground.py
--rw-r--r--  2.0 unx     4751 b- defN 24-Apr-29 03:06 appbuilder/tests/test_qa_aicape_animal_rec.py
--rw-r--r--  2.0 unx     5581 b- defN 24-Apr-29 03:06 appbuilder/tests/test_qa_aicape_doc_crop_enhance.py
--rw-r--r--  2.0 unx     4549 b- defN 24-Apr-29 03:06 appbuilder/tests/test_qa_aicape_handwriting_ocr.py
--rw-r--r--  2.0 unx     5270 b- defN 24-Apr-29 03:06 appbuilder/tests/test_qa_aicape_image_understand.py
--rw-r--r--  2.0 unx     4435 b- defN 24-Apr-29 03:06 appbuilder/tests/test_qa_aicape_mixcard_ocr.py
--rw-r--r--  2.0 unx     4489 b- defN 24-Apr-29 03:06 appbuilder/tests/test_qa_aicape_plant_rec.py
--rw-r--r--  2.0 unx     4985 b- defN 24-Apr-29 03:06 appbuilder/tests/test_qa_aicape_qrcode_orc.py
--rw-r--r--  2.0 unx     4560 b- defN 24-Apr-29 03:06 appbuilder/tests/test_qa_aicape_table_ocr.py
--rw-r--r--  2.0 unx     3454 b- defN 24-Apr-29 03:06 appbuilder/tests/test_qa_doc_parser_extract_table_from_doc.py
--rw-r--r--  2.0 unx     8326 b- defN 24-Apr-30 08:28 appbuilder/tests/test_qa_llm_dialog_summary.py
--rw-r--r--  2.0 unx     7461 b- defN 24-Apr-28 05:08 appbuilder/tests/test_qa_llm_excel2figure.py
--rw-r--r--  2.0 unx     9912 b- defN 24-Apr-30 08:28 appbuilder/tests/test_qa_llm_get_qianfan_model_list.py
--rw-r--r--  2.0 unx     3150 b- defN 24-Apr-30 08:28 appbuilder/tests/test_qa_llm_is_complex_query.py
--rw-r--r--  2.0 unx     4765 b- defN 24-Apr-29 03:06 appbuilder/tests/test_qa_llm_matching.py
--rw-r--r--  2.0 unx     6569 b- defN 24-Apr-30 08:28 appbuilder/tests/test_qa_llm_oral_query_generation.py
--rw-r--r--  2.0 unx     4099 b- defN 24-Apr-30 08:28 appbuilder/tests/test_qa_llm_paddle_speech_tts.py
--rw-r--r--  2.0 unx     4104 b- defN 24-Apr-30 08:28 appbuilder/tests/test_qa_llm_pandas.py
--rw-r--r--  2.0 unx     4193 b- defN 24-Apr-30 08:28 appbuilder/tests/test_qa_llm_query_decomposition.py
--rw-r--r--  2.0 unx     3536 b- defN 24-Apr-30 08:28 appbuilder/tests/test_qa_llm_style_rewrite.py
--rw-r--r--  2.0 unx     2245 b- defN 24-Apr-28 06:42 appbuilder/tests/test_qa_pair_mining.py
--rw-r--r--  2.0 unx     4184 b- defN 24-Apr-24 07:05 appbuilder/tests/test_qrcode_ocr.py
--rw-r--r--  2.0 unx     2231 b- defN 24-Apr-28 06:42 appbuilder/tests/test_query_decomposition.py
--rw-r--r--  2.0 unx     2925 b- defN 24-Apr-30 08:28 appbuilder/tests/test_query_rewrite.py
--rw-r--r--  2.0 unx     2190 b- defN 24-Apr-24 07:05 appbuilder/tests/test_rag_baidu_search.py
--rw-r--r--  2.0 unx     2933 b- defN 24-Apr-24 07:05 appbuilder/tests/test_similar_question.py
--rw-r--r--  2.0 unx     3519 b- defN 24-Apr-30 08:28 appbuilder/tests/test_style_rewrite.py
--rw-r--r--  2.0 unx     3927 b- defN 24-Apr-30 08:28 appbuilder/tests/test_style_writing.py
--rw-r--r--  2.0 unx     4100 b- defN 24-Apr-24 07:05 appbuilder/tests/test_table_ocr.py
--rw-r--r--  2.0 unx     2500 b- defN 24-Apr-24 07:05 appbuilder/tests/test_tag_extraction.py
--rw-r--r--  2.0 unx     2803 b- defN 24-Apr-30 08:28 appbuilder/tests/test_text_to_image.py
--rw-r--r--  2.0 unx     1471 b- defN 24-Apr-24 07:05 appbuilder/tests/test_translate.py
--rw-r--r--  2.0 unx     2839 b- defN 24-Apr-24 07:05 appbuilder/tests/test_tts.py
--rw-r--r--  2.0 unx     1503 b- defN 24-Apr-30 08:28 appbuilder/tests/test_utils_logging_util.py
--rw-r--r--  2.0 unx     4344 b- defN 24-Apr-24 07:05 appbuilder/tests/test_vdb_retriever.py
+-rw-r--r--  2.0 unx    14563 b- defN 24-May-09 06:14 appbuilder/tests/parallel_ut_run.py
+-rw-r--r--  2.0 unx     1318 b- defN 24-May-09 06:14 appbuilder/tests/pytest_config.py
+-rw-r--r--  2.0 unx     1079 b- defN 24-May-09 06:14 appbuilder/tests/pytest_utils.py
+-rw-r--r--  2.0 unx     1788 b- defN 24-May-09 06:14 appbuilder/tests/sed_str.py
+-rw-r--r--  2.0 unx     5158 b- defN 24-May-22 07:26 appbuilder/tests/test_agent.py
+-rw-r--r--  2.0 unx     5362 b- defN 24-May-09 06:14 appbuilder/tests/test_animal_recognize.py
+-rw-r--r--  2.0 unx     1899 b- defN 24-May-22 07:26 appbuilder/tests/test_appbuilder_client.py
+-rw-r--r--  2.0 unx     1823 b- defN 24-May-09 06:14 appbuilder/tests/test_appbuilder_core_components_retriever.py
+-rw-r--r--  2.0 unx     4122 b- defN 24-May-09 06:14 appbuilder/tests/test_asr.py
+-rw-r--r--  2.0 unx     2270 b- defN 24-May-09 06:14 appbuilder/tests/test_assistant_basic_import.py
+-rw-r--r--  2.0 unx     6095 b- defN 24-May-22 07:26 appbuilder/tests/test_assistant_class_assistans.py
+-rw-r--r--  2.0 unx     3560 b- defN 24-May-22 07:26 appbuilder/tests/test_assistant_class_files.py
+-rw-r--r--  2.0 unx     2673 b- defN 24-May-22 07:26 appbuilder/tests/test_assistant_class_messages.py
+-rw-r--r--  2.0 unx     2434 b- defN 24-May-22 07:26 appbuilder/tests/test_assistant_class_runs.py
+-rw-r--r--  2.0 unx     2090 b- defN 24-May-22 07:26 appbuilder/tests/test_assistant_class_runs_v2.py
+-rw-r--r--  2.0 unx     2425 b- defN 24-May-22 07:26 appbuilder/tests/test_assistant_class_threads.py
+-rw-r--r--  2.0 unx     3142 b- defN 24-May-09 06:14 appbuilder/tests/test_assistant_e2e_funccall.py
+-rw-r--r--  2.0 unx     3000 b- defN 24-May-09 06:14 appbuilder/tests/test_assistant_e2e_funccall_component.py
+-rw-r--r--  2.0 unx     1110 b- defN 24-May-09 06:14 appbuilder/tests/test_assistant_e2e_run.py
+-rw-r--r--  2.0 unx     2483 b- defN 24-May-09 06:14 appbuilder/tests/test_assistant_e2e_stream_cancel.py
+-rw-r--r--  2.0 unx     3067 b- defN 24-May-22 07:26 appbuilder/tests/test_assistant_e2e_stream_event_handler.py
+-rw-r--r--  2.0 unx     3332 b- defN 24-May-22 07:26 appbuilder/tests/test_assistant_e2e_stream_event_handler_v2.py
+-rw-r--r--  2.0 unx     2892 b- defN 24-May-10 09:45 appbuilder/tests/test_assistant_e2e_stream_funccall.py
+-rw-r--r--  2.0 unx     1409 b- defN 24-May-09 06:14 appbuilder/tests/test_assistant_e2e_stream_run.py
+-rw-r--r--  2.0 unx     8256 b- defN 24-May-20 06:26 appbuilder/tests/test_assistant_qa_runs_steps_list.py
+-rw-r--r--  2.0 unx    10520 b- defN 24-May-20 07:08 appbuilder/tests/test_assistant_qa_runs_steps_query.py
+-rw-r--r--  2.0 unx     3969 b- defN 24-May-09 06:14 appbuilder/tests/test_bes_retriever.py
+-rw-r--r--  2.0 unx     2457 b- defN 24-May-22 07:26 appbuilder/tests/test_console_dataset.py
+-rw-r--r--  2.0 unx     1239 b- defN 24-May-22 07:26 appbuilder/tests/test_console_rag.py
+-rw-r--r--  2.0 unx     2643 b- defN 24-May-22 07:26 appbuilder/tests/test_core_agent.py
+-rw-r--r--  2.0 unx     4086 b- defN 24-May-22 07:26 appbuilder/tests/test_core_client.py
+-rw-r--r--  2.0 unx     4258 b- defN 24-May-22 07:26 appbuilder/tests/test_core_components.py
+-rw-r--r--  2.0 unx     2097 b- defN 24-May-22 07:26 appbuilder/tests/test_core_components_baidu_vdb_retriever.py
+-rw-r--r--  2.0 unx     3955 b- defN 24-May-22 07:26 appbuilder/tests/test_core_components_doc.py
+-rw-r--r--  2.0 unx     2006 b- defN 24-May-22 07:26 appbuilder/tests/test_core_components_embedding.py
+-rw-r--r--  2.0 unx     2847 b- defN 24-May-22 07:26 appbuilder/tests/test_core_components_table.py
+-rw-r--r--  2.0 unx     3336 b- defN 24-May-22 07:26 appbuilder/tests/test_core_components_tts.py
+-rw-r--r--  2.0 unx     4673 b- defN 24-May-22 07:26 appbuilder/tests/test_core_console_base.py
+-rw-r--r--  2.0 unx     3213 b- defN 24-May-09 06:14 appbuilder/tests/test_core_user_session.py
+-rw-r--r--  2.0 unx     2401 b- defN 24-May-09 06:14 appbuilder/tests/test_core_utils.py
+-rw-r--r--  2.0 unx     2439 b- defN 24-May-09 06:14 appbuilder/tests/test_dialog_summary.py
+-rw-r--r--  2.0 unx     3297 b- defN 24-May-09 06:14 appbuilder/tests/test_dish_recognize.py
+-rw-r--r--  2.0 unx     4269 b- defN 24-May-09 06:14 appbuilder/tests/test_doc_crop_enhance.py
+-rw-r--r--  2.0 unx     1341 b- defN 24-May-22 07:26 appbuilder/tests/test_doc_format_converter.py
+-rw-r--r--  2.0 unx     3092 b- defN 24-May-09 06:14 appbuilder/tests/test_doc_parser.py
+-rw-r--r--  2.0 unx     3658 b- defN 24-May-09 06:14 appbuilder/tests/test_doc_splitter.py
+-rw-r--r--  2.0 unx     1615 b- defN 24-May-09 06:14 appbuilder/tests/test_embedding.py
+-rw-r--r--  2.0 unx     2445 b- defN 24-May-09 06:14 appbuilder/tests/test_extract_table.py
+-rw-r--r--  2.0 unx     3890 b- defN 24-May-22 07:26 appbuilder/tests/test_gbi_nl2sql.py
+-rw-r--r--  2.0 unx     5569 b- defN 24-May-22 07:26 appbuilder/tests/test_gbi_select_table.py
+-rw-r--r--  2.0 unx     4822 b- defN 24-May-09 06:14 appbuilder/tests/test_general_ocr.py
+-rw-r--r--  2.0 unx     2302 b- defN 24-May-09 06:14 appbuilder/tests/test_get_model_list.py
+-rw-r--r--  2.0 unx     2879 b- defN 24-May-22 07:26 appbuilder/tests/test_handwrite_ocr.py
+-rw-r--r--  2.0 unx     4426 b- defN 24-May-22 07:26 appbuilder/tests/test_image_understand.py
+-rw-r--r--  2.0 unx     2223 b- defN 24-May-09 06:14 appbuilder/tests/test_is_complex_query.py
+-rw-r--r--  2.0 unx     2836 b- defN 24-May-09 06:14 appbuilder/tests/test_landmark_recognize.py
+-rw-r--r--  2.0 unx     2185 b- defN 24-May-09 06:14 appbuilder/tests/test_matching.py
+-rw-r--r--  2.0 unx     1133 b- defN 24-May-22 07:26 appbuilder/tests/test_message.py
+-rw-r--r--  2.0 unx     3350 b- defN 24-May-22 07:26 appbuilder/tests/test_mix_card_ocr.py
+-rw-r--r--  2.0 unx     4351 b- defN 24-May-09 06:14 appbuilder/tests/test_mrc.py
+-rw-r--r--  2.0 unx     2037 b- defN 24-May-09 06:14 appbuilder/tests/test_nl2pandas.py
+-rw-r--r--  2.0 unx     5128 b- defN 24-May-22 07:26 appbuilder/tests/test_object_recognize.py
+-rw-r--r--  2.0 unx     2451 b- defN 24-May-09 06:14 appbuilder/tests/test_oral_query_generation.py
+-rw-r--r--  2.0 unx     3416 b- defN 24-May-09 06:14 appbuilder/tests/test_plant_recognize.py
+-rw-r--r--  2.0 unx     2288 b- defN 24-May-09 06:14 appbuilder/tests/test_playground.py
+-rw-r--r--  2.0 unx     4751 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_aicape_animal_rec.py
+-rw-r--r--  2.0 unx     5581 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_aicape_doc_crop_enhance.py
+-rw-r--r--  2.0 unx     4549 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_aicape_handwriting_ocr.py
+-rw-r--r--  2.0 unx     5270 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_aicape_image_understand.py
+-rw-r--r--  2.0 unx     4435 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_aicape_mixcard_ocr.py
+-rw-r--r--  2.0 unx     4489 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_aicape_plant_rec.py
+-rw-r--r--  2.0 unx     4985 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_aicape_qrcode_orc.py
+-rw-r--r--  2.0 unx     4560 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_aicape_table_ocr.py
+-rw-r--r--  2.0 unx     3454 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_doc_parser_extract_table_from_doc.py
+-rw-r--r--  2.0 unx     8326 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_llm_dialog_summary.py
+-rw-r--r--  2.0 unx     8805 b- defN 24-May-22 07:26 appbuilder/tests/test_qa_llm_excel2figure.py
+-rw-r--r--  2.0 unx     9912 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_llm_get_qianfan_model_list.py
+-rw-r--r--  2.0 unx     3150 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_llm_is_complex_query.py
+-rw-r--r--  2.0 unx     4765 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_llm_matching.py
+-rw-r--r--  2.0 unx     6569 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_llm_oral_query_generation.py
+-rw-r--r--  2.0 unx     4355 b- defN 24-May-22 07:26 appbuilder/tests/test_qa_llm_paddle_speech_tts.py
+-rw-r--r--  2.0 unx     4104 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_llm_pandas.py
+-rw-r--r--  2.0 unx     4193 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_llm_query_decomposition.py
+-rw-r--r--  2.0 unx     3536 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_llm_style_rewrite.py
+-rw-r--r--  2.0 unx     2245 b- defN 24-May-09 06:14 appbuilder/tests/test_qa_pair_mining.py
+-rw-r--r--  2.0 unx     5589 b- defN 24-May-22 07:26 appbuilder/tests/test_qrcode_ocr.py
+-rw-r--r--  2.0 unx     2231 b- defN 24-May-09 06:14 appbuilder/tests/test_query_decomposition.py
+-rw-r--r--  2.0 unx     3445 b- defN 24-May-22 07:26 appbuilder/tests/test_query_rewrite.py
+-rw-r--r--  2.0 unx     2190 b- defN 24-May-09 06:14 appbuilder/tests/test_rag_baidu_search.py
+-rw-r--r--  2.0 unx     2078 b- defN 24-May-22 07:26 appbuilder/tests/test_rag_with_baidu_search_component.py
+-rw-r--r--  2.0 unx     2051 b- defN 24-May-22 07:26 appbuilder/tests/test_similar_question.py
+-rw-r--r--  2.0 unx     2338 b- defN 24-May-22 07:26 appbuilder/tests/test_style_rewrite.py
+-rw-r--r--  2.0 unx     2555 b- defN 24-May-22 07:26 appbuilder/tests/test_style_writing.py
+-rw-r--r--  2.0 unx     5043 b- defN 24-May-22 07:26 appbuilder/tests/test_table_ocr.py
+-rw-r--r--  2.0 unx     2500 b- defN 24-May-09 06:14 appbuilder/tests/test_tag_extraction.py
+-rw-r--r--  2.0 unx     2858 b- defN 24-May-22 07:26 appbuilder/tests/test_text_to_image.py
+-rw-r--r--  2.0 unx     1471 b- defN 24-May-09 06:14 appbuilder/tests/test_translate.py
+-rw-r--r--  2.0 unx     3051 b- defN 24-May-22 07:26 appbuilder/tests/test_tts.py
+-rw-r--r--  2.0 unx     2781 b- defN 24-May-22 07:26 appbuilder/tests/test_utils.py
+-rw-r--r--  2.0 unx     2078 b- defN 24-May-22 07:26 appbuilder/tests/test_utils_logger.py
+-rw-r--r--  2.0 unx     1503 b- defN 24-May-09 06:14 appbuilder/tests/test_utils_logging_util.py
+-rw-r--r--  2.0 unx     3941 b- defN 24-May-22 07:26 appbuilder/tests/test_vdb_retriever.py
 -rw-r--r--  2.0 unx      602 b- defN 24-Apr-15 15:08 appbuilder/utils/__init__.py
--rw-r--r--  2.0 unx     2974 b- defN 24-Apr-29 10:56 appbuilder/utils/collector.py
--rw-r--r--  2.0 unx     1229 b- defN 24-Apr-29 03:06 appbuilder/utils/func_utils.py
--rw-r--r--  2.0 unx     4572 b- defN 24-Apr-24 07:05 appbuilder/utils/logger_util.py
--rw-r--r--  2.0 unx    10845 b- defN 24-Apr-24 07:05 appbuilder/utils/model_util.py
+-rw-r--r--  2.0 unx     1675 b- defN 24-May-22 06:56 appbuilder/utils/chainlit.md
+-rw-r--r--  2.0 unx     2974 b- defN 24-May-09 06:14 appbuilder/utils/collector.py
+-rw-r--r--  2.0 unx     1229 b- defN 24-May-09 06:14 appbuilder/utils/func_utils.py
+-rw-r--r--  2.0 unx     4572 b- defN 24-May-09 06:14 appbuilder/utils/logger_util.py
+-rw-r--r--  2.0 unx    10845 b- defN 24-May-20 06:04 appbuilder/utils/model_util.py
 -rw-r--r--  2.0 unx     6057 b- defN 24-Apr-15 15:08 appbuilder/utils/sse_util.py
--rw-r--r--  2.0 unx       61 b- defN 24-Apr-30 10:48 appbuilder_sdk-0.7.0.dist-info/AUTHORS.md
--rw-r--r--  2.0 unx    11366 b- defN 24-Apr-30 10:48 appbuilder_sdk-0.7.0.dist-info/LICENSE
--rw-r--r--  2.0 unx      978 b- defN 24-Apr-30 10:48 appbuilder_sdk-0.7.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-30 10:48 appbuilder_sdk-0.7.0.dist-info/WHEEL
--rw-r--r--  2.0 unx       11 b- defN 24-Apr-30 10:48 appbuilder_sdk-0.7.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    24778 b- defN 24-Apr-30 10:48 appbuilder_sdk-0.7.0.dist-info/RECORD
-243 files, 921809 bytes uncompressed, 337328 bytes compressed:  63.4%
+-rw-r--r--  2.0 unx       61 b- defN 24-May-22 12:36 appbuilder_sdk-0.7.1.dist-info/AUTHORS.md
+-rw-r--r--  2.0 unx    11366 b- defN 24-May-22 12:36 appbuilder_sdk-0.7.1.dist-info/LICENSE
+-rw-r--r--  2.0 unx      978 b- defN 24-May-22 12:36 appbuilder_sdk-0.7.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-22 12:36 appbuilder_sdk-0.7.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx       11 b- defN 24-May-22 12:36 appbuilder_sdk-0.7.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    26856 b- defN 24-May-22 12:36 appbuilder_sdk-0.7.1.dist-info/RECORD
+263 files, 1081661 bytes uncompressed, 375129 bytes compressed:  65.3%
```

## zipnote {}

```diff
@@ -63,14 +63,20 @@
 
 Filename: appbuilder/core/assistant/threads/runs/__init__.py
 Comment: 
 
 Filename: appbuilder/core/assistant/threads/runs/runs.py
 Comment: 
 
+Filename: appbuilder/core/assistant/threads/runs/steps.py
+Comment: 
+
+Filename: appbuilder/core/assistant/threads/runs/stream_helper.py
+Comment: 
+
 Filename: appbuilder/core/assistant/type/__init__.py
 Comment: 
 
 Filename: appbuilder/core/assistant/type/assistant_type.py
 Comment: 
 
 Filename: appbuilder/core/assistant/type/public_type.py
@@ -465,20 +471,26 @@
 
 Filename: appbuilder/tests/test_assistant_basic_import.py
 Comment: 
 
 Filename: appbuilder/tests/test_assistant_class_assistans.py
 Comment: 
 
+Filename: appbuilder/tests/test_assistant_class_files.py
+Comment: 
+
 Filename: appbuilder/tests/test_assistant_class_messages.py
 Comment: 
 
 Filename: appbuilder/tests/test_assistant_class_runs.py
 Comment: 
 
+Filename: appbuilder/tests/test_assistant_class_runs_v2.py
+Comment: 
+
 Filename: appbuilder/tests/test_assistant_class_threads.py
 Comment: 
 
 Filename: appbuilder/tests/test_assistant_e2e_funccall.py
 Comment: 
 
 Filename: appbuilder/tests/test_assistant_e2e_funccall_component.py
@@ -486,29 +498,65 @@
 
 Filename: appbuilder/tests/test_assistant_e2e_run.py
 Comment: 
 
 Filename: appbuilder/tests/test_assistant_e2e_stream_cancel.py
 Comment: 
 
+Filename: appbuilder/tests/test_assistant_e2e_stream_event_handler.py
+Comment: 
+
+Filename: appbuilder/tests/test_assistant_e2e_stream_event_handler_v2.py
+Comment: 
+
 Filename: appbuilder/tests/test_assistant_e2e_stream_funccall.py
 Comment: 
 
 Filename: appbuilder/tests/test_assistant_e2e_stream_run.py
 Comment: 
 
+Filename: appbuilder/tests/test_assistant_qa_runs_steps_list.py
+Comment: 
+
+Filename: appbuilder/tests/test_assistant_qa_runs_steps_query.py
+Comment: 
+
 Filename: appbuilder/tests/test_bes_retriever.py
 Comment: 
 
 Filename: appbuilder/tests/test_console_dataset.py
 Comment: 
 
 Filename: appbuilder/tests/test_console_rag.py
 Comment: 
 
+Filename: appbuilder/tests/test_core_agent.py
+Comment: 
+
+Filename: appbuilder/tests/test_core_client.py
+Comment: 
+
+Filename: appbuilder/tests/test_core_components.py
+Comment: 
+
+Filename: appbuilder/tests/test_core_components_baidu_vdb_retriever.py
+Comment: 
+
+Filename: appbuilder/tests/test_core_components_doc.py
+Comment: 
+
+Filename: appbuilder/tests/test_core_components_embedding.py
+Comment: 
+
+Filename: appbuilder/tests/test_core_components_table.py
+Comment: 
+
+Filename: appbuilder/tests/test_core_components_tts.py
+Comment: 
+
 Filename: appbuilder/tests/test_core_console_base.py
 Comment: 
 
 Filename: appbuilder/tests/test_core_user_session.py
 Comment: 
 
 Filename: appbuilder/tests/test_core_utils.py
@@ -657,14 +705,17 @@
 
 Filename: appbuilder/tests/test_query_rewrite.py
 Comment: 
 
 Filename: appbuilder/tests/test_rag_baidu_search.py
 Comment: 
 
+Filename: appbuilder/tests/test_rag_with_baidu_search_component.py
+Comment: 
+
 Filename: appbuilder/tests/test_similar_question.py
 Comment: 
 
 Filename: appbuilder/tests/test_style_rewrite.py
 Comment: 
 
 Filename: appbuilder/tests/test_style_writing.py
@@ -681,23 +732,32 @@
 
 Filename: appbuilder/tests/test_translate.py
 Comment: 
 
 Filename: appbuilder/tests/test_tts.py
 Comment: 
 
+Filename: appbuilder/tests/test_utils.py
+Comment: 
+
+Filename: appbuilder/tests/test_utils_logger.py
+Comment: 
+
 Filename: appbuilder/tests/test_utils_logging_util.py
 Comment: 
 
 Filename: appbuilder/tests/test_vdb_retriever.py
 Comment: 
 
 Filename: appbuilder/utils/__init__.py
 Comment: 
 
+Filename: appbuilder/utils/chainlit.md
+Comment: 
+
 Filename: appbuilder/utils/collector.py
 Comment: 
 
 Filename: appbuilder/utils/func_utils.py
 Comment: 
 
 Filename: appbuilder/utils/logger_util.py
@@ -705,26 +765,26 @@
 
 Filename: appbuilder/utils/model_util.py
 Comment: 
 
 Filename: appbuilder/utils/sse_util.py
 Comment: 
 
-Filename: appbuilder_sdk-0.7.0.dist-info/AUTHORS.md
+Filename: appbuilder_sdk-0.7.1.dist-info/AUTHORS.md
 Comment: 
 
-Filename: appbuilder_sdk-0.7.0.dist-info/LICENSE
+Filename: appbuilder_sdk-0.7.1.dist-info/LICENSE
 Comment: 
 
-Filename: appbuilder_sdk-0.7.0.dist-info/METADATA
+Filename: appbuilder_sdk-0.7.1.dist-info/METADATA
 Comment: 
 
-Filename: appbuilder_sdk-0.7.0.dist-info/WHEEL
+Filename: appbuilder_sdk-0.7.1.dist-info/WHEEL
 Comment: 
 
-Filename: appbuilder_sdk-0.7.0.dist-info/top_level.txt
+Filename: appbuilder_sdk-0.7.1.dist-info/top_level.txt
 Comment: 
 
-Filename: appbuilder_sdk-0.7.0.dist-info/RECORD
+Filename: appbuilder_sdk-0.7.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## appbuilder/__init__.py

```diff
@@ -9,30 +9,30 @@
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 
 
-__version__ = '0.7.0'
+__version__ = '0.7.1'
 
 import sys
 import copy
 import pydantic
 
 class PythonVersionChecker:
     def __init__(self):
         self.min_version = (3, 9)
         self.current_version = sys.version_info
         self.check_version()
 
     def check_version(self):
         if self.current_version < self.min_version:
-            raise EnvironmentError(f"Python version {self.min_version[0]}.{self.min_version[1]} or higher is required, "
-                                   f"you are using Python {self.current_version[0]}.{self.current_version[1]}.")
+            raise EnvironmentError(f"Mismatched Python version. Expected Python version >= {self.min_version[0]}.{self.min_version[1]}, "
+                                   f"Got Python version {self.current_version[0]}.{self.current_version[1]}.")
 
 
 # Creating an instance to test the function
 checker = PythonVersionChecker()
 checker.current_version
 
 class SDKReportConfig(pydantic.BaseModel):
@@ -118,14 +118,17 @@
     PreconditionFailedException,
     InternalServerErrorException,
     HTTPConnectionException,
     AppBuilderServerException,
 )
 
 from appbuilder.core.assistant.base import assistant
+from appbuilder.core.assistant.threads.runs import StreamRunContext
+from appbuilder.core.assistant.threads.runs import AssistantEventHandler
+from appbuilder.core.assistant.threads.runs import AssistantStreamManager
 
 __all__ = [
     'logger',
 
     'BadRequestException',
     'ForbiddenException',
     'NotFoundException',
@@ -178,8 +181,11 @@
     "HandwriteOCR",
     "ImageUnderstand",
     "MixCardOCR",
     "AppBuilderClient",
     "AgentBuilder",
 
     "assistant",
+    "StreamRunContext",
+    "AssistantEventHandler",
+    "AssistantStreamManager"
 ]
```

## appbuilder/core/_client.py

```diff
@@ -44,16 +44,18 @@
             gateway_v2(str, 可选): 后端OpenAPI网关服务地址，当前仅AgentBuilder使用。默认从环境变量中获取: os.getenv("GATEWAY_URL_V2", "")
         返回：
             无
         """
         self.secret_key = secret_key if secret_key else os.getenv(
             "APPBUILDER_TOKEN", "")
         if not self.secret_key:
-            raise ValueError("secret_key is empty, please pass a nonempty secret_key "
-                             "or set a secret_key in environment variable")
+            raise ValueError(
+                "secret_key is empty, please pass a nonempty secret_key "
+                'or set a secret_key in environment variable "APPBUILDER_TOKEN"'
+            )
         if not self.secret_key.startswith("Bearer"):
             self.secret_key = "Bearer {}".format(self.secret_key)
 
         if not gateway and not os.getenv("GATEWAY_URL"):
             self.gateway = GATEWAY_URL
         else:
             self.gateway = gateway if gateway else os.getenv("GATEWAY_URL", "")
@@ -161,19 +163,23 @@
 
     @staticmethod
     def check_param(func):
         def inner(*args, **kwargs):
             retry = kwargs.get("retry", 0)
             if retry < 0 or not isinstance(retry, int):
                 raise InvalidRequestArgumentError(
-                    "retry must be int and bigger then zero")
+                    'Rqeuest argument "retry" format error. Expected retry >=0. Got {}'.format(
+                        retry
+                    )
+                )
             timeout = kwargs.get("timeout", None)
             if timeout and not (isinstance(timeout, float) or isinstance(timeout, tuple)):
                 raise InvalidRequestArgumentError(
-                    "timeout must be float or tuple of float")
+                    "Request argument \"timeout\" format error, Expected timeout be float or tuple of float"
+                )
             return func(*args, **kwargs)
 
         return inner
 
 
 class AssistantHTTPClient(HTTPClient):
     def service_url(self, sub_path: str, prefix: str = None):
```

## appbuilder/core/agent.py

```diff
@@ -30,15 +30,15 @@
 
 
 class AgentRuntime(BaseModel):
     """
     AgentRuntime 是对组件调用的服务化封装，开发者不是必须要用 AgentRuntime 才能运行自己的组件服务。
     但 AgentRuntime 可以快速帮助开发者服务化组件服务，并且提供API、对话框等部署方式。
     此外，结合 Component 和 Message 自带的运行和调试接口，可以方便开发者快速获得一个调试 Agent 的服务。
-  
+
     AgentRuntime 接受两个参数:
         component (Component): 可运行的 Component, 需要实现 run(message, stream, **args) 方法  
         user_session_config (sqlalchemy.engine.URL|str|None): Session 输出存储配置字符串。默认使用 sqlite:///user_session.db
             遵循 sqlalchemy 后端定义，参考文档：https://docs.sqlalchemy.org/en/20/core/engines.html#backend-specific-urls
 
     Examples:
 
@@ -147,15 +147,15 @@
             component = appbuilder.Playground(
                 prompt_template="{query}",
                 model="eb-4",
                 lazy_certification=True, # 在创建时不进行认证
             )
             agent = appbuilder.AgentRuntime(component=component)
             agent.serve(debug=False, port=8091)
- 
+
         .. code-block:: shell
             curl --location 'http://0.0.0.0:8091/chat' \
                 --header 'Content-Type: application/json' \
                 --header 'X-Appbuilder-Token: ...' \
                 --data '{
                     "message": "你是谁",
                     "stream": false
@@ -199,15 +199,15 @@
             stream (bool): 是否流式请求
             **args: 其他参数，会被透传到 component
         
         Returns:
             Message
         """
         return self.component.run(message=message, stream=stream, **args)
-        
+
     def create_flask_app(self, url_rule="/chat"):
         """ 
         创建 Flask 应用，主要用于 Gunicorn 这样的 WSGI 服务器来运行服务。
         
         Args:
             None
         
@@ -217,42 +217,46 @@
         # lazy import flask
         try:
             from flask import Flask, current_app, request, Response
             from flask_restful import reqparse, Resource
             from werkzeug.exceptions import BadRequest
         except ImportError:
             raise ImportError("Flask module is not installed. Please install it using 'pip install "
-                              "flask~=2.3.2 flask-restful==0.3.9'.")
+                               "flask~=2.3.2 flask-restful==0.3.9'.")
         app = Flask(__name__)
         app.json.ensure_ascii = False
 
         @app.errorhandler(BadRequest)
         def handle_bad_request(e):
             return {"code": 400, "message": f'{e}', "result": None}, 400
-            
+
         @app.errorhandler(Exception)
         def handle_bad_request(e):
             if hasattr(e, "code"):
                 return {"code": e.code, "message": str(e), "result": None}, 200
             else:
                 return {"code": 500, "message": "Internal Server Error", "result": None}, 200
 
         def warp():
             # 根据component是否lazy_certification，分成两种情况：
             # 1. lazy_certification为True，初始化时未被认证，每次请求都需要带入AppbuilderToken
             # 2. lazy_certification为False，初始化时已经认证，请求时不需要带入AppbuilderToken，并且带入也无效
             if self.component.lazy_certification:
-                if "X-Appbuilder-Token" not in request.headers:
-                    raise BadRequest("X-Appbuilder-Token is required in Headers")
+                app_builder_token = None
+                for key in ["X-Appbuilder-Token", "X-Appbuilder-Authorization"]:
+                    if key in request.headers:
+                        app_builder_token = request.headers[key]
+                        break
+                if not app_builder_token:
+                    raise BadRequest("X-Appbuilder-Authorization is required in Headers")
                 try:
-                    app_builder_token = request.headers["X-Appbuilder-Token"]
                     self.component.set_secret_key_and_gateway(secret_key=app_builder_token)
                 except appbuilder.core._exception.BaseRPCException as e:
                     logging.error(f"failed to verify. err={e}", exc_info=True)
-                    raise BadRequest("X-Appbuilder-Token invalid")
+                    raise BadRequest("X-Appbuilder-Authorization invalid")
                 except Exception as e:
                     logging.error(f"failed to verify. err={e}", exc_info=True)
                     raise e
             else:
                 pass
 
             data = request.get_json()
@@ -341,15 +345,15 @@
             port (int): 服务 port
         
         Returns:
             None
         """
         app = self.create_flask_app(url_rule=url_rule)
         app.run(host=host, debug=debug, port=port)
-        
+
     def chainlit_demo(self, host='0.0.0.0', port=8091):
         """
         将 component 服务化，提供 chainlit demo 页面
         
         Args:
             host (str): 服务 host
             port (int): 服务 port
@@ -359,18 +363,18 @@
         """
         # lazy import chainlit
         try:
             import chainlit as cl
             import chainlit.cli
         except ImportError:
             raise ImportError("chainlit module is not installed. Please install it using 'pip install "
-                              "chainlit~=1.0.200'.")
+                            "chainlit~=1.0.200'.")
         import click
         from click.testing import CliRunner
-        
+
         @cl.on_message  # this function will be called every time a user inputs a message in the UI
         async def main(message: cl.Message):
             session_id = cl.user_session.get("id")
             request_id = str(uuid.uuid4())
             init_context(session_id=session_id, request_id=request_id)
             msg = cl.Message(content="")
             await msg.send()
@@ -388,7 +392,86 @@
         else:
             os.environ['APPBUILDER_RUN_CHAINLIT'] = '1'
             target = sys.argv[0]
             runner = CliRunner()
             runner.invoke(
                 chainlit.cli.chainlit_run, [target, '--watch', "--port", port, "--host", host])
 
+    def chainlit_agent(self, host='0.0.0.0', port=8091):
+        """
+                将 component 服务化，提供 chainlit demo 页面
+
+                Args:
+                    host (str): 服务 host
+                    port (int): 服务 port
+
+                Returns:
+                    None
+                """
+        # lazy import chainlit
+        try:
+            import chainlit as cl
+            import chainlit.cli
+        except ImportError:
+            raise ImportError("chainlit module is not installed. Please install it using 'pip install "
+                            "chainlit~=1.0.200'.")
+        import click
+        from click.testing import CliRunner
+
+        if not isinstance(self.component, appbuilder.AppBuilderClient):
+            raise ValueError("chainlit_agent require component must be an instance of AppBuilderClient")
+        conversation_ids = []
+
+        def _chat(message: cl.Message):
+            if len(conversation_ids) == 0:
+                raise ValueError("create new conversation failed!")
+            conversation_id = conversation_ids[-1]
+            file_ids = []
+            if len(message.elements) > 0:
+                file_id = self.component.upload_local_file(conversation_id, message.elements[0].path)
+                file_ids.append(file_id)
+            return self.component.run(conversation_id=conversation_id, query=message.content, file_ids=file_ids,
+                                    stream=True)
+
+        @cl.on_chat_start
+        async def start():
+            session_id = cl.user_session.get("id")
+            request_id = str(uuid.uuid4())
+            init_context(session_id=session_id, request_id=request_id)
+            conversation_ids.append(self.component.create_conversation())
+
+        @cl.on_message  # this function will be called every time a user inputs a message in the UI
+        async def main(message: cl.Message):
+            msg = cl.Message(content="")
+            await msg.send()
+            await msg.update()
+
+            stream_message = _chat(message)
+            detail_json_list = []
+            for part in stream_message.content:
+                if token := part.answer or "":
+                    await msg.stream_token(token)
+                for event in part.events:
+                    detail = event.detail
+                    detail_json = json.dumps(detail, indent=4, ensure_ascii=False)
+                    detail_json_list.append(detail_json)
+            await msg.update()
+
+            @cl.step(name="详细信息")
+            def show_json(detail_json):
+                return "```json\n" + detail_json + "\n```"
+
+            for detail_json in detail_json_list:
+                if len(detail_json) > 2:
+                    show_json(detail_json)
+            await msg.update()
+            self.user_session._post_append()
+
+        # start chainlit service
+        if os.getenv('APPBUILDER_RUN_CHAINLIT') == '1':
+            pass
+        else:
+            os.environ['APPBUILDER_RUN_CHAINLIT'] = '1'
+            target = sys.argv[0]
+            runner = CliRunner()
+            runner.invoke(
+                chainlit.cli.chainlit_run, [target, '--watch', "--port", port, "--host", host])
```

## appbuilder/core/user_session.py

```diff
@@ -134,25 +134,27 @@
             None
         """
         ctx = get_context()
         if ctx.session_id.startswith(_LOCAL_KEY):
             # 非服务化版本使用内存存储
             for key, message in message_dict.items():
                 if not isinstance(message, Message):
-                    raise ValueError("message must be Message type")
+                    raise ValueError("session format error, message must be Message type")
                 if key not in ctx.session_vars_dict:
                     ctx.session_vars_dict[key] = []
                 ctx.session_vars_dict[key].append(message)
         else:
             # 服务化版本使用数据库存储
             for key, message in message_dict.items():
                 if not isinstance(message, Message):
-                    raise ValueError("message must be Message type")
+                    raise ValueError("session format error, message must be Message type")
                 if key in ctx.session_vars_dict:
-                    raise KeyError(f"key {key} has already been appended")
+                    raise KeyError(
+                        f"session format error, key {key} has already been appended"
+                    )
                 ctx.session_vars_dict[key] = message
 
     def _post_append(self) -> None:
         """
         后置保存。流式数据不能直接保存到数据库，需要通过该方法后置保存。
         
         Args:
@@ -173,8 +175,8 @@
                     updated_at=datetime.datetime.now())
                 self._db_session.add(message)
                 self._db_session.commit()
             ctx.session_vars_dict = {}
         except Exception as e:
             logging.error(e)
             self._db_session.rollback()
-            raise e
+            raise e
```

## appbuilder/core/utils.py

```diff
@@ -37,15 +37,17 @@
         is_available(bool, 可选): 是否返回可用模型列表, 默认返回所有模型。
 
     返回:
         list: 模型列表。
     """
     api_type_set = {"chat", "completions", "embeddings", "text2image"}
     if api_type_filter and not set(api_type_filter).issubset(api_type_set):
-        raise TypeNotSupportedException(f"api_type_filter only support {api_type_set}")
+        raise TypeNotSupportedException(
+            f"mismatched argument api_type_filter, expected in {api_type_set}"
+        )
     request = GetModelListRequest()
     request.apiTypefilter = api_type_filter
     model = Models(secret_key=secret_key)
     response = model.list(request)
     models = []
 
     for model in itertools.chain(response.result.common, response.result.custom):
@@ -58,15 +60,15 @@
 
 def convert_cloudhub_url(client: HTTPClient, qianfan_url: str) -> str:
     """将千帆url转换为AppBuilder url"""
     qianfan_url_prefix = "rpc/2.0/ai_custom/v1/wenxinworkshop"
     cloudhub_url_prefix = "rpc/2.0/cloud_hub/v1/bce/wenxinworkshop/ai_custom/v1"
     index = str.find(qianfan_url, qianfan_url_prefix)
     if index == -1:
-        raise ValueError(f"{qianfan_url} is not a valid qianfan url")
+        raise ValueError(f"url format error, {qianfan_url} is not a valid qianfan url")
     url_suffix = qianfan_url[index + len(qianfan_url_prefix):]
     return "{}/{}{}".format(client.gateway, cloudhub_url_prefix, url_suffix)
 
 
 def is_url(string):
     """
     判断字符串是否是URL
```

## appbuilder/core/assistant/assistants/assistants.py

```diff
@@ -82,15 +82,357 @@
         response = self._http_client.session.post(
             url=url,
             headers=headers,
             json=req.model_dump(),
             timeout=None
         )
         self._http_client.check_response_header(response)
-
         data = response.json()
         request_id = self._http_client.response_request_id(response)
         self._http_client.check_assistant_response(request_id, data)
 
         resp = assistant_type.AssistantCreateResponse(**data)
         Collector().add_to_collection(AssistantKeys.ASSISTANT, resp, resp.id)
-        return resp
+        return resp
+    
+    def update(self,
+               assistant_id: str,
+               model: Optional[str],
+               name: Optional[str],
+               description: Optional[str],
+               instructions: Optional[str] = "",
+               tools: Optional[list[assistant_type.AssistantTool]] = [],
+               thought_instructions: Optional[str] = "",
+               chat_instructions: Optional[str] = "",
+               response_format: Optional[str] = "text",
+               file_ids: Optional[list[str]] = [],
+               metadata: Optional[dict] = {}
+               ) -> assistant_type.AssistantUpdateResponse:
+        """
+        根据assistant_id修改一个已创建的Assistant
+        
+        Args:
+            assistant_id (str): 助手ID。
+            model (Optional[str]): 助手模型。
+            name (Optional[str]): 助手名称。
+            description (Optional[str]): 助手描述。
+            response_format (Optional[str], optional): 响应格式。默认为None。
+            instructions (Optional[str], optional): 助手指令。默认为None。
+            thought_instructions (Optional[str], optional): 思考指令。默认为None。
+            chat_instructions (Optional[str], optional): 聊天指令。默认为None。
+            tools (Optional[list[assistant_type.AssistantTool]], optional): 助手工具列表。默认为空列表。
+            file_ids (Optional[list[str]], optional): 文件ID列表。默认为空列表。
+            metadata (Optional[dict], optional): 助手元数据。默认为空字典。
+        
+        Returns:
+            assistant_type.AssistantUpdateResponse: 助手更新响应。
+        
+        """
+        
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/assistants/update")
+        
+        req = assistant_type.AssistantUpdateRequest(
+            assistant_id=assistant_id,
+            model=model,
+            name=name,
+            description=description,
+            response_format=response_format,
+            instructions=instructions,
+            thought_instructions=thought_instructions,
+            chat_instructions=chat_instructions,
+            tools=tools,
+            file_ids=file_ids,
+            metadata=metadata,
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+
+        resp = assistant_type.AssistantUpdateResponse(**data)
+        return resp
+    
+    def list(self,
+             limit: Optional[int] = 20,
+             order: Optional[str] = "desc",
+             after: Optional[str] = "",
+             before: Optional[str] = "",
+             ) -> assistant_type.AssistantListResponse:
+        """
+        查询当前用户已创建的assistant列表
+        
+        Args:
+            limit (Optional[int], optional): 返回助手列表的最大数量，默认为20。
+            order (Optional[str], optional): 返回助手列表的排序方式，可选值为"asc"或"desc"，默认为"desc"。
+            after (Optional[str], optional): 返回助手列表中id在指定id之后的助手，默认为空字符串。
+            before (Optional[str], optional): 返回助手列表中id在指定id之前的助手，默认为空字符串。
+        
+        Returns:
+            assistant_type.AssistantListResponse: 助手列表响应体。
+        
+        """
+        
+        
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/assistants/list")
+        
+        req = assistant_type.AssistantListRequest(
+            limit=limit,
+            order=order,
+            after=after,
+            before=before
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+
+        resp = assistant_type.AssistantListResponse(**data)
+        return resp
+    
+    def query(self,
+              assistant_id: Optional[str]) -> assistant_type.AssistantQueryResponse:
+        """
+        根据assistant_id查询Assistant信息
+        
+        Args:
+            assistant_id (Optional[str]): 助手ID
+        
+        Returns:
+            assistant_type.AssistantQueryResponse: 助手查询响应结果
+        
+        Raises:
+            HTTPError: 请求失败，抛出HTTPError异常
+        """
+        
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/assistants/query")
+        
+        req = assistant_type.AssistantQueryRequest(
+            assistant_id=assistant_id
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+
+        resp = assistant_type.AssistantQueryResponse(**data)
+        return resp
+    
+    def delete(self,
+               assistant_id: Optional[str]) -> assistant_type.AssistantDeleteResponse:
+        """
+        根据assistant_id删除指定Assitant
+        
+        Args:
+            assistant_id (Optional[str]): 待删除的助手实例ID。
+        
+        Returns:
+            assistant_type.AssistantDeleteResponse: 删除助手实例后的响应结果。
+        
+        Raises:
+            HttpRequestError: 发送HTTP请求时发生错误。
+        
+        """
+        
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/assistants/delete")
+        
+        req = assistant_type.AssistantDeleteRequest(
+            assistant_id=assistant_id
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)    
+        
+        resp = assistant_type.AssistantDeleteResponse(**data)
+        return resp
+    
+    
+    def mount_files(self,
+            assistant_id: Optional[str],
+            file_id: Optional[str]
+            ) -> assistant_type.AssistantFilesResponse:
+        """
+        指定file_id和assistant_id，挂载File到对应的Assistant
+        
+        Args:
+            assistant_id (Optional[str]): 助理ID。
+            file_id (Optional[str]): 文件ID。
+        
+        Returns:
+            assistant_type.AssistantFilesResponse: 助理文件列表响应对象。
+        
+        """
+        if not isinstance(assistant_id, str):
+            raise TypeError("assistant_id must be a string")
+        if not assistant_id:
+            raise ValueError("assistant_id can't be empty")
+        if not isinstance(file_id, str):
+            raise TypeError("file_id must be a string")
+        if not file_id:
+            raise ValueError("file_id can't be empty")
+        try:
+            self.files.query(file_id)
+        except:
+            raise FileNotFoundError("can't find file with id {}".format(file_id))
+        
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/assistants/files")
+        
+        req = assistant_type.AssistantFilesRequest(
+            assistant_id=assistant_id,
+            file_id=file_id
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)    
+        
+        resp = assistant_type.AssistantFilesResponse(**data)
+        return resp
+    
+    def mounted_files_list(self,
+                   assistant_id: Optional[str],  
+                   limit: Optional[int] = 20,
+                   order: Optional[str] =  'desc' , 
+                   after: Optional[str] =  "", 
+                   before: Optional[str] =  "") -> assistant_type.AssistantMountedFilesListResponse:
+        """
+        查询Assistant挂载的File列表
+        
+        Args:
+            assistant_id (Optional[str]): 助手ID，为空时获取当前登录用户的助手文件列表。
+            limit (Optional[int], optional): 每页最多显示多少个文件。默认为20。
+            order (Optional[AssistantListRole], optional): 文件列表排序方式。可选值为 'asc' 或 'desc'。默认为 'desc'。
+            after (Optional[str], optional): 返回文件ID大于该值的文件列表。默认为空字符串。
+            before (Optional[str], optional): 返回文件ID小于该值的文件列表。默认为空字符串。
+        
+        Returns:
+            assistant_type.AssistantFilesListResponse: 包含文件列表信息的响应对象。
+        
+        """
+        
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/assistants/files/list")
+        
+        req = assistant_type.AssistantMountedFilesListRequest(
+            assistant_id=assistant_id,
+            limit=limit,
+            order=order,
+            after=after,
+            before=before
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)    
+        
+        resp = assistant_type.AssistantMountedFilesListResponse(**data)
+        return resp
+    
+    def unmount_files(self,
+                     assistant_id: Optional[str],
+                     file_id: Optional[str]
+                     ) -> assistant_type.AssistantFilesDeleteResponse:
+        """
+        指定assistant_id和file_id，解绑Assistant中对应File的关联
+        
+        Args:
+            assistant_id (Optional[str]): 助理ID。
+            file_id (Optional[str]): 文件ID。
+        Returns:
+            assistant_type.AssistantFilesDeleteResponse: 响应对象。
+        """
+        if not isinstance(assistant_id, str):
+            raise TypeError("assistant_id must be a string")
+        if not assistant_id:
+            raise ValueError("assistant_id can't be empty")
+        if not isinstance(file_id, str):
+            raise TypeError("file_id must be a string")
+        if not file_id:
+            raise ValueError("file_id can't be empty")
+        try:
+            list_response=self.mounted_files_list(assistant_id, limit=2147483647)
+            exist_files = False
+            for data in list_response.data:
+                if data.id == file_id:
+                    exist_files = True
+                    break
+            if exist_files == False:
+                raise FileNotFoundError
+        except:
+            raise FileNotFoundError("can't find file with id {}".format(file_id))
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/assistants/files/delete")
+        
+        req = assistant_type.AssistantFilesDeleteRequest(
+            assistant_id=assistant_id,
+            file_id=file_id
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)    
+        
+        resp = assistant_type.AssistantFilesDeleteResponse(**data)
+        return resp
+            
+
+             
+    
+    
+
```

## appbuilder/core/assistant/assistants/files.py

```diff
@@ -13,17 +13,19 @@
 # limitations under the License.
 
 # -*- coding: utf-8 -*-
 
 
 import os
 import json
+from typing import Optional
 from appbuilder.core.assistant.type import assistant_type
 from appbuilder.core._client import AssistantHTTPClient
 
+from appbuilder.core._exception import AppBuilderServerException,HTTPConnectionException
 
 class Files(object):
     def __init__(self):
         self._http_client = AssistantHTTPClient()
 
     def create(self, file_path: str, purpose: str = "assistant") -> assistant_type.AssistantFilesCreateResponse:
         """
@@ -64,7 +66,239 @@
 
         request_id = self._http_client.response_request_id(response)
         data = response.json()
 
         self._http_client.check_assistant_response(request_id, data)
         resp = assistant_type.AssistantFilesCreateResponse(**data)
         return resp
+
+        
+    def list(self) -> assistant_type.AssistantFilesListResponse:
+        """
+        列出存储中的文件列表
+        
+        Args:
+            无
+        
+        Returns:
+            assistant_type.AssistantFilesListResponse: 文件列表的响应对象，包含以下属性：
+        
+        Raises:
+            assistant_type.AssistantError: 请求发生错误时抛出，具体错误信息可通过 `error_msg` 属性获取
+        """
+        headers = self._http_client.auth_header()
+        headers['Content-Type'] = 'application/json'
+        url = self._http_client.service_url("/v2/storage/files/list")
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json={},
+            timeout=None
+        ) 
+        self._http_client.check_response_header(response)
+
+        request_id = self._http_client.response_request_id(response)
+        data = response.json()
+
+        self._http_client.check_assistant_response(request_id, data)
+        resp = assistant_type.AssistantFilesListResponse(**data)
+        return resp
+
+    
+    
+    def query(self,
+              file_id: str,
+            ) -> assistant_type.AssistantFilesQueryResponse:
+        """
+        根据文件ID查询文件信息
+        
+        Args:
+            file_id (str): 文件ID
+        
+        Returns:
+            assistant_type.AssistantFilesQueryResponse: 文件查询响应对象
+        
+        Raises:
+            TypeError: 如果file_id不是str类型
+            ValueError: 如果file_id不存在
+        """
+
+        if not isinstance(file_id, str):
+            raise TypeError("file_id must be str")
+        headers = self._http_client.auth_header()
+        headers['Content-Type'] = 'application/json'
+        url = self._http_client.service_url("/v2/storage/files/query")
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json={
+                'file_id': file_id
+            },
+            timeout=None
+        )
+        try:
+            self._http_client.check_response_header(response)
+
+            request_id = self._http_client.response_request_id(response)
+            data = response.json()
+
+            self._http_client.check_assistant_response(request_id, data)
+            resp = assistant_type.AssistantFilesQueryResponse(**data)
+        except AssertionError:
+            raise ValueError('file_id {} is not exist'.format(file_id))
+        except TypeError:
+            raise ValueError('file_id {} is not exist'.format(file_id))
+        return resp 
+    
+    def delete(self,
+               file_id: str,
+            ) -> assistant_type.AssistantFilesDeleteResponse:
+        """
+        删除文件
+        Args:
+            file_id (str): 文件ID
+        Returns:
+            assistant_type.AssistantFilesDeleteResponse: 删除文件后的响应对象。
+        Raises:
+            无
+        """
+        headers = self._http_client.auth_header()
+        headers['Content-Type'] = 'application/json'
+        url = self._http_client.service_url("/v2/storage/files/delete")
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json={
+                'file_id': file_id
+            },
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+        request_id = self._http_client.response_request_id(response)
+        data = response.json()
+        self._http_client.check_assistant_response(request_id, data)
+        resp = assistant_type.AssistantFilesDeleteResponse(**data)
+        return resp
+    
+    def download(self,
+                 file_id:str,
+                 file_path:str="", # 要求若文件路径不为空，需要以/结尾，默认下载到当前文件夹
+                 timeout:Optional[int]=None,
+                 ):
+        """
+        下载文件
+        
+        Args:
+            file_id (str): 文件ID
+            file_path (str, optional): 文件保存路径，默认为空字符串。如果未指定，则使用文件名的默认值。要求若文件路径不为空，需要以/结尾。
+            timeout (Optional[int], optional): 请求超时时间，单位秒。如果未指定，则使用默认超时时间。
+        
+        Returns:
+            None
+        
+        Raises:
+            TypeError: 当file_path或file_id类型不为str时引发此异常。
+            ValueError: 当file_id为空或None时，或file_path不是文件目录时引发此异常。
+            FileNotFoundError: 当指定的文件路径或文件不存在时引发此异常。
+            OSError: 当磁盘空间不足时引发此异常。
+            HTTPConnectionException: 当请求失败时引发此异常。
+            Exception: 当发生其他异常时引发此异常。
+        """
+        if not isinstance(file_path, str):
+            raise TypeError("file_path must be str")
+        if not isinstance(file_id, str):
+            raise TypeError("file_id must be str")
+        if file_id == "" or file_id is None:
+            raise ValueError("file_id cannot be empty or None")
+        try:
+            self.query(file_id)
+        except:
+            raise FileNotFoundError("file_id {} not found".format(file_id))
+        if file_path != "" and not file_path.endswith('/'):
+            raise ValueError("file_path must be a file directory")
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/storage/files/download")
+        try:
+            response = self._http_client.session.post(
+                url=url,
+                headers=headers,
+                json={
+                    'file_id': file_id
+                },
+                timeout=timeout
+            )
+        except:
+            raise HTTPConnectionException("request failed")
+        self._http_client.check_response_header(response)
+        
+        filename=response.headers['Content-Disposition'].split("filename=")[-1]
+        file_path+=filename
+        try:    
+            with open(file_path,'wb') as file:
+                for chunk in response.iter_content():
+                    if chunk:
+                        file.write(chunk)
+        except FileNotFoundError as e:
+            raise FileNotFoundError("请检查文件路径是否正确,错误信息{}".format(e))
+        except OSError as e:
+            raise OSError("磁盘空间不足,错误信息{}".format(e))
+        except Exception as e:
+            raise Exception("出现错误,错误信息{}".format(e))
+        
+        
+           
+        
+    def content(self,
+                file_id:str,
+                timeout:Optional[int]=None):
+        """
+        获取指定文件的内容
+        
+        Args:
+            file_id (str): 文件ID
+            timeout (Optional[int], optional): 请求超时时间，单位秒. Defaults to None.
+        
+        Returns:
+            assistant_type.AssistantFilesContentResponse: 包含文件内容的响应对象
+        
+        Raises:
+            TypeError: 当file_id不是字符串类型时引发此异常
+            FileNotFoundError: 当指定的文件路径不存在时引发此异常
+            HTTPConnectionException: 当请求失败时引发此异常
+        
+        """
+        if not isinstance(file_id, str):
+            raise TypeError("file_id must be str")
+        try:
+            self.query(file_id)
+        except:
+            raise FileNotFoundError("can't find file with id {}".format(file_id))
+        headers = self._http_client.auth_header()
+        headers['Content-Type'] = 'application/json'
+        url = self._http_client.service_url("/v2/storage/files/content")
+        try:
+            response = self._http_client.session.post(
+                url=url,
+                headers=headers,
+                json={
+                    'file_id': file_id
+                },
+                timeout=timeout
+            )
+        except:
+            raise HTTPConnectionException("request failed")
+        self._http_client.check_response_header(response)
+        
+        content=b''
+        for chunk in response.iter_content():
+            if chunk:
+                content+=chunk
+        
+        res=assistant_type.AssistantFilesContentResponse(
+            content_type =response.headers['Content-Type'],
+            content = content
+        )
+        
+        return res
+
+
```

## appbuilder/core/assistant/threads/__init__.py

```diff
@@ -18,14 +18,16 @@
 
 from .messages import (
     Messages,
 )
 
 from .runs import (
     Runs,
+    Steps
 )
 
 ___all__ = [
     'Threads',
     'Messages',
     'Runs',
+    'Steps'
 ]
```

## appbuilder/core/assistant/threads/threads.py

```diff
@@ -64,7 +64,113 @@
 
         data = response.json()
         request_id = self._http_client.response_request_id(response)
         self._http_client.check_assistant_response(request_id, data)
 
         response = thread_type.ThreadCreateResponse(**data)
         return response
+    
+    def query(self,
+              thread_id:str)->thread_type.ThreadQueryResponse:
+        """
+        查询对话线程信息。
+        Args:
+            thread_id: 要查询的对话线程ID。
+        Returns:
+            一个ThreadQueryResponse对象，包含对话线程的相关信息。
+        Raises:
+            ValueError: 如果传入的thread_id参数不是字符串类型。
+        """
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/threads/query")
+        
+        req = thread_type.ThreadQueryRequest(
+            thread_id=thread_id)
+
+        response =self._http_client.session.post(
+            url = url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+        response = thread_type.ThreadQueryResponse(**data)
+        return response
+    
+    def delete(self,
+               thread_id:str)->thread_type.ThreadDeleteResponse:
+        """
+        删除对话线程。
+        Args:
+            thread_id: 要删除的对话线程ID。
+        Returns:
+            一个ThreadDeleteResponse对象，包含对话线程的相关信息。
+        Raises:
+            ValueError: 如果传入的thread_id参数不是字符串类型。
+        """
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/threads/delete")
+        
+        req = thread_type.ThreadDeleteRequest(
+            thread_id=thread_id)
+
+        response =self._http_client.session.post(
+            url = url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+        response = thread_type.ThreadDeleteResponse(**data)
+        return response
+    
+    def update(self,
+               thread_id:str ,
+               metadata:Optional[dict] ={} )->thread_type.ThreadUpdateResponse:
+        """
+        更新线程信息
+        
+        Args:
+            thread_id (str): 线程ID
+            metadata (Optional[dict], optional): 线程元数据. 默认为空字典.
+        
+        Returns:
+            thread_type.ThreadUpdateResponse: 线程更新响应
+        
+        Raises:
+            TypeError: 如果metadata不是字典类型
+            ValueError: 如果metadata的键超过64个字符或值超过512个字符
+        """
+        if not isinstance(metadata, dict):
+            raise TypeError("Threads().update() metadata must be a dict, but got: {}".format(type(metadata)))
+        for key,value in metadata.items():
+            if len(key)>64:
+                raise ValueError("Threads().update() metadata key must be less than 64, but got: {}".format(len(key)))
+            if len(value)>512:
+                raise ValueError("Threads().update() metadata value must be less than 512, but got: {}".format(len(value)))
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/threads/update")
+        
+        req = thread_type.ThreadUpdateRequest(
+            thread_id=thread_id)
+
+        response =self._http_client.session.post(
+            url = url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+        response = thread_type.ThreadUpdateResponse(**data)
+        return response
```

## appbuilder/core/assistant/threads/messages/messages.py

```diff
@@ -62,7 +62,177 @@
 
         data = response.json()
         request_id = self._http_client.response_request_id(response)
         self._http_client.check_assistant_response(request_id, data)
 
         response = thread_type.AssistantMessageCreateResponse(**data)
         return response
+    
+    def update(self,
+               thread_id: str,
+               message_id: str,
+               content: Optional[str],
+               file_ids: Optional[list[str]] = []) -> thread_type.AssistantMessageUpdateResponse:
+        """
+        修改Message对象，允许content和file_ids字段
+        Args:
+            thread_id (str): 线程ID。
+            message_id (str): 消息ID。
+            content (Optional[str], optional): 消息内容。默认为空字符串。
+            file_ids (Optional[list[str]], optional): 消息中包含的文件ID列表。默认为空列表。
+        Returns:
+            thread_type.AssistantMessageUpdateResponse: 消息更新响应对象。
+        Raises:
+            HttpError: 如果请求失败，则抛出HttpError异常。
+        """
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/threads/messages/update")
+        
+        req = thread_type.AssistantMessageUpdateRequest(
+            thread_id = thread_id, 
+            message_id = message_id,
+            content = content,
+            file_ids = file_ids
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+        response = thread_type.AssistantMessageUpdateResponse(**data)
+        return response  
+
+    def list(self,
+            thread_id: str,
+            limit: int = 20,
+            order: str = "desc",
+            after: str = "",
+            before: str = "") -> thread_type.AssistantMessageListResponse:
+        """
+        查询指定Thread下的Message列表
+        Args:
+            thread_id (str): 线程ID。
+            limit (int, optional): 返回消息的最大数量，取值范围为[1,20]。默认为-20。
+            order (Optional[str], optional): 排序方式，可选值为"asc"或"desc"。默认为"desc"。
+            after (Optional[str], optional): 查询指定message_id之后创建的Message。
+            before (Optional[str], optional): 查询指定message_id之前创建的Message
+            
+        Returns:
+            thread_type.AssistantMessageListResponse: 查询thread下的message列表响应对象。
+            
+        Raises:
+            HttpError: 如果请求失败，则抛出HttpError异常。
+        """
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/threads/messages/list")
+        
+        req = thread_type.AssistantMessageListRequest(
+            thread_id = thread_id,
+            limit = limit,
+            order = order,
+            after = after,
+            before = before
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+        response = thread_type.AssistantMessageListResponse(**data)
+        return response 
+    
+    
+    def query(self,
+            thread_id:str,
+            message_id:str) -> thread_type.AssistantMessageQueryResponse:
+        """
+        根据message_id查询指定Message的信息
+        
+        Args:
+            thread_id (str): 线程ID
+            message_id (str): 消息ID
+        
+        Returns:
+            thread_type.AssistantMessageQueryResponse: 消息信息响应
+            
+        Raises:
+            HttpError: 如果请求失败，则抛出HttpError异常。
+        """
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/threads/messages/query")
+        req = thread_type.AssistantMessageQueryRequest(
+            thread_id = thread_id,
+            message_id = message_id
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+        response = thread_type.AssistantMessageQueryResponse(**data)
+        return response  
+    
+    
+    def files(self,
+              thread_id:str,
+              message_id:str,
+              limit:Optional[int] =  20,
+              order:Optional[str] = "desc",
+              after:Optional[str] = "",
+              before:Optional[str] = "") -> thread_type.AssistantMessageFilesResponse:
+        """
+        获取指定消息 ID 的附件信息。
+        
+        Args:
+            thread_id (str): 线程 ID。
+            messsages_id (str): 消息 ID。
+            limit (Optional[int], optional): 返回结果的最大数量，默认为 20。
+            order (Optional[str], optional): 排序方式，可选值为 "asc" 或 "desc"，默认为 "desc"。
+            after (Optional[str], optional): 返回结果的时间范围，只返回时间晚于该时间戳的消息附件，默认为空。
+            before (Optional[str], optional): 返回结果的时间范围，只返回时间早于该时间戳的消息附件，默认为空。
+        
+        Returns:
+            thread_type.AssistantMessageFilesResponse: 附件信息响应对象。
+        """
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/threads/messages/files/list")
+        
+        req = thread_type.AssistantMessageFilesRequest(
+            thread_id = thread_id, 
+            message_id = message_id,
+            limit = limit,
+            order = order,
+            after = after,
+            before = before
+        )
+        
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+        response = thread_type.AssistantMessageFilesResponse(**data)
+        return response 
+
```

## appbuilder/core/assistant/threads/runs/__init__.py

```diff
@@ -12,10 +12,24 @@
 # See the License for the specific language governing permissions and
 # limitations under the License.
 
 from .runs import (
     Runs
 )
 
+from .steps import (
+    Steps,
+)
+
+from .stream_helper import (
+    StreamRunContext,
+    AssistantEventHandler,
+    AssistantStreamManager,
+)
+
 __all__ = [
     'Runs',
+    'Steps',
+    'StreamRunContext',
+    'AssistantEventHandler',
+    'AssistantStreamManager'
 ]
```

## appbuilder/core/assistant/threads/runs/runs.py

```diff
@@ -9,25 +9,33 @@
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 import os
 import json
-from typing import Optional
+from typing import Optional, Union
+from appbuilder.core.assistant.threads.runs.steps import Steps
+from appbuilder.core.assistant.threads.runs.stream_helper import AssistantStreamManager
+from appbuilder.core.assistant.threads.runs.stream_helper import AssistantEventHandler
 from appbuilder.core.assistant.type import thread_type
 from appbuilder.core.assistant.type import assistant_type
 from appbuilder.core._client import AssistantHTTPClient
 from appbuilder.utils.sse_util import SSEClient
 
 
+
 class Runs():
     def __init__(self) -> None:
         self._http_client = AssistantHTTPClient()
 
+    @property
+    def steps(self) -> Steps:
+        return Steps()
+
     def run(self,
             assistant_id: str,
             thread_id: Optional[str] = "",
             thread: Optional[thread_type.AssistantThread] = None,
             model: Optional[str] = "ERNIE-4.0-8K",
             response_format: Optional[str] = "text",
             instructions: Optional[str] = "",
@@ -46,21 +54,21 @@
             response_format (Optional[str], optional): 返回格式. Defaults to "text".
             instructions (Optional[str], optional): 指令信息. Defaults to "".
             thought_instructions (Optional[str], optional): 思考指令信息. Defaults to "".
             chat_instructions (Optional[str], optional): 闲聊指令信息. Defaults to "".
             tools (Optional[list[assistant_type.AssistantTool]], optional): 工具列表. Defaults to [].
             metadata (Optional[dict], optional): 元数据. Defaults to {}.
             tool_output (Optional[thread_type.ToolOutput], optional): 工具输出. Defaults to None.
-        
+
         Returns:
             thread_type.RunResult: 运行结果
-        
+
         Raises:
             ValueError: thread_id和thread不能同时为空
-        
+
         Note:
             1. 如果thread_id没有传，则thread必须要传值
             2. 如果这里不传值，thread_id查出来的历史对话，最后一条消息的role必须为user
             3. 如果这里传值，则需要保证thread_id查出来的历史对话 + 本轮追加的thread对话，最后一条消息的role必须为user
         """
         headers = self._http_client.auth_header()
         url = self._http_client.service_url("/v2/threads/runs")
@@ -68,15 +76,15 @@
         """
         注意：
             1. 若thread_id没有传，则thread必须要传值
             2. 若这里不传值，thread_id查出来的历史对话，最后一条消息的role必须为user
             3. 若这里传值，则需要保证thread_id查出来的历史对话 + 本轮追加的thread对话，最后一条消息的role必须为user
         """
         if thread_id == "" and thread is None:
-            raise ValueError("Runs().run() 参数thread_id和thread不能同时为空")
+            raise ValueError("Runs().run() argument thread_id && thread can't be empty at the same time")
 
         req = thread_type.AssistantRunRequest(
             thread_id=thread_id,
             thread=thread,
             model=model,
             assistant_id=assistant_id,
             response_format=response_format,
@@ -99,16 +107,17 @@
 
         data = response.json()
         request_id = self._http_client.response_request_id(response)
         self._http_client.check_assistant_response(request_id, data)
 
         resp = thread_type.RunResult(**data)
         return resp
+    
 
-    def stream_run(self,
+    def _stream(self,
                    assistant_id: str,
                    thread_id: Optional[str] = "",
                    thread: Optional[thread_type.AssistantThread] = None,
                    model: Optional[str] = "ERNIE-4.0-8K",
                    response_format: Optional[str] = "text",
                    instructions: Optional[str] = "",
                    thought_instructions: Optional[str] = "",
@@ -150,15 +159,15 @@
         """
         注意：
             1. 若thread_id没有传，则thread必须要传值
             2. 若这里不传值，thread_id查出来的历史对话，最后一条消息的role必须为user
             3. 若这里传值，则需要保证thread_id查出来的历史对话 + 本轮追加的thread对话，最后一条消息的role必须为user
         """
         if thread_id == "" and thread is None:
-            raise ValueError("Runs().run() 参数thread_id和thread不能同时为空")
+            raise ValueError("Runs().run() argument thread_id and thread can't be empty at the same time")
 
         req = thread_type.AssistantRunRequest(
             thread_id=thread_id,
             thread=thread,
             model=model,
             assistant_id=assistant_id,
             response_format=response_format,
@@ -174,28 +183,119 @@
         response = self._http_client.session.post(
             url=url,
             headers=headers,
             json=req.model_dump(),
             stream=True,
             timeout=None
         )
+
+        return response
+
+    def stream_run(self,
+                   assistant_id: str,
+                   thread_id: Optional[str] = "",
+                   thread: Optional[thread_type.AssistantThread] = None,
+                   model: Optional[str] = "ERNIE-4.0-8K",
+                   response_format: Optional[str] = "text",
+                   instructions: Optional[str] = "",
+                   thought_instructions: Optional[str] = "",
+                   chat_instructions: Optional[str] = "",
+                   tools: Optional[list[assistant_type.AssistantTool]] = [],
+                   metadata: Optional[dict] = {},
+                   tool_output: Optional[thread_type.ToolOutput] = None,
+                   ) -> Union[thread_type.StreamRunStatus, thread_type.StreamRunMessage, None]:
+        """
+        启动一个流式运行的对话，用于处理对话流中的消息。
+
+        Args:
+            assistant_id (str): 助理ID。
+            thread_id (Optional[str], optional): 线程ID，用于恢复历史对话。默认为空字符串。
+            thread (Optional[thread_type.AssistantThread], optional): 线程对象，用于恢复历史对话。默认为None。
+            model (Optional[str], optional): 使用的模型名称。默认为"ERNIE-4.0-8K"。
+            response_format (Optional[str], optional): 响应格式，支持"text"和"json"两种格式。默认为"text"。
+            instructions (Optional[str], optional): 指令文本。默认为空字符串。
+            thought_instructions (Optional[str], optional): 思考指令文本。默认为空字符串。
+            chat_instructions (Optional[str], optional): 聊天指令文本。默认为空字符串。
+            tools (Optional[list[assistant_type.AssistantTool]], optional): 使用的工具列表。默认为空列表。
+            metadata (Optional[dict], optional): 元数据字典。默认为空字典。
+            tool_output (Optional[thread_type.ToolOutput], optional): 工具输出对象。默认为None。
+
+        Returns:
+            Iterator[thread_type.AssistantRunEvent]: 返回一个迭代器，用于遍历流式运行中的事件。
+
+        Raises:
+            ValueError: 如果thread_id和thread参数同时为空，则会引发ValueError异常。
+
+        Note:
+            1. 如果thread_id没有传，则thread必须要传值。
+            2. 如果这里不传值，thread_id查出来的历史对话，最后一条消息的role必须为user。
+            3. 如果这里传值，则需要保证thread_id查出来的历史对话 + 本轮追加的thread对话，最后一条消息的role必须为user。
+        """
+
+        response = self._stream(
+            assistant_id=assistant_id,
+            thread_id=thread_id,
+            thread=thread,
+            model=model,
+            response_format=response_format,
+            instructions=instructions,
+            thought_instructions=thought_instructions,
+            chat_instructions=chat_instructions,
+            tools=tools,
+            metadata=metadata,
+            tool_output=tool_output
+        )
         self._http_client.check_response_header(response)
         sse_client = SSEClient(response)
         return self._iterate_events(sse_client.events())
 
+    def stream_run_with_handler(self,
+                   assistant_id: str,
+                   thread_id: Optional[str] = "",
+                   thread: Optional[thread_type.AssistantThread] = None,
+                   model: Optional[str] = "ERNIE-4.0-8K",
+                   response_format: Optional[str] = "text",
+                   instructions: Optional[str] = "",
+                   thought_instructions: Optional[str] = "",
+                   chat_instructions: Optional[str] = "",
+                   tools: Optional[list[assistant_type.AssistantTool]] = [],
+                   metadata: Optional[dict] = {},
+                   tool_output: Optional[thread_type.ToolOutput] = None,
+                   event_handler: Optional[AssistantEventHandler] = None
+                   ) -> AssistantStreamManager:
+        response = self._stream(
+            assistant_id=assistant_id,
+            thread_id=thread_id,
+            thread=thread,
+            model=model,
+            response_format=response_format,
+            instructions=instructions,
+            thought_instructions=thought_instructions,
+            chat_instructions=chat_instructions,
+            tools=tools,
+            metadata=metadata,
+            tool_output=tool_output
+        )
+        self._http_client.check_response_header(response)
+
+        return AssistantStreamManager(
+            response=response,
+            event_handler=event_handler or AssistantEventHandler()
+        )
+
     def _iterate_events(self, events):
         """
         根据给定的事件列表，生成对应的事件处理结果
-        
+
         Args:
             events (list): 事件列表，每个元素为一个包含 'event' 和 'data' 属性的字典对象
-        
+
         Returns:
             generator: 返回一个生成器，每次迭代返回一个处理结果对象，可能是 StreamRunStatus 或 StreamRunMessage
-        
+
         """
         for event in events:
             try:
                 event_class = event.event
                 if event_class == "ping":
                     # TODO(chengmo): record ping event, add timeout func
                     continue
@@ -217,26 +317,27 @@
 
     def submit_tool_outputs(self,
                             run_id: str,
                             thread_id: str,
                             tool_outputs: Optional[list[thread_type.ToolOutput]]) -> thread_type.RunResult:
         """
         向服务端提交工具输出
-        
+
         Args:
             run_id (str): 运行ID
             thread_id (str): 线程ID
             tool_outputs (Optional[list[thread_type.ToolOutput]]): 工具输出列表，可选
-        
+
         Returns:
             thread_type.RunResult: 运行结果
-        
+
         """
         headers = self._http_client.auth_header()
-        url = self._http_client.service_url("/v2/threads/runs/submit_tool_outputs")
+        url = self._http_client.service_url(
+            "/v2/threads/runs/submit_tool_outputs")
 
         req = thread_type.AssistantSubmitToolOutputsRequest(
             thread_id=thread_id,
             run_id=run_id,
             tool_outputs=tool_outputs
         )
 
@@ -254,38 +355,119 @@
 
         resp = thread_type.RunResult(**data)
         return resp
 
     def cancel(self, run_id: str, thread_id: str) -> thread_type.RunResult:
         """
         取消指定线程的运行
-        
+
         Args:
             run_id (str): 运行的ID
             thread_id (str): 线程的ID
-        
+
         Returns:
             thread_type.RunResult: 取消运行的结果
-        
+
         """
         headers = self._http_client.auth_header()
         url = self._http_client.service_url("/v2/threads/runs/cancel")
 
         req = thread_type.AssistantRunCancelRequest(
             run_id=run_id,
             thread_id=thread_id
         )
+
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+        self._http_client.check_response_header(response)
+
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
+
+        resp = thread_type.RunResult(**data)
+        return resp
+
+    def list(self, thread_id: str, limit: int = 20,
+             order: str = 'desc', after: str = "", before: str = "") -> thread_type.RunListResponse:
+        """
+        列出对应thread的历史run记录
+        
+        Args:
+            thread_id (str): 线程ID
+            limit (int, optional): 列表数量限制，默认为20
+            order (str, optional): 排序方式，'asc'为升序，'desc'为降序，默认为'desc'
+            after (str, optional): 返回在指定时间之后的运行列表，默认为空字符串
+            before (str, optional): 返回在指定时间之前的运行列表，默认为空字符串
         
+        Returns:
+            thread_type.RunListResponse: 列出对应thread的历史run记录
+        
+        Raises:
+            无
+        
+        """
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/threads/runs/list")
+
+        req = thread_type.AssistantRunListRequest(
+            thread_id=thread_id,
+            limit=limit,
+            order=order,
+            after=after,
+            before=before
+        )
         response = self._http_client.session.post(
             url=url,
             headers=headers,
             json=req.model_dump(),
             timeout=None
         )
         self._http_client.check_response_header(response)
 
         data = response.json()
         request_id = self._http_client.response_request_id(response)
         self._http_client.check_assistant_response(request_id, data)
 
+        resp = thread_type.RunListResponse(**data)
+        return resp
+
+    def query(self, thread_id: str, run_id: str) -> thread_type.RunResult:
+        """
+        根据thread_id和run_id，查询run的详情
+        
+        Args:
+            thread_id (str): 线程ID。
+            run_id (str): 运行ID。
+        
+        Returns:
+            thread_type.RunResult: 查询到的运行结果。
+        """
+        headers = self._http_client.auth_header()
+        url = self._http_client.service_url("/v2/threads/runs/query")
+
+        req = thread_type.AssistantRunQueryRequest(
+            thread_id=thread_id,
+            run_id=run_id
+        )
+
+        response = self._http_client.session.post(
+            url=url,
+            headers=headers,
+            json=req.model_dump(),
+            timeout=None
+        )
+
+        self._http_client.check_response_header(response)
+        data = response.json()
+        request_id = self._http_client.response_request_id(response)
+        self._http_client.check_assistant_response(request_id, data)
         resp = thread_type.RunResult(**data)
         return resp
+
+    
+
+
```

## appbuilder/core/assistant/type/__init__.py

```diff
@@ -27,28 +27,48 @@
 
 from .assistant_type import (
     # AssitantFileInfo,
     # AssistantAnnotation,
     AssistantFilesCreateResponse,
     AssistantCreateRequest,
     AssistantCreateResponse,
+    AuditStatus,
+    AssistantFilesListData,
+    AssistantFilesListResponse,
+    AssistantFilesQueryResponse,
+    AssistantFilesDeleteResponse,
+    AssistantUpdateRequest,
+    AssistantUpdateResponse,
+    AssistantListRole,
+    AssistantListRequest,
+    AssistantListResponse,
+    AssistantQueryRequest,
+    AssistantQueryResponse,
+    AssistantDeleteRequest,
+    AssistantDeleteResponse,
+    AssistantFilesRequest,
+    AssistantFilesResponse,
+    AssistantMountedFilesListRequest,
+    AssistantMountedFilesListResponse,
+    AssistantFilesDeleteRequest,
+    AssistantFilesContentResponse
 )
 
 
 from .thread_type import (
     AssistantMessageRole,
     AssistantMessage,
     AssistantMessageCreateRequest,
     AssistantMessageCreateResponse,
     AssistantThread,
     ThreadCreateResponse,
     ThreadCreateRequest,
     AssistantThread,
     RunActionInfo,
-    FuncitonCall,
+    FunctionCall,
     ToolCall,
     SubmitToolOutput,
     RequiredAction,
     LastError,
     FinalAnswerMessage,
     FinalAnswer,
     RunResult,
@@ -58,9 +78,26 @@
     RunStepResult,
     StreamRunDetail,
     StreamRunStatus,
     StreamRunMessage,
     ToolOutput,
     AssistantRunRequest,
     AssistantSubmitToolOutputsRequest,
-    AssistantRunCancelRequest
+    AssistantRunCancelRequest,
+    AssistantMessageListRole,
+    AssistantMessageListRequest,
+    AssistantMessageListResponse,
+    AssistantMessageListResponseData,
+    AssistantMessageQueryRequest,
+    AssistantMessageQueryResponse,
+    AssistantMessageUpdateRequest,
+    AssistantMessageUpdateResponse,
+    AssistantMessageFilesRequest,
+    AssistantMessageFilesResponse,
+    AssistantContentFilesData,
+    ThreadQueryRequest,
+    ThreadQueryResponse,
+    ThreadDeleteRequest,
+    ThreadDeleteResponse,
+    ThreadUpdateResponse,
+    AssistantThread
 )
```

## appbuilder/core/assistant/type/assistant_type.py

```diff
@@ -11,14 +11,15 @@
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 
 from pydantic import BaseModel
 from pydantic import Field
 from typing import Optional
+from enum import Enum
 from appbuilder.core.assistant.type import (
     AssistantTool,
     ResponseFormat,
     AssistantModel
 )
 
 # AssistantFilesCreateResponse类，用于描述创建助理文件后的响应信息
@@ -26,28 +27,71 @@
     id: str = ""  # 文件ID
     bytes: int = 0  # 文件大小（字节）
     object: str = ""  # 文件对象标识
     purpose: str = ""  # 文件用途
     create_at: int = 0  # 文件创建时间戳
     filename: str = ""  # 文件名
     classification_id: str = ""  # 文件分类ID
+    
+class AuditStatus(int,Enum):
+    AUDITING = -1, # 审核中 
+    NOT_AUDITED = 0, # 未审核
+    APPROVED = 1, # 审核通过
+    REJECTED = 2, # 审核不通过
+    NEEDS_FURTHER_AUDIT = 3, # 需要进一步审核
+    AUDIT_FAILED_SERVICE_EXCEPTION = 4, # 审核失败（服务异常）
+    AUDIT_FAILED_TIMEOUT = 5, # 审核失败（审核超时）
+
+
+class AssistantFilesListData(BaseModel):
+    id: str = ""  # 文件ID
+    bytes: int = 0  # 文件大小（字节）
+    object: str = ""  # 文件对象标识
+    purpose: str = ""  # 文件用途
+    censored :AuditStatus = Field()  # 审核状态
+    create_at: int = 0  # 文件创建时间戳
+    filename: str = ""  # 文件名
+    classification_id: str = ""  # 文件分类ID
+    file_type: str = "" # 文件类型
+    
+
+class AssistantFilesListResponse(BaseModel):
+    object :str = "list"
+    data: list[AssistantFilesListData] = []
+    
+
+class AssistantFilesQueryResponse(BaseModel):
+    id: str = ""  # 文件ID
+    bytes: int = 0  # 文件大小（字节）
+    object: str = ""  # 文件对象标识
+    purpose: str = ""  # 文件用途
+    censored :AuditStatus = Field()  # 审核状态
+    create_at: int = 0  # 文件创建时间戳
+    filename: str = ""  # 文件名
+    classification_id: str = ""  # 文件分类ID
+    file_type: str = "" # 文件类型
+    
+class AssistantFilesDeleteResponse(BaseModel):
+    id: str = ""  # 文件ID
+    object: str = ""  # 文件对象标识
+    deleted: bool = False  # 是否删除成功	
 
 # AssistantCreateRequest类，用于描述创建助理的请求参数
 class AssistantCreateRequest(BaseModel):
     model: AssistantModel = Field(default="ERNIE-4.0-8K")  # 使用的模型
     name: str = Field(default="", min_length=1, max_length=64, pattern="^[0-9a-zA-Z_-]+$")  # 助理名称
     description: str = Field(default="", max_length=512)  # 助理描述
     response_format: ResponseFormat = Field(default=ResponseFormat.TEXT)  # 响应格式
     instructions: str = Field(default="你是百度制作的AI助手", max_length=4096)  # 助理的通用指令
     thought_instructions: str = Field(default="", max_length=4096)  # 助理的思维指令
     chat_instructions: str = Field(default="", max_length=4096)  # 助理的聊天指令
     tools: list[AssistantTool] = Field(default=[], max_length=10)  # 助理使用的工具列表
     file_ids: list[str] = Field(default=[], max_length=10)  # 关联文件的ID列表
     metadata: dict = Field(default={}, max_length=16)  # 元数据
-    assistant_id: str = ""  # 助理ID
+
 
 # AssistantCreateResponse类，用于描述创建助理后的响应信息
 class AssistantCreateResponse(BaseModel):
     id: Optional[str] = ""  # 助理ID
     object: Optional[str] = ""  # 助理对象标识
     name: Optional[str] = ""  # 助理名称
     description: Optional[str] = ""  # 助理描述
@@ -55,7 +99,113 @@
     tools: Optional[list[AssistantTool]] = Field(default=[])  # 助理使用的工具列表
     created_at: Optional[int] = 0  # 助理创建时间戳
     thought_instructions: Optional[str] = ""  # 助理的思维指令
     chat_instructions: Optional[str] = ""  # 助理的聊天指令
     response_format: Optional[ResponseFormat] = Field(default=ResponseFormat.TEXT)  # 响应格式
     file_ids: Optional[list[str]] = Field(default=[])  # 关联文件的ID列表
     metadata: Optional[dict] = Field(default={}, max_length=16)  # 元数据
+
+class AssistantUpdateRequest(BaseModel):
+    assistant_id: Optional[str] = ""  # 助理ID
+    model: AssistantModel = Field(default="ERNIE-4.0-8K")  # 使用的模型
+    name: str = Field(default="", min_length=1, max_length=64, pattern="^[0-9a-zA-Z_-]+$")  # 助理名称
+    description: str = Field(default="", max_length=512)  # 助理描述
+    response_format: ResponseFormat = Field(default=ResponseFormat.TEXT)  # 响应格式
+    instructions: str = Field(default="你是百度制作的AI助手", max_length=4096)  # 助理的通用指令
+    thought_instructions: str = Field(default="", max_length=4096)  # 助理的思维指令
+    chat_instructions: str = Field(default="", max_length=4096)  # 助理的聊天指令
+    tools: list[AssistantTool] = Field(default=[], max_length=10)  # 助理使用的工具列表
+    file_ids: list[str] = Field(default=[], max_length=10)  # 关联文件的ID列表
+    metadata: dict = Field(default={}, max_length=16)  # 元数据
+    
+class AssistantUpdateResponse(BaseModel):
+    id: Optional[str] = ""  # 助理ID
+    model: Optional[str] = ""  # 助理对象标识
+    name: Optional[str] = ""  # 助理名称
+    description: Optional[str] = ""  # 助理描述
+    response_format: Optional[ResponseFormat] = Field(default=ResponseFormat.TEXT)  # 响应格式
+    instructions: Optional[str]  # 助理的通用指令
+    created_at: Optional[int] = 0  # 助理创建时间戳
+    thought_instructions: Optional[str] = ""  # 助理的思维指令
+    chat_instructions: Optional[str] = ""  # 助理的聊天指令
+    tools: Optional[list[AssistantTool]] = Field(default=[])  # 助理使用的工具列表
+    file_ids: Optional[list[str]] = Field(default=[])  # 关联文件的ID列表
+    metadata: Optional[dict] = Field(default={}, max_length=16)  # 元数据
+    
+    
+class AssistantListRole(str, Enum):
+    DESC = 'desc'
+    ASC = 'asc'
+
+class AssistantListRequest(BaseModel):
+    limit: Optional[int] =   Field(default=20) # 列举结果数量上限
+    order: Optional[AssistantListRole] =   Field(default= AssistantListRole.DESC) # 排序字段
+    after: Optional[str] =   Field(default="") # 查询指定assistant_id之后创建的Assistant
+    before: Optional[str] =   Field(default="") # 查询指定assistant_id之前创建的Assistant
+    
+class AssistantListResponse(BaseModel):
+    object: str = "list" # 结构类型，返回值固定为 list
+    data: Optional[list[AssistantCreateResponse]] = Field(default=[]) # Assistant对象列表
+    first_id: Optional[str] = "" # 返回的列表中第一条assistant的id
+    last_id: Optional[str] = "" # 返回的列表中最后一条assistant的id
+    has_more: bool = False # 是否还有更多的数据
+    
+class AssistantQueryRequest(BaseModel):
+    assistant_id: Optional[str] = ""  # 助理ID
+    
+class AssistantQueryResponse(BaseModel):
+    id: Optional[str] = ""  # 助理ID
+    object: Optional[str] = ""  # 助理对象标识
+    name: Optional[str] = ""  # 助理名称
+    description: Optional[str] = ""  # 助理描述
+    instructions: Optional[str]  # 助理的通用指令
+    tools: Optional[list[AssistantTool]] = Field(default=[])  # 助理使用的工具列表
+    created_at: Optional[int] = 0  # 助理创建时间戳
+    thought_instructions: Optional[str] = ""  # 助理的思维指令
+    chat_instructions: Optional[str] = ""  # 助理的聊天指令
+    response_format: Optional[ResponseFormat] = Field(default=ResponseFormat.TEXT)  # 响应格式
+    file_ids: Optional[list[str]] = Field(default=[])  # 关联文件的ID列表
+    metadata: Optional[dict] = Field(default={}, max_length=16)  # 元数据 
+    
+    
+class AssistantDeleteRequest(BaseModel):
+    assistant_id: Optional[str] = ""  # 助理ID
+    
+    
+class AssistantDeleteResponse(BaseModel):
+    id: Optional[str] = ""  # 助理ID
+    object: Optional[str] = ""  # 助理对象标识
+    deleted: bool = False  # 删除状态
+    
+class AssistantFilesRequest(BaseModel):
+    assistant_id: Optional[str] = ""  # 助理ID
+    file_id: Optional[str] = ""  # File对象的id
+    
+class AssistantFilesResponse(BaseModel):
+    id: Optional[str] = ""  # File对象的id，值等于入参
+    object: Optional[str] = ""  # 助理对象标识
+    created_at: Optional[int] = 0  # 助理创建时间戳
+    assistant_id: Optional[str] = ""  # Assistant对象的id，值等于入参
+    
+class AssistantMountedFilesListRequest(BaseModel):
+    assistant_id: Optional[str] = ""  # Assistant对象的id
+    limit: Optional[int] =   Field(default=20) # 列举结果数量上限
+    order: AssistantListRole = Field(default= AssistantListRole.DESC) # 排序字段
+    after: Optional[str] =   Field(default="") # 查询指定file_id之后创建的File
+    before: Optional[str] =   Field(default="") # 查询指定file_id之前创建的File
+
+class AssistantMountedFilesListResponse(BaseModel):
+    object: str = "list" # 结构类型，返回值固定为 list
+    data: Optional[list[AssistantFilesResponse]] = Field(default=[]) # file对象列表
+    first_id: Optional[str] = "" # 返回的列表中第一条assistant的id
+    last_id: Optional[str] = "" # 返回的列表中最后一条assistant的id
+    has_more: bool = False # 是否还有更多的数据
+    
+class AssistantFilesDeleteRequest(BaseModel):
+    assistant_id: Optional[str] = ""  # 助理ID
+    file_id: Optional[str] = ""  # File对象的id
+    
+    
+class AssistantFilesContentResponse(BaseModel):
+    content_type:Optional[str] = ""  # 文件类型
+    content :Optional[bytes] =b"" # 二进制流数据
+
```

## appbuilder/core/assistant/type/thread_type.py

```diff
@@ -7,15 +7,14 @@
 #     http://www.apache.org/licenses/LICENSE-2.0
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
-
 from pydantic import BaseModel
 from pydantic import Field
 from enum import Enum
 from typing import Union
 from typing import Optional
 
 from appbuilder.core.assistant.type import (
@@ -52,64 +51,180 @@
         default=AssistantMessageRole.USER)
     content: Optional[list[AssistantContent]] = []
     created_at: int = 0
     thread_id: str = ""
     assistant_id: Optional[str] = ""
     run_id: Optional[str] = ""
     file_ids: Optional[list[str]] = []
+    
+    
+class AssistantMessageListRole(str, Enum):
+    DESC = 'desc'
+    ASC = 'asc'
+    
+    
+class AssistantMessageListRequest(BaseModel):
+    thread_id: str
+    limit: int = -20
+    order: AssistantMessageListRole = Field(
+        default=AssistantMessageListRole.DESC)
+    after: str = ""
+    before: str = ""
+    
+    
+class AssistantMessageListResponseData(BaseModel):
+    id: str = ""
+    object: str = ""
+    role: AssistantMessageRole = Field()
+    content: Optional[list[AssistantContent]] = []
+    created_at: int = 0
+    thread_id: str = ""
+    assistant_id: Optional[str] = ""
+    run_id: Optional[str] = ""
+    file_ids: Optional[list[str]] = []
+    
+    
+class AssistantMessageListResponse(BaseModel):
+    object: str = ""
+    data: list[AssistantMessageListResponseData] = []
+    first_id: Optional[str] = ""
+    last_id: Optional[str] = ""
+    has_more: bool = False
+    
+class AssistantMessageQueryRequest(BaseModel):
+    thread_id: str
+    message_id: str
 
+class AssistantMessageQueryResponse(BaseModel):
+    id: str = ""
+    object: str = ""
+    role: AssistantMessageRole = Field()
+    content: Optional[list[AssistantContent]] = []
+    created_at: int = 0
+    thread_id: str = ""
+    assistant_id: Optional[str] = ""
+    run_id: Optional[str] = ""
+    file_ids: Optional[list[str]] = []
+    
+    
+class AssistantMessageUpdateRequest(BaseModel):
+    thread_id: str
+    message_id: str
+    content: Optional[str] 
+    file_ids: Optional[list[str]] = []
+    
+    
+class AssistantMessageUpdateResponse(BaseModel):
+    id: str = ""
+    object: str = ""
+    role: AssistantMessageRole = Field(default=AssistantMessageRole.USER)
+    content: Optional[list[AssistantContent]] = []
+    created_at: int = 0
+    thread_id: str = ""
+    assistant_id: Optional[str] = ""
+    run_id: Optional[str] = ""
+    file_ids: Optional[list[str]] = []
+    
+class AssistantMessageFilesRequest(BaseModel):
+    thread_id: str
+    message_id: str
+    limit: int = -20
+    order : AssistantMessageListRole = Field(
+        default=AssistantMessageListRole.DESC)
+    after: str = ""
+    before: str = ""
+    
+class AssistantContentFilesData(BaseModel):
+    id: str = ""
+    object: str = ""
+    created_at: int = 0
+    message_id: str = ""
+    
+class AssistantMessageFilesResponse(BaseModel):
+    object: str = ""
+    data: list[AssistantContentFilesData] = []
+    first_id: Optional[str] = ""
+    last_id: Optional[str] = ""
+    has_more: bool = False
+    
 
 class AssistantThread(BaseModel):
     messages: Optional[list[AssistantMessage]] = []
     metadata: Optional[dict] = Field(default={}, max_length=16)
 
 class ThreadCreateResponse(BaseModel):
     id: str = ""
     object: str = ""
     created_at: int = 0
-
+    metadata: dict = {}
 
 class ThreadCreateRequest(BaseModel):
     messages: list[AssistantMessage]
 
+class ThreadQueryRequest(BaseModel):
+    thread_id: str
+
+class ThreadQueryResponse(BaseModel):
+    id: str = ""
+    object: str = ""
+    created_at: int = 0
+    metadata: dict = {}
+    
+class ThreadDeleteRequest(BaseModel):
+    thread_id: str
+
+class ThreadDeleteResponse(BaseModel):
+    id: str = ""
+    object: str = ""
+    deleted: bool = False
+    
+class ThreadUpdateRequest(BaseModel):
+    thread_id: str
+    metadata: Optional[dict] = Field(default={}, max_length=16)
+    
+class ThreadUpdateResponse(BaseModel):
+    id: str = ""
+    object: str = ""
+    created_at: Optional[int] = 0
+    metadata: Optional[dict] = {}
 
 class AssistantThread(BaseModel):
     messages: list[AssistantMessage] = []
 
 
 class RunActionInfo(BaseModel):
     toolName: str = ""
     actionName: str = ""
     actionContent: str = ""
 
 
-class FuncitonCall(BaseModel):
+class FunctionCall(BaseModel):
     name: str = ""
     arguments: str = ""
     output: str = ""
 
 
 class ToolCall(BaseModel):
     id: str = ""
     type: str = 'function'
-    function: Union[FuncitonCall, None] = None
+    function: Union[FunctionCall, None] = None
 
 
 class SubmitToolOutput(BaseModel):
     tool_calls: Union[list[ToolCall], None] = None
 
 
 class RequiredAction(BaseModel):
     type: str = ""
     submit_tool_outputs: Union[SubmitToolOutput, None] = None
 
 
 class LastError(BaseModel):
-    type: str = ""
-    message: str = ""
+    type: Optional[str] = ""
+    message: Optional[str] = ""
 
 class FinalAnswerMessage(BaseModel):
     message_id: Optional[str] = ""
     content: Optional[AssistantContent] = None
 
 class FinalAnswer(BaseModel):
     type: Optional[str] = "message"
@@ -140,14 +255,15 @@
     completed_at: int = 0
 
 
 class RunMessageCreation(BaseModel):
     message_id: str = ""
 
 
+
 class ToolInfo(BaseModel):
     type: str = ""
     name: str = ""
     arguments: str = ""
     output: str = ""
 
 
@@ -156,28 +272,28 @@
     message_creation: Union[RunMessageCreation, None] = None
     action_info: Union[RunActionInfo, None] = None
     tool_calls: Union[list[ToolCall], None] = None
     tool_info: Union[list[ToolInfo], None] = None
 
 
 class RunStepResult(BaseModel):
-    id: str = ""
-    object: str = ""
-    assistant_id: str = ""
-    thread_id: str = ""
-    run_id: str = ""
-    status: str = ""
-    created_at: int = 0
-    started_at: int = 0
-    expired_at: int = 0
-    cancelled_at: int = 0
-    failed_at: int = 0
-    completed_at: int = 0
-    last_error: Union[LastError, None] = None
-    type: str = 'null'
+    id: Optional[str] = ""
+    object: Optional[str] = ""
+    assistant_id: Optional[str] = ""
+    thread_id: Optional[str] = ""
+    run_id: Optional[str] = ""
+    status: Optional[str] = ""
+    created_at: Optional[int] = 0
+    started_at: Optional[int] = 0
+    expired_at: Optional[int] = 0
+    cancelled_at: Optional[int] = 0
+    failed_at: Optional[int] = 0
+    completed_at: Optional[int] = 0
+    last_error: Union[LastError, str, None] = None
+    type: Optional[str] = 'null'
     step_datail: Union[RunStepDetail, None] = None
 
 
 class StreamRunDetail(BaseModel):
     type: str = ""
     message_creation: Union[RunMessageCreation, None] = None
     run_object: Union[RunResult, None] = None
@@ -231,7 +347,50 @@
     run_id: str = Field(default="", min_length=1)
     tool_outputs: Optional[list[ToolOutput]] = Field(default=[], min_length=1)
 
 
 class AssistantRunCancelRequest(BaseModel):
     thread_id: str = Field(default="", min_length=1)
     run_id: str = Field(default="", min_length=1)
+
+
+class RunListOrderEnum(str, Enum):
+    DESC = "desc"
+    ASC = "asc"
+
+class AssistantRunListRequest(BaseModel):
+    thread_id: str = Field(default="", min_length=1)
+    limit: int = Field(default=20)
+    order: RunListOrderEnum = Field(default=RunListOrderEnum.DESC)
+    after: str = Field(default="")
+    before: str = Field(default="")
+
+class RunListResponse(BaseModel):
+    object: Optional[str] = Field(default="list")
+    first_id: Optional[str] = Field(default="")
+    last_id: Optional[str] = Field(default="")
+    has_more: Optional[bool] = Field(default=False)
+    data: Optional[list[RunResult]] = Field(default=[])
+
+class AssistantRunQueryRequest(BaseModel):
+    thread_id: str = Field(default="", min_length=1)
+    run_id: str = Field(default="", min_length=1)
+
+class AssistantRunStepListRequest(BaseModel):
+    thread_id: str = Field(default="", min_length=1)
+    run_id: str = Field(default="", min_length=1)
+    limit: int = Field(default=20)
+    order: RunListOrderEnum = Field(default=RunListOrderEnum.DESC)
+    after: str = Field(default="")
+    before: str = Field(default="")
+
+class RunStepListResponse(BaseModel):
+    object: Optional[str] = Field(default="list")
+    first_id: Optional[str] = Field(default="")
+    last_id: Optional[str] = Field(default="")
+    has_more: Optional[bool] = Field(default=False)
+    data: Optional[list[RunStepResult]] = Field(default=[])
+
+class AssistantRunStepQueryRequest(BaseModel):
+    thread_id: str = Field(default="", min_length=1)
+    run_id: str = Field(default="", min_length=1)
+    step_id: str = Field(default="", min_length=1)
```

## appbuilder/core/components/animal_recognize/component.py

```diff
@@ -114,15 +114,15 @@
 
                    参数:
                        request (obj: `AnimalRecognitionRequest`) : 动物识别输入参数
                    返回：
                        response (obj: `AnimalRecognitionResponse`): 动物识别返回结果
                """
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError("request format error, one of image or url must be set")
 
         data = AnimalRecognitionRequest.to_dict(request)
         if self.http_client.retry.total != retry:
             self.http_client.retry.total = retry
         headers = self.http_client.auth_header()
         headers['content-type'] = 'application/x-www-form-urlencoded'
         url = self.http_client.service_url("/v1/bce/aip/image-classify/v1/animal")
```

## appbuilder/core/components/asr/component.py

```diff
@@ -172,19 +172,21 @@
         asr for function call
         """
         file_url = kwargs.get("file_url", None)
         if not file_url:
             file_urls = kwargs.get("file_urls", {})
             file_path = kwargs.get("file_name", None)
             if not file_path:
-                raise InvalidRequestArgumentError("file name is not set")
+                raise InvalidRequestArgumentError("request format error, file name is not set")
             file_name = os.path.basename(file_path)
             file_url = file_urls.get(file_name, None)
             if not file_url:
-                raise InvalidRequestArgumentError(f"file {file_url} url does not exist")
+                raise InvalidRequestArgumentError(
+                    f"request format error, file {file_url} url does not exist"
+                )
 
         _, file_type = os.path.splitext(os.path.basename(urlparse(file_url).path))
         file_type = file_type.strip('.')
 
         req = ShortSpeechRecognitionRequest()
         req.speech = requests.get(file_url).content
         req.format = file_type
```

## appbuilder/core/components/dish_recognize/component.py

```diff
@@ -80,15 +80,15 @@
 
         :param request: 包含执行识别所需信息的 DishRecognitionRequest 对象。
         :param timeout: 请求超时时间（秒），默认为 None。
         :param retry: 请求失败时的重试次数，默认为 0。
         :return: 包含食物识别结果的响应对象。
         """
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError("request format error, one of image or url must be set")
         if not request.top_num:
             request.top_num = 1
         if not request.filter_threshold:
             request.filter_threshold = 0.95
         request_data = DishRecognitionRequest.to_dict(request)
         if retry != self.http_client.retry.total:
             self.http_client.retry.total = retry
```

## appbuilder/core/components/doc_crop_enhance/component.py

```diff
@@ -69,15 +69,15 @@
         req = DocCropEnhanceRequest()
         if inp.raw_image:
             req.image = base64.b64encode(inp.raw_image)
         if inp.url:
             req.url = inp.url
         req.scan_type = 3
         if enhance_type not in enhance_type_set:
-            raise InvalidRequestArgumentError(f"enhance_type only support {enhance_type_set}")
+            raise InvalidRequestArgumentError(f"mismatched argument enhance_type, expected enhance_type in {enhance_type_set}")
         req.enhance_type = enhance_type
         result = self._recognize(req, timeout, retry)
         result_dict = proto.Message.to_dict(result)
         out = DocCropEnhanceOutMsg(**result_dict)
         return Message(content=out.model_dump())
 
     def _recognize(self, request: DocCropEnhanceRequest, timeout: float = None,
@@ -85,15 +85,15 @@
         r"""文档矫正增强调用
                    参数:
                        request (obj: `DocCropEnhanceRequest`) : 文档矫正增强输入参数
                    返回：
                        response (obj: `DocCropEnhanceResponse`): 文档矫正增强返回结果
                """
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError("request argument error, one of image or url must be set")
 
         req = json.dumps(DocCropEnhanceRequest.to_dict(request))
         if self.http_client.retry.total != retry:
             self.http_client.retry.total = retry
         headers = self.http_client.auth_header()
         headers['content-type'] = 'application/json'
         url = self.http_client.service_url("/v1/bce/aip/ocr/v1/doc_crop_enhance")
```

## appbuilder/core/components/doc_format_converter/component.py

```diff
@@ -132,40 +132,40 @@
                 request.task_id = taskId
                 docConverterQueryResponse = self.queryDocFormatConverterTask(request)
                 if docConverterQueryResponse.result.ret_code is not None:
                     task_progress = docConverterQueryResponse.result.ret_code
                     if task_progress == TASK_PROGRESS_COMPLETED:
                         break
                     elif task_progress == TASK_PROGRESS_FAILED:
-                        raise AppBuilderServerException(f'任务执行失败')
+                        raise AppBuilderServerException(f'doc convert task progress failed: {docConverterQueryResponse.error_msg}')
                     # TODO 文档格式转换查询间隔Refactor
                     if task_request_time <= 3:
                         time.sleep(3)
                     else:
                         time.sleep(task_request_time)
                     task_request_time += 1
             word_url = docConverterQueryResponse.result.result_data.word
             excel_url = docConverterQueryResponse.result.result_data.excel
             out = DocFormatConverterOutMessage(word_url=word_url, excel_url=excel_url)
             return Message(content=out.model_dump())
         else:
-            raise AppBuilderServerException(f'文档格式转换服务发生错误：{docConverterSubmitResponse.error_msg}')
+            raise AppBuilderServerException(f'service error when doc convert：{docConverterSubmitResponse.error_msg}')
 
 
     @HTTPClient.check_param
     def submitDocFormatConverterTask(self, request: DocFormatConverterSubmitRequest, timeout: float = None, 
                                 retry: int = 0) -> DocFormatConverterSubmitResponse:
         """
         提交任务
         :param request: 请求参数
         :type request: DocFormatConverterSubmitRequest
         :return: 返回结果
         :rtype: DocFormatConverterSubmitResponse
         """
-        url = self.http_client.service_url("/v1/bce/aip/text_mind/v1/doc_convert/request",'api')
+        url = self.http_client.service_url("/v1/bce/aip/text_mind/v1/doc_convert/request",'/api')
         data = json.loads(DocFormatConverterSubmitRequest.to_json(request, preserving_proto_field_name=True))
         headers = self.http_client.auth_header()
         headers['Content-Type'] = 'application/x-www-form-urlencoded'
         if retry != self.http_client.retry.total:
             self.http_client.retry.total = retry
 
         response = self.http_client.session.post(url, data=data, headers=headers, timeout=timeout)
@@ -181,15 +181,15 @@
         """
         查询任务
         :param request: 请求参数
         :type request: DoFormatcConverterQueryRequest
         :return: 返回结果
         :rtype: DocFormatConverterSubmitResponse
         """
-        url = self.http_client.service_url("/v1/bce/aip/text_mind/v1/doc_convert/get_request_result",'api')
+        url = self.http_client.service_url("/v1/bce/aip/text_mind/v1/doc_convert/get_request_result",'/api')
         data = {
             "task_id": request.task_id
         }
         data = json.loads(DocFormatConverterQueryRequest.to_json(request, preserving_proto_field_name=True))
         headers = self.http_client.auth_header()
         headers['content-type'] = "application/x-www-form-urlencoded"
 
@@ -208,30 +208,30 @@
         """
         file_url = kwargs.get("file_url", None)
         page_num = kwargs.get("page_num", '')
         if page_num:
             if isinstance(page_num, int) or (isinstance(page_num, str) and page_num.isdigit()):
                 page_num = str(page_num)
             else:
-                raise InvalidRequestArgumentError("page_num must be a integer")
+                raise InvalidRequestArgumentError("request format error, page_num must be a integer")
         if not file_url or not (file_url.startswith("http") or file_url.startswith("https")):
             file_urls = kwargs.get("file_urls", {})
             file_path = kwargs.get("file_name", file_url)
             if not file_path:
-                raise InvalidRequestArgumentError("file name is not set")
+                raise InvalidRequestArgumentError("request format error, file name is not set")
             file_name = os.path.basename(file_path)
             file_url = file_urls.get(file_name, None)
             if not file_url:
-                raise InvalidRequestArgumentError("file url is not set")
+                raise InvalidRequestArgumentError("request format error, file url is not set")
         try:
             result = self.run(Message({"file_path": file_url, "page_num": page_num}))
         except AppBuilderServerException:
             raise
         except Exception as e:
-            raise AppBuilderServerException(f'文档格式转换服务发生错误：{e}')
+            raise AppBuilderServerException(f'service error when doc convert：{e}')
         if streaming:
             yield {
                 "type": "files",
                 "text": [result.content['word_url'], result.content['excel_url']]
             }
         else:
             return result.content
```

## appbuilder/core/components/excel2figure/component.py

```diff
@@ -79,15 +79,15 @@
         super(Excel2Figure, self).set_secret_key_and_gateway(
                 secret_key=secret_key, gateway=gateway)
         self.__class__.model_info = ModelInfo(client=self.http_client)
 
     @ttl_lru_cache(seconds_to_live=1 * 60 * 60) # 1h 
     def _check_model_and_get_model_url(self, model, model_type):
         if model and model in self.excluded_models:
-            raise ModelNotSupportedException(f"Model {model} not supported")
+            raise ModelNotSupportedException(f"Model {model} not supported, expected in {self.excluded_models}")
         if not model:
             raise ValueError("model must be provided")
         if self.__class__.model_info is None:
             self.set_secret_key_and_gateway()
         m_type = self.model_info.get_model_type(model)
         if m_type != model_type:
             raise ModelNotSupportedException(
@@ -202,30 +202,30 @@
         tool eval
         """
         query = kwargs.get("query", "")
         if not query:
             query = origin_query
         try:
             if len(file_urls) != 1:
-                raise ValueError(f"仅支持file_urls有且仅有一个文件，len(file_urls)={len(file_urls)}") 
+                raise ValueError(f"file_urls mismatched, expectd len(file_urls)==1，got {len(file_urls)}") 
             excel_file_name, excel_file_url = list(file_urls.items())[0]
             result_msg = self._run_excel2figure(
             	query=query, 
 				excel_file_url=excel_file_url, 
 				model=self.model,
 				excel_file_name=excel_file_name)
             
             if not result_msg.content:
-                raise RuntimeError(f"未能成功绘制图表，请调整query后重试")
+                raise RuntimeError(f"excel to figure failed, retry after modify query")
 
             result = {
                 'event': 'excel_to_figure',
                 'type': 'files',
                 'text': [result_msg.content],
             }
         except Exception as e:
-            raise RuntimeError(f'绘制图表时发生错误：{e}')
+            raise RuntimeError(f'excel to figure error：{e}')
             
         if streaming:
             yield result
         else:
             return result
```

## appbuilder/core/components/extract_table/component.py

```diff
@@ -60,20 +60,20 @@
         "description": "Extract table from doc, table format is markdown",
     })
 
     def _input_check(self, message: Message, table_max_size, doc_node_num_before_table):
         """ para_check
         """
         if table_max_size < 30:
-            raise ValueError("table_max_size must be >= 30")
+            raise ValueError("table_max_size mismached, expected table_max_size >= 30, got {}".format(table_max_size))
         if doc_node_num_before_table < 1 or doc_node_num_before_table > 10:
-            raise ValueError("doc_node_num_before_table must be >=1, <=10]")
+            raise ValueError("doc_node_num_before_table mismatched, expected [1, 10], got {}".format(doc_node_num_before_table))
         obj = message.content.get("result", {}).get("result_list", [])
         if len(obj) < 1:
-            raise ValueError("Input check failed, it must be raw_doc_parser output.")
+            raise ValueError("Input check failed, expected raw_doc_parser output.")
 
     def _post_process(self, resp):
         """ pass
         """
         resp = resp["result"] 
         data = []
         for table in resp.get("mdtables", []):
```

## appbuilder/core/components/gbi/nl2sql/component.py

```diff
@@ -68,15 +68,15 @@
                   ***你的描述
                   当前问题：{query}
                   回答：
         """
         super().__init__(meta=NL2SqlArgs)
 
         if model_name not in SUPPORTED_MODEL_NAME:
-            raise ValueError(f"model_name 错误， 请使用 {SUPPORTED_MODEL_NAME} 中的大模型")
+            raise ValueError(f"model_name mismatchhed, expected in {SUPPORTED_MODEL_NAME}, got {model_name}")
         self.model_name = model_name
         self.server_sub_path = "/v1/ai_engine/gbi/v1/gbi_nl2sql"
         self.table_schemas = table_schemas
         self.knowledge = knowledge or dict()
         self.prompt_template = prompt_template
 
     def run(self,
```

## appbuilder/core/components/gbi/select_table/component.py

```diff
@@ -64,15 +64,17 @@
                             请严格参考示例只不要返回无关内容，直接给出最终答案后面的内容，分析步骤不要输出
                             问题:{query}
                             回答:
                             ```
         """
         super().__init__(meta=SelectTableArgs)
         if model_name not in SUPPORTED_MODEL_NAME:
-            raise ValueError(f"model_name 错误， 请使用 {SUPPORTED_MODEL_NAME} 中的大模型")
+            raise ValueError(
+                f"model_name mismatchhed, expected in {SUPPORTED_MODEL_NAME}, got {model_name}"
+            )
         self.model_name = model_name
         self.server_sub_path = "/v1/ai_engine/gbi/v1/gbi_select_table"
         self.table_descriptions = table_descriptions
         self.prompt_template = prompt_template
 
     def run(self,
             message: Message, timeout: int = 60, retry: int = 0) -> Message[List[str]]:
```

## appbuilder/core/components/general_ocr/component.py

```diff
@@ -104,31 +104,33 @@
         request.language_type = "auto_detect"
         result = self._recognize(request, timeout, retry)
         result_dict = proto.Message.to_dict(result)
         out = GeneralOCROutMsg(**result_dict)
         return Message(content=out.model_dump())
 
     def _recognize(self, request: GeneralOCRRequest, timeout: float = None,
-                  retry: int = 0) -> GeneralOCRResponse:
+                   retry: int = 0) -> GeneralOCRResponse:
         r"""调用底层接口进行通用文字识别
                    参数:
                        request (obj: `GeneralOCRRequest`) : 通用文字识别输入参数
 
                    返回：
                        response (obj: `GeneralOCRResponse`): 通用文字识别返回结果
                """
         if not request.image and not request.url and not request.pdf_file and not request.ofd_file:
-            raise ValueError("one of image or url or must pdf_file or ofd_file be set")
+            raise ValueError(
+                "request format error, one of image or url or must pdf_file or ofd_file be set")
         data = GeneralOCRRequest.to_dict(request)
         if self.http_client.retry.total != retry:
             self.http_client.retry.total = retry
         headers = self.http_client.auth_header()
         headers['content-type'] = 'application/x-www-form-urlencoded'
         url = self.http_client.service_url("/v1/bce/aip/ocr/v1/accurate_basic")
-        response = self.http_client.session.post(url, headers=headers, data=data, timeout=timeout)
+        response = self.http_client.session.post(
+            url, headers=headers, data=data, timeout=timeout)
         self.http_client.check_response_header(response)
         data = response.json()
         self.http_client.check_response_json(data)
         request_id = self.http_client.response_request_id(response)
         self.__class__._check_service_error(request_id, data)
         ocr_response = GeneralOCRResponse.from_json(payload=json.dumps(data))
         ocr_response.request_id = request_id
@@ -154,19 +156,21 @@
         general_ocr for function call
         """
         img_url = kwargs.get("img_url", None)
         if not img_url:
             file_urls = kwargs.get("file_urls", {})
             img_path = kwargs.get("img_name", None)
             if not img_path:
-                raise InvalidRequestArgumentError("file name is not set")
+                raise InvalidRequestArgumentError(
+                    "request format error, file name is not set")
             img_name = os.path.basename(img_path)
             img_url = file_urls.get(img_name, None)
             if not img_url:
-                raise InvalidRequestArgumentError(f"file {img_name} url does not exist")
+                raise InvalidRequestArgumentError(
+                    f"request format error, file {img_name} url does not exist")
         req = GeneralOCRRequest(url=img_url)
         req.detect_direction = "true"
         req.language_type = "auto_detect"
         result = proto.Message.to_dict(self._recognize(req))
         results = {
             "识别结果": " \n".join(item["words"] for item in result["words_result"])
         }
@@ -179,8 +183,8 @@
             }
             yield {
                 "type": "text",
                 "text": "",
                 "visible_scope": 'user',
             }
         else:
-            return res
+            return res
```

## appbuilder/core/components/handwrite_ocr/component.py

```diff
@@ -109,15 +109,15 @@
         for file_name in file_names:
 
             if utils.is_url(file_name):
                 file_url = file_name
             else:
                 file_url = file_urls.get(file_name, None)
             if file_url is None:
-                raise InvalidRequestArgumentError(f"file {file_name} url does not exist")
+                raise InvalidRequestArgumentError(f"request format error, file {file_name} url does not exist")
             req = HandwriteOCRRequest()
             req.url = file_url
             req.recognize_granularity = "big"
             req.probability = "false"
             req.detect_direction = "true"
             req.detect_alteration = "true"
             response = self._recognize(req)
@@ -143,15 +143,15 @@
                     参数:
                        request (obj: `HandwriteOCRRequest`) : 通用文字识别输入参数
 
                    返回：
                        response (obj: `HandwriteOCRResponse`): 通用文字识别返回结果
                """
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError("request format error, one of image or url must be set")
         data = HandwriteOCRRequest.to_dict(request)
         if self.http_client.retry.total != retry:
             self.http_client.retry.total = retry
         headers = self.http_client.auth_header()
         headers['content-type'] = 'application/x-www-form-urlencoded'
         url = self.http_client.service_url("/v1/bce/aip/ocr/v1/handwriting")
         response = self.http_client.session.post(url, headers=headers, data=data, timeout=timeout)
```

## appbuilder/core/components/image_understand/component.py

```diff
@@ -94,19 +94,19 @@
         inp = ImageUnderstandInMsg(**message.content)
         request = ImageUnderstandRequest()
         if inp.raw_image:
             request.image = base64.b64encode(inp.raw_image)
         if inp.url:
             request.url = inp.url
         if inp.question == "":
-            raise ValueError("question is empty")
+            raise ValueError("request format error, question is empty")
         if len(inp.question) > 100:
-            raise ValueError("question length bigger than 100")
+            raise ValueError(f"request format error, expected len(question)>100, got {len(inp.question)}")
         if inp.language != "zh-CN" and inp.language != "en":
-            raise ValueError("illegal language:" + inp.language)
+            raise ValueError(f"request format error, expected language in ['zh-CN', 'en'], got {inp.language}")
         request.question = inp.question
         request.output_CHN = True
         if inp.language == "en":
             request.output_CHN = False
         response = self.__recognize(request, timeout, retry)
         out = ImageUnderstandOutMsg(description=response.result.description_to_llm)
         return Message(content=out.model_dump())
@@ -118,15 +118,15 @@
             参数:
                 request (obj: `ImageUnderstandRequest`) : 图像内容理解输入
 
             返回：
                 response (obj: `ImageUnderstandResponse`): 图像内容理解输出
         """
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError("request format error, one of image or url must be set")
         if retry != self.http_client.retry.total:
             self.http_client.retry.total = retry
         data = ImageUnderstandRequest.to_dict(request)
         headers = self.http_client.auth_header()
         headers['Content-Type'] = 'application/json'
         url = self.http_client.service_url("/v1/bce/aip/image-classify/v1/image-understanding/request")
         response = self.http_client.session.post(url, json=data, timeout=timeout, headers=headers)
```

## appbuilder/core/components/landmark_recognize/component.py

```diff
@@ -71,15 +71,15 @@
                 request (obj: `LandmarkRecognitionRequest`) : 地标识别输入参数
 
             返回：
                 response (obj: `LandmarkRecognitionResponse`): 地标识别返回结果
         """
 
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError("request format error, one of image or url must be set")
         data = LandmarkRecognitionRequest.to_dict(request)
         if retry != self.http_client.retry.total:
             self.http_client.retry.total = retry
         headers = self.http_client.auth_header()
         headers['content-type'] = 'application/x-www-form-urlencoded'
         url = self.http_client.service_url("/v1/bce/aip/image-classify/v1/landmark")
         response = self.http_client.session.post(url, data=data, timeout=timeout, headers=headers)
```

## appbuilder/core/components/llms/base.py

```diff
@@ -230,15 +230,15 @@
             renamed_list = []
             for result in result_list:
                 renamed_list.append({rename_fields[k]: v for k, v in result.items() if k in rename_fields})
             return renamed_list
         elif key == 'search_db':
             return result_list
         else:
-            raise TypeError(f"不支持的tools: {key}")
+            raise TypeError(f"illegal argument key, expected key in {'search_baidu','search_db'}, got {key}")
 
 
 class CompletionBaseComponent(Component):
     name: str
     version: str
     base_url: str = "/rpc/2.0/cloud_hub/v1/ai_engine/copilot_engine"
     model_name: str = ""
@@ -287,23 +287,23 @@
         super(CompletionBaseComponent, self).set_secret_key_and_gateway(
                 secret_key=secret_key, gateway=gateway)
         self.__class__.model_info = ModelInfo(client=self.http_client)
 
     @ttl_lru_cache(seconds_to_live=1 * 60 * 60) # 1h 
     def _check_model_and_get_model_url(self, model, model_type):
         if model and model in self.excluded_models:
-            raise ModelNotSupportedException(f"Model {model} not supported")
+            raise ModelNotSupportedException(f"unsupport model, epected model in {self.excluded_models}, got {model}")
         if not model:
-            raise ValueError("model_name must be provided")
+            raise ValueError("illegal argument, model_name can't be empty")
         if self.__class__.model_info is None:
             self.set_secret_key_and_gateway()
         m_type = self.model_info.get_model_type(model)
         if m_type != model_type:
             raise ModelNotSupportedException(
-                f"Model {model} with type [{m_type}] not supported, only support {model_type} type")
+                f"unsupport model_type for model {model}, expected model_type in {model_type}, got {m_type}")
 
         model_url = self.model_info.get_model_url(model)
         return model_url
 
     def gene_request(self, query, inputs, response_mode, message_id, model_config):
         """"send request"""
```

## appbuilder/core/components/llms/query_rewrite/component.py

```diff
@@ -122,21 +122,21 @@
         返回:
             obj:`Message`: 模型运行后的输出消息。
         
         """
 
 
         if message is None:
-            raise ValueError("输入消息不能为空")
+            raise ValueError("input message is required")
 
         sum_len = sum(len(item) for item in message.content)
         if len(message.content) > 10 or len(message.content) % 2 == 0:
-            raise ValueError("非法输入，目前支持5轮以下改写，合法输入列表元素个数为低于10的奇数、即1、3、5、9")
+            raise ValueError(f"illegal input，expected len(message.content) in {1,3,5,9}, got {len(message.content)}")
         if sum_len > 4000:
-            raise ValueError("非法输入，字符总长度不超过5000")
+            raise ValueError(f"illegal input, expected length <= 4000, got {sum_len}")
         if rewrite_type == "带机器人回复":
             converted_input = ''.join([f"{'User:' if i % 2 == 0 else 'Assistant:'}\
                                        {message.content[i]}\n" for i in range(len(message.content))])
         else:
             converted_input = ''.join([f"User1: {message.content[i]}\n" for i in range(0, len(message.content), 2)])
         message.content = converted_input
```

## appbuilder/core/components/mix_card_ocr/component.py

```diff
@@ -113,15 +113,15 @@
                 参数:
                     request (obj: `GeneralOCRRequest`) : 通用文字识别输入参数
 
                 返回：
                     response (obj: `GeneralOCRResponse`): 通用文字识别返回结果
                """
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError("request format error, one of image or url must be set")
         data = MixCardOCRRequest.to_dict(request)
         if self.http_client.retry.total != retry:
             self.http_client.retry.total = retry
         headers = self.http_client.auth_header()
         headers['content-type'] = 'application/x-www-form-urlencoded'
         url = self.http_client.service_url("/v1/bce/aip/ocr/v1/multi_idcard")
         response = self.http_client.session.post(url, headers=headers, data=data, timeout=timeout)
@@ -157,15 +157,15 @@
         file_urls = kwargs.get("file_urls", {})
         for file_name in file_names:
             if utils.is_url(file_name):
                 file_url = file_name
             else:
                 file_url = file_urls.get(file_name, None)
             if file_url is None:
-                raise InvalidRequestArgumentError(f"file {file_name} url does not exist")
+                raise InvalidRequestArgumentError(f"request format error, file {file_name} url does not exist")
 
             request = MixCardOCRRequest()
             request.url = file_url
             request.detect_risk = "false"
             request.detect_quality = "false"
             request.detect_photo = "false"
             request.detect_card = "false"
```

## appbuilder/core/components/object_recognize/component.py

```diff
@@ -108,15 +108,15 @@
         r"""调用底层接口进行通用物体与场景识别
                    参数:
                        request (obj: `ObjectRecognitionRequest`) : 通用物体与场景识别输入参数
                    返回：
                        response (obj: `ObjectRecognitionResponse`): 通用物体与场景识别返回结果
                """
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError("request format error, one of image or url must be set")
 
         data = ObjectRecognitionRequest.to_dict(request)
         if self.http_client.retry.total != retry:
             self.http_client.retry.total = retry
         headers = self.http_client.auth_header()
         headers['content-type'] = 'application/x-www-form-urlencoded'
         url = self.http_client.service_url("/v1/bce/aip/image-classify/v2/advanced_general")
@@ -150,19 +150,19 @@
         object_recognize for function call
         """
         img_url = kwargs.get("img_url", None)
         if not img_url:
             file_urls = kwargs.get("file_urls", {})
             img_path = kwargs.get("img_name", None)
             if not img_path:
-                raise InvalidRequestArgumentError("file name is not set")
+                raise InvalidRequestArgumentError("request format error, file name is not set")
             img_name = os.path.basename(img_path)
             img_url = file_urls.get(img_name, None)
             if not img_url:
-                raise InvalidRequestArgumentError(f"file {img_name} url does not exist")
+                raise InvalidRequestArgumentError(f"request format error, file {img_name} url does not exist")
         score_threshold = kwargs.get("score_threshold", 0.5)
         req = ObjectRecognitionRequest(url=img_url)
         result = proto.Message.to_dict(self._recognize(req))
         results = []
         for item in result["result"]:
             if item["score"] < score_threshold and len(results) > 0:
                 continue
```

## appbuilder/core/components/plant_recognize/component.py

```diff
@@ -121,15 +121,15 @@
             参数:
                 request (obj: `PlantRecognitionRequest`) : 植物识别输入参数
 
             返回：
                 response (obj: `PlantRecognitionResponse`): 植物识别返回结果
         """
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError("request format error, one of image or url must be set")
         data = PlantRecognitionRequest.to_dict(request)
         if retry != self.http_client.retry.total:
             self.http_client.retry.total = retry
         headers = self.http_client.auth_header()
         headers['content-type'] = 'application/x-www-form-urlencoded'
         url = self.http_client.service_url("/v1/bce/aip/image-classify/v1/plant")
         response = self.http_client.session.post(url, data=data, timeout=timeout, headers=headers)
```

## appbuilder/core/components/qrcode_ocr/component.py

```diff
@@ -92,15 +92,16 @@
         inp = QRcodeInMsg(**message.content)
         req = QRcodeRequest()
         if inp.raw_image:
             req.image = base64.b64encode(inp.raw_image)
         if inp.url:
             req.url = inp.url
         if not isinstance(location, str) or location not in ('true', 'false'):
-            raise InvalidRequestArgumentError("location must be a string with value 'true' or 'false'")
+            raise InvalidRequestArgumentError(
+                f"illegal location, expected location is 'true' or 'false', got {location}")
         req.location = location
         result = self._recognize(req, timeout, retry)
         result_dict = proto.Message.to_dict(result)
         out = QRcodeOutMsg(**result_dict)
         return Message(content=out.model_dump())
 
     def _recognize(self, request: QRcodeRequest, timeout: float = None,
@@ -108,24 +109,26 @@
         r"""调用二维码识别底层能力
                    参数:
                        request (obj: `QRcodeRequest`) : 二维码识别输入参数
                    返回：
                        response (obj: `QRcodeResponse`): 二维码识别返回结果
                """
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError(
+                "request format error, one of image or url must be set")
 
         data = QRcodeRequest.to_dict(request)
         if self.http_client.retry.total != retry:
             self.http_client.retry.total = retry
         headers = self.http_client.auth_header()
         headers['content-type'] = 'application/x-www-form-urlencoded'
         headers['Accept'] = 'application/json'
         url = self.http_client.service_url("/v1/bce/aip/ocr/v1/qrcode")
-        response = self.http_client.session.post(url, headers=headers, data=data, timeout=timeout)
+        response = self.http_client.session.post(
+            url, headers=headers, data=data, timeout=timeout)
         self.http_client.check_response_header(response)
         data = response.json()
         self.http_client.check_response_json(data)
         request_id = self.http_client.response_request_id(response)
         self.__class__._check_service_error(request_id, data)
         res = QRcodeResponse.from_json(json.dumps(data))
         res.request_id = request_id
@@ -156,22 +159,26 @@
         file_urls = kwargs.get("file_urls", {})
         for file_name in file_names:
             if utils.is_url(file_name):
                 file_url = file_name
             else:
                 file_url = file_urls.get(file_name, None)
             if file_url is None:
-                raise InvalidRequestArgumentError(f"file {file_name} url does not exist")
+                raise InvalidRequestArgumentError(
+                    f"request format error, file {file_name} url does not exist")
             req = QRcodeRequest()
             req.url = file_url
             if not isinstance(location, str) or location not in ("true", "false"):
-                raise InvalidRequestArgumentError("location must be a string with value 'true' or 'false'")
+                raise InvalidRequestArgumentError(
+                    f"illegal location, expected location is 'true' or 'false', got {location}"
+                )
             req.location = location
             resp = self._recognize(req)
-            result[file_name] = [item["text"] for item in proto.Message.to_dict(resp).get("codes_result", [])]
+            result[file_name] = [item["text"]
+                                 for item in proto.Message.to_dict(resp).get("codes_result", [])]
 
         result = json.dumps(result, ensure_ascii=False)
         if streaming:
             yield {
                 "type": "text",
                 "text": result,
                 "visible_scope": 'llm',
```

## appbuilder/core/components/rag_with_baidu_search/component.py

```diff
@@ -144,16 +144,15 @@
         temperature=1e-10, 
         top_p=1e-10,
     ):
         instruction_set = self.__get_instruction_set()
 
         # query 长度限制不能超过 72
         if len(message.content) > 72:
-            raise AppBuilderServerException(
-                    service_err_message="限制query长度不能超过72")
+            raise AppBuilderServerException(service_err_message="query is too long, expected <= 72, got {}".format(len(message.content)))
         
         instruction = instruction if instruction is not None else self.instruction
         reject = reject if reject is not None else self.reject
         clarify = clarify if clarify is not None else self.clarify
         highlight = highlight if highlight is not None else self.highlight
         friendly = friendly if friendly is not None else self.friendly
         cite = cite if cite is not None else self.cite
```

## appbuilder/core/components/retriever/baidu_vdb/baiduvdb_retriever.py

```diff
@@ -60,15 +60,16 @@
 
 
 def _try_import() -> None:
     try:
         import pymochow
     except ImportError:
         raise ImportError(
-            "`pymochow` package not found, please run `pip install pymochow`"
+            "pymochow module is not installed. "
+            "Please install it using 'pip install pymochow'."
         )
 
 
 class TableParams:
     """Baidu VectorDB table params.
     See the following documentation for details:
     https://cloud.baidu.com/doc/VDB/s/mlrsob0p6
@@ -329,15 +330,15 @@
         from pymochow.model.table import Row
 
         segment_vectors = self.embedding.batch(segments)
         segment_vectors = segment_vectors.content
         vector_dims = len(segment_vectors[0])
         segments = segments.content
         if len(segments) == 0:
-            raise ValueError("add_segments函数 参数segment 内容为空")
+            raise ValueError("segments is emtpty")
 
         rows = []
         for segment, vector in zip(segments, segment_vectors):
             row = Row(text=segment, vector=vector, metadata=metadata)
             rows.append(row)
         if len(rows) >= DEFAULT_BATCH_SIZE:
             self.collection.upsert(rows=rows)
@@ -469,15 +470,16 @@
         content = query.content
         if not isinstance(content, str):
             raise ValueError("Parameter `query` content is not a string, got: {}"
                              .format(type(content)))
         if len(content) == 0:
             raise ValueError("Parameter `query` content is empty")
         if len(content) > 512:
-            raise ValueError("Parameter `query` content is too long, max length per batch size is 512")
+            raise ValueError(
+                "Parameter `query` content is too long, max length per batch size is 512")
 
         query_embedding = self.embedding(query)
         anns = AnnSearch(
             vector_field=FIELD_VECTOR,
             vector_floats=query_embedding.content,
             params=HNSWSearchParams(ef=10, limit=top_k),
         )
```

## appbuilder/core/components/table_ocr/component.py

```diff
@@ -107,23 +107,25 @@
         r"""调用底层接口进行表格文字识别
                    参数:
                        request (obj: `TableOCRRequest`) : 表格文字识别输入参数
                    返回：
                        response (obj: `TableOCRResponse`): 表格文字识别返回结果
                """
         if not request.image and not request.url:
-            raise ValueError("one of image or url must be set")
+            raise ValueError(
+                "request format error, one of image or url must be set")
 
         data = TableOCRRequest.to_dict(request)
         if self.http_client.retry.total != retry:
             self.http_client.retry.total = retry
         headers = self.http_client.auth_header()
         headers['content-type'] = 'application/x-www-form-urlencoded'
         url = self.http_client.service_url("/v1/bce/aip/ocr/v1/table")
-        response = self.http_client.session.post(url, headers=headers, data=data, timeout=timeout)
+        response = self.http_client.session.post(
+            url, headers=headers, data=data, timeout=timeout)
         self.http_client.check_response_header(response)
         data = response.json()
         self.http_client.check_response_json(data)
         request_id = self.http_client.response_request_id(response)
         self.__class__._check_service_error(request_id, data)
         res = TableOCRResponse.from_json(json.dumps(data))
         res.request_id = request_id
@@ -182,15 +184,17 @@
         file_urls = kwargs.get("file_urls", {})
         for file_name in file_names:
             if utils.is_url(file_name):
                 file_url = file_name
             else:
                 file_url = file_urls.get(file_name, None)
             if file_url is None:
-                raise InvalidRequestArgumentError(f"file {file_name} url does not exist")
+                raise InvalidRequestArgumentError(
+                    f"request format error, file {file_name} url does not exist"
+                )
             req = TableOCRRequest()
             req.url = file_url
             req.cell_contents = "false"
             resp = self._recognize(req)
             tables_result = proto.Message.to_dict(resp)["tables_result"]
             markdowns = self.get_table_markdown(tables_result)
             result[file_name] = markdowns
```

## appbuilder/core/components/text_to_image/component.py

```diff
@@ -101,15 +101,15 @@
                     # NOTE(chengmo)：文生图组件的返回时间在10s以上，查询过于频繁会被限流，导致异常报错
                     # 此处采用 yangyongzhen老师提供的方案，前三次查询间隔3s，后三次查询间隔逐渐增大
                     if task_request_time <= 3:
                         time.sleep(3)
                     else:
                         time.sleep(task_request_time)
                     task_request_time += 1
-                    
+
             img_urls = self.extract_img_urls(text2ImageQueryResponse)
             out = Text2ImageOutMessage(img_urls=img_urls)
             return Message(content=out.model_dump())
 
     @HTTPClient.check_param
     def submitText2ImageTask(self, request: Text2ImageSubmitRequest, timeout: float = None,
                              retry: int = 0) -> Text2ImageSubmitResponse:
@@ -203,18 +203,18 @@
         """
         query = kwargs.get("query", "")
         if not query:
             query = origin_query
         try:
             result = self.run(Message({"prompt": query}))
         except Exception as e:
-            raise AppBuilderServerException(f'绘图服务发生错误：{e}')
+            raise AppBuilderServerException(f'service error when text to image：{e}')
 
         if len(result.content['img_urls']) == 0:
-            raise RiskInputException(f'query：{query} 中可能存在敏感词')
+            raise RiskInputException(f"query：{query} may exists sensitive words")
 
         result = {
             'event': 'image',
             'type': 'image',
             'text': result.content['img_urls'][0],
         }
         if streaming:
```

## appbuilder/core/components/tts/component.py

```diff
@@ -92,26 +92,28 @@
                 timeout (float, 可选): HTTP超时时间
                 retry (int, 可选)： HTTP重试次数
 
               返回:
                  message (obj: `Message`): 文本转语音结果. 举例: Message(content={"audio_binary": b"xxx", "audio_type": "mp3"})
         """
         if model != self.Baidu_TTS and model != self.PaddleSpeech_TTS:
-            raise InvalidRequestArgumentError("unsupported model {}".format(model))
+            raise InvalidRequestArgumentError(
+                f"unsupported model {model}, expected model in {'baidu-tts', 'paddlespeech-tts'}"
+            )
         self.model = model
         inp = TTSInMsg(**message.content)
         if len(inp.text) == 0:
-            raise InvalidRequestArgumentError("text field is empty")
+            raise InvalidRequestArgumentError("request format error, text field is empty")
         if model == self.Baidu_TTS and (stream or audio_type not in ["mp3", "wav"]):
-            raise InvalidRequestArgumentError("Baidu_TTS argument error")
+            raise InvalidRequestArgumentError("Baidu_TTS argument error, expected audio type in {'mp3', 'wav'}")
         elif model == self.PaddleSpeech_TTS:
             if stream and audio_type != "pcm":
-                raise InvalidRequestArgumentError("Invalid audio type")
+                raise InvalidRequestArgumentError("Invalid audio type, expected audio type is {'pcm'}")
             elif not stream and audio_type != "wav":
-                raise InvalidRequestArgumentError("Invalid audio type")
+                raise InvalidRequestArgumentError("Invalid audio type, expected audio type is {'wav'}")
 
         request = TTSRequest()
         request.tex = inp.text
         request.spd = speed
         request.pit = pitch
         request.vol = volume
         request.per = person
@@ -215,8 +217,7 @@
             if chunk.startswith('data:'):
                 chunk = chunk.replace('data: ', '')
                 yield base64.b64decode(chunk)
     except Exception as e:
         raise AppBuilderServerException(request_id=request_id, message=traceback.format_exc())
     finally:
         response.close()
-
```

## appbuilder/core/components/tts/model.py

```diff
@@ -107,27 +107,29 @@
         if self.vol < 0 or self.vol > 15:
             raise ValueError("vol value must in [0,15]")
 
     def validate_baidu_tts(self):
         """检查baidu-tts模型请求参数"""
         self.__validate()
         if self.per not in {0, 1, 3, 4, 5, 103, 106, 110, 111, 5003, 5118}:
-            raise ValueError("per value is illegal")
+            raise ValueError(
+                f"per value is illegal, exepcted in {0, 1, 3, 4, 5, 103, 106, 110, 111, 5003, 5118}, got {self.per}"
+            )
         if self.aue == 0:
             self.aue = 3
         if self.aue not in {3, 4, 5, 6}:
-            raise ValueError("aue value is illegal")
+            raise ValueError(f"aue value is illegal, exepect in {3, 4, 5, 6}, got {self.aue}")
 
     def validate_paddle_speech_tts(self):
         """验证参数是否合法"""
         self.__validate()
         if self.aue == 0:
             self.aue = 6
         if self.aue not in {6}:
-            raise ValueError("aue value is illegal")
+            raise ValueError("aue value is illegal, expectd aue value is 6, got{}".format(self.aue))
 
 
 class TTSResponse(proto.Message):
     r"""文本转语音返回.
 
          属性:
              binary (bytes): 语音二进制流.
```

## appbuilder/core/console/base.py

```diff
@@ -37,62 +37,36 @@
     def __init__(self, response, stream: bool = False):
         """初始化客户端状态。"""
         super().__init__(response, stream)
         self.error_no = 0
         self.error_msg = ""
         self.log_id = response.headers.get("X-Appbuilder-Request-Id", None)
         self.extra = {}
-
-        if stream:
-            # 流式数据处理
-            def stream_data():
-                sse_client = SSEClient(response)
-                for event in sse_client.events():
-                    if not event:
-                        continue
-                    answer = self.parse_stream_data(event)
-                    if answer is not None:
-                        yield answer
-
-            self.result = stream_data()
-        else:
-            # 非流式数据的处理
-            if response.status_code != 200:
-                self.error_no = response.status_code
-                self.error_msg = "error"
-                self.result = response.text
-
-                raise AppBuilderServerException(self.log_id, self.error_no, self.result)
-
-            else:
-                data = response.json()
-
-                if "code" in data and data.get("code") != 0:
-                    raise AppBuilderServerException(self.log_id, data["code"], data["message"])
-
-                if "code" in data and "message" in data and "requestId" in data:
-                    raise AppBuilderServerException(self.log_id, data["code"], data["message"])
-
-                if "code" in data and "message" in data and "status" in data:
-                    raise AppBuilderServerException(self.log_id, data["code"], data["message"])
-
-                self.result = data.get("result").get("answer", None)
-                self.conversation_id = data.get("result").get("conversation_id", "")
-                content = data.get("result").get("content", None)
-                if content:
-                    for item in content:
-                        if item.get("content_type") == "references":
-                            references = item.get("outputs").get("references")
-                            if references:
-                                for ref in references:
-                                    key = ref["from"]
-                                    if key in self.extra.keys():
-                                        self.extra[key].append(ref)
-                                    else:
-                                        self.extra[key] = [ref]
+        
+        if not stream:
+        
+            data = response.json()
+
+            if "code" in data and data.get("code") != 0:
+                raise AppBuilderServerException(self.log_id, data["code"], data["message"])
+
+            self.result = data.get("result").get("answer", None)
+            self.conversation_id = data.get("result").get("conversation_id", "")
+            content = data.get("result").get("content", None)
+            if content:
+                for item in content:
+                    if item.get("content_type") == "references":
+                        references = item.get("outputs").get("references")
+                        if references:
+                            for ref in references:
+                                key = ref["from"]
+                                if key in self.extra.keys():
+                                    self.extra[key].append(ref)
+                                else:
+                                    self.extra[key] = [ref]
 
     def message_iterable_wrapper(self, message):
         """
         对模型输出的 Message 对象进行包装。
         当 Message 是流式数据时，数据被迭代完后，将重新更新 content 为 blocking 的字符串。
         """
```

## appbuilder/core/console/appbuilder_client/appbuilder_client.py

```diff
@@ -19,18 +19,19 @@
 from appbuilder.core.component import Message, Component
 from appbuilder.core.console.appbuilder_client import data_class
 from appbuilder.core._exception import AppBuilderServerException
 from appbuilder.utils.sse_util import SSEClient
 from appbuilder.utils.func_utils import deprecated
 from appbuilder.utils.logger_util import logger
 
+
 class AppBuilderClient(Component):
     r"""
-       AppBuilderClient 组件支持调用在[百度智能云千帆AppBuilder](https://cloud.baidu.com/product/AppBuilder)平台上
-       构建并发布的智能体应用，具体包括创建会话、上传文档、运行对话等。
+    AppBuilderClient 组件支持调用在[百度智能云千帆AppBuilder](https://cloud.baidu.com/product/AppBuilder)平台上
+    构建并发布的智能体应用，具体包括创建会话、上传文档、运行对话等。
         Examples:
         ... code-block:: python
             import appbuilder
             # 请前往千帆AppBuilder官网创建密钥，流程详见：https://cloud.baidu.com/doc/AppBuilder/s/Olq6grrt6#1%E3%80%81%E5%88%9B%E5%BB%BA%E5%AF%86%E9%92%A5
             os.environ["APPBUILDER_TOKEN"] = '...'
             # 可在Console 应用页面获取
             app_id = "app_id"
@@ -62,15 +63,16 @@
                     无
                 返回：
                     response (str: ): 唯一会话ID
         """
         headers = self.http_client.auth_header_v2()
         headers["Content-Type"] = "application/json"
         url = self.http_client.service_url_v2("/v2/app/conversation")
-        response = self.http_client.session.post(url, headers=headers, json={"app_id": self.app_id}, timeout=None)
+        response = self.http_client.session.post(
+            url, headers=headers, json={"app_id": self.app_id}, timeout=None)
         self.http_client.check_response_header(response)
         data = response.json()
         resp = data_class.CreateConversationResponse(**data)
         return resp.conversation_id
 
     def upload_local_file(self, conversation_id, local_file_path: str) -> str:
         r"""上传文件并将文件与会话ID进行绑定，后续可使用该文件ID进行对话，目前仅支持上传xlsx、jsonl、pdf、png等文件格式
@@ -78,58 +80,63 @@
                     conversation_id (str: 必须) : 会话ID
                     local_file_path (str: 必须) : 本地文件路径
                 返回：
                     response (str: ): 唯一文件ID
             """
 
         if len(conversation_id) == 0:
-            raise ValueError("conversation_id is empty")
+            raise ValueError(
+                "conversation_id is empty, you can run self.create_conversation to get a conversation_id")
         multipart_form_data = {
             'file': (os.path.basename(local_file_path), open(local_file_path, 'rb')),
             'app_id': (None, self.app_id),
             'conversation_id': (None, conversation_id),
         }
         headers = self.http_client.auth_header_v2()
-        url = self.http_client.service_url_v2("/v2/app/conversation/file/upload")
-        response = self.http_client.session.post(url, files=multipart_form_data, headers=headers)
+        url = self.http_client.service_url_v2(
+            "/v2/app/conversation/file/upload")
+        response = self.http_client.session.post(
+            url, files=multipart_form_data, headers=headers)
         self.http_client.check_response_header(response)
         data = response.json()
         resp = data_class.FileUploadResponse(**data)
         return resp.id
 
     def run(self, conversation_id: str,
             query: str,
             file_ids: list = [],
             stream: bool = False,
             ) -> Message:
-
         r""" 动物识别
                 参数:
                     query (str: 必须): query内容
                     conversation_id (str, 必须): 唯一会话ID，如需开始新的会话，请使用self.create_conversation创建新的会话
                     file_ids(list[str], 可选):
                     stream (bool, 可选): 为True时，流式返回，需要将message.content.answer拼接起来才是完整的回答；为False时，对应非流式返回
                 返回: message (obj: `Message`): 对话结果.
         """
 
         if len(conversation_id) == 0:
-            raise ValueError("conversation_id is empty")
+            raise ValueError(
+                "conversation_id is empty, you can run self.create_conversation to get a conversation_id"
+            )
 
         req = data_class.AppBuilderClientRequest(
             app_id=self.app_id,
             conversation_id=conversation_id,
             query=query,
             stream=True if stream else False,
             file_ids=file_ids,
         )
 
         headers = self.http_client.auth_header_v2()
         headers["Content-Type"] = "application/json"
         url = self.http_client.service_url_v2("/v2/app/conversation/runs")
-        response = self.http_client.session.post(url, headers=headers, json=req.model_dump(), timeout=None, stream=True)
+        response = self.http_client.session.post(
+            url, headers=headers, json=req.model_dump(), timeout=None, stream=True)
         self.http_client.check_response_header(response)
         request_id = self.http_client.response_request_id(response)
         if stream:
             client = SSEClient(response)
             return Message(content=self._iterate_events(request_id, client.events()))
         else:
             data = response.json()
@@ -167,25 +174,26 @@
 class AgentBuilder(AppBuilderClient):
     @deprecated
     def __init__(self, app_id: str):
         """
         初始化方法，用于创建一个新的实例对象。
 
         为了避免歧义，减少用户上手门槛，推荐使用该类调用AgentBuilder
-        
+
         Args:
             app_id (str): 应用程序的唯一标识符。
-        
+
         Returns:
             None
-        
+
         """
         logger.info("AgentBuilder is deprecated, please use AppBuilderClient instead")
         super().__init__(app_id)
 
+
 def _transform(inp: data_class.AppBuilderClientResponse, out: data_class.AppBuilderClientAnswer):
     out.answer = inp.answer
     for ev in inp.content:
         event = data_class.Event(
             code=ev.event_code,
             message=ev.event_message,
             status=ev.event_status,
```

## appbuilder/core/console/dataset/dataset.py

```diff
@@ -87,15 +87,15 @@
             file_type = file_path.split(".")[-1].lower()
             if file_type not in SUPPORTED_FILE_TYPE:
                 raise ValueError(f"Unsupported file type: {file_path}, only support file types: {SUPPORTED_FILE_TYPE}")
 
         documents = self.get_documents(1, MAX_DOCUMENTS_NUM)
         current_documents_num = len(documents.data)
         if len(file_path_list) + current_documents_num > MAX_DOCUMENTS_NUM:
-            raise ValueError(f"单个数据集可上传数量上限为{MAX_DOCUMENTS_NUM}，目前最大还可上传{MAX_DOCUMENTS_NUM-current_documents_num}份文档")
+            raise ValueError(f"too much documents. at most upload {MAX_DOCUMENTS_NUM} documents per dataset，left {MAX_DOCUMENTS_NUM-current_documents_num} documents can be uploaded")
 
         file_ids = []
         for file_path in file_path_list:
             upload_res = self._upload_document(file_path)
             file_ids.append(upload_res["id"])
         payload = {"dataset_id": self.dataset_id, "file_ids": file_ids,
                    "is_custom_process_rule": is_custom_process_rule, "is_enhanced": is_enhanced}
```

## appbuilder/tests/test_agent.py

```diff
@@ -1,58 +1,156 @@
+import os
+import sys
+import subprocess
 import unittest
 import pydantic
-import os
 import appbuilder
+from appbuilder.core.component import Component
+from appbuilder import (
+    AgentRuntime,
+    Message,
+    Playground,
+    AppBuilderClient
+)
 
-@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
+
+@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_SERIAL", "")
 class TestAgentRuntime(unittest.TestCase):
     def setUp(self):
         """
         设置环境变量。
 
         Args:
             无参数，默认值为空。
 
         Returns:
             无返回值，方法中执行了环境变量的赋值操作。
         """
-        pass
+        self.app_id = "aa8af334-df27-4855-b3d1-0d249c61fc08"
+
+    def test_no_token_http(self):
+        """ 测试http """
+        component = appbuilder.Playground(
+            prompt_template="{query}",
+            model="ERNIE-3.5-8K",
+            lazy_certification=True,
+        )
+        agent = appbuilder.AgentRuntime(component=component)
+        app = agent.create_flask_app(url_rule="/chat")
+        app.config['TESTING'] = True
+        client = app.test_client()
+        
+        payload = {
+            "message": {"query": "你好"},
+            "stream": False
+        }
+        headers = {}
+        response = client.post('/chat', json=payload, headers=headers)
+        self.assertNotEqual(response.json.get('code'), 0)
+  
+    def test_err_http(self):
+        """ 测试http """
+        component = appbuilder.Playground(
+            prompt_template="{query}",
+            model="ERNIE-3.5-8K",
+            lazy_certification=True,
+        )
+        agent = appbuilder.AgentRuntime(component=component)
+        app = agent.create_flask_app(url_rule="/chat")
+        app.config['TESTING'] = True
+        client = app.test_client()
+        
+        payload = {
+            "message": {"query": "你好"},
+            "stream": False
+        }
+        headers = {
+            "X-Appbuilder-Authorization": "...",
+            "X-Appbuilder-Token": "..."
+        }
+        response = client.post('/chat', json=payload, headers=headers)
+        self.assertNotEqual(response.json.get('code'), 0)
+        
 
+    def test_http(self):
+        """ 测试http """
+        component = appbuilder.Playground(
+            prompt_template="{query}",
+            model="ERNIE-3.5-8K",
+            lazy_certification=True,
+        )
+        agent = appbuilder.AgentRuntime(component=component)
+        app = agent.create_flask_app(url_rule="/chat")
+        app.config['TESTING'] = True
+        client = app.test_client()
+        
+        payload = {
+            "message": {"query": "你好"},
+            "stream": False
+        }
+        headers = {
+            "X-Appbuilder-Authorization": os.environ.get("APPBUILDER_TOKEN", ""),
+            "X-Appbuilder-Token": os.environ.get("APPBUILDER_TOKEN", "")
+        }
+        response = client.post('/chat', json=payload, headers=headers)
+        self.assertEqual(response.status_code, 200)
+        self.assertEqual(response.json.get('code'), 0)
+        
     def test_init_with_valid_component(self):
         """ 测试在component有效时运行 """
-        component = appbuilder.Playground(
+        component = Playground(
             prompt_template="{query}",
             model="eb-4"
         )
-        agent = appbuilder.AgentRuntime(component=component)
-    
+        agent = AgentRuntime(component=component)
+
     def test_init_with_invalid_component(self):
         """ 测试在component非法时运行 """
         component = "invalid_component"
         with self.assertRaises(pydantic.ValidationError):
-            agent = appbuilder.AgentRuntime(component=component)
+            agent = AgentRuntime(component=component)
 
     def test_chat_with_valid_message_and_blocking(self):
         """ 测试在消息有效时处理 """
-        component = appbuilder.Playground(
+        component = Playground(
             prompt_template="{query}",
             model="eb-4"
         )
         agent = appbuilder.AgentRuntime(component=component)
         message = appbuilder.Message({"query": "你好"})
         answer = agent.chat(message, stream=False)
         self.assertIs(type(answer.content), str)
 
     def test_chat_with_valid_message_and_streaming(self):
         """ 测试在消息有效时处理 """
-        component = appbuilder.Playground(
+        component = Playground(
             prompt_template="{query}",
             model="eb-4"
         )
-        agent = appbuilder.AgentRuntime(component=component)
-        message = appbuilder.Message({"query": "你好"})
+        agent = AgentRuntime(component=component)
+        message = Message({"query": "你好"})
         answer = agent.chat(message, stream=True)
         for it in answer.content:
             self.assertIs(type(it), str)
 
+    def test_chainlit_agent_component_error(self):
+        """ 测试chainlit agent组件错误 """
+        component = Component()
+        agent = AgentRuntime(component=component)
+        subprocess.check_call(
+            [sys.executable, "-m", "pip", "uninstall", "-y", "chainlit"]
+        )
+        with self.assertRaises(ImportError):
+            agent.chainlit_agent()
+        subprocess.check_call(
+            [sys.executable, "-m", "pip", "install", "chainlit~=1.0.200"]
+        )
+        with self.assertRaises(ValueError):
+            agent.chainlit_agent()
+        os.environ["APPBUILDER_RUN_CHAINLIT"] = "1"
+        agent_builder = AppBuilderClient(self.app_id)
+        agent = AgentRuntime(component=agent_builder)
+        agent.chainlit_agent()
+
+
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_appbuilder_client.py

```diff
@@ -15,15 +15,15 @@
 
         Returns:
             无返回值，方法中执行了环境变量的赋值操作。
         """
         self.app_id = "aa8af334-df27-4855-b3d1-0d249c61fc08"
 
     def test_agent_builder_client(self):
-        agent_builder = appbuilder.AgentBuilder(self.app_id)
+        agent_builder = appbuilder.AppBuilderClient(self.app_id)
 
     def test_agent_builder_run(self):
         # 如果app_id为空，则跳过单测执行, 避免单测因配置无效而失败
         """
         如果app_id为空，则跳过单测执行, 避免单测因配置无效而失败
     
         Args:
@@ -36,23 +36,21 @@
         if len(self.app_id) == 0:
             self.skipTest("self.app_id is empty")
     
         builder = appbuilder.AppBuilderClient(self.app_id)
         conversation_id = builder.create_conversation()
         msg = builder.run(conversation_id, "你可以做什么？")
         print(msg)
-        # with tempfile.NamedTemporaryFile(suffix=".png") as fp:
-        #     # 上传植物图片
-        #     img_url = ("https://bj.bcebos.com/v1/appbuilder/test_agent_builder_tr"
-        #                "ee.png?authorization=bce-auth-v1%2FALTAKGa8m4qCUasgoljdEDAzL"
-        #                "m%2F2024-03-20T08%3A03%3A16Z%2F-1%2Fhost%2F8227f2bb97928b1957a9a6"
-        #                "c14c4e307ef195d18ec68b22764158690cecbd9fc7")
-        #     raw_image = requests.get(img_url).content
-        #     fp.write(raw_image)
-        #     file_id = agent_builder.upload_local_file(conversation_id, fp.name)
-        #     msg = agent_builder.run(conversation_id, "请识别图中的植物类别", file_ids=[file_id])
-        #     print("助理回答内容：", msg.content.answer)
-        #     fp.close()
+        respid = builder.upload_local_file(conversation_id, "./data/qa_appbuilder_client_demo.pdf")
+        print(respid)
+        
+    def test_upload_local_file_raise(self):
+        builder = appbuilder.AppBuilderClient(self.app_id)
+        with self.assertRaises(ValueError):
+            builder.upload_local_file(conversation_id='', local_file_path='')
+            
+        with self.assertRaises(ValueError):
+            builder.run(conversation_id='', query='')
 
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_assistant_class_assistans.py

```diff
@@ -7,56 +7,159 @@
     def setUp(self):
         os.environ["APPBUILDER_TOKEN"] = os.environ["APPBUILDER_TOKEN_V2"]
 
     def test_assistants_create_v1(self):
         from appbuilder.core.assistant.type import assistant_type
 
         assistant = appbuilder.assistant.assistants.create(
+            model = "ERNIE-4.0-8K",
             name="Abc-_123",
             description="test",
         )
 
         self.assertIsInstance(assistant, assistant_type.AssistantCreateResponse)
         self.assertEqual(assistant.name, "Abc-_123")
         self.assertEqual(assistant.description, "test")
 
 
     def test_assistants_create_v2(self):
         try:
             appbuilder.assistant.assistants.create(
+                model = "ERNIE-4.0-8K",
                 name="Abc-_123@",
                 description="test"*512,
                 response_format="other",
                 instructions="test"*4096,
                 thought_instructions="test"*4096,
                 chat_instructions="test"*4096,
                 file_ids=["test"]*11,
             )
         except Exception as e:
             self.assertEqual(e.error_count(), 7)
 
     def test_assistants_create_v3(self):
         try:
             appbuilder.assistant.assistants.create(
+                model = "ERNIE-4.0-8K",
                 name="Abc-_123",
                 description="test",
                 metadata={
                     "key" * 64 : "value" * 512
                 }
             )
         except Exception as e:
             self.assertIn("metadata", e.description)
 
-    def test_assistants_create_v4(self):
-        try:
-            appbuilder.assistant.assistants.create(
-                name="Abc-_123",
-                description="test",
-                assistant_id="12345dsdfg"
-            )
-        except Exception as e:
-            print(e)
-            self.assertIn("业务逻辑异常", e.description)
             
+    def test_Assistant(self):
+        from appbuilder.core.assistant.type import assistant_type
+        assistant = appbuilder.assistant.assistants.create(
+            model = "ERNIE-4.0-8K",
+            name="Abc-_123",
+            description="test",
+        )
+        
+        # test assistant update
+        assistant_update = appbuilder.assistant.assistants.update(
+            assistant_id = assistant.id,
+            model="ERNIE-4.0-8K",
+            name="Test_Name",
+            description = "test"
+        )
+        self.assertIsInstance(assistant_update, assistant_type.AssistantUpdateResponse)
+        
+        # test assistant list
+        assistant_list = appbuilder.assistant.assistants.list()
+        self.assertIsInstance(assistant_list, assistant_type.AssistantListResponse)
+        
+        # test assistant query
+        assistant_query = appbuilder.assistant.assistants.query(
+            assistant_id = assistant.id,
+        )
+        self.assertIsInstance(assistant_query, assistant_type.AssistantQueryResponse)
+        
+        # test assistant mount_files
+        # create file
+        file_path = "./data/qa_doc_parser_extract_table_from_doc.png"
+        file = appbuilder.assistant.assistants.files.create(file_path=file_path)
+        with self.assertRaises(FileNotFoundError):
+            appbuilder.assistant.assistants.mount_files(
+                assistant_id = assistant.id,
+                file_id = "test_not_exist",
+            )
+        assistant_mount = appbuilder.assistant.assistants.mount_files(
+            assistant_id = assistant.id,
+            file_id = file.id,
+        )
+        self.assertIsInstance(assistant_mount, assistant_type.AssistantFilesResponse)
+        
+        # test assistant files list
+        assistant_files_list = appbuilder.assistant.assistants.mounted_files_list(
+            assistant_id = assistant.id,
+        )
+        self.assertIsInstance(assistant_files_list, assistant_type.AssistantMountedFilesListResponse)
+        self.assertEqual(len(assistant_files_list.data), 1)
+        
+        # test assistant unmount_files
+        with self.assertRaises(FileNotFoundError):
+            appbuilder.assistant.assistants.unmount_files(
+                assistant_id = assistant.id,
+                file_id = "test_not_exist",
+            )
+        assistant_files_delete = appbuilder.assistant.assistants.unmount_files(
+            assistant_id = assistant.id,
+            file_id = file.id,
+        )
+        self.assertIsInstance(assistant_files_delete, assistant_type.AssistantFilesDeleteResponse)
+        
+        # test assistant delete
+        assistant_delete = appbuilder.assistant.assistants.delete(
+            assistant_id = assistant.id,
+        )
+        self.assertIsInstance(assistant_delete, assistant_type.AssistantDeleteResponse)
+        
+    def test_unmote_raise(self):
+        with self.assertRaises(TypeError):
+            appbuilder.assistant.assistants.unmount_files(
+                assistant_id = "test",
+                file_id = 123,
+            )
+        with self.assertRaises(TypeError):
+            appbuilder.assistant.assistants.unmount_files(
+                assistant_id = 123,
+                file_id = "test",
+            )
+        with self.assertRaises(ValueError):
+            appbuilder.assistant.assistants.unmount_files(
+                assistant_id = "",
+                file_id = "test",
+            )
+        with self.assertRaises(ValueError):
+            appbuilder.assistant.assistants.unmount_files(
+                assistant_id = "test",
+                file_id = "",
+            )
+
+    def test_mount_raise(self):
+        with self.assertRaises(TypeError):
+            appbuilder.assistant.assistants.mount_files(
+                assistant_id = "test",
+                file_id = 123,
+            )
+        with self.assertRaises(TypeError):
+            appbuilder.assistant.assistants.mount_files(
+                assistant_id = 123,
+                file_id = "test",
+            )
+        with self.assertRaises(ValueError):
+            appbuilder.assistant.assistants.mount_files(
+                assistant_id = "",
+                file_id = "test",
+            )
+        with self.assertRaises(ValueError):
+            appbuilder.assistant.assistants.mount_files(
+                assistant_id = "test",
+                file_id = "",
+            )
 
 if __name__ == '__main__':
     unittest.main()
```

### encoding

```diff
@@ -1 +1 @@
-utf-8
+us-ascii
```

## appbuilder/tests/test_assistant_class_messages.py

```diff
@@ -1,11 +1,13 @@
 import unittest
 import os
 import appbuilder
 
+from appbuilder.core._exception import AssistantServerException
+
 @unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_SERIAL", "")
 class TestMessageCreate(unittest.TestCase):
     def setUp(self):
         os.environ["APPBUILDER_TOKEN"] = os.environ["APPBUILDER_TOKEN_V2"]
 
     def test_messages_create_v1(self):
         from appbuilder.core.assistant.type import thread_type
@@ -28,9 +30,49 @@
                 content="hello world",
                 role='custom',
                 file_ids=["file_id"]*11
             )
         except Exception as e:
             self.assertEqual(e.error_count(), 2)
 
+        
+    def test_messages(self):
+        from appbuilder.core.assistant.type import thread_type
+        thread = appbuilder.assistant.threads.create()
+        msg = appbuilder.assistant.threads.messages.create(
+            thread_id=thread.id,
+            content="hello world?"
+        )
+
+        # test list
+        msg_list = appbuilder.assistant.threads.messages.list(
+            thread_id=msg.thread_id,
+            limit=1
+        ) 
+        self.assertIsInstance(msg_list, thread_type.AssistantMessageListResponse)  
+        
+        # test query
+        msg_query = appbuilder.assistant.threads.messages.query(
+            thread_id=msg.thread_id,
+            message_id=msg.id
+        )
+        self.assertIsInstance(msg_query, thread_type.AssistantMessageQueryResponse)  
+            
+        # test update
+        msg_update= appbuilder.assistant.threads.messages.update(
+            thread_id=msg.thread_id,
+            message_id=msg.id,
+            content='你好'
+        )
+        self.assertIsInstance(msg_update, thread_type.AssistantMessageUpdateResponse)  
+            
+        # test file
+        msg_files = appbuilder.assistant.threads.messages.files(
+            thread_id=msg_update.thread_id,
+            message_id=msg_update.id,
+            limit=1
+        )
+        self.assertIsInstance(msg_files, thread_type.AssistantMessageFilesResponse)  
+
+
 if __name__ == '__main__':
     unittest.main()
```

### encoding

```diff
@@ -1 +1 @@
-us-ascii
+utf-8
```

## appbuilder/tests/test_assistant_class_runs.py

```diff
@@ -57,9 +57,14 @@
         )
 
         with self.assertRaises(ValueError):
             appbuilder.assistant.threads.runs.run(
                 assistant_id=assistant.id,
             )
 
+    def test_threads_run_raise(self):
+        run=appbuilder.core.assistant.threads.runs.runs.Runs()
+        with self.assertRaises(ValueError):
+            run._stream(assistant_id='')
+
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_assistant_class_threads.py

```diff
@@ -25,10 +25,36 @@
         from appbuilder.core.assistant.type import thread_type
         message = thread_type.AssistantMessage(
             content="hello world"
         )
 
         with self.assertRaises(ValueError):
             appbuilder.assistant.threads.create(message)
+            
+    def test_threads_query_delete(self):
+        from appbuilder.core.assistant.type import thread_type
+        message = thread_type.AssistantMessage(
+            content="hello world"
+        )
+        thread = appbuilder.assistant.threads.create([message])
+        
+        # test query
+        thr_query = appbuilder.assistant.threads.query(thread_id=thread.id)
+        self.assertIsInstance(thr_query, thread_type.ThreadQueryResponse)
+        
+        # test update
+        with self.assertRaises(TypeError):
+            appbuilder.assistant.threads.update(thread_id=thread.id,metadata=123)
+        with self.assertRaises(ValueError):
+            appbuilder.assistant.threads.update(thread_id=thread.id,metadata={'finish_reason'*10:'513value'})
+        with self.assertRaises(ValueError):
+            appbuilder.assistant.threads.update(thread_id=thread.id,metadata={'finish_reason':'513value'*64+'A'})
+        thr_update = appbuilder.assistant.threads.update(thread_id=thread.id)
+        self.assertIsInstance(thr_update, thread_type.ThreadUpdateResponse)
+        
+        # test delete
+        thr_delete = appbuilder.assistant.threads.delete(thread_id=thread.id)
+        self.assertIsInstance(thr_delete, thread_type.ThreadDeleteResponse)
+
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_console_dataset.py

```diff
@@ -8,45 +8,62 @@
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 import os
+import uuid
+import time
 
 import unittest
 import appbuilder
+from appbuilder.core._client import HTTPClient
 
-@unittest.skip(reason="数据集问题")
+# @unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
 class TestDataset(unittest.TestCase):
-
+    def setUp(self):
+        self.dataset_id = os.getenv("DATASET_ID", "UNKNOWN")
+    
     @classmethod
     def setUpClass(cls):
         # 获取当前文件所在的目录路径
         cls.current_dir = os.path.dirname(__file__)
         cls.test_pdf_path = os.path.join(cls.current_dir, 'test.pdf')
 
+    def test_create_dataset(self):
+        # test_dataset
+        dataset_name = "baidu-test"+str(int(time.time()))
+        dataset_id=str(uuid.uuid4())
+        dataset = appbuilder.console.Dataset(dataset_id=dataset_id, dataset_name=dataset_name)
+        dataset.create_dataset
+        http_result=dataset.http_client
+        self.assertIsInstance(http_result, HTTPClient)
+    
     def test_dataset(self):
-        # 创建知识库
-        dataset = appbuilder.console.Dataset.create_dataset("baidu-test")
+        # 初始化数据库
+        dataset = appbuilder.console.Dataset(
+            dataset_id=self.dataset_id,
+            dataset_name="勿删-appbuilder-sdk测试数据集"
+        )
         self.assertIsNotNone(dataset.dataset_id)
 
         # 上传文档
         file_paths = [self.test_pdf_path]
         document_infos = dataset.add_documents(file_paths)
         self.assertEqual(len(document_infos.document_ids), 1)
 
         # 获取第一页的文档列表, 每页10条
         file_list = dataset.get_documents(1, 10)
-        self.assertEqual(file_list.total, 1)
+        self.assertIsInstance(file_list.total, int)
 
         # 删除文档
         file_ids = [document_infos.document_ids[0]]
         dataset.delete_documents(file_ids)
 
         # 获取第一页的文档列表, 每页10条
         document_list = dataset.get_documents(1, 10)
-        self.assertEqual(document_list.total, 0)
+        self.assertIsInstance(document_list.total, int)
 
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_console_rag.py

```diff
@@ -11,22 +11,27 @@
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 import unittest
 import appbuilder
 import os
 
-@unittest.skip("TimeOut")
+from appbuilder.core.console.rag.rag import RAG
+
+@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_SERIAL", "")
 class TestRag(unittest.TestCase):
 
     def setUp(self):
         self.app_id = "06e3f5c9-885d-4f85-af57-97dc85ee4606"
 
     def test_rag(self):
-        rag_app = appbuilder.console.RAG(self.app_id)
+        rag_app = RAG(self.app_id)
         query = "写一个200字作文，主题关于百度AI"
         answer = rag_app.run(appbuilder.Message(query))
         self.assertIsNotNone(answer.content)
+        
+        # test debug
+        rag_app.debug(appbuilder.Message(query))
 
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_core_console_base.py

```diff
@@ -9,32 +9,129 @@
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 import os
 import unittest
+import json
 
 from appbuilder.core.console.base import ConsoleLLMMessage,ConsoleCompletionResponse
 from appbuilder.core._exception import AppBuilderServerException
-from appbuilder.core.components.llms.base import CompletionResponse, LLMMessage
-from appbuilder.core.message import Message  
+from appbuilder.core.message import Message
 
+# 创建一个response类,模拟requests.Response
+class Response:
+    def __init__(self, status_code, headers, text):
+        self.status_code = status_code
+        self.headers = headers
+        self.text = text
+        
+    def json(self):
+            return json.loads(self.text)
+       
 
-# @unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
-@unittest.skip(reason="暂时跳过")
+@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
 class TestCoreConsoleBase(unittest.TestCase):
     def test_ConsoleLLMMessage_init(self):
-        message=Message()
-        llmMessage=LLMMessage(message)
-        clm=ConsoleLLMMessage(llmMessage)
-        self.assertIsInstance(clm,ConsoleLLMMessage)
+        # 测试stream=True
+        cr=ConsoleLLMMessage()
+        self.assertIsInstance(str(cr), str)
         
     def test_ConsoleCompletionResponse_init(self):
-        # 测试stream=True
-        cr=CompletionResponse()
-        ccr=ConsoleCompletionResponse(response=cr,stream=True)
+        # 测试初始化,同时测试response.status_code != 200 and 
+        response=Response(
+            status_code=201,
+            headers={},
+            text=json.dumps({"message": "test"})
+        )
+        with self.assertRaises(AppBuilderServerException):
+            ConsoleCompletionResponse(response)
+            
+        # 测试if "code" in data and "message" in data and "requestId" in data
+        response=Response(
+            status_code=200,
+            headers={},
+            text=json.dumps({
+                "code": "test",
+                "requestId":"test",
+                "message":"test"
+                })
+        )
+        with self.assertRaises(AppBuilderServerException):
+            ConsoleCompletionResponse(response)
+            
+        # 测试if "code" in data and "message" in data and "status" in data
+        response=Response(
+            status_code=200,
+            headers={},
+            text=json.dumps({
+                "code": "test",
+                "message":"test",
+                "status":"test"
+                })
+        )
+        with self.assertRaises(AppBuilderServerException):
+            ConsoleCompletionResponse(response)
+        
+        # if "code" in data and data.get("code") != 0
+        response=Response(
+            status_code=200,
+            headers={},
+            text=json.dumps({
+                "code": 1,
+                "message": "test"
+                })
+        )
+        with self.assertRaises(AppBuilderServerException):
+            ConsoleCompletionResponse(response)
+            
+        # 测试init其余部分
+        content = [
+            {
+                "content_type": "references",
+                "outputs": {
+                    "references": [
+                        {"from": "key"} 
+                        # 确认这是一个正确的字典
+                    ]
+                }
+            }
+        ]
+
+        # 序列化 content 列表为 JSON 字符串
+        content_json = json.dumps(content)
+
+        # 使用序列化后的 JSON 字符串作为响应文本
+        response = Response(
+            status_code=200,
+            headers={},
+            text=json.dumps({
+                "code": 0,
+                "result": {
+                    "answer": "test",
+                    "conversation_id": "test",
+                    "content": content  # 这里直接使用 content 变量
+                }
+            })
+        )
+        ccr=ConsoleCompletionResponse(response) 
         
+        # test_ConsoleCompletionResponse_message_iterable_wrapper(原代码可能冗余，迭代器未被调用)
+        message = Message()
+        def message_content():
+            resps=[
+                {'result': {'answer': 'test', 'conversation_id': 'test', 'content': content}},
+                {'result': {'answer': 'test', 'conversation_id': 'test', 'content': content}}
+            ]
+            for resp in resps:
+                yield resp
+        message.content = message_content()
+        result = ccr.message_iterable_wrapper(message)
+  
+        #test_ConsoleCompletionResponse_to_message
+        message=ccr.to_message()
         
+            
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_doc_format_converter.py

```diff
@@ -13,24 +13,28 @@
 # limitations under the License.
 
 import unittest
 import os
 
 import appbuilder
 
-@unittest.skip("Open api request limit reached")
+
+@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
 class TestDocFormatConverter(unittest.TestCase):
 
     @classmethod
     def setUpClass(cls):
         pass
 
+    def setUp(self):
+        os.environ["APPBUILDER_TOKEN"] = os.environ["APPBUILDER_TOKEN_DOC_FORMAT"]
+
     @classmethod
     def test_doc_format_url(cls):
-        image_url = "https://ai-cape-strategy-data.bj.bcebos.com/document-restructure/1EF33F9307451C9413D5D.jpg"
+        image_url = "https://ai-cape-strategy-data.bj.bcebos.com/document-restructure/1EF33F9307451C9413D5D1160.jpg"
         doc_format_converter = appbuilder.DocFormatConverter()
         resp = doc_format_converter(appbuilder.Message({"file_path": image_url}))
 
         assert "word_url" in resp.content
 
 if __name__ == '__main__':
-    unittest.main()
+    unittest.main()
```

## appbuilder/tests/test_gbi_nl2sql.py

```diff
@@ -15,14 +15,15 @@
 """
 import unittest
 import os
 import appbuilder
 from appbuilder.core.message import Message
 from appbuilder.core.components.gbi.basic import NL2SqlResult, SessionRecord
 from appbuilder.core.components.gbi.basic import ColumnItem
+from appbuilder.core._exception import BaseRPCException
 
 SUPER_MARKET_SCHEMA = """
 ```
 CREATE TABLE `supper_market_info` (
   `订单编号` varchar(32) DEFAULT NULL,
   `订单日期` date DEFAULT NULL,
   `邮寄方式` varchar(32) DEFAULT NULL,
@@ -87,19 +88,29 @@
         column_constraint = [ColumnItem(ori_value="水果",
                                         column_value="新鲜水果",
                                         column_name="商品类别",
                                         table_name="超市营收明细",
                                         is_like=False)]
 
         msg = Message({"query": query, "column_constraint": column_constraint,"session": session})
-
-        result_message = self.nl2sql_node(msg)
-
-        self.assertIsNotNone(result_message)
-        self.assertTrue(result_message.content.sql != "")
-        self.assertTrue(result_message.content.llm_result != "")
-        self.assertIn("水果", result_message.content.sql)
-        self.nl2sql_node.knowledge = dict()
-        self.nl2sql_node.prompt_template = ""
+        
+        try:
+            result_message = self.nl2sql_node(msg)
+
+            self.assertIsNotNone(result_message)
+            self.assertTrue(result_message.content.sql != "")
+            self.assertTrue(result_message.content.llm_result != "")
+            self.assertIn("水果", result_message.content.sql)
+            self.nl2sql_node.knowledge = dict()
+            self.nl2sql_node.prompt_template = ""
+        except BaseRPCException:
+            pass
+        except: 
+            raise Exception('单测失败')
+        
+    def test_nl2sql_raise(self):
+        with self.assertRaises(ValueError):
+            node = appbuilder.NL2Sql(model_name='test',table_schemas=['test'])  
+        
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_gbi_select_table.py

```diff
@@ -15,14 +15,15 @@
 """
 import unittest
 import os
 import appbuilder
 from appbuilder.core.message import Message
 from appbuilder.core.components.gbi.basic import SessionRecord
 from appbuilder.core.components.gbi.basic import NL2SqlResult
+from appbuilder.core._exception import BaseRPCException
 
 SUPER_MARKET_SCHEMA = """
 ```
 CREATE TABLE `supper_market_info` (
   `订单编号` varchar(32) DEFAULT NULL,
   `订单日期` date DEFAULT NULL,
   `邮寄方式` varchar(32) DEFAULT NULL,
@@ -63,16 +64,15 @@
 返回格式请参考如下示例：
 问题:有多少个审核通过的投运单？
 回答: ```DWD_MAT_OPERATION```
 请严格参考示例只不要返回无关内容，直接给出最终答案后面的内容，分析步骤不要输出
 问题:{query}
 回答:
 """
-
-@unittest.skip("使用test_gbi_nl2sql.py代替")
+@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_SERIAL", "")
 class TestGBISelectTable(unittest.TestCase):
 
     def setUp(self):
         """
         设置环境变量及必要数据。
         """
         model_name = "ERNIE-Bot 4.0"
@@ -82,31 +82,42 @@
                                    table_descriptions={"supper_market_info": "超市营收明细表，包含超市各种信息等",
                                                        "product_sales_info": "产品销售表"})
 
     def test_run_with_default_param(self):
         """测试 run 方法使用有效参数"""
         query = "列出超市中的所有数据"
         msg = Message({"query": query})
-        result_message = self.select_table_node(message=msg)
-        print(result_message.content)
-        self.assertIsNotNone(result_message)
-        self.assertEqual(len(result_message.content), 1)
-        self.assertEqual(result_message.content[0], "supper_market_info")
+        try:
+            result_message = self.select_table_node(message=msg)
+            # print(result_message.content)
+            self.assertIsNotNone(result_message)
+            self.assertEqual(len(result_message.content), 1)
+            self.assertEqual(result_message.content[0], "supper_market_info")
+        except BaseRPCException:
+            pass
+        except: 
+            raise Exception('单测失败')
+            
 
     def test_run_with_prompt_template(self):
         """测试 run 方法中 prompt template 模版"""
         query = "列出超市中的所有数据"
         msg = Message({"query": query})
         self.select_table_node.prompt_template = PROMPT_TEMPLATE
-        result_message = self.select_table_node(msg)
+        try:
+            result_message = self.select_table_node(msg)
 
-        self.assertIsNotNone(result_message)
-        self.assertEqual(len(result_message.content), 1)
-        self.assertTrue(result_message.content[0].startswith("supper_market_info"))
-        self.select_table_node.prompt_template = ""
+            self.assertIsNotNone(result_message)
+            self.assertEqual(len(result_message.content), 1)
+            self.assertTrue(result_message.content[0].startswith("supper_market_info"))
+            self.select_table_node.prompt_template = ""
+        except BaseRPCException:
+            pass
+        except: 
+            raise Exception('单测失败')
 
     def test_run_with_session(self):
         """测试 run 方法中 prompt template 模版"""
 
         session = list()
         session_record = SessionRecord(query="列出商品类别是水果的的利润率",
                                        answer=NL2SqlResult(
@@ -114,16 +125,24 @@
                                                       "```sql\nSELECT * FROM `超市营收明细` "
                                                       "WHERE `商品类别` = '水果'\n```",
                                            sql="SELECT * FROM `超市营收明细` WHERE `商品类别` = '水果'"))
         session.append(session_record)
 
         query = "列出超市中的所有数据"
         msg = Message({"query": query, "session": session})
-        result_message = self.select_table_node(msg)
-
-        self.assertIsNotNone(result_message)
-        self.assertEqual(len(result_message.content), 1)
-        self.assertEqual(result_message.content[0], "supper_market_info")
+        try:
+            result_message = self.select_table_node(msg)
 
+            self.assertIsNotNone(result_message)
+            self.assertEqual(len(result_message.content), 1)
+            self.assertEqual(result_message.content[0], "supper_market_info")
+        except BaseRPCException:
+            pass
+        except: 
+            raise Exception('单测失败')
+        
+    def test_st_raise(self):
+        with self.assertRaises(ValueError):
+            appbuilder.SelectTable(model_name='test',table_descriptions={})
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_handwrite_ocr.py

```diff
@@ -15,14 +15,15 @@
 import os
 import unittest
 
 import requests
 
 import appbuilder
 from appbuilder.core.message import Message
+from appbuilder.core._exception import InvalidRequestArgumentError 
 
 @unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
 class TestPlantRecognition(unittest.TestCase):
 
     def setUp(self):
         """
         设置环境变量
@@ -68,11 +69,26 @@
             None
 
         """
         # Create message with raw_image
         inp = Message(content={"raw_image": self.raw_image})
         msg = self.handwrite_ocr.run(inp)
         self.assertIsNotNone(msg.content)
+        
+    def test_tool_eval(self):
+        result=self.handwrite_ocr.tool_eval(name='name',streaming=False,files=['test'])
+        with self.assertRaises(InvalidRequestArgumentError):
+            next(result)
+        result=self.handwrite_ocr.tool_eval(
+            name='name',
+            streaming=True,
+            file_names=['test'],
+            file_urls={'test':self.image_url}
+            )
+        res=next(result)
+        self.assertEqual(res['visible_scope'],'llm')
+        res=next(result)
+        self.assertEqual(res['visible_scope'],'user')
 
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_image_understand.py

```diff
@@ -94,12 +94,24 @@
             inp = Message(content={"raw_image": self.raw_image, "question": "图像内容是什么？", "language": "enx"})
             self.image_understand.run(inp)
 
     def test_run_language_en(self):
         """测试 tool 方法对无效请求的处理。"""
         inp = Message(content={"raw_image": self.raw_image, "question": "图像内容是什么？", "language": "en"})
         self.image_understand.run(inp)
+    
+    def test_run_raise(self):
+        # question is empty
+        with self.assertRaises(ValueError):
+            inp = Message(content={"raw_image": self.raw_image, "question": ""})
+            self.image_understand.run(inp)
+        
+        # question length bigger than 100
+        with self.assertRaises(ValueError):
+            question="test"*26
+            inp = Message(content={"raw_image": self.raw_image, "question": question, "language": ""})
+            self.image_understand.run(inp)
 
 
 if __name__ == "__main__":
     unittest.main()
```

## appbuilder/tests/test_message.py

```diff
@@ -7,19 +7,31 @@
 #     http://www.apache.org/licenses/LICENSE-2.0
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
-
-
-
+import os
+import unittest
 from appbuilder.core.message import Message
 
-if __name__ == "__main__":
-    m = Message({"query": "my message"}, name="m")
-    print(m)
 
-    m = Message(content={"query": "my message"}, name="m")
-    print(m)
+@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
+class TestMessage(unittest.TestCase):
+    def setUp(self):
+        """
+        pass
+        """
+        pass
+
+    def test_message(self):
+        """
+        test message
+        """
+        m = Message({"query": "my message"}, name="m")
+        print(m)
+        m = Message(content={"query": "my message"}, name="m")
+        print(m)
 
+if __name__ == "__main__":
+    unittest.main()
```

## appbuilder/tests/test_mix_card_ocr.py

```diff
@@ -15,14 +15,16 @@
 import os
 import unittest
 
 import requests
 
 import appbuilder
 from appbuilder.core.message import Message
+from appbuilder.core._exception import InvalidRequestArgumentError
+from appbuilder.core.components.mix_card_ocr.model import MixCardOCRRequest
 
 @unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
 class TestPlantRecognition(unittest.TestCase):
 
     def setUp(self):
         """
         设置环境变量
@@ -69,11 +71,38 @@
             None
 
         """
         # Create message with raw_image
         inp = Message(content={"raw_image": self.raw_image})
         msg = self.mix_card_ocr.run(inp)
         self.assertIsNotNone(msg.content)
-
+        
+    def test_tool_eval(self):
+        result=self.mix_card_ocr.tool_eval(name='name',streaming=False,files=['test'])
+        with self.assertRaises(InvalidRequestArgumentError):
+            next(result)
+        result=self.mix_card_ocr.tool_eval(
+            name='name',
+            streaming=True,
+            file_names=['test'],
+            file_urls={'test':self.image_url}
+            )
+        res=next(result)
+        self.assertEqual(res['visible_scope'],'llm')
+        res=next(result)
+        self.assertEqual(res['visible_scope'],'user')
+        result=self.mix_card_ocr.tool_eval(
+            name='name',
+            streaming=False,
+            file_names=['test'],
+            file_urls={'test':self.image_url}
+            )
+        
+    def test_recognize_raise(self):
+        mco=appbuilder.MixCardOCR()
+        with self.assertRaises(ValueError):
+            mcor=MixCardOCRRequest()
+            mco._recognize(request=mcor)
+        
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_object_recognize.py

```diff
@@ -143,11 +143,15 @@
         self.assertNotEqual(len(res), 0)
 
     def test_tool_eval_invalid(self):
         """测试 tool 方法对无效请求的处理。"""
         with self.assertRaises(InvalidRequestArgumentError):
             result = self.object_recognition.tool_eval(name="object_recognition", streaming=True)
             next(result)
-
+        
+        with self.assertRaises(InvalidRequestArgumentError):
+            result=self.object_recognition.tool_eval(name='test',streaming=False,file_urls={'test_01':'test'},img_name='test')
+            next(result)
+        
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_qa_llm_excel2figure.py

```diff
@@ -23,14 +23,15 @@
 from pytest_config import LoadConfig
 conf = LoadConfig()
 
 from pytest_utils import Utils
 util = Utils()
 
 from appbuilder.utils.logger_util import get_logger
+from appbuilder.core._exception import ModelNotSupportedException
 log = get_logger(__name__)
 
 text = "用户:喂我想查一下我的话费\n坐席:好的女士您话费余的话还有87.49元钱\n用户:好的知道了谢谢\n坐席:嗯不客气祝您生活愉快再见"
 
 models = appbuilder.get_model_list("", ["chat"], True)
 
 file_bos_url = ("https://agi-dev-platform-bos.bj.bcebos.com/ut_appbuilder/[测试]超市收入明细表格.xlsx?authorization=bce-"
@@ -117,11 +118,44 @@
             content = res.content
             log.info(content)
             assert False, "未捕获到错误信息"
         except Exception as e:
             # assert isinstance(e, eval(err_type)), "捕获的异常不是预期的类型 实际:{}, 预期:{}".format(e, err_type)
             assert err_param in str(e), "捕获的异常参数类型不正确"
             assert err_msg in str(e), "捕获的异常消息不正确"
-
-    
+            
+    def test_check_model_and_get_model_url(self):
+        with self.assertRaises(ModelNotSupportedException):
+            e2f=appbuilder.Excel2Figure(model="Yi-34B-Chat")
+        with self.assertRaises(ValueError):
+            e2f=appbuilder.Excel2Figure(model="")
+
+    def test_run(self):
+        e2f=appbuilder.Excel2Figure(model="Llama-2-7B-Chat")   
+        msg=appbuilder.Message({
+            "query": "2019年各个月份的利润分别是多少？",
+            "excel_file_url": file_bos_url
+        })
+        result_msg=e2f.run(msg)
+        
+    def test_tool_eval(self):
+        e2f=appbuilder.Excel2Figure(model="Llama-2-7B-Chat")   
+        # with self.assertRaises(RuntimeError) as context:
+        te=e2f.tool_eval(
+                streaming=False,
+                origin_query="",
+                file_urls={'test1':'test1','test2':'test2'}
+                )
+        with self.assertRaises(RuntimeError):
+            next(te)
+
+        te=e2f.tool_eval(
+                streaming=False,
+                origin_query="2019年各个月份的利润分别是多少？",
+                file_urls={'[测试]超市收入明细表格.xlsx':file_bos_url}
+                )
+        with self.assertRaises(RuntimeError): 
+            res=next(te)
+        
+        
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_qa_llm_paddle_speech_tts.py

```diff
@@ -16,14 +16,15 @@
 import os
 import time
 import appbuilder
 import requests
 from parameterized import parameterized, param
 import appbuilder
 from appbuilder import Message
+from appbuilder.core._exception import BaseRPCException
 
 from pytest_config import LoadConfig
 conf = LoadConfig()
 
 from pytest_utils import Utils
 util = Utils()
 
@@ -53,17 +54,22 @@
         if speed is not None:
             param_dict["speed"] = speed
         if pitch is not None:
             param_dict["pitch"] = pitch
         if volume is not None:
             param_dict["volume"] = volume
         if model is not None:
-            param_dict["person"] = person
-        out = tts.run(inp, **param_dict)
-        log.info(out.content["audio_binary"])
+                        param_dict["person"] = person
+        try:
+            out = tts.run(inp, **param_dict)
+            log.info(out.content["audio_binary"])
+        except BaseRPCException as e:
+            print("错误为 {}".format(e))
+        except Exception as e:
+            raise Exception("错误为 {}".format(e))
         time.sleep(1)
 
     @parameterized.expand([
         param("ernie-bot-apaas", "吸塑包装盒在工业化生产和物流运输中分别有什么重要性", "not_exit", 16,
                         5, 5, 0, "ValueError", "model", "unsupported"),
         param("ernie-bot-4", "吸塑包装盒在工业化生产和物流运输中分别有什么重要性", "baidu-tts", 10, 16,
                         10, 106, "ValueError", "value", "must in [0,15]"),
```

## appbuilder/tests/test_qrcode_ocr.py

```diff
@@ -13,14 +13,16 @@
 # limitations under the License.
 import unittest
 import os
 import requests
 import unittest
 import appbuilder
 
+from appbuilder.core._exception import InvalidRequestArgumentError 
+
 @unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_SERIAL", "")
 class TestQRcodeOCR(unittest.TestCase):
     def setUp(self):
         """
         设置环境变量。
         """
         self.qrcode_ocr = appbuilder.QRcodeOCR()
@@ -122,11 +124,45 @@
             None
 
         """
         url = "http://example.com/invalid_url.jpg"
         message = appbuilder.Message(content={"url": url})
         with self.assertRaises(appbuilder.AppBuilderServerException):
             self.qrcode_ocr.run(message)
-
+        
+        with self.assertRaises(InvalidRequestArgumentError):
+            self.qrcode_ocr.run(message=message,location='test')
+        
+            
+    def test_tool_eval(self):
+        image_url = "https://bj.bcebos.com/v1/appbuilder/qrcode_ocr_test.png?" \
+                    "authorization=bce-auth-v1%2FALTAKGa8m4qCUasgoljdEDAzLm%2F2024-" \
+                    "01-24T12%3A45%3A13Z%2F-1%2Fhost%2Ffc43d07b41903aeeb5a023131ba6" \
+                    "e74ab057ce26d50e966dc31ff083e6a9c41b"
+        result=self.qrcode_ocr.tool_eval(name='name',streaming=False,files=['test'])
+        with self.assertRaises(InvalidRequestArgumentError):
+            next(result)
+        result=self.qrcode_ocr.tool_eval(
+            name='name',
+            streaming=True,
+            file_names=['test'],
+            file_urls={'test':image_url}
+            )
+        res=next(result)
+        self.assertEqual(res['visible_scope'],'llm')
+        res=next(result)
+        self.assertEqual(res['visible_scope'],'user')
+        
+        result=self.qrcode_ocr.tool_eval(
+            name='name',
+            streaming=False,
+            file_names=['test'],
+            file_urls={'test':image_url},
+            locations = 'test'
+        )
+        with self.assertRaises(InvalidRequestArgumentError):
+            next(result)
+        
+        
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_query_rewrite.py

```diff
@@ -15,15 +15,15 @@
 
 
 import os
 import unittest
 from typing import List, Tuple
 import appbuilder
 
-@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
+@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")  
 class TestQueryRewriteComponent(unittest.TestCase):
     def setUp(self):
         """
         初始化查询重写组件的单元测试基类。
         
         Args:
             无参数。
@@ -55,10 +55,25 @@
     def test_run_with_stream_and_temperature(self):
         """测试不同的 stream 和 temperature 参数值"""
         node = appbuilder.QueryRewrite("ERNIE Speed-AppBuilder")
         query = ['我应该怎么办理护照？', '您可以查询官网或人工咨询', '我需要准备哪些材料？', '身份证、免冠照片一张以及填写完整的《中国公民因私出国（境）申请表》', '在哪里办']
         msg = appbuilder.Message(query)
         answer = node(msg, rewrite_type="带机器人回复", stream=False, temperature=0.5)
         self.assertIsNotNone(answer)
+        
+    def test_run_raise(self):
+        with self.assertRaises(ValueError):
+            self.node(message=None)
+
+        query = ['我应该怎么办理护照？', '您可以查询官网或人工咨询']
+        msg=appbuilder.Message(query)
+        with self.assertRaises(ValueError):
+            self.node(message=msg)
+           
+        test_str='test'*1500    
+        query = [test_str]
+        msg=appbuilder.Message(query)
+        with self.assertRaises(ValueError):
+            self.node(message=msg) 
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_similar_question.py

```diff
@@ -12,15 +12,15 @@
 # See the License for the specific language governing permissions and
 # limitations under the License.
 
 import unittest
 import os
 import appbuilder
 
-@unittest.skip("TypeError: 'NoneType' object is not an iterator")
+@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_SERIAL", "")
 class TestSimilarQuestionComponent(unittest.TestCase):
     def setUp(self):
         """
         设置环境变量。
         
         Args:
             无参数，默认值为空。
@@ -34,34 +34,14 @@
     def test_run_with_default_params(self):
         """测试 run 方法使用默认参数"""
         query = "我想吃冰淇淋，哪里的冰淇淋比较好吃？"
         msg = appbuilder.Message(query)
         answer = self.node(msg)
         self.assertIsNotNone(answer)
 
-    # def test_run_with_custom_params(self):
-    #     """测试 run 方法使用自定义参数"""
-    #     query = "我想吃冰淇淋，哪里的冰淇淋比较好吃？"
-    #     msg = appbuilder.Message(query)
-    #     answer = self.node(msg, stream=True, temperature=0.5)
-    #     self.assertIsNotNone(answer)
-    #     # 检查 answer 是否符合预期
-
-    def test_run_with_invalid_params(self):
-        """测试 run 方法使用无效参数"""
-        query = "我想吃冰淇淋，哪里的冰淇淋比较好吃？"
-        msg = appbuilder.Message(query)
-        with self.assertRaises((ValueError, TypeError)):
-            self.node(msg, invalid_param="invalid")
-
-    def test_run_with_invalid_message(self):
-        """测试无效的 message 参数"""
-        with self.assertRaises((ValueError, TypeError)):
-            self.node(None, stream=False, temperature=1e-10)
-
     def test_tool_eval_valid(self):
         """测试 tool_eval 方法使用有效参数"""
         query = "我想吃冰淇淋，哪里的冰淇淋比较好吃？"
         result = self.node.tool_eval(name="similar_question", streaming=True, query=query)
         res = [item for item in result]
         self.assertNotEqual(len(res), 0)
```

## appbuilder/tests/test_style_rewrite.py

```diff
@@ -15,70 +15,43 @@
 """
 import unittest
 import os
 
 from appbuilder.core.components.llms.style_rewrite.component import StyleChoices
 import appbuilder
 
-@unittest.skip(reason="usual failure")
+@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_SERIAL", "")
 class TestStyleRewriteComponent(unittest.TestCase):
     def setUp(self):
         """
         设置环境变量。
         
         Args:
             无参数，默认值为空。
         
         Returns:
             无返回值，方法中执行了环境变量的赋值操作。
         """
         self.model_name = "ERNIE Speed-AppBuilder"
         self.node = appbuilder.StyleRewrite(model=self.model_name)
+        self.sc=StyleChoices.YINGXIAO
 
-    def test_run_with_default_params(self):
-        """测试 run 方法使用默认参数"""
-        query = "帮我写一篇关于人体工学椅的文案"
-        msg = appbuilder.Message(query)
-        answer = self.node(msg)
-        self.assertIsNotNone(answer)
-        # 可以添加更多断言来检查 answer 的特定属性
-
+    def test_to_chinese(self):
+        result=self.sc.to_chinese()
+        self.assertEqual(result,"营销话术")
+        
     def test_run_with_custom_params(self):
         """测试 run 方法使用自定义参数"""
         query = "帮我写一篇关于人体工学椅的文案"
         msg = appbuilder.Message(query)
         style = "营销话术"
         answer = self.node(msg, style=style)
         self.assertIsNotNone(answer)
         # 检查 answer 是否符合预期
 
-    def test_run_with_invalid_params(self):
-        """测试 run 方法使用无效参数"""
-        query = "帮我写一篇关于人体工学椅的文案"
-        msg = appbuilder.Message(query)
-        style = "无效话术"
-        with self.assertRaises(ValueError):
-            self.node(msg, style=style)
-
-    def test_run_with_different_style(self):
-        """测试不同的 style 参数值"""
-        node = appbuilder.StyleRewrite("ERNIE Speed-AppBuilder")
-        msg = appbuilder.Message("测试消息")
-        for style in StyleChoices:
-            with self.subTest(style=style):
-                answer = node(msg, style=style.value)
-                self.assertIsNotNone(answer)
-
-    def test_run_with_stream_and_temperature(self):
-        """测试不同的 stream 和 temperature 参数值"""
-        node = appbuilder.StyleRewrite("ERNIE Speed-AppBuilder")
-        msg = appbuilder.Message("测试消息")
-        answer = node(msg, style="激励话术", stream=False, temperature=0.5)
-        self.assertIsNotNone(answer)
-
     def test_tool_eval_valid(self):
         """测试 tool_eval 方法使用有效参数"""
         query = "帮我写一篇关于人体工学椅的文案"
         result = self.node.tool_eval(name="style_rewrite", streaming=True, query=query)
         res = [item for item in result]
         self.assertNotEqual(len(res), 0)
```

## appbuilder/tests/test_style_writing.py

```diff
@@ -16,78 +16,47 @@
 import unittest
 import os
 import appbuilder
 import time 
 
 from appbuilder.core.components.llms.style_writing.component import StyleQueryChoices, LengthChoices
 
-@unittest.skip(reason="频繁报错")
+@unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_SERIAL", "")
 class TestStyleWritingComponent(unittest.TestCase):
     def setUp(self):
         """
         设置环境变量。
         
         Args:
             无参数，默认值为空。
         
         Returns:
             无返回值，方法中执行了环境变量的赋值操作。
         """
         self.model_name = "ERNIE Speed-AppBuilder"
         self.node = appbuilder.StyleWriting(model=self.model_name)
+        self.sqc=StyleQueryChoices.BILIBILI
+        self.lc=LengthChoices.SHORT
 
+    def test_to_chinese(self):
+        result=self.sqc.to_chinese()
+        self.assertEqual(result,"B站") 
+        result=self.lc.to_chinese()
+        self.assertEqual(result,"短")  
+    
     def test_run_with_custom_params(self):
         """测试 run 方法使用自定义参数"""
         query = "帮我写一篇关于人体工学椅的文案"
         msg = appbuilder.Message(query)
         style = "小红书"
-        length = 300
+        length = 100
         answer = self.node(msg, style_query=style, length=length)
         self.assertIsNotNone(answer)
-        time.sleep(1)
         # 检查 answer 是否符合预期
 
-    def test_run_with_invalid_params(self):
-        """测试 run 方法使用无效参数"""
-        query = "帮我写一篇关于人体工学椅的文案"
-        msg = appbuilder.Message(query)
-        style = "无效样式"
-        with self.assertRaises(ValueError):
-            self.node(msg, style_query=style)
-        time.sleep(1)
-
-    def test_run_with_different_style_query(self):
-        """测试不同的 style_query 参数值"""
-        node = appbuilder.StyleWriting("ERNIE Speed-AppBuilder")
-        msg = appbuilder.Message("测试消息")
-        for style_query in StyleQueryChoices:
-            with self.subTest(style_query=style_query):
-                answer = node(msg, style_query=style_query.value, length=100)
-                self.assertIsNotNone(answer)
-            break
-        time.sleep(1)
-
-    def test_run_with_different_length(self):
-        """测试不同的 length 参数值"""
-        node = appbuilder.StyleWriting("ERNIE Speed-AppBuilder")
-        msg = appbuilder.Message("测试消息")
-        for length in LengthChoices:
-            with self.subTest(length=length):
-                answer = node(msg, style_query="通用", length=length.value)
-                self.assertIsNotNone(answer)
-            break
-        time.sleep(1)
-
-    def test_run_with_stream_and_temperature(self):
-        """测试不同的 stream 和 temperature 参数值"""
-        node = appbuilder.StyleWriting("ERNIE Speed-AppBuilder")
-        msg = appbuilder.Message("测试消息")
-        answer = node(msg, style_query="通用", length=100, stream=False, temperature=0.5)
-        self.assertIsNotNone(answer)
-        time.sleep(1)
 
     def test_tool_eval_valid(self):
         """测试 tool_eval 方法使用有效参数"""
         query = "帮我写一篇关于人体工学椅的文案"
         result = self.node.tool_eval(name="style_writing", streaming=True, query=query)
         res = [item for item in result]
         self.assertNotEqual(len(res), 0)
```

## appbuilder/tests/test_table_ocr.py

```diff
@@ -13,14 +13,16 @@
 # limitations under the License.
 
 import unittest
 import requests
 import appbuilder
 import os
 
+from appbuilder.core._exception import InvalidRequestArgumentError 
+
 @unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_SERIAL", "")
 class TestTableOCR(unittest.TestCase):
     def setUp(self):
         """
         设置环境变量。
         """
         self.table_ocr = appbuilder.TableOCR()
@@ -122,11 +124,31 @@
             None
 
         """
         url = "http://example.com/invalid_url.jpg"
         message = appbuilder.Message(content={"url": url})
         with self.assertRaises(appbuilder.AppBuilderServerException):
             self.table_ocr.run(message)
+            
+    def test_tool_eval(self):
+        image_url = "https://bj.bcebos.com/v1/appbuilder/table_ocr_test.png?" \
+                    "authorization=bce-auth-v1%2FALTAKGa8m4qCUasgoljdEDAzLm%2F2024" \
+                    "-01-24T12%3A37%3A09Z%2F-1%2Fhost%2Fab528a5a9120d328dc6d18c6" \
+                    "064079145ff4698856f477b820147768fc2187d3"
+        result=self.table_ocr.tool_eval(name='name',streaming=False,files=['test'])
+        with self.assertRaises(InvalidRequestArgumentError):
+            next(result)
+        result=self.table_ocr.tool_eval(
+            name='name',
+            streaming=True,
+            file_names=['test'],
+            file_urls={'test':image_url}
+            )
+        res=next(result)
+        self.assertEqual(res['visible_scope'],'llm')
+        res=next(result)
+        self.assertEqual(res['visible_scope'],'user')
+        
 
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_text_to_image.py

```diff
@@ -1,13 +1,15 @@
 import unittest
 import os
 import appbuilder
 from appbuilder.core.components.text_to_image.model import (Text2ImageSubmitRequest, Text2ImageSubmitResponse,
                                                             Text2ImageQueryRequest, Text2ImageQueryResponse)
 
+from appbuilder.core._exception import RiskInputException 
+
 @unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
 class TestText2ImageComponent(unittest.TestCase):
     def setUp(self):
         """
         设置环境变量。
 
         Args:
@@ -98,11 +100,10 @@
         Returns:
             None
 
         """
         data = {"error_code": "ERROR", "error_msg": "Error message"}
         with self.assertRaises(appbuilder.AppBuilderServerException):
             self.text2Image.check_service_error("", data)
-    
 
 if __name__ == '__main__':
     unittest.main()
```

## appbuilder/tests/test_tts.py

```diff
@@ -55,11 +55,16 @@
     def test_run_error_model_tts_stream(self):
         with self.assertRaises(InvalidRequestArgumentError):
             self.tts.run(self.text_message, model="baidu-tts", audio_type="pcm", stream=True)
 
     def test_run_paddlespeech_validation_tts_stream(self):
         with self.assertRaises(InvalidRequestArgumentError):
             self.tts.run(self.text_message, model="paddlespeech-tts", audio_type="mp3", stream=True)
+            
+    def test_run_raise_text_field_empty(self):
+        message=appbuilder.Message(content={"text": ""})
+        with self.assertRaises(InvalidRequestArgumentError):
+            self.tts.run(message)
 
 
 if __name__ == "__main__":
     unittest.main()
```

## appbuilder/tests/test_vdb_retriever.py

```diff
@@ -21,96 +21,85 @@
 
 @unittest.skipUnless(os.getenv("TEST_CASE", "UNKNOWN") == "CPU_PARALLEL", "")
 class TestBaiduVDBRetrieverParameter(unittest.TestCase):
     def setUp(self) -> None:
         os.environ["APPBUILDER_TOKEN"] = "bce-v3/ABCDE"
 
     def test_run_parameter_query(self):
-        query = appbuilder.Message()
+        query = appbuilder.Message('')
         retriever = appbuilder.BaiduVDBRetriever(
             embedding="abcde",
             table="abcde")
         
         with self.assertRaises(ValueError) as context:
             retriever.run(query)
-            self.assertIn("Parameter `query` content is empty", str(context.exception))
+        self.assertIn("Parameter `query` content is empty", str(context.exception))
     
     def test_run_paramter_query_type(self):
         query = appbuilder.Message(content=12345)
 
         retriever = appbuilder.BaiduVDBRetriever(
             embedding="abcde",
             table="abcde")
         
         with self.assertRaises(ValueError) as context:
             retriever.run(query)
-            self.assertIn("Parameter `query` content is not a string", str(context.exception))
+        self.assertIn("Parameter `query` content is not a string", str(context.exception))
 
     def test_run_parameter_query_length(self):
         query = appbuilder.Message(content="a" * 1025)
         retriever = appbuilder.BaiduVDBRetriever(
             embedding="abcde",
             table="abcde")
         with self.assertRaises(ValueError) as context:
             retriever.run(query)
-            self.assertIn("Parameter `query` content is too long", str(context.exception))
+        self.assertIn("Parameter `query` content is too long", str(context.exception))
 
     def test_run_parameter_topk_positive(self):
         query = appbuilder.Message()
         retriever = appbuilder.BaiduVDBRetriever(
             embedding="abcde",
             table="abcde")
-        with self.assertRaises(TypeError) as context:
-            retriever.run(query, topk=-1)
-            self.assertIn("Parameter `top_k` must be a positive integer", str(context.exception))
-    
-    def test_run_parameter_topk(self):
-        query = appbuilder.Message()
-        retriever = appbuilder.BaiduVDBRetriever(
-            embedding="abcde",
-            table="abcde")
-        with self.assertRaises(TypeError) as context:
-            retriever.run(query, topk="abc")
-            self.assertIn("Parameter `top_k` must be a int", str(context.exception))
-
-
+        with self.assertRaises(ValueError) as context:
+            retriever.run(query, top_k=-1)
+        self.assertIn("Parameter `top_k` must be a positive integer", str(context.exception))
 
 class TestVDBParameterCheck(unittest.TestCase):
     def setUp(self) -> None:
         os.environ["APPBUILDER_TOKEN"] = "bce-v3/ABCDE"
 
     def test_vdb_parameter_account(self):
         with self.assertRaises(TypeError) as context:
             appbuilder.BaiduVDBVectorStoreIndex(
                 instance_id="abcde",
                 api_key="abcde",
                 account=123456)
-            self.assertIn("must be a string", str(context.exception))
+        self.assertIn("must be a string", str(context.exception))
         
     def test_vdb_parameter_database_name(self):
         with self.assertRaises(TypeError) as context:
             appbuilder.BaiduVDBVectorStoreIndex(
                 instance_id="abcde",
                 api_key="abcde",
                 database_name=123456)
-            self.assertIn("must be a string", str(context.exception))
+        self.assertIn("must be a string", str(context.exception))
 
 
     def test_vdb_parameter_table_params(self):
         with self.assertRaises(TypeError) as context:
             appbuilder.BaiduVDBVectorStoreIndex(
                 instance_id="abcde",
                 api_key="abcde",
                 table_params=123456)
-            self.assertIn("must be a TableParams", str(context.exception))
+        self.assertIn("must be a TableParams", str(context.exception))
 
     def test_vdb_parameter_embedding(self):
         with self.assertRaises(TypeError) as context:
             appbuilder.BaiduVDBVectorStoreIndex(
                 instance_id="abcde",
                 api_key="abcde",
                 embedding=123456)
-            self.assertIn("must be a Embedding", str(context.exception))
+        self.assertIn("must be a Embedding", str(context.exception))
 
 
 if __name__ == '__main__':
     unittest.main()
```

## Comparing `appbuilder_sdk-0.7.0.dist-info/LICENSE` & `appbuilder_sdk-0.7.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `appbuilder_sdk-0.7.0.dist-info/METADATA` & `appbuilder_sdk-0.7.1.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: appbuilder-sdk
-Version: 0.7.0
+Version: 0.7.1
 Summary: 百度智能云千帆AppBuilder-SDK
 Home-page: https://github.com/baidubce/app-builder
 Author: dongdaxiang
 Author-email: dongdaxiang@baidu.com
 License: UNKNOWN
 Platform: UNKNOWN
 Requires-Python: >=3.9
```

## Comparing `appbuilder_sdk-0.7.0.dist-info/RECORD` & `appbuilder_sdk-0.7.1.dist-info/RECORD`

 * *Files 3% similar despite different names*

```diff
@@ -1,82 +1,84 @@
-appbuilder/__init__.py,sha256=27RzCzGIFWaaQxiRQfXIiqD2s3rPVokcIt8Jz6SWDBg,6392
+appbuilder/__init__.py,sha256=JsxoTbRqKWmqS9fCdsQwhH1QqMN-9CVGcWQUPFXiGps,6704
 appbuilder/core/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
-appbuilder/core/_client.py,sha256=9Wsr8fINIcbUJt1EtaNR-Wo8iVqdj2ABOB44njTVfPc,9441
+appbuilder/core/_client.py,sha256=ILAfKn08MJY2se-rhEfrfjztTiZ89lXTowaloVNLN-s,9645
 appbuilder/core/_exception.py,sha256=fLuaow9IfmnkbpPchCj2mN2xECy0yIBa_HeyZQwnj7E,3120
-appbuilder/core/agent.py,sha256=_bYZvG4Qt_mvc3yLoXbJMGfmHcp8qtL7M2aNrkftKBk,16573
+appbuilder/core/agent.py,sha256=M83ueEsZBCPbMIhEk_fQP081quKLhei6wFgvFg24N0c,19913
 appbuilder/core/component.py,sha256=2l3Rt5fC2o5JqR53xM_zJvbXAW9CwopIeDXAN5bqG4U,4843
 appbuilder/core/constants.py,sha256=pUoBmuacyntDS9zf1nGKySlD3ETpOFe1SoSQUIUqm8w,826
 appbuilder/core/context.py,sha256=Uwpo72pMRUcUJthpHFHeRKh-kpC816bWv1JNXZdynTs,2297
 appbuilder/core/functional.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
 appbuilder/core/message.py,sha256=25qri38N-wfiuJi0q3ktdfhy662lbcTtXtcHjcEdI7Q,1383
-appbuilder/core/user_session.py,sha256=sPJBrFW2uD_7dwaXCre2PXL6pwimxy05bcOj05MjInc,7636
-appbuilder/core/utils.py,sha256=2aVq9xtB-tZkJaFnSNXebxqntOo0Am1zKrBVFJYK-eo,5453
+appbuilder/core/user_session.py,sha256=VzujKcaN7Iyj4SIffaYzDpKgLsfzC5DOBzUHPCMwh0c,7749
+appbuilder/core/utils.py,sha256=RTgIpA32SuUovyVn8yNnUrlYUpKo8rGdhzfHVd71jNE,5513
 appbuilder/core/assistant/__init__.py,sha256=dQT0H1zojQbFtnSTRBm_P9o1hNmAiH1trT2LTchbN2E,600
 appbuilder/core/assistant/base.py,sha256=zWwEzoIXczP73hvatgrd0iGWrx1G-Z4YZ3OgZUED25o,1452
 appbuilder/core/assistant/assistants/__init__.py,sha256=TfKGafGsMMdhErIemzc0DkVppDpj4nenT53423QcNsE,723
-appbuilder/core/assistant/assistants/assistants.py,sha256=8UAV_YH4LjdUSKNbz0hKYRJ8t0vilavCriRSmwHxwks,3907
-appbuilder/core/assistant/assistants/files.py,sha256=g8IUTOOzXouSMMnQUZrIHCFhT1JLXyJqp6zG0iysBBo,2393
-appbuilder/core/assistant/threads/__init__.py,sha256=05jS00oT7keLsvAD34kPKz6mr4QzVkfAFp4tecpljAE,770
-appbuilder/core/assistant/threads/threads.py,sha256=UqbFwufDWAU950VtmPrniGJfczZrxb6b32f_yAdzF-g,2504
+appbuilder/core/assistant/assistants/assistants.py,sha256=6eAmt1raC4U3gIHjqcVFeWM_32xmaxUSH1ipNWXH-t0,16770
+appbuilder/core/assistant/assistants/files.py,sha256=n-DYXouf8wS_9esrwgoOhpZKVGTy8IBJSBk20R4m4ls,10957
+appbuilder/core/assistant/threads/__init__.py,sha256=Kk6fHFgt4yiVJ-uiLnDd7r13ixd9YrGXTa_oo7sOXz8,792
+appbuilder/core/assistant/threads/threads.py,sha256=EteSdrT-T6KbFqaTvxZWd1txxK4qRSs305NYBwGKA-c,6479
 appbuilder/core/assistant/threads/messages/__init__.py,sha256=9cqQ7wPUhO7PT5xrp4JSk6BuF0cQDSv4VNcNQz3S3QM,670
-appbuilder/core/assistant/threads/messages/messages.py,sha256=m8hsyFF3OQUOGydbguJsmveYgR_SDPyWzlJHEYsYaeU,2458
-appbuilder/core/assistant/threads/runs/__init__.py,sha256=lu31en6CVtXHbOnge4aWfbgNsmc3HxXny2A58NOxkz4,658
-appbuilder/core/assistant/threads/runs/runs.py,sha256=qpJfSvA5_vNUyp30fDmDz0wS1QywKHWIJAatdLXsrHA,12247
-appbuilder/core/assistant/type/__init__.py,sha256=cmmknkZYkZ1_XUywZq1eutZA9Putaccnn387Voz40zQ,1667
-appbuilder/core/assistant/type/assistant_type.py,sha256=n1esvN1BAw3wwRNU1PibcnsxcLh8WwGeT5HaKED9sBM,3165
+appbuilder/core/assistant/threads/messages/messages.py,sha256=825fPttqQBkyu09InLtZwGmEySiOwlDewJKeAUQcFd4,9156
+appbuilder/core/assistant/threads/runs/__init__.py,sha256=j2kVJTjRKi3q9F2MbI5AZRgTRq0F4EwGKh3MHIPrk1E,897
+appbuilder/core/assistant/threads/runs/runs.py,sha256=2TENUTf__JvCg4w_ig0fd7uUOj6viuQ0kGZ8Lw_xszY,19737
+appbuilder/core/assistant/threads/runs/steps.py,sha256=4NmV9rKMqxdHmYSf8N0Kgmsdn2b2dZbuVVSRtvLHpzo,3774
+appbuilder/core/assistant/threads/runs/stream_helper.py,sha256=DgAvXkNC6wVnlEp0n39-04SEj61pUNkJFBI-e7l-q2Y,12739
+appbuilder/core/assistant/type/__init__.py,sha256=fDIi0TPYC3gdmS6FuJozPpifT8aVbPzKmxH8f6bif0c,2777
+appbuilder/core/assistant/type/assistant_type.py,sha256=5c5orY77WhHAhXL3oWb8Tj5C9PRlM7cGcY-lGTjGvMw,10239
 appbuilder/core/assistant/type/public_type.py,sha256=ubKdytcN1oXcwU--13KryTmw3rV5sPAD8jmg3nXxhY4,3799
-appbuilder/core/assistant/type/thread_type.py,sha256=DvwWDZ-NstL8GKEweyoV2lAfXR2E5N5jQ8pDQ95IzXg,6482
+appbuilder/core/assistant/type/thread_type.py,sha256=YibQQcRx-ALX52RXs_tPgM3sYSgTpGu2VHaejUQ5v6Q,11329
 appbuilder/core/components/__init__.py,sha256=tNwyx0QLD9mxCy3gnvnYGkc3TBQFzMRyfpQkIbjUnYg,600
 appbuilder/core/components/animal_recognize/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-appbuilder/core/components/animal_recognize/component.py,sha256=Ob9-ngGfWfvhSlT5I-9VLaaYVJjq4KxoSn35kcV6MwE,8413
+appbuilder/core/components/animal_recognize/component.py,sha256=lMbbPW-wIyGrrgrvxMkEQIHQOkLclOaf5o1ggP-zFFM,8435
 appbuilder/core/components/animal_recognize/model.py,sha256=f30aQvfSkoGEY4Rq84ryGY69N7CuYarcYxWKs69tUf8,4079
 appbuilder/core/components/asr/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
-appbuilder/core/components/asr/component.py,sha256=JvqDb04zH1ONqSPJfOwebDaUNKA5_0QNs8TsNgPNBD4,8020
+appbuilder/core/components/asr/component.py,sha256=HUDsBuvzKGrcWzuZmHBRvJrjjlT8Nij3akjTxHMX-uM,8102
 appbuilder/core/components/asr/model.py,sha256=FhBT1u9CzmCSUDGxOQG_T8C11HvlKhtbQjN2rGqoz3w,3214
 appbuilder/core/components/dish_recognize/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
-appbuilder/core/components/dish_recognize/component.py,sha256=ZMgd_lo1mrHmg4SWn10U3n5YSpF8qYJ35LBh4T03aV4,4538
+appbuilder/core/components/dish_recognize/component.py,sha256=SbpzswFQqLDWSDV93Pp_ZFdHad5sKjnH9oX5vqBlDNs,4560
 appbuilder/core/components/dish_recognize/model.py,sha256=H6zmNENcLaxquCkvOHyFLS0Zr1JXE8FyGv3R6DcOvG0,5009
 appbuilder/core/components/doc_crop_enhance/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-appbuilder/core/components/doc_crop_enhance/component.py,sha256=KZpSOllzVeEuDsLLjznnKhv7PIbs1S6FxpvEWoVmbmY,5570
+appbuilder/core/components/doc_crop_enhance/component.py,sha256=Lk9V6J6ilJX9-rP6EPKJYPhtbW1c4Jx91rPR1V1T424,5627
 appbuilder/core/components/doc_crop_enhance/model.py,sha256=cN6rK4cGBHxn2LSsjSCNvcQ9lqCi3vVzlepsNzTJb0M,4637
 appbuilder/core/components/doc_format_converter/__init__.py,sha256=2c6rIosw7bAMkmvm4uJ6Wf4H1tT5iesJyF15hpQoVuo,599
-appbuilder/core/components/doc_format_converter/component.py,sha256=SozOBw4Gq5hw1XzgCAbHvkHpINruN7V2800gRZcsfuc,10617
+appbuilder/core/components/doc_format_converter/component.py,sha256=3euKKuNSVz_AXwwBxgLlNHWJBvwhBCnt-gYAS5uakdk,10726
 appbuilder/core/components/doc_format_converter/model.py,sha256=VKkH1g2MMSfXWA45EeCqb5Sqaz_R9jhD-oLmYesT1Y4,3882
 appbuilder/core/components/doc_parser/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
 appbuilder/core/components/doc_parser/base.py,sha256=s-3zVCGxC3bl8Dy6z-ytZNgvJR9nJ1exiAwE545mGec,2514
 appbuilder/core/components/doc_parser/doc_parser.py,sha256=RvYtJ-ofrUVnQDV2pYkhyA4XfVqWBwp99Fw5nL8T8r0,6007
 appbuilder/core/components/doc_splitter/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 appbuilder/core/components/doc_splitter/doc_splitter.py,sha256=EbD7hJL7KyKqGZm-MWprxHL_kjNXmY_OO6_c_ydr_Tg,13916
 appbuilder/core/components/embeddings/__init__.py,sha256=DlLdY9aau37_Y_HZOwkod8tyA2sSif_FVsnopP8y4gg,88
 appbuilder/core/components/embeddings/base.py,sha256=BcM4CVPwWydPPlA2FSkmfXPtnX8yplNkLaQLqxCi5ZQ,2097
 appbuilder/core/components/embeddings/component.py,sha256=tn3nlUbwDCRZYSzQhyd6OzyT2eqASm-XPX0ynRpz-54,4547
 appbuilder/core/components/excel2figure/__init__.py,sha256=Vrrob8A9aDzpAR0sMb2jdQu-HYZh5FBFztJnwP2pzXY,636
-appbuilder/core/components/excel2figure/component.py,sha256=HViBSxNs_f_biv3cLaXmRXj4B2MJQ0skHyJKWwpZnLg,8705
+appbuilder/core/components/excel2figure/component.py,sha256=R63yBactQ6JBfoB4nqNsc0WssP-eK5m_jlnIuDPbPsc,8727
 appbuilder/core/components/extract_table/__init__.py,sha256=gSB7-MM7BJB3wA373Ekh2FE6KaZIN9fB3U1iMa1wD5s,616
-appbuilder/core/components/extract_table/component.py,sha256=cYmqAUuO6WwZvD3raR-WSagezHGgGUGEDM62HZ0XVzU,6152
+appbuilder/core/components/extract_table/component.py,sha256=qcpPI3efj0NpnLt8Z1EbFu3Iikd6874BnhUpEA2rJps,6260
 appbuilder/core/components/gbi/__init__.py,sha256=tNwyx0QLD9mxCy3gnvnYGkc3TBQFzMRyfpQkIbjUnYg,600
 appbuilder/core/components/gbi/basic.py,sha256=xGUwQFwKyhIoXpD8NenNXWGi-8XbUTF7J_BU3q4rV48,1965
 appbuilder/core/components/gbi/nl2sql/__init__.py,sha256=tNwyx0QLD9mxCy3gnvnYGkc3TBQFzMRyfpQkIbjUnYg,600
-appbuilder/core/components/gbi/nl2sql/component.py,sha256=Q4EZMtnO535BT1fS2oBnLOAkjU_g_5Bm--25BM-tSL8,6531
+appbuilder/core/components/gbi/nl2sql/component.py,sha256=UT92Dtb2JzN3Sxf-mqlkVGHd9koiS4iKaxXYxaYXWl4,6538
 appbuilder/core/components/gbi/select_table/__init__.py,sha256=tNwyx0QLD9mxCy3gnvnYGkc3TBQFzMRyfpQkIbjUnYg,600
-appbuilder/core/components/gbi/select_table/component.py,sha256=_tdOrU5gxv4OEKNdlBb5PkVNi5hhT87cj3YUl8ZcIb0,6319
+appbuilder/core/components/gbi/select_table/component.py,sha256=H5dUfuQQ0Pcc26TWhxiJPhn16sVrQQIWNfAeUyk9OxA,6356
 appbuilder/core/components/general_ocr/__init__.py,sha256=tNwyx0QLD9mxCy3gnvnYGkc3TBQFzMRyfpQkIbjUnYg,600
-appbuilder/core/components/general_ocr/component.py,sha256=pw5U4dHQ5taij_hz9AI4LLfYlRTrDxP0ZEY_LPn0WvY,7643
+appbuilder/core/components/general_ocr/component.py,sha256=zbtw1LjI0V6egpzWPZaAfhOZClrb3crCSpq9oFXwYJ4,7783
 appbuilder/core/components/general_ocr/model.py,sha256=B6Sw37ob-Z2LQDKTqNuoTX1lYEb9zqCFIqLqalIINQ0,8077
 appbuilder/core/components/handwrite_ocr/__init__.py,sha256=tNwyx0QLD9mxCy3gnvnYGkc3TBQFzMRyfpQkIbjUnYg,600
-appbuilder/core/components/handwrite_ocr/component.py,sha256=UJ2gZCTPNG_4xCwzUOvdawA6fV7TIGeyf_m5xqx9et0,7265
+appbuilder/core/components/handwrite_ocr/component.py,sha256=rGklKiLVO2FAbzAG7LuQgUwmBeWVXyzsG3M6qvRoT8E,7309
 appbuilder/core/components/handwrite_ocr/model.py,sha256=GwUtJwaXHaSNR20ylC9inR_O2SijmsKA1Dr1ai_j178,7388
 appbuilder/core/components/image_understand/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
-appbuilder/core/components/image_understand/component.py,sha256=2_opa8Ml9HUQQ_HnKo_sSf__fx-CBOvT-XXXfHiXHZw,9533
+appbuilder/core/components/image_understand/component.py,sha256=VGzTxuOi1E3cZLcUfVsXZxCmkBW_BqatWqWsCfsWW5o,9667
 appbuilder/core/components/image_understand/model.py,sha256=ps4ZDaMhPk8T3kNeMnMf0J8Ox4pR7sOwOqx7uZfq-LU,5610
 appbuilder/core/components/landmark_recognize/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
-appbuilder/core/components/landmark_recognize/component.py,sha256=gcw67xQm7-fTOwSy3PNpWrCgW0gRnJ4dzVIxyNXcWus,4566
+appbuilder/core/components/landmark_recognize/component.py,sha256=MeP_eR2JTjtbvI0tPk2HE4g2xpbcQxTXQ17M1rWcF74,4588
 appbuilder/core/components/landmark_recognize/model.py,sha256=6WcINDicZhgkpDp21RMeLBIWEFO-eH4lP5hGns6IgFc,2205
 appbuilder/core/components/llms/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
-appbuilder/core/components/llms/base.py,sha256=VtE3ilfqLAwq07dDeuvNjsmnGiwkgmJnnV9VUsoMzvI,16675
+appbuilder/core/components/llms/base.py,sha256=7Bz8rgjPVF5F_Ihor20ZZ1VRHU3itbMhfhNP4e8Zjtk,16795
 appbuilder/core/components/llms/dialog_summary/__init__.py,sha256=w2-4bFrsF1Elz45EDwDMcJKW_W6w-EYOQWbr2rcszYo,56
 appbuilder/core/components/llms/dialog_summary/component.py,sha256=i6qCkZDlXwNCplAqaCCZF-J4WXnfZl-JQnTIch2No0M,4097
 appbuilder/core/components/llms/is_complex_query/__init__.py,sha256=WFwToPBq1ldje2muZ9CfF7pV2dYDU4wpNGdhKz6UUjM,39
 appbuilder/core/components/llms/is_complex_query/component.py,sha256=4Zob1O6BUC-8cVSYeePgzvo_wJxWmeQS7-6d82qOS7w,4102
 appbuilder/core/components/llms/mrc/__init__.py,sha256=qDQFaaL65rsJdksntYIzgQ6FvzHbl4K4bTq7iR6v7aU,28
 appbuilder/core/components/llms/mrc/component.py,sha256=fiAyBuC7LV2Z0uHKifWU-zOid7V7Bj5yPaRmXraDwUo,9683
 appbuilder/core/components/llms/nl2pandas/__init__.py,sha256=uyH2vESXyNVKtyMZfs6s35mV5r6042eIFj5MY8Tj18I,62
@@ -86,158 +88,176 @@
 appbuilder/core/components/llms/playground/__init__.py,sha256=Petrc2Q_xbjAPJd9u01AO_BMQ0v3bOJ_siJc46qaapo,54
 appbuilder/core/components/llms/playground/component.py,sha256=5hrz0lA_pYjyapyh3IlJk-Ol-uJt8TpNq61dTy9wCWY,5436
 appbuilder/core/components/llms/qa_pair_mining/__init__.py,sha256=tspbTFD63v5cyH_E58zl81TliVs-oNY04FA8VJL74X4,37
 appbuilder/core/components/llms/qa_pair_mining/component.py,sha256=BO-Th7RsC-0Z5ihcDi6XzAQj5odfDFKPoLxeJ9Yg1mw,4196
 appbuilder/core/components/llms/query_decomposition/__init__.py,sha256=0PFujlgLkvlVTxPD4FWmc8tUZzwQZM2yslHelr-CdNw,43
 appbuilder/core/components/llms/query_decomposition/component.py,sha256=cjqk-NJGUEFkn-awIDJzsZu4RH8sh7NRpo5EmkmP98E,4113
 appbuilder/core/components/llms/query_rewrite/__init__.py,sha256=yDT1g8j9fOC-SBqE1PwwEZCd7N0NyyqXWo6-QsNG2Do,56
-appbuilder/core/components/llms/query_rewrite/component.py,sha256=mGvCz6Xka0od8WFhlhXVNROz-B0BcxaicnbwYOMUD-Q,7062
+appbuilder/core/components/llms/query_rewrite/component.py,sha256=5Hx8jWTntnWN0O4Wp_JeOfOPXQrV2k3ebiPpqwhWQA8,7046
 appbuilder/core/components/llms/similar_question/__init__.py,sha256=QqtAJdMlTrzs4ZJj3k87riBVxtMqqfcCbDahPxbSw8s,40
 appbuilder/core/components/llms/similar_question/component.py,sha256=NV4a9UXpXp5mxrbPGutEUMwOCAkqNkeSxDCGpEPt4aM,5104
 appbuilder/core/components/llms/style_rewrite/__init__.py,sha256=5ifJEjfD8I8-hRhjzmZknXS7CjYS1KDqUB1M4wBclLU,55
 appbuilder/core/components/llms/style_rewrite/component.py,sha256=Q_EeGAzOtXVWFG0tEbDOsKKeyfQCsfUe8DanXNpPOXE,6949
 appbuilder/core/components/llms/style_writing/__init__.py,sha256=_aROSOtrPw3ErJZlMkHGNd9tx94gpH31oVU-bUwQ7V4,622
 appbuilder/core/components/llms/style_writing/component.py,sha256=MLwoBgL6BJcmpmkIKJVlVU46RTdISeF-4bl_XLJ_Rlo,8355
 appbuilder/core/components/llms/tag_extraction/__init__.py,sha256=2Yi46pnbGv5b69O0gII0S0AawtnrBpHSG_XN1DWIn2w,37
 appbuilder/core/components/llms/tag_extraction/component.py,sha256=N7dOgQEky4qen1NQSyP2YGj2j9D9iFY53MbkU7bs8Yo,4195
 appbuilder/core/components/matching/__init__.py,sha256=bmQ-A27Au1AKTt5VbKS6KqNfgB4Fgx8SXSdz_8ONblc,648
 appbuilder/core/components/matching/base.py,sha256=hrhO8UQBPowUAowKslp-sriTrSyiO7lbIYH19qbGAbs,1517
 appbuilder/core/components/matching/component.py,sha256=PN0H8W3YAFKPFBHmrjQSAvs9XuND_KJAV4rVRo2X6x4,4561
 appbuilder/core/components/mix_card_ocr/__init__.py,sha256=tNwyx0QLD9mxCy3gnvnYGkc3TBQFzMRyfpQkIbjUnYg,600
-appbuilder/core/components/mix_card_ocr/component.py,sha256=Jn9inoLzo1_uu2GPhQbUec6OYA0BFpxjibWUlwtcfuo,8230
+appbuilder/core/components/mix_card_ocr/component.py,sha256=a8JJ3tdiRLBB0H6dQBKsqEjh1CnP8cPQJIllj0gK86E,8274
 appbuilder/core/components/mix_card_ocr/model.py,sha256=Y4VWKiWeKhT61AsWdXSY54Y4lzz-W_neSC8ckS6Lg6w,7264
 appbuilder/core/components/object_recognize/__init__.py,sha256=i9w-eotShRkEruO_ETVwA6yzpkKMEplF7npxGxB9CeI,478
-appbuilder/core/components/object_recognize/component.py,sha256=5p1_y7RCF11Tg9LEtE2rULRkAK_2T0ElWfmGwM4tB4g,7847
+appbuilder/core/components/object_recognize/component.py,sha256=1LP-KIjMInSniH1wb00H5ua7zhcNAMgtME9w4oIAqgo,7913
 appbuilder/core/components/object_recognize/model.py,sha256=yD5k1wEJ_0P3zGWNGgb1-s4gtp_2DyLzXUWahl0Ht7U,4328
 appbuilder/core/components/plant_recognize/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
-appbuilder/core/components/plant_recognize/component.py,sha256=Pnh4GlbpWRKPicMMnamD0_m107agC6WkKoozjyFuTrE,8262
+appbuilder/core/components/plant_recognize/component.py,sha256=jgTyEuBiLpxVL_8yXUP8Q5EIf-Uup3HU4DItVYwpHUs,8284
 appbuilder/core/components/plant_recognize/model.py,sha256=GdUGSG_HfE-MEb09Kb9N_DARZXOfjKClCMvNuJ9W4Ns,3577
 appbuilder/core/components/qrcode_ocr/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-appbuilder/core/components/qrcode_ocr/component.py,sha256=4j1QwX3iFiJajaB8-mio9RTB41iV29cun9ex_07dARQ,8039
+appbuilder/core/components/qrcode_ocr/component.py,sha256=A0jpbqLgYTYQ3hR6c6E_5Hg4WyGDtVhJ26t6qb1y_yU,8260
 appbuilder/core/components/qrcode_ocr/model.py,sha256=nTDFTRYxUH4LzAiW5gc0g534lk5XsusivxI0sOBkMh4,5119
 appbuilder/core/components/rag_with_baidu_search/__init__.py,sha256=_sNSMKBMNL_YvFPEDYcYhJAVFy3Fo9GjGsI0vHrzSEk,642
-appbuilder/core/components/rag_with_baidu_search/component.py,sha256=EIQBUo5gLY1HonQAuncaa62lungespGUUL2YjV31scU,8605
+appbuilder/core/components/rag_with_baidu_search/component.py,sha256=ydgcOXdwj6_ZsfgC6KK1vqwdqDfMsuPfcvtKrT-SP8U,8623
 appbuilder/core/components/retriever/__init__.py,sha256=pcMD1VLhNfizaOU01RqUyGziyU-e-Y-s_uO1gUDZlLo,792
 appbuilder/core/components/retriever/baidu_vdb/__init__.py,sha256=9JJK7RdkGF-Ht4UMeysaLzO9Yn_QT_Qx3cznECbR_7w,751
-appbuilder/core/components/retriever/baidu_vdb/baiduvdb_retriever.py,sha256=-u8JVvwA0lnYHeptquxuejkZiiqNKgbcV4BCq-q7DpU,17326
+appbuilder/core/components/retriever/baidu_vdb/baiduvdb_retriever.py,sha256=FHPKdn4pwxuHLWPhju-WKy1i2LLnKOhZpbetcxKvCnY,17349
 appbuilder/core/components/retriever/bes/__init__.py,sha256=I6RZO7vaxfj82GugLyc463ZdPuyrGUll8M79vWuNq_M,688
 appbuilder/core/components/retriever/bes/bes_retriever.py,sha256=Kwo8mIBHpi1o2d2NcDaWDxgTYU_KIDq4MihglmHKKSM,9075
 appbuilder/core/components/table_ocr/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-appbuilder/core/components/table_ocr/component.py,sha256=q95i2bDUiYfbNJ7wwht0svw34vCH9J7Mq9aivp6oTZI,9099
+appbuilder/core/components/table_ocr/component.py,sha256=6WVTiQmHWfXKDeXaNR3HbhFZLyhgaiOEunAXocse-Zw,9211
 appbuilder/core/components/table_ocr/model.py,sha256=1ecUvtJIlmAk2H4PzPpAPEsXR_WkEVk0y2UJj18ZLv4,7610
 appbuilder/core/components/text_to_image/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
-appbuilder/core/components/text_to_image/component.py,sha256=5rgHo2nnum6jJNDtzHHp2nd1N2MYOg6N5r2N8Z_gQJY,10260
+appbuilder/core/components/text_to_image/component.py,sha256=heqpdrnQxo3pgSp3zFKBw5pFLjyiu3TrXjvdaqH58D0,10250
 appbuilder/core/components/text_to_image/model.py,sha256=9vZ0hHJLMuBfl-NhkROJVTgXRxJvULKmrjoASItcqaY,9444
 appbuilder/core/components/translate/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
 appbuilder/core/components/translate/component.py,sha256=z7bm4gr_IWF4XdcTX8halCf2k0xEXcCSynhunSgLvuU,8025
 appbuilder/core/components/translate/model.py,sha256=nbhtb6b5NBJvh0LL2pCX5sOv-mb6BGIskiuPJ_xaZHg,3352
 appbuilder/core/components/tts/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
-appbuilder/core/components/tts/component.py,sha256=WCc-WaUvT9Rn5nRlFSB4He6KWHlXAFSiBfb-VD4K8a0,9907
-appbuilder/core/components/tts/model.py,sha256=ODL3mzqD_ABZHe8wSERvepetU9c4ksC9mQsRJ7XJk4E,5379
+appbuilder/core/components/tts/component.py,sha256=OkN1foLUjzJ3AxVe8U1weY73WewVGktv5VoY7kg-S1I,10106
+appbuilder/core/components/tts/model.py,sha256=W15HW97-1KDUWJkvJUuUAL5ECt1bwWS8jEwAMHGHysg,5577
 appbuilder/core/console/__init__.py,sha256=drfe1pnDwM0A7ZLNdJcmiwR6ZCyClnCuzqBDvkwTE08,652
-appbuilder/core/console/base.py,sha256=5Y9UbsqYbUckb_Fj6rARjbjWkLKu2nlyMEuc1r87h-4,6229
+appbuilder/core/console/base.py,sha256=XqGFWzel0kTmIRnijWsluk5yPkOJs9vSaL6QSytQGhA,5075
 appbuilder/core/console/appbuilder_client/__init__.py,sha256=dQT0H1zojQbFtnSTRBm_P9o1hNmAiH1trT2LTchbN2E,600
-appbuilder/core/console/appbuilder_client/appbuilder_client.py,sha256=57enrFP1InYaWhyGh2LfcHCTSxtKjfdpUzqMPl7rvOI,8540
+appbuilder/core/console/appbuilder_client/appbuilder_client.py,sha256=4K-KB0nB0JYDp9thRH_R6iv8ttYq1J9fQRLA5yY6SAc,8736
 appbuilder/core/console/appbuilder_client/data_class.py,sha256=3iwlngq9eM0ZitLzGI_IoJYcWjlx1PpcAmSvG542Ql4,6281
 appbuilder/core/console/dataset/__init__.py,sha256=3IS2VxqdRYnHy0cvJplS7g7cEYenoOhg_Ao1npJWjUg,629
-appbuilder/core/console/dataset/dataset.py,sha256=-9rTuqWhxCuORM2ruikikPupX8y0to4p4Qmz2bMf9hQ,8993
+appbuilder/core/console/dataset/dataset.py,sha256=K9WnynHAAxP3VhxYa6-1scRuCzQr8vLWh1y0cLRS6Q0,9009
 appbuilder/core/console/dataset/model.py,sha256=uCeLFG63fIQFsa1UcnP_QMAtu51wRarh1339SuxavqI,561
 appbuilder/core/console/rag/__init__.py,sha256=BzKIHWcA03-b3ontK5WuzwRlEKX6jyd0IBLSmgy9zlA,621
 appbuilder/core/console/rag/rag.py,sha256=gqFtF9-w5ZfjXWLjTBw8SyhS39z3Umrkxyn0G09xJIM,2622
 appbuilder/tests/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
 appbuilder/tests/parallel_ut_run.py,sha256=uSgsGKiq_sE_gOuInDIzBTBemYov8OxDzA-hnGrRv6A,14563
 appbuilder/tests/pytest_config.py,sha256=VeVUWLH3AwPEsGNn0qSCuKgNQ1IN262oEw0CusXwcDY,1318
 appbuilder/tests/pytest_utils.py,sha256=FlNos-Dz7mKPV28Z7u8bcRhykPuG2Jt-qYs1rdWsQTA,1079
 appbuilder/tests/sed_str.py,sha256=THMKY5baitY2vbYOkrp_ESc0-L_qLbavXOrf97Q4Me0,1788
-appbuilder/tests/test_agent.py,sha256=QVIa68NSLRrTlVfojzScWgnVGP73Yc8qih69iY4qATg,1919
+appbuilder/tests/test_agent.py,sha256=ztANgFHiUSEPtBiIgqbaCtnBPKj8wcFdTDCFAru1XVw,5158
 appbuilder/tests/test_animal_recognize.py,sha256=2sHPAdglj7Z0sQb-n6yoIDmd2XeUb4gLiY8cqzzuI1k,5362
-appbuilder/tests/test_appbuilder_client.py,sha256=kS8hBYWIGs7__7buY69tSa_P20GuyGMQM6j_hW2IscI,2236
+appbuilder/tests/test_appbuilder_client.py,sha256=bN-EE8GiQR6-r7DUQxxN9rJgcrflAWuDE8_fIFqbzk4,1899
 appbuilder/tests/test_appbuilder_core_components_retriever.py,sha256=EZ9TDwZ4BLcYjal5KbPoEIgkrxbEn4JaW_Kl0AErvaM,1823
 appbuilder/tests/test_asr.py,sha256=sIP7Vcqy3a7OuD2Flt2LcNW2-AWXIcfG6ao8ch7Oljw,4122
 appbuilder/tests/test_assistant_basic_import.py,sha256=Zjm8PQplM7QBBMSlT3UOEyZVPSeH2eZXohY8Li2qMtA,2270
-appbuilder/tests/test_assistant_class_assistans.py,sha256=rDKpw_Se3o5QD2YsS3Gh7RvcwFR_QhhXhCrv43BLO-s,1955
-appbuilder/tests/test_assistant_class_messages.py,sha256=HEIzijxjH31KlahEmOVCgTyMn3fkdenl9fEKTIdiccs,1226
-appbuilder/tests/test_assistant_class_runs.py,sha256=iQktxdQFySjXBRYHAr_GkmY3zX68fCxjw0OFn-xvd1o,2247
-appbuilder/tests/test_assistant_class_threads.py,sha256=X2iQTdkRYI42aZMd8IeNJgqck4bYiPq1azSyF7J3m-g,1164
+appbuilder/tests/test_assistant_class_assistans.py,sha256=__lfgKY-pBU1F8BQuaWLOEKNCmbmdnJkTrBgKNH6ow0,6095
+appbuilder/tests/test_assistant_class_files.py,sha256=ISiCyDto2BDKIaYrQfQG6VHfvRV5JjNO4PahTmCb8i0,3560
+appbuilder/tests/test_assistant_class_messages.py,sha256=gxPlQWxcGVDzNDXm7Jq_q119qJ9PRNql_GMPPkTusAQ,2673
+appbuilder/tests/test_assistant_class_runs.py,sha256=IYGYR4thN9XeGhbl9Ck8UKZqTAs2JqGlSglQ_iWiaP4,2434
+appbuilder/tests/test_assistant_class_runs_v2.py,sha256=f7WK8VS5aE_vXGZ6yHkKAWRKUFtNdgHybewbv-hG3pI,2090
+appbuilder/tests/test_assistant_class_threads.py,sha256=rpM8mJyeqWE-GrvDVlnUu7thrvP8zlbq--PjW7xzo3Y,2425
 appbuilder/tests/test_assistant_e2e_funccall.py,sha256=eH4gJ1RtQbt93c5FVbT5mf22hHKO0Yy_phvncr3FiCs,3142
 appbuilder/tests/test_assistant_e2e_funccall_component.py,sha256=-BIj8DNEJ1Zs5RybIuiHJy3H82rtf7ux3dm1gRf9r80,3000
 appbuilder/tests/test_assistant_e2e_run.py,sha256=YCF8sE9DAZP7bWfWYFSE-DayWP-i72TWp8Y-PVhGKGw,1110
 appbuilder/tests/test_assistant_e2e_stream_cancel.py,sha256=Dddv3Bpx294iPBGhlIxS2LIFI9n7SBDRrYlT1WKpgOM,2483
+appbuilder/tests/test_assistant_e2e_stream_event_handler.py,sha256=AJPPlYryEzrlemA0qCdWWmLefMFWMS8XivQHDR49TBw,3067
+appbuilder/tests/test_assistant_e2e_stream_event_handler_v2.py,sha256=i2iNrR_tICrybuQ0pI59sMiFwfDxvtPx5fJS4nksJ8c,3332
 appbuilder/tests/test_assistant_e2e_stream_funccall.py,sha256=BIs6OzeY5k0NABZuh1qDr4PqkdVn3Klsmc5vFassb6c,2892
 appbuilder/tests/test_assistant_e2e_stream_run.py,sha256=7xGmT35qsEVxdihjz5p0jbdOCkEzUILEnZFL4_cMrNQ,1409
+appbuilder/tests/test_assistant_qa_runs_steps_list.py,sha256=ndH_JnQfqsBsQ5mHSGXUVfCFwY-e8x7LR8Soy1EhERY,8256
+appbuilder/tests/test_assistant_qa_runs_steps_query.py,sha256=jhQfoSlQYAR8h8VUJY-apWKMjR44yLK9zbtyYekaobI,10520
 appbuilder/tests/test_bes_retriever.py,sha256=ZP3eenQc6_S_ZkwRvEQlXfVQeTiB9ZvOLJjAeCmJWUc,3969
-appbuilder/tests/test_console_dataset.py,sha256=nyEIQrGCwhGU0OOHo2-ZbXKPHomrJ1ZMwUxF3rGuUcA,1779
-appbuilder/tests/test_console_rag.py,sha256=AKip3QEni-fDMCTdcY7ZYwupL4WGDoZTUhdWaNURNo8,1080
-appbuilder/tests/test_core_console_base.py,sha256=Y3kfEAtN7MFYxUf87MCbgWzM2GkSvwbukLPydlJV3tA,1520
+appbuilder/tests/test_console_dataset.py,sha256=GRb4otvNdz0JlmKp_bszO-nDPpukJMirOFlfAx-jUeM,2457
+appbuilder/tests/test_console_rag.py,sha256=Tl3kxCByd-u2WPynPmfs40e2kVTxxoB5avU3ciLLnnk,1239
+appbuilder/tests/test_core_agent.py,sha256=5TtawM8GrMTZtdeZPQoU12s-5uS_9T2v1ZOGqjJ6jFw,2643
+appbuilder/tests/test_core_client.py,sha256=pSJvjpw14dPIq63DGEYeub75yY9VnJzDOETY9RkXYYs,4086
+appbuilder/tests/test_core_components.py,sha256=_esK3la_oli7NiaeyAZtYxOym_GJfPNJQYRNuKutGjA,4258
+appbuilder/tests/test_core_components_baidu_vdb_retriever.py,sha256=Sfn_ufv4EFRU6qEVfKE2A9got25FMHNgB2fWqR8nrGE,2097
+appbuilder/tests/test_core_components_doc.py,sha256=tFNMG0tWcMlcz9bD_lEilJOkZA_ONQ7x5KCxxkoF_-8,3955
+appbuilder/tests/test_core_components_embedding.py,sha256=Ty_agUkmG_QmeIW4dw8WLWjn6S6lMVS0ygYclBDHuNY,2006
+appbuilder/tests/test_core_components_table.py,sha256=hdi8GAHcgaT-1R4ldsw6uyNRXcGHtCaDqRPjHqcCjk4,2847
+appbuilder/tests/test_core_components_tts.py,sha256=0Qlr-6CeKJccWbKkQwYTSba7rgoE5ymPCIJIvBC95MQ,3336
+appbuilder/tests/test_core_console_base.py,sha256=VG_oCs4MnbA0QDif2nZXbtlsShTHxrHN0J5aUBrk-XA,4673
 appbuilder/tests/test_core_user_session.py,sha256=ngdVbAdNsxc89YAdcxj51nZpytkklYfdBOAg8ZSph3o,3213
 appbuilder/tests/test_core_utils.py,sha256=09nNxdaSs7vPlQnBgW8gwow9gZe9ZM1B9wituQK33ac,2401
 appbuilder/tests/test_dialog_summary.py,sha256=Je_jcelQFIGJcsoGQ3YSJDNOMn29eKEv6HCZOQiO9ds,2439
 appbuilder/tests/test_dish_recognize.py,sha256=lpOo5TwJ4wutgp3eybBehV2SzGnKRpOI1JRJSuK9dFE,3297
 appbuilder/tests/test_doc_crop_enhance.py,sha256=ZAnbhhCZ4rCu2EXp7bNcEUDm58n5C0Re5Qgckd9c2jw,4269
-appbuilder/tests/test_doc_format_converter.py,sha256=eYv6TCSweuhFsR0Dot8ax0_NDlPp2wQDSFzMnf5KHRs,1201
+appbuilder/tests/test_doc_format_converter.py,sha256=tnAD2mpbcM-gWpozIoN_bvT3W9_ziqClKlQUSefSVaE,1341
 appbuilder/tests/test_doc_parser.py,sha256=CrPYbsejKeXY0pCvk3BiAkzoEMjXtAVN-2WoLZgyMic,3092
 appbuilder/tests/test_doc_splitter.py,sha256=BYApVekI-sDfdZx-h2NMssVbuUj_OwHf9dxveYYN8WQ,3658
 appbuilder/tests/test_embedding.py,sha256=zQMsrySPz-yAA72SgzPzQyMttZUDomJnUNjH9uajvcY,1615
 appbuilder/tests/test_extract_table.py,sha256=VqnHGJ8bZOdEB2vAEEpXkM0zllJlRUpls5for4QUekM,2445
-appbuilder/tests/test_gbi_nl2sql.py,sha256=-IL84yXlp4VvGsD6wHEavznBMwJLJ8wyzrzuv_8yq0o,3498
-appbuilder/tests/test_gbi_select_table.py,sha256=t_7ohbF6utZ1spFV27C1fPF3PpZawpyd4TGZD8ftnMA,4887
+appbuilder/tests/test_gbi_nl2sql.py,sha256=2Bx0go0_1y6mZx8GM-UGMg7JIcGcXKQNbRYe006Fxfs,3890
+appbuilder/tests/test_gbi_select_table.py,sha256=wINlwjkYenlazwTzRqqcyRCYgr_xaiLcrnH-3Nvv8Cs,5569
 appbuilder/tests/test_general_ocr.py,sha256=32OCzqBxr5kSEjbF_qd4V_tYJk1QZ13oOZ84m9MDckw,4822
 appbuilder/tests/test_get_model_list.py,sha256=Kc9RbHSm47J5f0gteaD-EoKsMoj-JfZTyZhIpmS9nVI,2302
-appbuilder/tests/test_handwrite_ocr.py,sha256=GC0CX_mluRjV3E_g7VEGM3thpxQtLrPrALWkA0uid3E,2250
-appbuilder/tests/test_image_understand.py,sha256=GiqIQ5XY8oRgEdAQ9n52aKEccmqQug9AkgSpmLHbPf8,3923
+appbuilder/tests/test_handwrite_ocr.py,sha256=_MCT5VSpLNHmfizJbMRb-i6MWPLBwfODxIREabUS8D8,2879
+appbuilder/tests/test_image_understand.py,sha256=_gel34nH21k2xqnKgIzDzE2SbqyzHHPtgru-W7gXD84,4426
 appbuilder/tests/test_is_complex_query.py,sha256=0O7gDMUdo--TV-PUdjBP9VAZfRzYyIPHZ38rL6JvvNE,2223
 appbuilder/tests/test_landmark_recognize.py,sha256=vAj8-OEXF3WdG_-IaZtvJ2OWPqijqTzyhhxknId8ueI,2836
 appbuilder/tests/test_matching.py,sha256=ZpsF-ThhzQbY5BqEGLqtETAsfwHLQuhXUQAnv6ramuI,2185
-appbuilder/tests/test_message.py,sha256=DX87X9d2qmLNgizFhxhHAhVXdJBAUmkMQHlQ9qf2WSk,813
-appbuilder/tests/test_mix_card_ocr.py,sha256=yfwoXi0JJrFmNKkW6BMhJM3CCmboqgQjefG9a2LT5vo,2246
+appbuilder/tests/test_message.py,sha256=1MFdPt-4j7rZOxzSOTdCsJmlmKwZDnKPVp8sfAif0cE,1133
+appbuilder/tests/test_mix_card_ocr.py,sha256=AnVwQfmSVk0ABQqobzuL5UaMc5SVVHxRveaSzQh9t20,3350
 appbuilder/tests/test_mrc.py,sha256=_FIvrVCz8EdRX4BriOmrpFEJe3i0jaFM5TyDc0wFDDE,4351
 appbuilder/tests/test_nl2pandas.py,sha256=TD0MOSfxKyQzbDiZehRlzC9AcQZ8J8_Iivkaz37kSDk,2037
-appbuilder/tests/test_object_recognize.py,sha256=FT1buxQ03cjWdXn6kco2ZJPQh2VyHMXJjh6-xuAyD18,4898
+appbuilder/tests/test_object_recognize.py,sha256=hqOG_L8NzPFiO1yDpZp-LZr-ZItTPi8I8Fe8HVEI_Ik,5128
 appbuilder/tests/test_oral_query_generation.py,sha256=Ov_ox2zXMCmvfwtzwUEOfMfjPLbkq-s0OrSIBT1r9-E,2451
 appbuilder/tests/test_plant_recognize.py,sha256=JZCW-Qe21dBut1wpz6lzl6BS6CY2XV9M7BEGEisOR-c,3416
 appbuilder/tests/test_playground.py,sha256=xqVQ-x_YHN3C6uxtnitMt8PBDBLyTUUfb-iJYaharD8,2288
 appbuilder/tests/test_qa_aicape_animal_rec.py,sha256=wTofy-m64D6DUZMB0vysqoDAIDKx98Kz7IerWKxP2lU,4751
 appbuilder/tests/test_qa_aicape_doc_crop_enhance.py,sha256=7e-aVC81mVjRNcjRqNA_mHuQs7Q3gY4wRs9V62tL-mY,5581
 appbuilder/tests/test_qa_aicape_handwriting_ocr.py,sha256=HuJb3cVFjni42JBqJdw46OCz49Qs2qP3rurqBJmYcMI,4549
 appbuilder/tests/test_qa_aicape_image_understand.py,sha256=TkkB1fQC7p0bhe8yjndvFlWjEUr6Ke3gxTx2Xvqjx2Y,5270
 appbuilder/tests/test_qa_aicape_mixcard_ocr.py,sha256=ZZMt8Uc1iUj9aR8dYIM3-FFYTMoXMoUOP2_4AYXSUzk,4435
 appbuilder/tests/test_qa_aicape_plant_rec.py,sha256=yTA17ZVng841SbZMm_77ixwIThSfcKNxleBR9TPKeu8,4489
 appbuilder/tests/test_qa_aicape_qrcode_orc.py,sha256=GPTvJNpTa6N9Thda5nThFcEwHZChTHyqYd47_FuCVXI,4985
 appbuilder/tests/test_qa_aicape_table_ocr.py,sha256=AF6NsiEG0zJel2mOEcLDpyv_nIJAzrmmDjsjrpfonsI,4560
 appbuilder/tests/test_qa_doc_parser_extract_table_from_doc.py,sha256=cFueA4erhXQtT-lLLN6RRAo-a6WopgJ0wjdv4uLalQ4,3454
 appbuilder/tests/test_qa_llm_dialog_summary.py,sha256=Uv-_9YJDfX7MuJ2ovvp1UvTOKODydHces8PnPxr-N-A,8326
-appbuilder/tests/test_qa_llm_excel2figure.py,sha256=-EUD2VxMuxgB5sW5saxVvxGz1BoOERdIaK1uhpTGac4,7461
+appbuilder/tests/test_qa_llm_excel2figure.py,sha256=4j2ULA5GxY3N88YkGTll2N49CwKkYMFX131EVy8Dv8E,8805
 appbuilder/tests/test_qa_llm_get_qianfan_model_list.py,sha256=FoFGpWDO2Y2Gj9zgIxYBhxW77231GmUtYNiq0XXVrfU,9912
 appbuilder/tests/test_qa_llm_is_complex_query.py,sha256=pdbVXLzjxRvo_rLz3xSYjD3QtXaQrrOa0emA7QOv7ww,3150
 appbuilder/tests/test_qa_llm_matching.py,sha256=CiL65SNhYpU9NczQf6PovFQQOr_M11rWYIo786YOfZc,4765
 appbuilder/tests/test_qa_llm_oral_query_generation.py,sha256=e6cqLYrGHr0iSbZOYj9SnU9_43Dqc3aZl3DWOQhCOwA,6569
-appbuilder/tests/test_qa_llm_paddle_speech_tts.py,sha256=fOMyRwODp726OOuRjo0Lv1qXyt5rGra48I15ttAicuM,4099
+appbuilder/tests/test_qa_llm_paddle_speech_tts.py,sha256=030kKSAyE-PPfeO3OOUsv9u63oxrhyWdN6Xoe2biIqY,4355
 appbuilder/tests/test_qa_llm_pandas.py,sha256=LG7YaVuc5JdtQ-L2-k6GGpUHLV0IWdFRGHoFrbu42Yg,4104
 appbuilder/tests/test_qa_llm_query_decomposition.py,sha256=D-DVEYRQ0lUyUpvS9KeIPF6-IMmTrL2mDuHGR5OdfoM,4193
 appbuilder/tests/test_qa_llm_style_rewrite.py,sha256=uXbxCz9YHEoiQPzMHOVn8je59mBT0f7P3ZISVv6iNUw,3536
 appbuilder/tests/test_qa_pair_mining.py,sha256=AMSoC1BVGJxzbOCRwgZd2IsBpu8Sdvey4qfSgBvSNAE,2245
-appbuilder/tests/test_qrcode_ocr.py,sha256=s8EP0uGbEpckJBcIL8snF7nnB0aHGv0uf59UI6HmZyg,4184
+appbuilder/tests/test_qrcode_ocr.py,sha256=UmeOU18dzyM-6wzekq9fd-oMFgAX9bWs9rXqSk2BQrg,5589
 appbuilder/tests/test_query_decomposition.py,sha256=tUgB4_WlCHNvMFaKCrZs-537Jrz6VwQMIIhZ_q-f4Hg,2231
-appbuilder/tests/test_query_rewrite.py,sha256=W4ehkiNdjhvygI-YbDkrMLkXqpwcQcpJ-xZ8EgNNwsE,2925
+appbuilder/tests/test_query_rewrite.py,sha256=HeZ6YNYNnn0FkwHHxC-gCl2s7sfjWF_5rJ0fFLWT78Q,3445
 appbuilder/tests/test_rag_baidu_search.py,sha256=Sk1XUal2ZwwhMF3g1h9EF7PpFusE1AexruYYDuVVpFo,2190
-appbuilder/tests/test_similar_question.py,sha256=ynK7EzdQsbP7TacY_Q4nu4qRmVRMJN7aXJpGCPLZx48,2933
-appbuilder/tests/test_style_rewrite.py,sha256=u5QgXkIlKJSRFR9GGh_i_2IcCokg2dABoUs01AdB1Bw,3519
-appbuilder/tests/test_style_writing.py,sha256=ISovod6YpOT1eZhQq74L64ZhH_Jlk-h-4h0eJ9-oy4k,3927
-appbuilder/tests/test_table_ocr.py,sha256=TE1-rFt_MNg4JWcdhnC6ceGrqid6Lw0XhMFfhReUviM,4100
+appbuilder/tests/test_rag_with_baidu_search_component.py,sha256=CygRI9m_vZoJo3ObZGRZMP3OIxmriS5AKtd6LXN7HQE,2078
+appbuilder/tests/test_similar_question.py,sha256=P50FfTciwB8dzspx8t6dAh8V5BfzfhGGLaLIMzc4XsI,2051
+appbuilder/tests/test_style_rewrite.py,sha256=XC4gJz5MN_-V_uchAH-DjOJCXLNQGAAb-W4Q0UhiUXk,2338
+appbuilder/tests/test_style_writing.py,sha256=bbUHnQFoeGMd2N5xFDz31WeddfczSRNJzUraOAYhWGw,2555
+appbuilder/tests/test_table_ocr.py,sha256=fE98NUX-73AnN6GdTzEsXD5ryJxb-FDqDeQvG5DhtJc,5043
 appbuilder/tests/test_tag_extraction.py,sha256=4IxIahlHPsWIiNb0yNbZ8yXg0wiQtSc4LwlCzxeBmSk,2500
-appbuilder/tests/test_text_to_image.py,sha256=1tIKOoALdH-gCrz46OkK5jFZPptLhgO8fyF7JeV_QgE,2803
+appbuilder/tests/test_text_to_image.py,sha256=P7Tl4ivbq_UQokZjbyKvzOUMjEnXVjG5iW5jUiGotDM,2858
 appbuilder/tests/test_translate.py,sha256=UQInM0I7vinbyn4KDGpKnbNHdc7jsSOr3qipH9h-5HQ,1471
-appbuilder/tests/test_tts.py,sha256=sN4MGtctFdGXLX-f4Y3a7VwXahQYgPv_Hb2LLnM0aVM,2839
+appbuilder/tests/test_tts.py,sha256=GHoJYknzsPZ9LMVgtqmYxGXzlEGfkreGk0PcyE_vCFc,3051
+appbuilder/tests/test_utils.py,sha256=7tBBcwAgA_GvMLGJwmGmbhhXNhLns-sXNMq33yQk-wM,2781
+appbuilder/tests/test_utils_logger.py,sha256=z4I09WwRmaAf5zAu0z9s-iXlfXN4bJ6JoqkqgxuzoTQ,2078
 appbuilder/tests/test_utils_logging_util.py,sha256=Ja1JNyTUrX7j3_DNg8IwfzcLtrlpsuNrWBfIp204G48,1503
-appbuilder/tests/test_vdb_retriever.py,sha256=eien7T7rAeru5kLJ-b0ulALkQrHA78yUo0UDtPv1u7Q,4344
+appbuilder/tests/test_vdb_retriever.py,sha256=vG4Zm4Wm5YS2rVFB2IliSjJeEOnIz2mAlRqEtTgWUoU,3941
 appbuilder/utils/__init__.py,sha256=ckWebdxibz6DjTX7Mid__DhoEfBQtPwMAE8T4HmzjPI,602
+appbuilder/utils/chainlit.md,sha256=i0ciJvnHNLfkA8r8lvaZMyYT57gFi5Iqi2AtOL9yvsk,1675
 appbuilder/utils/collector.py,sha256=4phMuHNT3pTTdXn7MRXFuS3zF_6kGjUrBtorqH8j7HU,2974
 appbuilder/utils/func_utils.py,sha256=J3BcuDBkw-J3q9tiBfsIzNHJdEkW8yWVkSt7WgAsD6c,1229
 appbuilder/utils/logger_util.py,sha256=uXMs8DQYwJJkobJMv4muBiuJwXN-6XayCG2xvRFQg_U,4572
 appbuilder/utils/model_util.py,sha256=DennHZ6qnfILR2w3AykVtdZnMaawPnStkEhGwPivfg4,10845
 appbuilder/utils/sse_util.py,sha256=QeiOZTt6IloBHsFk200OLIh7UYG6VdkqrhczFIAxb6M,6057
-appbuilder_sdk-0.7.0.dist-info/AUTHORS.md,sha256=UkbOE86Y8__8jXwlcJQxMq39TggOYrFg_tjkVgO5eDg,61
-appbuilder_sdk-0.7.0.dist-info/LICENSE,sha256=VEHBKN6FhnU4K5uNycc7935l-atBYc_GbeT1BcDc-gs,11366
-appbuilder_sdk-0.7.0.dist-info/METADATA,sha256=H1sgC2-JqmJe0YPl2UJp9SVpknB2ya9LBA-pMeyfZbM,978
-appbuilder_sdk-0.7.0.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-appbuilder_sdk-0.7.0.dist-info/top_level.txt,sha256=RbdODyvMjVmYWWTFCTkxDg0yMBpXvfD_HMA6wrBmsUU,11
-appbuilder_sdk-0.7.0.dist-info/RECORD,,
+appbuilder_sdk-0.7.1.dist-info/AUTHORS.md,sha256=UkbOE86Y8__8jXwlcJQxMq39TggOYrFg_tjkVgO5eDg,61
+appbuilder_sdk-0.7.1.dist-info/LICENSE,sha256=VEHBKN6FhnU4K5uNycc7935l-atBYc_GbeT1BcDc-gs,11366
+appbuilder_sdk-0.7.1.dist-info/METADATA,sha256=3pm3hHTit7pPRxRvOJzAXhzyjlJIfr_QCszK70v8NT4,978
+appbuilder_sdk-0.7.1.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
+appbuilder_sdk-0.7.1.dist-info/top_level.txt,sha256=RbdODyvMjVmYWWTFCTkxDg0yMBpXvfD_HMA6wrBmsUU,11
+appbuilder_sdk-0.7.1.dist-info/RECORD,,
```

